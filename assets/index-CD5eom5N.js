var YS=e=>{throw TypeError(e)};var Ox=(e,t,n)=>t.has(e)||YS("Cannot "+n);var ve=(e,t,n)=>(Ox(e,t,"read from private field"),n?n.call(e):t.get(e)),zt=(e,t,n)=>t.has(e)?YS("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),mt=(e,t,n,r)=>(Ox(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Fr=(e,t,n)=>(Ox(e,t,"access private method"),n);var Ip=(e,t,n,r)=>({set _(s){mt(e,t,s,n)},get _(){return ve(e,t,r)}});function lk(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ck={exports:{}},$1={},uk={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qh=Symbol.for("react.element"),Tj=Symbol.for("react.portal"),kj=Symbol.for("react.fragment"),Ij=Symbol.for("react.strict_mode"),Rj=Symbol.for("react.profiler"),Mj=Symbol.for("react.provider"),_j=Symbol.for("react.context"),Oj=Symbol.for("react.forward_ref"),Pj=Symbol.for("react.suspense"),Dj=Symbol.for("react.memo"),jj=Symbol.for("react.lazy"),qS=Symbol.iterator;function Lj(e){return e===null||typeof e!="object"?null:(e=qS&&e[qS]||e["@@iterator"],typeof e=="function"?e:null)}var dk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fk=Object.assign,hk={};function Md(e,t,n){this.props=e,this.context=t,this.refs=hk,this.updater=n||dk}Md.prototype.isReactComponent={};Md.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Md.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function pk(){}pk.prototype=Md.prototype;function U2(e,t,n){this.props=e,this.context=t,this.refs=hk,this.updater=n||dk}var $2=U2.prototype=new pk;$2.constructor=U2;fk($2,Md.prototype);$2.isPureReactComponent=!0;var ZS=Array.isArray,mk=Object.prototype.hasOwnProperty,W2={current:null},gk={key:!0,ref:!0,__self:!0,__source:!0};function xk(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)mk.call(t,r)&&!gk.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Qh,type:e,key:i,ref:o,props:s,_owner:W2.current}}function Bj(e,t){return{$$typeof:Qh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function G2(e){return typeof e=="object"&&e!==null&&e.$$typeof===Qh}function Fj(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var QS=/\/+/g;function Px(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Fj(""+e.key):t.toString(36)}function I0(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Qh:case Tj:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Px(o,0):r,ZS(s)?(n="",e!=null&&(n=e.replace(QS,"$&/")+"/"),I0(s,t,n,"",function(d){return d})):s!=null&&(G2(s)&&(s=Bj(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(QS,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",ZS(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Px(i,l);o+=I0(i,t,n,c,s)}else if(c=Lj(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Px(i,l++),o+=I0(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Rp(e,t,n){if(e==null)return e;var r=[],s=0;return I0(e,r,"","",function(i){return t.call(n,i,s++)}),r}function zj(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var as={current:null},R0={transition:null},Vj={ReactCurrentDispatcher:as,ReactCurrentBatchConfig:R0,ReactCurrentOwner:W2};function yk(){throw Error("act(...) is not supported in production builds of React.")}kt.Children={map:Rp,forEach:function(e,t,n){Rp(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Rp(e,function(){t++}),t},toArray:function(e){return Rp(e,function(t){return t})||[]},only:function(e){if(!G2(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};kt.Component=Md;kt.Fragment=kj;kt.Profiler=Rj;kt.PureComponent=U2;kt.StrictMode=Ij;kt.Suspense=Pj;kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vj;kt.act=yk;kt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=fk({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=W2.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)mk.call(t,c)&&!gk.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Qh,type:e.type,key:s,ref:i,props:r,_owner:o}};kt.createContext=function(e){return e={$$typeof:_j,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Mj,_context:e},e.Consumer=e};kt.createElement=xk;kt.createFactory=function(e){var t=xk.bind(null,e);return t.type=e,t};kt.createRef=function(){return{current:null}};kt.forwardRef=function(e){return{$$typeof:Oj,render:e}};kt.isValidElement=G2;kt.lazy=function(e){return{$$typeof:jj,_payload:{_status:-1,_result:e},_init:zj}};kt.memo=function(e,t){return{$$typeof:Dj,type:e,compare:t===void 0?null:t}};kt.startTransition=function(e){var t=R0.transition;R0.transition={};try{e()}finally{R0.transition=t}};kt.unstable_act=yk;kt.useCallback=function(e,t){return as.current.useCallback(e,t)};kt.useContext=function(e){return as.current.useContext(e)};kt.useDebugValue=function(){};kt.useDeferredValue=function(e){return as.current.useDeferredValue(e)};kt.useEffect=function(e,t){return as.current.useEffect(e,t)};kt.useId=function(){return as.current.useId()};kt.useImperativeHandle=function(e,t,n){return as.current.useImperativeHandle(e,t,n)};kt.useInsertionEffect=function(e,t){return as.current.useInsertionEffect(e,t)};kt.useLayoutEffect=function(e,t){return as.current.useLayoutEffect(e,t)};kt.useMemo=function(e,t){return as.current.useMemo(e,t)};kt.useReducer=function(e,t,n){return as.current.useReducer(e,t,n)};kt.useRef=function(e){return as.current.useRef(e)};kt.useState=function(e){return as.current.useState(e)};kt.useSyncExternalStore=function(e,t,n){return as.current.useSyncExternalStore(e,t,n)};kt.useTransition=function(){return as.current.useTransition()};kt.version="18.3.1";uk.exports=kt;var N=uk.exports;const oe=Zh(N),W1=lk({__proto__:null,default:oe},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hj=N,Uj=Symbol.for("react.element"),$j=Symbol.for("react.fragment"),Wj=Object.prototype.hasOwnProperty,Gj=Hj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xj={key:!0,ref:!0,__self:!0,__source:!0};function wk(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Wj.call(t,r)&&!Xj.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Uj,type:e,key:i,ref:o,props:s,_owner:Gj.current}}$1.Fragment=$j;$1.jsx=wk;$1.jsxs=wk;ck.exports=$1;var p=ck.exports,vk={exports:{}},Ls={},bk={exports:{}},Ck={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(W,V){var ee=W.length;W.push(V);e:for(;0<ee;){var ae=ee-1>>>1,se=W[ae];if(0<s(se,V))W[ae]=V,W[ee]=se,ee=ae;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var V=W[0],ee=W.pop();if(ee!==V){W[0]=ee;e:for(var ae=0,se=W.length,G=se>>>1;ae<G;){var Q=2*(ae+1)-1,te=W[Q],ne=Q+1,ie=W[ne];if(0>s(te,ee))ne<se&&0>s(ie,te)?(W[ae]=ie,W[ne]=ee,ae=ne):(W[ae]=te,W[Q]=ee,ae=Q);else if(ne<se&&0>s(ie,ee))W[ae]=ie,W[ne]=ee,ae=ne;else break e}}return V}function s(W,V){var ee=W.sortIndex-V.sortIndex;return ee!==0?ee:W.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,g=null,y=3,w=!1,S=!1,C=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(W){for(var V=n(d);V!==null;){if(V.callback===null)r(d);else if(V.startTime<=W)r(d),V.sortIndex=V.expirationTime,t(c,V);else break;V=n(d)}}function M(W){if(C=!1,I(W),!S)if(n(c)!==null)S=!0,Y(P);else{var V=n(d);V!==null&&X(M,V.startTime-W)}}function P(W,V){S=!1,C&&(C=!1,E(D),D=-1),w=!0;var ee=y;try{for(I(V),g=n(c);g!==null&&(!(g.expirationTime>V)||W&&!K());){var ae=g.callback;if(typeof ae=="function"){g.callback=null,y=g.priorityLevel;var se=ae(g.expirationTime<=V);V=e.unstable_now(),typeof se=="function"?g.callback=se:g===n(c)&&r(c),I(V)}else r(c);g=n(c)}if(g!==null)var G=!0;else{var Q=n(d);Q!==null&&X(M,Q.startTime-V),G=!1}return G}finally{g=null,y=ee,w=!1}}var j=!1,_=null,D=-1,L=5,U=-1;function K(){return!(e.unstable_now()-U<L)}function q(){if(_!==null){var W=e.unstable_now();U=W;var V=!0;try{V=_(!0,W)}finally{V?re():(j=!1,_=null)}}else j=!1}var re;if(typeof k=="function")re=function(){k(q)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,H=z.port2;z.port1.onmessage=q,re=function(){H.postMessage(null)}}else re=function(){A(q,0)};function Y(W){_=W,j||(j=!0,re())}function X(W,V){D=A(function(){W(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){S||w||(S=!0,Y(P))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(W){switch(y){case 1:case 2:case 3:var V=3;break;default:V=y}var ee=y;y=V;try{return W()}finally{y=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,V){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ee=y;y=W;try{return V()}finally{y=ee}},e.unstable_scheduleCallback=function(W,V,ee){var ae=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ae+ee:ae):ee=ae,W){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=ee+se,W={id:h++,callback:V,priorityLevel:W,startTime:ee,expirationTime:se,sortIndex:-1},ee>ae?(W.sortIndex=ee,t(d,W),n(c)===null&&W===n(d)&&(C?(E(D),D=-1):C=!0,X(M,ee-ae))):(W.sortIndex=se,t(c,W),S||w||(S=!0,Y(P))),W},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(W){var V=y;return function(){var ee=y;y=V;try{return W.apply(this,arguments)}finally{y=ee}}}})(Ck);bk.exports=Ck;var Kj=bk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yj=N,Ds=Kj;function _e(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sk=new Set,eh={};function Bc(e,t){rd(e,t),rd(e+"Capture",t)}function rd(e,t){for(eh[e]=t,e=0;e<t.length;e++)Sk.add(t[e])}var Xo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ww=Object.prototype.hasOwnProperty,qj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,JS={},eE={};function Zj(e){return ww.call(eE,e)?!0:ww.call(JS,e)?!1:qj.test(e)?eE[e]=!0:(JS[e]=!0,!1)}function Qj(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Jj(e,t,n,r){if(t===null||typeof t>"u"||Qj(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ls(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var _r={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_r[e]=new ls(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];_r[t]=new ls(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){_r[e]=new ls(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_r[e]=new ls(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_r[e]=new ls(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){_r[e]=new ls(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){_r[e]=new ls(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){_r[e]=new ls(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){_r[e]=new ls(e,5,!1,e.toLowerCase(),null,!1,!1)});var X2=/[\-:]([a-z])/g;function K2(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(X2,K2);_r[t]=new ls(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(X2,K2);_r[t]=new ls(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(X2,K2);_r[t]=new ls(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){_r[e]=new ls(e,1,!1,e.toLowerCase(),null,!1,!1)});_r.xlinkHref=new ls("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){_r[e]=new ls(e,1,!1,e.toLowerCase(),null,!0,!0)});function Y2(e,t,n,r){var s=_r.hasOwnProperty(t)?_r[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Jj(t,n,s,r)&&(n=null),r||s===null?Zj(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var na=Yj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mp=Symbol.for("react.element"),mu=Symbol.for("react.portal"),gu=Symbol.for("react.fragment"),q2=Symbol.for("react.strict_mode"),vw=Symbol.for("react.profiler"),Ek=Symbol.for("react.provider"),Nk=Symbol.for("react.context"),Z2=Symbol.for("react.forward_ref"),bw=Symbol.for("react.suspense"),Cw=Symbol.for("react.suspense_list"),Q2=Symbol.for("react.memo"),va=Symbol.for("react.lazy"),Ak=Symbol.for("react.offscreen"),tE=Symbol.iterator;function Qd(e){return e===null||typeof e!="object"?null:(e=tE&&e[tE]||e["@@iterator"],typeof e=="function"?e:null)}var kn=Object.assign,Dx;function xf(e){if(Dx===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Dx=t&&t[1]||""}return`
`+Dx+e}var jx=!1;function Lx(e,t){if(!e||jx)return"";jx=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{jx=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?xf(e):""}function eL(e){switch(e.tag){case 5:return xf(e.type);case 16:return xf("Lazy");case 13:return xf("Suspense");case 19:return xf("SuspenseList");case 0:case 2:case 15:return e=Lx(e.type,!1),e;case 11:return e=Lx(e.type.render,!1),e;case 1:return e=Lx(e.type,!0),e;default:return""}}function Sw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case gu:return"Fragment";case mu:return"Portal";case vw:return"Profiler";case q2:return"StrictMode";case bw:return"Suspense";case Cw:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Nk:return(e.displayName||"Context")+".Consumer";case Ek:return(e._context.displayName||"Context")+".Provider";case Z2:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q2:return t=e.displayName||null,t!==null?t:Sw(e.type)||"Memo";case va:t=e._payload,e=e._init;try{return Sw(e(t))}catch{}}return null}function tL(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sw(t);case 8:return t===q2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function al(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Tk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function nL(e){var t=Tk(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function _p(e){e._valueTracker||(e._valueTracker=nL(e))}function kk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Tk(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function rm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ew(e,t){var n=t.checked;return kn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function nE(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=al(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ik(e,t){t=t.checked,t!=null&&Y2(e,"checked",t,!1)}function Nw(e,t){Ik(e,t);var n=al(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Aw(e,t.type,n):t.hasOwnProperty("defaultValue")&&Aw(e,t.type,al(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rE(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Aw(e,t,n){(t!=="number"||rm(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var yf=Array.isArray;function Mu(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+al(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Tw(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_e(91));return kn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sE(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(_e(92));if(yf(n)){if(1<n.length)throw Error(_e(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:al(n)}}function Rk(e,t){var n=al(t.value),r=al(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function iE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Mk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Mk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Op,_k=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Op=Op||document.createElement("div"),Op.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Op.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function th(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Of={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rL=["Webkit","ms","Moz","O"];Object.keys(Of).forEach(function(e){rL.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Of[t]=Of[e]})});function Ok(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Of.hasOwnProperty(e)&&Of[e]?(""+t).trim():t+"px"}function Pk(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ok(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var sL=kn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Iw(e,t){if(t){if(sL[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_e(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_e(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_e(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_e(62))}}function Rw(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mw=null;function J2(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _w=null,_u=null,Ou=null;function oE(e){if(e=tp(e)){if(typeof _w!="function")throw Error(_e(280));var t=e.stateNode;t&&(t=q1(t),_w(e.stateNode,e.type,t))}}function Dk(e){_u?Ou?Ou.push(e):Ou=[e]:_u=e}function jk(){if(_u){var e=_u,t=Ou;if(Ou=_u=null,oE(e),t)for(e=0;e<t.length;e++)oE(t[e])}}function Lk(e,t){return e(t)}function Bk(){}var Bx=!1;function Fk(e,t,n){if(Bx)return e(t,n);Bx=!0;try{return Lk(e,t,n)}finally{Bx=!1,(_u!==null||Ou!==null)&&(Bk(),jk())}}function nh(e,t){var n=e.stateNode;if(n===null)return null;var r=q1(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(_e(231,t,typeof n));return n}var Ow=!1;if(Xo)try{var Jd={};Object.defineProperty(Jd,"passive",{get:function(){Ow=!0}}),window.addEventListener("test",Jd,Jd),window.removeEventListener("test",Jd,Jd)}catch{Ow=!1}function iL(e,t,n,r,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(h){this.onError(h)}}var Pf=!1,sm=null,im=!1,Pw=null,oL={onError:function(e){Pf=!0,sm=e}};function aL(e,t,n,r,s,i,o,l,c){Pf=!1,sm=null,iL.apply(oL,arguments)}function lL(e,t,n,r,s,i,o,l,c){if(aL.apply(this,arguments),Pf){if(Pf){var d=sm;Pf=!1,sm=null}else throw Error(_e(198));im||(im=!0,Pw=d)}}function Fc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function zk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function aE(e){if(Fc(e)!==e)throw Error(_e(188))}function cL(e){var t=e.alternate;if(!t){if(t=Fc(e),t===null)throw Error(_e(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return aE(s),e;if(i===r)return aE(s),t;i=i.sibling}throw Error(_e(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(_e(189))}}if(n.alternate!==r)throw Error(_e(190))}if(n.tag!==3)throw Error(_e(188));return n.stateNode.current===n?e:t}function Vk(e){return e=cL(e),e!==null?Hk(e):null}function Hk(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Hk(e);if(t!==null)return t;e=e.sibling}return null}var Uk=Ds.unstable_scheduleCallback,lE=Ds.unstable_cancelCallback,uL=Ds.unstable_shouldYield,dL=Ds.unstable_requestPaint,Wn=Ds.unstable_now,fL=Ds.unstable_getCurrentPriorityLevel,eb=Ds.unstable_ImmediatePriority,$k=Ds.unstable_UserBlockingPriority,om=Ds.unstable_NormalPriority,hL=Ds.unstable_LowPriority,Wk=Ds.unstable_IdlePriority,G1=null,lo=null;function pL(e){if(lo&&typeof lo.onCommitFiberRoot=="function")try{lo.onCommitFiberRoot(G1,e,void 0,(e.current.flags&128)===128)}catch{}}var Ii=Math.clz32?Math.clz32:xL,mL=Math.log,gL=Math.LN2;function xL(e){return e>>>=0,e===0?32:31-(mL(e)/gL|0)|0}var Pp=64,Dp=4194304;function wf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function am(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=wf(l):(i&=o,i!==0&&(r=wf(i)))}else o=n&~s,o!==0?r=wf(o):i!==0&&(r=wf(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ii(t),s=1<<n,r|=e[n],t&=~s;return r}function yL(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wL(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ii(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=yL(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Dw(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Gk(){var e=Pp;return Pp<<=1,!(Pp&4194240)&&(Pp=64),e}function Fx(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Jh(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ii(t),e[t]=n}function vL(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Ii(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function tb(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ii(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Yt=0;function Xk(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Kk,nb,Yk,qk,Zk,jw=!1,jp=[],Wa=null,Ga=null,Xa=null,rh=new Map,sh=new Map,Ta=[],bL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cE(e,t){switch(e){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":Xa=null;break;case"pointerover":case"pointerout":rh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sh.delete(t.pointerId)}}function ef(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=tp(t),t!==null&&nb(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function CL(e,t,n,r,s){switch(t){case"focusin":return Wa=ef(Wa,e,t,n,r,s),!0;case"dragenter":return Ga=ef(Ga,e,t,n,r,s),!0;case"mouseover":return Xa=ef(Xa,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return rh.set(i,ef(rh.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,sh.set(i,ef(sh.get(i)||null,e,t,n,r,s)),!0}return!1}function Qk(e){var t=Bl(e.target);if(t!==null){var n=Fc(t);if(n!==null){if(t=n.tag,t===13){if(t=zk(n),t!==null){e.blockedOn=t,Zk(e.priority,function(){Yk(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function M0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Lw(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Mw=r,n.target.dispatchEvent(r),Mw=null}else return t=tp(n),t!==null&&nb(t),e.blockedOn=n,!1;t.shift()}return!0}function uE(e,t,n){M0(e)&&n.delete(t)}function SL(){jw=!1,Wa!==null&&M0(Wa)&&(Wa=null),Ga!==null&&M0(Ga)&&(Ga=null),Xa!==null&&M0(Xa)&&(Xa=null),rh.forEach(uE),sh.forEach(uE)}function tf(e,t){e.blockedOn===t&&(e.blockedOn=null,jw||(jw=!0,Ds.unstable_scheduleCallback(Ds.unstable_NormalPriority,SL)))}function ih(e){function t(s){return tf(s,e)}if(0<jp.length){tf(jp[0],e);for(var n=1;n<jp.length;n++){var r=jp[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Wa!==null&&tf(Wa,e),Ga!==null&&tf(Ga,e),Xa!==null&&tf(Xa,e),rh.forEach(t),sh.forEach(t),n=0;n<Ta.length;n++)r=Ta[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ta.length&&(n=Ta[0],n.blockedOn===null);)Qk(n),n.blockedOn===null&&Ta.shift()}var Pu=na.ReactCurrentBatchConfig,lm=!0;function EL(e,t,n,r){var s=Yt,i=Pu.transition;Pu.transition=null;try{Yt=1,rb(e,t,n,r)}finally{Yt=s,Pu.transition=i}}function NL(e,t,n,r){var s=Yt,i=Pu.transition;Pu.transition=null;try{Yt=4,rb(e,t,n,r)}finally{Yt=s,Pu.transition=i}}function rb(e,t,n,r){if(lm){var s=Lw(e,t,n,r);if(s===null)Yx(e,t,r,cm,n),cE(e,r);else if(CL(s,e,t,n,r))r.stopPropagation();else if(cE(e,r),t&4&&-1<bL.indexOf(e)){for(;s!==null;){var i=tp(s);if(i!==null&&Kk(i),i=Lw(e,t,n,r),i===null&&Yx(e,t,r,cm,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Yx(e,t,r,null,n)}}var cm=null;function Lw(e,t,n,r){if(cm=null,e=J2(r),e=Bl(e),e!==null)if(t=Fc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=zk(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return cm=e,null}function Jk(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fL()){case eb:return 1;case $k:return 4;case om:case hL:return 16;case Wk:return 536870912;default:return 16}default:return 16}}var Ba=null,sb=null,_0=null;function eI(){if(_0)return _0;var e,t=sb,n=t.length,r,s="value"in Ba?Ba.value:Ba.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return _0=s.slice(e,1<r?1-r:void 0)}function O0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Lp(){return!0}function dE(){return!1}function Bs(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Lp:dE,this.isPropagationStopped=dE,this}return kn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Lp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Lp)},persist:function(){},isPersistent:Lp}),t}var _d={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ib=Bs(_d),ep=kn({},_d,{view:0,detail:0}),AL=Bs(ep),zx,Vx,nf,X1=kn({},ep,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ob,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nf&&(nf&&e.type==="mousemove"?(zx=e.screenX-nf.screenX,Vx=e.screenY-nf.screenY):Vx=zx=0,nf=e),zx)},movementY:function(e){return"movementY"in e?e.movementY:Vx}}),fE=Bs(X1),TL=kn({},X1,{dataTransfer:0}),kL=Bs(TL),IL=kn({},ep,{relatedTarget:0}),Hx=Bs(IL),RL=kn({},_d,{animationName:0,elapsedTime:0,pseudoElement:0}),ML=Bs(RL),_L=kn({},_d,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),OL=Bs(_L),PL=kn({},_d,{data:0}),hE=Bs(PL),DL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=LL[e])?!!t[e]:!1}function ob(){return BL}var FL=kn({},ep,{key:function(e){if(e.key){var t=DL[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=O0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jL[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ob,charCode:function(e){return e.type==="keypress"?O0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?O0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zL=Bs(FL),VL=kn({},X1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pE=Bs(VL),HL=kn({},ep,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ob}),UL=Bs(HL),$L=kn({},_d,{propertyName:0,elapsedTime:0,pseudoElement:0}),WL=Bs($L),GL=kn({},X1,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),XL=Bs(GL),KL=[9,13,27,32],ab=Xo&&"CompositionEvent"in window,Df=null;Xo&&"documentMode"in document&&(Df=document.documentMode);var YL=Xo&&"TextEvent"in window&&!Df,tI=Xo&&(!ab||Df&&8<Df&&11>=Df),mE=" ",gE=!1;function nI(e,t){switch(e){case"keyup":return KL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rI(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xu=!1;function qL(e,t){switch(e){case"compositionend":return rI(t);case"keypress":return t.which!==32?null:(gE=!0,mE);case"textInput":return e=t.data,e===mE&&gE?null:e;default:return null}}function ZL(e,t){if(xu)return e==="compositionend"||!ab&&nI(e,t)?(e=eI(),_0=sb=Ba=null,xu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tI&&t.locale!=="ko"?null:t.data;default:return null}}var QL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!QL[e.type]:t==="textarea"}function sI(e,t,n,r){Dk(r),t=um(t,"onChange"),0<t.length&&(n=new ib("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var jf=null,oh=null;function JL(e){mI(e,0)}function K1(e){var t=vu(e);if(kk(t))return e}function e7(e,t){if(e==="change")return t}var iI=!1;if(Xo){var Ux;if(Xo){var $x="oninput"in document;if(!$x){var yE=document.createElement("div");yE.setAttribute("oninput","return;"),$x=typeof yE.oninput=="function"}Ux=$x}else Ux=!1;iI=Ux&&(!document.documentMode||9<document.documentMode)}function wE(){jf&&(jf.detachEvent("onpropertychange",oI),oh=jf=null)}function oI(e){if(e.propertyName==="value"&&K1(oh)){var t=[];sI(t,oh,e,J2(e)),Fk(JL,t)}}function t7(e,t,n){e==="focusin"?(wE(),jf=t,oh=n,jf.attachEvent("onpropertychange",oI)):e==="focusout"&&wE()}function n7(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return K1(oh)}function r7(e,t){if(e==="click")return K1(t)}function s7(e,t){if(e==="input"||e==="change")return K1(t)}function i7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Oi=typeof Object.is=="function"?Object.is:i7;function ah(e,t){if(Oi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ww.call(t,s)||!Oi(e[s],t[s]))return!1}return!0}function vE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bE(e,t){var n=vE(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vE(n)}}function aI(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?aI(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lI(){for(var e=window,t=rm();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=rm(e.document)}return t}function lb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function o7(e){var t=lI(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&aI(n.ownerDocument.documentElement,n)){if(r!==null&&lb(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=bE(n,i);var o=bE(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var a7=Xo&&"documentMode"in document&&11>=document.documentMode,yu=null,Bw=null,Lf=null,Fw=!1;function CE(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fw||yu==null||yu!==rm(r)||(r=yu,"selectionStart"in r&&lb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Lf&&ah(Lf,r)||(Lf=r,r=um(Bw,"onSelect"),0<r.length&&(t=new ib("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yu)))}function Bp(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wu={animationend:Bp("Animation","AnimationEnd"),animationiteration:Bp("Animation","AnimationIteration"),animationstart:Bp("Animation","AnimationStart"),transitionend:Bp("Transition","TransitionEnd")},Wx={},cI={};Xo&&(cI=document.createElement("div").style,"AnimationEvent"in window||(delete wu.animationend.animation,delete wu.animationiteration.animation,delete wu.animationstart.animation),"TransitionEvent"in window||delete wu.transitionend.transition);function Y1(e){if(Wx[e])return Wx[e];if(!wu[e])return e;var t=wu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in cI)return Wx[e]=t[n];return e}var uI=Y1("animationend"),dI=Y1("animationiteration"),fI=Y1("animationstart"),hI=Y1("transitionend"),pI=new Map,SE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hl(e,t){pI.set(e,t),Bc(t,[e])}for(var Gx=0;Gx<SE.length;Gx++){var Xx=SE[Gx],l7=Xx.toLowerCase(),c7=Xx[0].toUpperCase()+Xx.slice(1);hl(l7,"on"+c7)}hl(uI,"onAnimationEnd");hl(dI,"onAnimationIteration");hl(fI,"onAnimationStart");hl("dblclick","onDoubleClick");hl("focusin","onFocus");hl("focusout","onBlur");hl(hI,"onTransitionEnd");rd("onMouseEnter",["mouseout","mouseover"]);rd("onMouseLeave",["mouseout","mouseover"]);rd("onPointerEnter",["pointerout","pointerover"]);rd("onPointerLeave",["pointerout","pointerover"]);Bc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u7=new Set("cancel close invalid load scroll toggle".split(" ").concat(vf));function EE(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,lL(r,t,void 0,e),e.currentTarget=null}function mI(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;EE(s,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;EE(s,l,d),i=c}}}if(im)throw e=Pw,im=!1,Pw=null,e}function mn(e,t){var n=t[$w];n===void 0&&(n=t[$w]=new Set);var r=e+"__bubble";n.has(r)||(gI(t,e,2,!1),n.add(r))}function Kx(e,t,n){var r=0;t&&(r|=4),gI(n,e,r,t)}var Fp="_reactListening"+Math.random().toString(36).slice(2);function lh(e){if(!e[Fp]){e[Fp]=!0,Sk.forEach(function(n){n!=="selectionchange"&&(u7.has(n)||Kx(n,!1,e),Kx(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fp]||(t[Fp]=!0,Kx("selectionchange",!1,t))}}function gI(e,t,n,r){switch(Jk(t)){case 1:var s=EL;break;case 4:s=NL;break;default:s=rb}n=s.bind(null,t,n,e),s=void 0,!Ow||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Yx(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Bl(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Fk(function(){var d=i,h=J2(n),g=[];e:{var y=pI.get(e);if(y!==void 0){var w=ib,S=e;switch(e){case"keypress":if(O0(n)===0)break e;case"keydown":case"keyup":w=zL;break;case"focusin":S="focus",w=Hx;break;case"focusout":S="blur",w=Hx;break;case"beforeblur":case"afterblur":w=Hx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=fE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=kL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=UL;break;case uI:case dI:case fI:w=ML;break;case hI:w=WL;break;case"scroll":w=AL;break;case"wheel":w=XL;break;case"copy":case"cut":case"paste":w=OL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=pE}var C=(t&4)!==0,A=!C&&e==="scroll",E=C?y!==null?y+"Capture":null:y;C=[];for(var k=d,I;k!==null;){I=k;var M=I.stateNode;if(I.tag===5&&M!==null&&(I=M,E!==null&&(M=nh(k,E),M!=null&&C.push(ch(k,M,I)))),A)break;k=k.return}0<C.length&&(y=new w(y,S,null,n,h),g.push({event:y,listeners:C}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",y&&n!==Mw&&(S=n.relatedTarget||n.fromElement)&&(Bl(S)||S[Ko]))break e;if((w||y)&&(y=h.window===h?h:(y=h.ownerDocument)?y.defaultView||y.parentWindow:window,w?(S=n.relatedTarget||n.toElement,w=d,S=S?Bl(S):null,S!==null&&(A=Fc(S),S!==A||S.tag!==5&&S.tag!==6)&&(S=null)):(w=null,S=d),w!==S)){if(C=fE,M="onMouseLeave",E="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(C=pE,M="onPointerLeave",E="onPointerEnter",k="pointer"),A=w==null?y:vu(w),I=S==null?y:vu(S),y=new C(M,k+"leave",w,n,h),y.target=A,y.relatedTarget=I,M=null,Bl(h)===d&&(C=new C(E,k+"enter",S,n,h),C.target=I,C.relatedTarget=A,M=C),A=M,w&&S)t:{for(C=w,E=S,k=0,I=C;I;I=eu(I))k++;for(I=0,M=E;M;M=eu(M))I++;for(;0<k-I;)C=eu(C),k--;for(;0<I-k;)E=eu(E),I--;for(;k--;){if(C===E||E!==null&&C===E.alternate)break t;C=eu(C),E=eu(E)}C=null}else C=null;w!==null&&NE(g,y,w,C,!1),S!==null&&A!==null&&NE(g,A,S,C,!0)}}e:{if(y=d?vu(d):window,w=y.nodeName&&y.nodeName.toLowerCase(),w==="select"||w==="input"&&y.type==="file")var P=e7;else if(xE(y))if(iI)P=s7;else{P=n7;var j=t7}else(w=y.nodeName)&&w.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(P=r7);if(P&&(P=P(e,d))){sI(g,P,n,h);break e}j&&j(e,y,d),e==="focusout"&&(j=y._wrapperState)&&j.controlled&&y.type==="number"&&Aw(y,"number",y.value)}switch(j=d?vu(d):window,e){case"focusin":(xE(j)||j.contentEditable==="true")&&(yu=j,Bw=d,Lf=null);break;case"focusout":Lf=Bw=yu=null;break;case"mousedown":Fw=!0;break;case"contextmenu":case"mouseup":case"dragend":Fw=!1,CE(g,n,h);break;case"selectionchange":if(a7)break;case"keydown":case"keyup":CE(g,n,h)}var _;if(ab)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else xu?nI(e,n)&&(D="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(tI&&n.locale!=="ko"&&(xu||D!=="onCompositionStart"?D==="onCompositionEnd"&&xu&&(_=eI()):(Ba=h,sb="value"in Ba?Ba.value:Ba.textContent,xu=!0)),j=um(d,D),0<j.length&&(D=new hE(D,e,null,n,h),g.push({event:D,listeners:j}),_?D.data=_:(_=rI(n),_!==null&&(D.data=_)))),(_=YL?qL(e,n):ZL(e,n))&&(d=um(d,"onBeforeInput"),0<d.length&&(h=new hE("onBeforeInput","beforeinput",null,n,h),g.push({event:h,listeners:d}),h.data=_))}mI(g,t)})}function ch(e,t,n){return{instance:e,listener:t,currentTarget:n}}function um(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=nh(e,n),i!=null&&r.unshift(ch(e,i,s)),i=nh(e,t),i!=null&&r.push(ch(e,i,s))),e=e.return}return r}function eu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function NE(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=nh(n,i),c!=null&&o.unshift(ch(n,c,l))):s||(c=nh(n,i),c!=null&&o.push(ch(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var d7=/\r\n?/g,f7=/\u0000|\uFFFD/g;function AE(e){return(typeof e=="string"?e:""+e).replace(d7,`
`).replace(f7,"")}function zp(e,t,n){if(t=AE(t),AE(e)!==t&&n)throw Error(_e(425))}function dm(){}var zw=null,Vw=null;function Hw(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Uw=typeof setTimeout=="function"?setTimeout:void 0,h7=typeof clearTimeout=="function"?clearTimeout:void 0,TE=typeof Promise=="function"?Promise:void 0,p7=typeof queueMicrotask=="function"?queueMicrotask:typeof TE<"u"?function(e){return TE.resolve(null).then(e).catch(m7)}:Uw;function m7(e){setTimeout(function(){throw e})}function qx(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),ih(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ih(t)}function Ka(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Od=Math.random().toString(36).slice(2),io="__reactFiber$"+Od,uh="__reactProps$"+Od,Ko="__reactContainer$"+Od,$w="__reactEvents$"+Od,g7="__reactListeners$"+Od,x7="__reactHandles$"+Od;function Bl(e){var t=e[io];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ko]||n[io]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=kE(e);e!==null;){if(n=e[io])return n;e=kE(e)}return t}e=n,n=e.parentNode}return null}function tp(e){return e=e[io]||e[Ko],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(_e(33))}function q1(e){return e[uh]||null}var Ww=[],bu=-1;function pl(e){return{current:e}}function yn(e){0>bu||(e.current=Ww[bu],Ww[bu]=null,bu--)}function an(e,t){bu++,Ww[bu]=e.current,e.current=t}var ll={},Kr=pl(ll),vs=pl(!1),wc=ll;function sd(e,t){var n=e.type.contextTypes;if(!n)return ll;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function bs(e){return e=e.childContextTypes,e!=null}function fm(){yn(vs),yn(Kr)}function IE(e,t,n){if(Kr.current!==ll)throw Error(_e(168));an(Kr,t),an(vs,n)}function xI(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(_e(108,tL(e)||"Unknown",s));return kn({},n,r)}function hm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ll,wc=Kr.current,an(Kr,e),an(vs,vs.current),!0}function RE(e,t,n){var r=e.stateNode;if(!r)throw Error(_e(169));n?(e=xI(e,t,wc),r.__reactInternalMemoizedMergedChildContext=e,yn(vs),yn(Kr),an(Kr,e)):yn(vs),an(vs,n)}var Lo=null,Z1=!1,Zx=!1;function yI(e){Lo===null?Lo=[e]:Lo.push(e)}function y7(e){Z1=!0,yI(e)}function ml(){if(!Zx&&Lo!==null){Zx=!0;var e=0,t=Yt;try{var n=Lo;for(Yt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Lo=null,Z1=!1}catch(s){throw Lo!==null&&(Lo=Lo.slice(e+1)),Uk(eb,ml),s}finally{Yt=t,Zx=!1}}return null}var Cu=[],Su=0,pm=null,mm=0,Ks=[],Ys=0,vc=null,zo=1,Vo="";function Ol(e,t){Cu[Su++]=mm,Cu[Su++]=pm,pm=e,mm=t}function wI(e,t,n){Ks[Ys++]=zo,Ks[Ys++]=Vo,Ks[Ys++]=vc,vc=e;var r=zo;e=Vo;var s=32-Ii(r)-1;r&=~(1<<s),n+=1;var i=32-Ii(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,zo=1<<32-Ii(t)+s|n<<s|r,Vo=i+e}else zo=1<<i|n<<s|r,Vo=e}function cb(e){e.return!==null&&(Ol(e,1),wI(e,1,0))}function ub(e){for(;e===pm;)pm=Cu[--Su],Cu[Su]=null,mm=Cu[--Su],Cu[Su]=null;for(;e===vc;)vc=Ks[--Ys],Ks[Ys]=null,Vo=Ks[--Ys],Ks[Ys]=null,zo=Ks[--Ys],Ks[Ys]=null}var _s=null,Ms=null,Sn=!1,Ni=null;function vI(e,t){var n=Qs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ME(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,_s=e,Ms=Ka(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,_s=e,Ms=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=vc!==null?{id:zo,overflow:Vo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Qs(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,_s=e,Ms=null,!0):!1;default:return!1}}function Gw(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Xw(e){if(Sn){var t=Ms;if(t){var n=t;if(!ME(e,t)){if(Gw(e))throw Error(_e(418));t=Ka(n.nextSibling);var r=_s;t&&ME(e,t)?vI(r,n):(e.flags=e.flags&-4097|2,Sn=!1,_s=e)}}else{if(Gw(e))throw Error(_e(418));e.flags=e.flags&-4097|2,Sn=!1,_s=e}}}function _E(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_s=e}function Vp(e){if(e!==_s)return!1;if(!Sn)return _E(e),Sn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Hw(e.type,e.memoizedProps)),t&&(t=Ms)){if(Gw(e))throw bI(),Error(_e(418));for(;t;)vI(e,t),t=Ka(t.nextSibling)}if(_E(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(_e(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ms=Ka(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ms=null}}else Ms=_s?Ka(e.stateNode.nextSibling):null;return!0}function bI(){for(var e=Ms;e;)e=Ka(e.nextSibling)}function id(){Ms=_s=null,Sn=!1}function db(e){Ni===null?Ni=[e]:Ni.push(e)}var w7=na.ReactCurrentBatchConfig;function rf(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_e(309));var r=n.stateNode}if(!r)throw Error(_e(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(_e(284));if(!n._owner)throw Error(_e(290,e))}return e}function Hp(e,t){throw e=Object.prototype.toString.call(t),Error(_e(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function OE(e){var t=e._init;return t(e._payload)}function CI(e){function t(E,k){if(e){var I=E.deletions;I===null?(E.deletions=[k],E.flags|=16):I.push(k)}}function n(E,k){if(!e)return null;for(;k!==null;)t(E,k),k=k.sibling;return null}function r(E,k){for(E=new Map;k!==null;)k.key!==null?E.set(k.key,k):E.set(k.index,k),k=k.sibling;return E}function s(E,k){return E=Qa(E,k),E.index=0,E.sibling=null,E}function i(E,k,I){return E.index=I,e?(I=E.alternate,I!==null?(I=I.index,I<k?(E.flags|=2,k):I):(E.flags|=2,k)):(E.flags|=1048576,k)}function o(E){return e&&E.alternate===null&&(E.flags|=2),E}function l(E,k,I,M){return k===null||k.tag!==6?(k=sy(I,E.mode,M),k.return=E,k):(k=s(k,I),k.return=E,k)}function c(E,k,I,M){var P=I.type;return P===gu?h(E,k,I.props.children,M,I.key):k!==null&&(k.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===va&&OE(P)===k.type)?(M=s(k,I.props),M.ref=rf(E,k,I),M.return=E,M):(M=z0(I.type,I.key,I.props,null,E.mode,M),M.ref=rf(E,k,I),M.return=E,M)}function d(E,k,I,M){return k===null||k.tag!==4||k.stateNode.containerInfo!==I.containerInfo||k.stateNode.implementation!==I.implementation?(k=iy(I,E.mode,M),k.return=E,k):(k=s(k,I.children||[]),k.return=E,k)}function h(E,k,I,M,P){return k===null||k.tag!==7?(k=ec(I,E.mode,M,P),k.return=E,k):(k=s(k,I),k.return=E,k)}function g(E,k,I){if(typeof k=="string"&&k!==""||typeof k=="number")return k=sy(""+k,E.mode,I),k.return=E,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Mp:return I=z0(k.type,k.key,k.props,null,E.mode,I),I.ref=rf(E,null,k),I.return=E,I;case mu:return k=iy(k,E.mode,I),k.return=E,k;case va:var M=k._init;return g(E,M(k._payload),I)}if(yf(k)||Qd(k))return k=ec(k,E.mode,I,null),k.return=E,k;Hp(E,k)}return null}function y(E,k,I,M){var P=k!==null?k.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return P!==null?null:l(E,k,""+I,M);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Mp:return I.key===P?c(E,k,I,M):null;case mu:return I.key===P?d(E,k,I,M):null;case va:return P=I._init,y(E,k,P(I._payload),M)}if(yf(I)||Qd(I))return P!==null?null:h(E,k,I,M,null);Hp(E,I)}return null}function w(E,k,I,M,P){if(typeof M=="string"&&M!==""||typeof M=="number")return E=E.get(I)||null,l(k,E,""+M,P);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Mp:return E=E.get(M.key===null?I:M.key)||null,c(k,E,M,P);case mu:return E=E.get(M.key===null?I:M.key)||null,d(k,E,M,P);case va:var j=M._init;return w(E,k,I,j(M._payload),P)}if(yf(M)||Qd(M))return E=E.get(I)||null,h(k,E,M,P,null);Hp(k,M)}return null}function S(E,k,I,M){for(var P=null,j=null,_=k,D=k=0,L=null;_!==null&&D<I.length;D++){_.index>D?(L=_,_=null):L=_.sibling;var U=y(E,_,I[D],M);if(U===null){_===null&&(_=L);break}e&&_&&U.alternate===null&&t(E,_),k=i(U,k,D),j===null?P=U:j.sibling=U,j=U,_=L}if(D===I.length)return n(E,_),Sn&&Ol(E,D),P;if(_===null){for(;D<I.length;D++)_=g(E,I[D],M),_!==null&&(k=i(_,k,D),j===null?P=_:j.sibling=_,j=_);return Sn&&Ol(E,D),P}for(_=r(E,_);D<I.length;D++)L=w(_,E,D,I[D],M),L!==null&&(e&&L.alternate!==null&&_.delete(L.key===null?D:L.key),k=i(L,k,D),j===null?P=L:j.sibling=L,j=L);return e&&_.forEach(function(K){return t(E,K)}),Sn&&Ol(E,D),P}function C(E,k,I,M){var P=Qd(I);if(typeof P!="function")throw Error(_e(150));if(I=P.call(I),I==null)throw Error(_e(151));for(var j=P=null,_=k,D=k=0,L=null,U=I.next();_!==null&&!U.done;D++,U=I.next()){_.index>D?(L=_,_=null):L=_.sibling;var K=y(E,_,U.value,M);if(K===null){_===null&&(_=L);break}e&&_&&K.alternate===null&&t(E,_),k=i(K,k,D),j===null?P=K:j.sibling=K,j=K,_=L}if(U.done)return n(E,_),Sn&&Ol(E,D),P;if(_===null){for(;!U.done;D++,U=I.next())U=g(E,U.value,M),U!==null&&(k=i(U,k,D),j===null?P=U:j.sibling=U,j=U);return Sn&&Ol(E,D),P}for(_=r(E,_);!U.done;D++,U=I.next())U=w(_,E,D,U.value,M),U!==null&&(e&&U.alternate!==null&&_.delete(U.key===null?D:U.key),k=i(U,k,D),j===null?P=U:j.sibling=U,j=U);return e&&_.forEach(function(q){return t(E,q)}),Sn&&Ol(E,D),P}function A(E,k,I,M){if(typeof I=="object"&&I!==null&&I.type===gu&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Mp:e:{for(var P=I.key,j=k;j!==null;){if(j.key===P){if(P=I.type,P===gu){if(j.tag===7){n(E,j.sibling),k=s(j,I.props.children),k.return=E,E=k;break e}}else if(j.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===va&&OE(P)===j.type){n(E,j.sibling),k=s(j,I.props),k.ref=rf(E,j,I),k.return=E,E=k;break e}n(E,j);break}else t(E,j);j=j.sibling}I.type===gu?(k=ec(I.props.children,E.mode,M,I.key),k.return=E,E=k):(M=z0(I.type,I.key,I.props,null,E.mode,M),M.ref=rf(E,k,I),M.return=E,E=M)}return o(E);case mu:e:{for(j=I.key;k!==null;){if(k.key===j)if(k.tag===4&&k.stateNode.containerInfo===I.containerInfo&&k.stateNode.implementation===I.implementation){n(E,k.sibling),k=s(k,I.children||[]),k.return=E,E=k;break e}else{n(E,k);break}else t(E,k);k=k.sibling}k=iy(I,E.mode,M),k.return=E,E=k}return o(E);case va:return j=I._init,A(E,k,j(I._payload),M)}if(yf(I))return S(E,k,I,M);if(Qd(I))return C(E,k,I,M);Hp(E,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,k!==null&&k.tag===6?(n(E,k.sibling),k=s(k,I),k.return=E,E=k):(n(E,k),k=sy(I,E.mode,M),k.return=E,E=k),o(E)):n(E,k)}return A}var od=CI(!0),SI=CI(!1),gm=pl(null),xm=null,Eu=null,fb=null;function hb(){fb=Eu=xm=null}function pb(e){var t=gm.current;yn(gm),e._currentValue=t}function Kw(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Du(e,t){xm=e,fb=Eu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ys=!0),e.firstContext=null)}function oi(e){var t=e._currentValue;if(fb!==e)if(e={context:e,memoizedValue:t,next:null},Eu===null){if(xm===null)throw Error(_e(308));Eu=e,xm.dependencies={lanes:0,firstContext:e}}else Eu=Eu.next=e;return t}var Fl=null;function mb(e){Fl===null?Fl=[e]:Fl.push(e)}function EI(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,mb(t)):(n.next=s.next,s.next=n),t.interleaved=n,Yo(e,r)}function Yo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ba=!1;function gb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function NI(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $o(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ya(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Lt&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Yo(e,n)}return s=r.interleaved,s===null?(t.next=t,mb(r)):(t.next=s.next,s.next=t),r.interleaved=t,Yo(e,n)}function P0(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,tb(e,n)}}function PE(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ym(e,t,n,r){var s=e.updateQueue;ba=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var g=s.baseState;o=0,h=d=c=null,l=i;do{var y=l.lane,w=l.eventTime;if((r&y)===y){h!==null&&(h=h.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var S=e,C=l;switch(y=t,w=n,C.tag){case 1:if(S=C.payload,typeof S=="function"){g=S.call(w,g,y);break e}g=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=C.payload,y=typeof S=="function"?S.call(w,g,y):S,y==null)break e;g=kn({},g,y);break e;case 2:ba=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,y=s.effects,y===null?s.effects=[l]:y.push(l))}else w={eventTime:w,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=w,c=g):h=h.next=w,o|=y;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;y=l,l=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(h===null&&(c=g),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Cc|=o,e.lanes=o,e.memoizedState=g}}function DE(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(_e(191,s));s.call(r)}}}var np={},co=pl(np),dh=pl(np),fh=pl(np);function zl(e){if(e===np)throw Error(_e(174));return e}function xb(e,t){switch(an(fh,t),an(dh,e),an(co,np),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:kw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=kw(t,e)}yn(co),an(co,t)}function ad(){yn(co),yn(dh),yn(fh)}function AI(e){zl(fh.current);var t=zl(co.current),n=kw(t,e.type);t!==n&&(an(dh,e),an(co,n))}function yb(e){dh.current===e&&(yn(co),yn(dh))}var Nn=pl(0);function wm(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qx=[];function wb(){for(var e=0;e<Qx.length;e++)Qx[e]._workInProgressVersionPrimary=null;Qx.length=0}var D0=na.ReactCurrentDispatcher,Jx=na.ReactCurrentBatchConfig,bc=0,Tn=null,rr=null,hr=null,vm=!1,Bf=!1,hh=0,v7=0;function zr(){throw Error(_e(321))}function vb(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Oi(e[n],t[n]))return!1;return!0}function bb(e,t,n,r,s,i){if(bc=i,Tn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D0.current=e===null||e.memoizedState===null?E7:N7,e=n(r,s),Bf){i=0;do{if(Bf=!1,hh=0,25<=i)throw Error(_e(301));i+=1,hr=rr=null,t.updateQueue=null,D0.current=A7,e=n(r,s)}while(Bf)}if(D0.current=bm,t=rr!==null&&rr.next!==null,bc=0,hr=rr=Tn=null,vm=!1,t)throw Error(_e(300));return e}function Cb(){var e=hh!==0;return hh=0,e}function Zi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hr===null?Tn.memoizedState=hr=e:hr=hr.next=e,hr}function ai(){if(rr===null){var e=Tn.alternate;e=e!==null?e.memoizedState:null}else e=rr.next;var t=hr===null?Tn.memoizedState:hr.next;if(t!==null)hr=t,rr=e;else{if(e===null)throw Error(_e(310));rr=e,e={memoizedState:rr.memoizedState,baseState:rr.baseState,baseQueue:rr.baseQueue,queue:rr.queue,next:null},hr===null?Tn.memoizedState=hr=e:hr=hr.next=e}return hr}function ph(e,t){return typeof t=="function"?t(e):t}function ey(e){var t=ai(),n=t.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=e;var r=rr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var h=d.lane;if((bc&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var g={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=g,o=r):c=c.next=g,Tn.lanes|=h,Cc|=h}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,Oi(r,t.memoizedState)||(ys=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Tn.lanes|=i,Cc|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ty(e){var t=ai(),n=t.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Oi(i,t.memoizedState)||(ys=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function TI(){}function kI(e,t){var n=Tn,r=ai(),s=t(),i=!Oi(r.memoizedState,s);if(i&&(r.memoizedState=s,ys=!0),r=r.queue,Sb(MI.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||hr!==null&&hr.memoizedState.tag&1){if(n.flags|=2048,mh(9,RI.bind(null,n,r,s,t),void 0,null),gr===null)throw Error(_e(349));bc&30||II(n,t,s)}return s}function II(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Tn.updateQueue,t===null?(t={lastEffect:null,stores:null},Tn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function RI(e,t,n,r){t.value=n,t.getSnapshot=r,_I(t)&&OI(e)}function MI(e,t,n){return n(function(){_I(t)&&OI(e)})}function _I(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Oi(e,n)}catch{return!0}}function OI(e){var t=Yo(e,1);t!==null&&Ri(t,e,1,-1)}function jE(e){var t=Zi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ph,lastRenderedState:e},t.queue=e,e=e.dispatch=S7.bind(null,Tn,e),[t.memoizedState,e]}function mh(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Tn.updateQueue,t===null?(t={lastEffect:null,stores:null},Tn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function PI(){return ai().memoizedState}function j0(e,t,n,r){var s=Zi();Tn.flags|=e,s.memoizedState=mh(1|t,n,void 0,r===void 0?null:r)}function Q1(e,t,n,r){var s=ai();r=r===void 0?null:r;var i=void 0;if(rr!==null){var o=rr.memoizedState;if(i=o.destroy,r!==null&&vb(r,o.deps)){s.memoizedState=mh(t,n,i,r);return}}Tn.flags|=e,s.memoizedState=mh(1|t,n,i,r)}function LE(e,t){return j0(8390656,8,e,t)}function Sb(e,t){return Q1(2048,8,e,t)}function DI(e,t){return Q1(4,2,e,t)}function jI(e,t){return Q1(4,4,e,t)}function LI(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function BI(e,t,n){return n=n!=null?n.concat([e]):null,Q1(4,4,LI.bind(null,t,e),n)}function Eb(){}function FI(e,t){var n=ai();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&vb(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zI(e,t){var n=ai();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&vb(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function VI(e,t,n){return bc&21?(Oi(n,t)||(n=Gk(),Tn.lanes|=n,Cc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ys=!0),e.memoizedState=n)}function b7(e,t){var n=Yt;Yt=n!==0&&4>n?n:4,e(!0);var r=Jx.transition;Jx.transition={};try{e(!1),t()}finally{Yt=n,Jx.transition=r}}function HI(){return ai().memoizedState}function C7(e,t,n){var r=Za(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},UI(e))$I(t,n);else if(n=EI(e,t,n,r),n!==null){var s=rs();Ri(n,e,r,s),WI(n,t,r)}}function S7(e,t,n){var r=Za(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(UI(e))$I(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Oi(l,o)){var c=t.interleaved;c===null?(s.next=s,mb(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=EI(e,t,s,r),n!==null&&(s=rs(),Ri(n,e,r,s),WI(n,t,r))}}function UI(e){var t=e.alternate;return e===Tn||t!==null&&t===Tn}function $I(e,t){Bf=vm=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function WI(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,tb(e,n)}}var bm={readContext:oi,useCallback:zr,useContext:zr,useEffect:zr,useImperativeHandle:zr,useInsertionEffect:zr,useLayoutEffect:zr,useMemo:zr,useReducer:zr,useRef:zr,useState:zr,useDebugValue:zr,useDeferredValue:zr,useTransition:zr,useMutableSource:zr,useSyncExternalStore:zr,useId:zr,unstable_isNewReconciler:!1},E7={readContext:oi,useCallback:function(e,t){return Zi().memoizedState=[e,t===void 0?null:t],e},useContext:oi,useEffect:LE,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,j0(4194308,4,LI.bind(null,t,e),n)},useLayoutEffect:function(e,t){return j0(4194308,4,e,t)},useInsertionEffect:function(e,t){return j0(4,2,e,t)},useMemo:function(e,t){var n=Zi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Zi();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=C7.bind(null,Tn,e),[r.memoizedState,e]},useRef:function(e){var t=Zi();return e={current:e},t.memoizedState=e},useState:jE,useDebugValue:Eb,useDeferredValue:function(e){return Zi().memoizedState=e},useTransition:function(){var e=jE(!1),t=e[0];return e=b7.bind(null,e[1]),Zi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Tn,s=Zi();if(Sn){if(n===void 0)throw Error(_e(407));n=n()}else{if(n=t(),gr===null)throw Error(_e(349));bc&30||II(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,LE(MI.bind(null,r,i,e),[e]),r.flags|=2048,mh(9,RI.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Zi(),t=gr.identifierPrefix;if(Sn){var n=Vo,r=zo;n=(r&~(1<<32-Ii(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=hh++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=v7++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},N7={readContext:oi,useCallback:FI,useContext:oi,useEffect:Sb,useImperativeHandle:BI,useInsertionEffect:DI,useLayoutEffect:jI,useMemo:zI,useReducer:ey,useRef:PI,useState:function(){return ey(ph)},useDebugValue:Eb,useDeferredValue:function(e){var t=ai();return VI(t,rr.memoizedState,e)},useTransition:function(){var e=ey(ph)[0],t=ai().memoizedState;return[e,t]},useMutableSource:TI,useSyncExternalStore:kI,useId:HI,unstable_isNewReconciler:!1},A7={readContext:oi,useCallback:FI,useContext:oi,useEffect:Sb,useImperativeHandle:BI,useInsertionEffect:DI,useLayoutEffect:jI,useMemo:zI,useReducer:ty,useRef:PI,useState:function(){return ty(ph)},useDebugValue:Eb,useDeferredValue:function(e){var t=ai();return rr===null?t.memoizedState=e:VI(t,rr.memoizedState,e)},useTransition:function(){var e=ty(ph)[0],t=ai().memoizedState;return[e,t]},useMutableSource:TI,useSyncExternalStore:kI,useId:HI,unstable_isNewReconciler:!1};function wi(e,t){if(e&&e.defaultProps){t=kn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Yw(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:kn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var J1={isMounted:function(e){return(e=e._reactInternals)?Fc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=rs(),s=Za(e),i=$o(r,s);i.payload=t,n!=null&&(i.callback=n),t=Ya(e,i,s),t!==null&&(Ri(t,e,s,r),P0(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=rs(),s=Za(e),i=$o(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Ya(e,i,s),t!==null&&(Ri(t,e,s,r),P0(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=rs(),r=Za(e),s=$o(n,r);s.tag=2,t!=null&&(s.callback=t),t=Ya(e,s,r),t!==null&&(Ri(t,e,r,n),P0(t,e,r))}};function BE(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!ah(n,r)||!ah(s,i):!0}function GI(e,t,n){var r=!1,s=ll,i=t.contextType;return typeof i=="object"&&i!==null?i=oi(i):(s=bs(t)?wc:Kr.current,r=t.contextTypes,i=(r=r!=null)?sd(e,s):ll),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=J1,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function FE(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&J1.enqueueReplaceState(t,t.state,null)}function qw(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},gb(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=oi(i):(i=bs(t)?wc:Kr.current,s.context=sd(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Yw(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&J1.enqueueReplaceState(s,s.state,null),ym(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ld(e,t){try{var n="",r=t;do n+=eL(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function ny(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Zw(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var T7=typeof WeakMap=="function"?WeakMap:Map;function XI(e,t,n){n=$o(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Sm||(Sm=!0,av=r),Zw(e,t)},n}function KI(e,t,n){n=$o(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Zw(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Zw(e,t),typeof r!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function zE(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new T7;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=V7.bind(null,e,t,n),t.then(e,e))}function VE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function HE(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=$o(-1,1),t.tag=2,Ya(n,t,1))),n.lanes|=1),e)}var k7=na.ReactCurrentOwner,ys=!1;function es(e,t,n,r){t.child=e===null?SI(t,null,n,r):od(t,e.child,n,r)}function UE(e,t,n,r,s){n=n.render;var i=t.ref;return Du(t,s),r=bb(e,t,n,r,i,s),n=Cb(),e!==null&&!ys?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,qo(e,t,s)):(Sn&&n&&cb(t),t.flags|=1,es(e,t,r,s),t.child)}function $E(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!_b(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,YI(e,t,i,r,s)):(e=z0(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ah,n(o,r)&&e.ref===t.ref)return qo(e,t,s)}return t.flags|=1,e=Qa(i,r),e.ref=t.ref,e.return=t,t.child=e}function YI(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(ah(i,r)&&e.ref===t.ref)if(ys=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(ys=!0);else return t.lanes=e.lanes,qo(e,t,s)}return Qw(e,t,n,r,s)}function qI(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},an(Au,Ts),Ts|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,an(Au,Ts),Ts|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,an(Au,Ts),Ts|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,an(Au,Ts),Ts|=r;return es(e,t,s,n),t.child}function ZI(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Qw(e,t,n,r,s){var i=bs(n)?wc:Kr.current;return i=sd(t,i),Du(t,s),n=bb(e,t,n,r,i,s),r=Cb(),e!==null&&!ys?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,qo(e,t,s)):(Sn&&r&&cb(t),t.flags|=1,es(e,t,n,s),t.child)}function WE(e,t,n,r,s){if(bs(n)){var i=!0;hm(t)}else i=!1;if(Du(t,s),t.stateNode===null)L0(e,t),GI(t,n,r),qw(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=oi(d):(d=bs(n)?wc:Kr.current,d=sd(t,d));var h=n.getDerivedStateFromProps,g=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&FE(t,o,r,d),ba=!1;var y=t.memoizedState;o.state=y,ym(t,r,o,s),c=t.memoizedState,l!==r||y!==c||vs.current||ba?(typeof h=="function"&&(Yw(t,n,h,r),c=t.memoizedState),(l=ba||BE(t,n,l,r,y,c,d))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,NI(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:wi(t.type,l),o.props=d,g=t.pendingProps,y=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=oi(c):(c=bs(n)?wc:Kr.current,c=sd(t,c));var w=n.getDerivedStateFromProps;(h=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||y!==c)&&FE(t,o,r,c),ba=!1,y=t.memoizedState,o.state=y,ym(t,r,o,s);var S=t.memoizedState;l!==g||y!==S||vs.current||ba?(typeof w=="function"&&(Yw(t,n,w,r),S=t.memoizedState),(d=ba||BE(t,n,d,r,y,S,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=S),o.props=r,o.state=S,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),r=!1)}return Jw(e,t,n,r,i,s)}function Jw(e,t,n,r,s,i){ZI(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&RE(t,n,!1),qo(e,t,i);r=t.stateNode,k7.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=od(t,e.child,null,i),t.child=od(t,null,l,i)):es(e,t,l,i),t.memoizedState=r.state,s&&RE(t,n,!0),t.child}function QI(e){var t=e.stateNode;t.pendingContext?IE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&IE(e,t.context,!1),xb(e,t.containerInfo)}function GE(e,t,n,r,s){return id(),db(s),t.flags|=256,es(e,t,n,r),t.child}var ev={dehydrated:null,treeContext:null,retryLane:0};function tv(e){return{baseLanes:e,cachePool:null,transitions:null}}function JI(e,t,n){var r=t.pendingProps,s=Nn.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),an(Nn,s&1),e===null)return Xw(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ng(o,r,0,null),e=ec(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=tv(n),t.memoizedState=ev,e):Nb(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return I7(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Qa(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Qa(l,i):(i=ec(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?tv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=ev,r}return i=e.child,e=i.sibling,r=Qa(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Nb(e,t){return t=ng({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Up(e,t,n,r){return r!==null&&db(r),od(t,e.child,null,n),e=Nb(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function I7(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=ny(Error(_e(422))),Up(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=ng({mode:"visible",children:r.children},s,0,null),i=ec(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&od(t,e.child,null,o),t.child.memoizedState=tv(o),t.memoizedState=ev,i);if(!(t.mode&1))return Up(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(_e(419)),r=ny(i,r,void 0),Up(e,t,o,r)}if(l=(o&e.childLanes)!==0,ys||l){if(r=gr,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Yo(e,s),Ri(r,e,s,-1))}return Mb(),r=ny(Error(_e(421))),Up(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=H7.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ms=Ka(s.nextSibling),_s=t,Sn=!0,Ni=null,e!==null&&(Ks[Ys++]=zo,Ks[Ys++]=Vo,Ks[Ys++]=vc,zo=e.id,Vo=e.overflow,vc=t),t=Nb(t,r.children),t.flags|=4096,t)}function XE(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Kw(e.return,t,n)}function ry(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function e4(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(es(e,t,r.children,n),r=Nn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&XE(e,n,t);else if(e.tag===19)XE(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(an(Nn,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&wm(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ry(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&wm(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ry(t,!0,n,null,i);break;case"together":ry(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function L0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Cc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(_e(153));if(t.child!==null){for(e=t.child,n=Qa(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Qa(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function R7(e,t,n){switch(t.tag){case 3:QI(t),id();break;case 5:AI(t);break;case 1:bs(t.type)&&hm(t);break;case 4:xb(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;an(gm,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(an(Nn,Nn.current&1),t.flags|=128,null):n&t.child.childLanes?JI(e,t,n):(an(Nn,Nn.current&1),e=qo(e,t,n),e!==null?e.sibling:null);an(Nn,Nn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return e4(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),an(Nn,Nn.current),r)break;return null;case 22:case 23:return t.lanes=0,qI(e,t,n)}return qo(e,t,n)}var t4,nv,n4,r4;t4=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};nv=function(){};n4=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,zl(co.current);var i=null;switch(n){case"input":s=Ew(e,s),r=Ew(e,r),i=[];break;case"select":s=kn({},s,{value:void 0}),r=kn({},r,{value:void 0}),i=[];break;case"textarea":s=Tw(e,s),r=Tw(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=dm)}Iw(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(eh.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(eh.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&mn("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};r4=function(e,t,n,r){n!==r&&(t.flags|=4)};function sf(e,t){if(!Sn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Vr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function M7(e,t,n){var r=t.pendingProps;switch(ub(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vr(t),null;case 1:return bs(t.type)&&fm(),Vr(t),null;case 3:return r=t.stateNode,ad(),yn(vs),yn(Kr),wb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Vp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ni!==null&&(uv(Ni),Ni=null))),nv(e,t),Vr(t),null;case 5:yb(t);var s=zl(fh.current);if(n=t.type,e!==null&&t.stateNode!=null)n4(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(_e(166));return Vr(t),null}if(e=zl(co.current),Vp(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[io]=t,r[uh]=i,e=(t.mode&1)!==0,n){case"dialog":mn("cancel",r),mn("close",r);break;case"iframe":case"object":case"embed":mn("load",r);break;case"video":case"audio":for(s=0;s<vf.length;s++)mn(vf[s],r);break;case"source":mn("error",r);break;case"img":case"image":case"link":mn("error",r),mn("load",r);break;case"details":mn("toggle",r);break;case"input":nE(r,i),mn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},mn("invalid",r);break;case"textarea":sE(r,i),mn("invalid",r)}Iw(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&zp(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&zp(r.textContent,l,e),s=["children",""+l]):eh.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&mn("scroll",r)}switch(n){case"input":_p(r),rE(r,i,!0);break;case"textarea":_p(r),iE(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=dm)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Mk(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[io]=t,e[uh]=r,t4(e,t,!1,!1),t.stateNode=e;e:{switch(o=Rw(n,r),n){case"dialog":mn("cancel",e),mn("close",e),s=r;break;case"iframe":case"object":case"embed":mn("load",e),s=r;break;case"video":case"audio":for(s=0;s<vf.length;s++)mn(vf[s],e);s=r;break;case"source":mn("error",e),s=r;break;case"img":case"image":case"link":mn("error",e),mn("load",e),s=r;break;case"details":mn("toggle",e),s=r;break;case"input":nE(e,r),s=Ew(e,r),mn("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=kn({},r,{value:void 0}),mn("invalid",e);break;case"textarea":sE(e,r),s=Tw(e,r),mn("invalid",e);break;default:s=r}Iw(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Pk(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&_k(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&th(e,c):typeof c=="number"&&th(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(eh.hasOwnProperty(i)?c!=null&&i==="onScroll"&&mn("scroll",e):c!=null&&Y2(e,i,c,o))}switch(n){case"input":_p(e),rE(e,r,!1);break;case"textarea":_p(e),iE(e);break;case"option":r.value!=null&&e.setAttribute("value",""+al(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Mu(e,!!r.multiple,i,!1):r.defaultValue!=null&&Mu(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=dm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Vr(t),null;case 6:if(e&&t.stateNode!=null)r4(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(_e(166));if(n=zl(fh.current),zl(co.current),Vp(t)){if(r=t.stateNode,n=t.memoizedProps,r[io]=t,(i=r.nodeValue!==n)&&(e=_s,e!==null))switch(e.tag){case 3:zp(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&zp(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[io]=t,t.stateNode=r}return Vr(t),null;case 13:if(yn(Nn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Sn&&Ms!==null&&t.mode&1&&!(t.flags&128))bI(),id(),t.flags|=98560,i=!1;else if(i=Vp(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(_e(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(_e(317));i[io]=t}else id(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Vr(t),i=!1}else Ni!==null&&(uv(Ni),Ni=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Nn.current&1?ir===0&&(ir=3):Mb())),t.updateQueue!==null&&(t.flags|=4),Vr(t),null);case 4:return ad(),nv(e,t),e===null&&lh(t.stateNode.containerInfo),Vr(t),null;case 10:return pb(t.type._context),Vr(t),null;case 17:return bs(t.type)&&fm(),Vr(t),null;case 19:if(yn(Nn),i=t.memoizedState,i===null)return Vr(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)sf(i,!1);else{if(ir!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=wm(e),o!==null){for(t.flags|=128,sf(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return an(Nn,Nn.current&1|2),t.child}e=e.sibling}i.tail!==null&&Wn()>cd&&(t.flags|=128,r=!0,sf(i,!1),t.lanes=4194304)}else{if(!r)if(e=wm(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),sf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Sn)return Vr(t),null}else 2*Wn()-i.renderingStartTime>cd&&n!==1073741824&&(t.flags|=128,r=!0,sf(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Wn(),t.sibling=null,n=Nn.current,an(Nn,r?n&1|2:n&1),t):(Vr(t),null);case 22:case 23:return Rb(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ts&1073741824&&(Vr(t),t.subtreeFlags&6&&(t.flags|=8192)):Vr(t),null;case 24:return null;case 25:return null}throw Error(_e(156,t.tag))}function _7(e,t){switch(ub(t),t.tag){case 1:return bs(t.type)&&fm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ad(),yn(vs),yn(Kr),wb(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return yb(t),null;case 13:if(yn(Nn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(_e(340));id()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return yn(Nn),null;case 4:return ad(),null;case 10:return pb(t.type._context),null;case 22:case 23:return Rb(),null;case 24:return null;default:return null}}var $p=!1,$r=!1,O7=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function Nu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){jn(e,t,r)}else n.current=null}function rv(e,t,n){try{n()}catch(r){jn(e,t,r)}}var KE=!1;function P7(e,t){if(zw=lm,e=lI(),lb(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,h=0,g=e,y=null;t:for(;;){for(var w;g!==n||s!==0&&g.nodeType!==3||(l=o+s),g!==i||r!==0&&g.nodeType!==3||(c=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(w=g.firstChild)!==null;)y=g,g=w;for(;;){if(g===e)break t;if(y===n&&++d===s&&(l=o),y===i&&++h===r&&(c=o),(w=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=w}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vw={focusedElem:e,selectionRange:n},lm=!1,Ge=t;Ge!==null;)if(t=Ge,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ge=e;else for(;Ge!==null;){t=Ge;try{var S=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var C=S.memoizedProps,A=S.memoizedState,E=t.stateNode,k=E.getSnapshotBeforeUpdate(t.elementType===t.type?C:wi(t.type,C),A);E.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var I=t.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_e(163))}}catch(M){jn(t,t.return,M)}if(e=t.sibling,e!==null){e.return=t.return,Ge=e;break}Ge=t.return}return S=KE,KE=!1,S}function Ff(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&rv(t,n,i)}s=s.next}while(s!==r)}}function eg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sv(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function s4(e){var t=e.alternate;t!==null&&(e.alternate=null,s4(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[io],delete t[uh],delete t[$w],delete t[g7],delete t[x7])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function i4(e){return e.tag===5||e.tag===3||e.tag===4}function YE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||i4(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function iv(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=dm));else if(r!==4&&(e=e.child,e!==null))for(iv(e,t,n),e=e.sibling;e!==null;)iv(e,t,n),e=e.sibling}function ov(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ov(e,t,n),e=e.sibling;e!==null;)ov(e,t,n),e=e.sibling}var Nr=null,Si=!1;function fa(e,t,n){for(n=n.child;n!==null;)o4(e,t,n),n=n.sibling}function o4(e,t,n){if(lo&&typeof lo.onCommitFiberUnmount=="function")try{lo.onCommitFiberUnmount(G1,n)}catch{}switch(n.tag){case 5:$r||Nu(n,t);case 6:var r=Nr,s=Si;Nr=null,fa(e,t,n),Nr=r,Si=s,Nr!==null&&(Si?(e=Nr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Nr.removeChild(n.stateNode));break;case 18:Nr!==null&&(Si?(e=Nr,n=n.stateNode,e.nodeType===8?qx(e.parentNode,n):e.nodeType===1&&qx(e,n),ih(e)):qx(Nr,n.stateNode));break;case 4:r=Nr,s=Si,Nr=n.stateNode.containerInfo,Si=!0,fa(e,t,n),Nr=r,Si=s;break;case 0:case 11:case 14:case 15:if(!$r&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&rv(n,t,o),s=s.next}while(s!==r)}fa(e,t,n);break;case 1:if(!$r&&(Nu(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){jn(n,t,l)}fa(e,t,n);break;case 21:fa(e,t,n);break;case 22:n.mode&1?($r=(r=$r)||n.memoizedState!==null,fa(e,t,n),$r=r):fa(e,t,n);break;default:fa(e,t,n)}}function qE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new O7),t.forEach(function(r){var s=U7.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function gi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Nr=l.stateNode,Si=!1;break e;case 3:Nr=l.stateNode.containerInfo,Si=!0;break e;case 4:Nr=l.stateNode.containerInfo,Si=!0;break e}l=l.return}if(Nr===null)throw Error(_e(160));o4(i,o,s),Nr=null,Si=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){jn(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)a4(t,e),t=t.sibling}function a4(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gi(t,e),qi(e),r&4){try{Ff(3,e,e.return),eg(3,e)}catch(C){jn(e,e.return,C)}try{Ff(5,e,e.return)}catch(C){jn(e,e.return,C)}}break;case 1:gi(t,e),qi(e),r&512&&n!==null&&Nu(n,n.return);break;case 5:if(gi(t,e),qi(e),r&512&&n!==null&&Nu(n,n.return),e.flags&32){var s=e.stateNode;try{th(s,"")}catch(C){jn(e,e.return,C)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Ik(s,i),Rw(l,o);var d=Rw(l,i);for(o=0;o<c.length;o+=2){var h=c[o],g=c[o+1];h==="style"?Pk(s,g):h==="dangerouslySetInnerHTML"?_k(s,g):h==="children"?th(s,g):Y2(s,h,g,d)}switch(l){case"input":Nw(s,i);break;case"textarea":Rk(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?Mu(s,!!i.multiple,w,!1):y!==!!i.multiple&&(i.defaultValue!=null?Mu(s,!!i.multiple,i.defaultValue,!0):Mu(s,!!i.multiple,i.multiple?[]:"",!1))}s[uh]=i}catch(C){jn(e,e.return,C)}}break;case 6:if(gi(t,e),qi(e),r&4){if(e.stateNode===null)throw Error(_e(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(C){jn(e,e.return,C)}}break;case 3:if(gi(t,e),qi(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ih(t.containerInfo)}catch(C){jn(e,e.return,C)}break;case 4:gi(t,e),qi(e);break;case 13:gi(t,e),qi(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(kb=Wn())),r&4&&qE(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?($r=(d=$r)||h,gi(t,e),$r=d):gi(t,e),qi(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(Ge=e,h=e.child;h!==null;){for(g=Ge=h;Ge!==null;){switch(y=Ge,w=y.child,y.tag){case 0:case 11:case 14:case 15:Ff(4,y,y.return);break;case 1:Nu(y,y.return);var S=y.stateNode;if(typeof S.componentWillUnmount=="function"){r=y,n=y.return;try{t=r,S.props=t.memoizedProps,S.state=t.memoizedState,S.componentWillUnmount()}catch(C){jn(r,n,C)}}break;case 5:Nu(y,y.return);break;case 22:if(y.memoizedState!==null){QE(g);continue}}w!==null?(w.return=y,Ge=w):QE(g)}h=h.sibling}e:for(h=null,g=e;;){if(g.tag===5){if(h===null){h=g;try{s=g.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,c=g.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Ok("display",o))}catch(C){jn(e,e.return,C)}}}else if(g.tag===6){if(h===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(C){jn(e,e.return,C)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;h===g&&(h=null),g=g.return}h===g&&(h=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:gi(t,e),qi(e),r&4&&qE(e);break;case 21:break;default:gi(t,e),qi(e)}}function qi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(i4(n)){var r=n;break e}n=n.return}throw Error(_e(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(th(s,""),r.flags&=-33);var i=YE(e);ov(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=YE(e);iv(e,l,o);break;default:throw Error(_e(161))}}catch(c){jn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function D7(e,t,n){Ge=e,l4(e)}function l4(e,t,n){for(var r=(e.mode&1)!==0;Ge!==null;){var s=Ge,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||$p;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||$r;l=$p;var d=$r;if($p=o,($r=c)&&!d)for(Ge=s;Ge!==null;)o=Ge,c=o.child,o.tag===22&&o.memoizedState!==null?JE(s):c!==null?(c.return=o,Ge=c):JE(s);for(;i!==null;)Ge=i,l4(i),i=i.sibling;Ge=s,$p=l,$r=d}ZE(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ge=i):ZE(e)}}function ZE(e){for(;Ge!==null;){var t=Ge;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:$r||eg(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!$r)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:wi(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&DE(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}DE(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var g=h.dehydrated;g!==null&&ih(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_e(163))}$r||t.flags&512&&sv(t)}catch(y){jn(t,t.return,y)}}if(t===e){Ge=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ge=n;break}Ge=t.return}}function QE(e){for(;Ge!==null;){var t=Ge;if(t===e){Ge=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ge=n;break}Ge=t.return}}function JE(e){for(;Ge!==null;){var t=Ge;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{eg(4,t)}catch(c){jn(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){jn(t,s,c)}}var i=t.return;try{sv(t)}catch(c){jn(t,i,c)}break;case 5:var o=t.return;try{sv(t)}catch(c){jn(t,o,c)}}}catch(c){jn(t,t.return,c)}if(t===e){Ge=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ge=l;break}Ge=t.return}}var j7=Math.ceil,Cm=na.ReactCurrentDispatcher,Ab=na.ReactCurrentOwner,ti=na.ReactCurrentBatchConfig,Lt=0,gr=null,qn=null,Mr=0,Ts=0,Au=pl(0),ir=0,gh=null,Cc=0,tg=0,Tb=0,zf=null,gs=null,kb=0,cd=1/0,Do=null,Sm=!1,av=null,qa=null,Wp=!1,Fa=null,Em=0,Vf=0,lv=null,B0=-1,F0=0;function rs(){return Lt&6?Wn():B0!==-1?B0:B0=Wn()}function Za(e){return e.mode&1?Lt&2&&Mr!==0?Mr&-Mr:w7.transition!==null?(F0===0&&(F0=Gk()),F0):(e=Yt,e!==0||(e=window.event,e=e===void 0?16:Jk(e.type)),e):1}function Ri(e,t,n,r){if(50<Vf)throw Vf=0,lv=null,Error(_e(185));Jh(e,n,r),(!(Lt&2)||e!==gr)&&(e===gr&&(!(Lt&2)&&(tg|=n),ir===4&&ka(e,Mr)),Cs(e,r),n===1&&Lt===0&&!(t.mode&1)&&(cd=Wn()+500,Z1&&ml()))}function Cs(e,t){var n=e.callbackNode;wL(e,t);var r=am(e,e===gr?Mr:0);if(r===0)n!==null&&lE(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&lE(n),t===1)e.tag===0?y7(eN.bind(null,e)):yI(eN.bind(null,e)),p7(function(){!(Lt&6)&&ml()}),n=null;else{switch(Xk(r)){case 1:n=eb;break;case 4:n=$k;break;case 16:n=om;break;case 536870912:n=Wk;break;default:n=om}n=g4(n,c4.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function c4(e,t){if(B0=-1,F0=0,Lt&6)throw Error(_e(327));var n=e.callbackNode;if(ju()&&e.callbackNode!==n)return null;var r=am(e,e===gr?Mr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Nm(e,r);else{t=r;var s=Lt;Lt|=2;var i=d4();(gr!==e||Mr!==t)&&(Do=null,cd=Wn()+500,Jl(e,t));do try{F7();break}catch(l){u4(e,l)}while(!0);hb(),Cm.current=i,Lt=s,qn!==null?t=0:(gr=null,Mr=0,t=ir)}if(t!==0){if(t===2&&(s=Dw(e),s!==0&&(r=s,t=cv(e,s))),t===1)throw n=gh,Jl(e,0),ka(e,r),Cs(e,Wn()),n;if(t===6)ka(e,r);else{if(s=e.current.alternate,!(r&30)&&!L7(s)&&(t=Nm(e,r),t===2&&(i=Dw(e),i!==0&&(r=i,t=cv(e,i))),t===1))throw n=gh,Jl(e,0),ka(e,r),Cs(e,Wn()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(_e(345));case 2:Pl(e,gs,Do);break;case 3:if(ka(e,r),(r&130023424)===r&&(t=kb+500-Wn(),10<t)){if(am(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){rs(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Uw(Pl.bind(null,e,gs,Do),t);break}Pl(e,gs,Do);break;case 4:if(ka(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Ii(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Wn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*j7(r/1960))-r,10<r){e.timeoutHandle=Uw(Pl.bind(null,e,gs,Do),r);break}Pl(e,gs,Do);break;case 5:Pl(e,gs,Do);break;default:throw Error(_e(329))}}}return Cs(e,Wn()),e.callbackNode===n?c4.bind(null,e):null}function cv(e,t){var n=zf;return e.current.memoizedState.isDehydrated&&(Jl(e,t).flags|=256),e=Nm(e,t),e!==2&&(t=gs,gs=n,t!==null&&uv(t)),e}function uv(e){gs===null?gs=e:gs.push.apply(gs,e)}function L7(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Oi(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ka(e,t){for(t&=~Tb,t&=~tg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ii(t),r=1<<n;e[n]=-1,t&=~r}}function eN(e){if(Lt&6)throw Error(_e(327));ju();var t=am(e,0);if(!(t&1))return Cs(e,Wn()),null;var n=Nm(e,t);if(e.tag!==0&&n===2){var r=Dw(e);r!==0&&(t=r,n=cv(e,r))}if(n===1)throw n=gh,Jl(e,0),ka(e,t),Cs(e,Wn()),n;if(n===6)throw Error(_e(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pl(e,gs,Do),Cs(e,Wn()),null}function Ib(e,t){var n=Lt;Lt|=1;try{return e(t)}finally{Lt=n,Lt===0&&(cd=Wn()+500,Z1&&ml())}}function Sc(e){Fa!==null&&Fa.tag===0&&!(Lt&6)&&ju();var t=Lt;Lt|=1;var n=ti.transition,r=Yt;try{if(ti.transition=null,Yt=1,e)return e()}finally{Yt=r,ti.transition=n,Lt=t,!(Lt&6)&&ml()}}function Rb(){Ts=Au.current,yn(Au)}function Jl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,h7(n)),qn!==null)for(n=qn.return;n!==null;){var r=n;switch(ub(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fm();break;case 3:ad(),yn(vs),yn(Kr),wb();break;case 5:yb(r);break;case 4:ad();break;case 13:yn(Nn);break;case 19:yn(Nn);break;case 10:pb(r.type._context);break;case 22:case 23:Rb()}n=n.return}if(gr=e,qn=e=Qa(e.current,null),Mr=Ts=t,ir=0,gh=null,Tb=tg=Cc=0,gs=zf=null,Fl!==null){for(t=0;t<Fl.length;t++)if(n=Fl[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Fl=null}return e}function u4(e,t){do{var n=qn;try{if(hb(),D0.current=bm,vm){for(var r=Tn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}vm=!1}if(bc=0,hr=rr=Tn=null,Bf=!1,hh=0,Ab.current=null,n===null||n.return===null){ir=1,gh=t,qn=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Mr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,g=h.tag;if(!(h.mode&1)&&(g===0||g===11||g===15)){var y=h.alternate;y?(h.updateQueue=y.updateQueue,h.memoizedState=y.memoizedState,h.lanes=y.lanes):(h.updateQueue=null,h.memoizedState=null)}var w=VE(o);if(w!==null){w.flags&=-257,HE(w,o,l,i,t),w.mode&1&&zE(i,d,t),t=w,c=d;var S=t.updateQueue;if(S===null){var C=new Set;C.add(c),t.updateQueue=C}else S.add(c);break e}else{if(!(t&1)){zE(i,d,t),Mb();break e}c=Error(_e(426))}}else if(Sn&&l.mode&1){var A=VE(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),HE(A,o,l,i,t),db(ld(c,l));break e}}i=c=ld(c,l),ir!==4&&(ir=2),zf===null?zf=[i]:zf.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var E=XI(i,c,t);PE(i,E);break e;case 1:l=c;var k=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof k.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(qa===null||!qa.has(I)))){i.flags|=65536,t&=-t,i.lanes|=t;var M=KI(i,l,t);PE(i,M);break e}}i=i.return}while(i!==null)}h4(n)}catch(P){t=P,qn===n&&n!==null&&(qn=n=n.return);continue}break}while(!0)}function d4(){var e=Cm.current;return Cm.current=bm,e===null?bm:e}function Mb(){(ir===0||ir===3||ir===2)&&(ir=4),gr===null||!(Cc&268435455)&&!(tg&268435455)||ka(gr,Mr)}function Nm(e,t){var n=Lt;Lt|=2;var r=d4();(gr!==e||Mr!==t)&&(Do=null,Jl(e,t));do try{B7();break}catch(s){u4(e,s)}while(!0);if(hb(),Lt=n,Cm.current=r,qn!==null)throw Error(_e(261));return gr=null,Mr=0,ir}function B7(){for(;qn!==null;)f4(qn)}function F7(){for(;qn!==null&&!uL();)f4(qn)}function f4(e){var t=m4(e.alternate,e,Ts);e.memoizedProps=e.pendingProps,t===null?h4(e):qn=t,Ab.current=null}function h4(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=_7(n,t),n!==null){n.flags&=32767,qn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ir=6,qn=null;return}}else if(n=M7(n,t,Ts),n!==null){qn=n;return}if(t=t.sibling,t!==null){qn=t;return}qn=t=e}while(t!==null);ir===0&&(ir=5)}function Pl(e,t,n){var r=Yt,s=ti.transition;try{ti.transition=null,Yt=1,z7(e,t,n,r)}finally{ti.transition=s,Yt=r}return null}function z7(e,t,n,r){do ju();while(Fa!==null);if(Lt&6)throw Error(_e(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(_e(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(vL(e,i),e===gr&&(qn=gr=null,Mr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wp||(Wp=!0,g4(om,function(){return ju(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ti.transition,ti.transition=null;var o=Yt;Yt=1;var l=Lt;Lt|=4,Ab.current=null,P7(e,n),a4(n,e),o7(Vw),lm=!!zw,Vw=zw=null,e.current=n,D7(n),dL(),Lt=l,Yt=o,ti.transition=i}else e.current=n;if(Wp&&(Wp=!1,Fa=e,Em=s),i=e.pendingLanes,i===0&&(qa=null),pL(n.stateNode),Cs(e,Wn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Sm)throw Sm=!1,e=av,av=null,e;return Em&1&&e.tag!==0&&ju(),i=e.pendingLanes,i&1?e===lv?Vf++:(Vf=0,lv=e):Vf=0,ml(),null}function ju(){if(Fa!==null){var e=Xk(Em),t=ti.transition,n=Yt;try{if(ti.transition=null,Yt=16>e?16:e,Fa===null)var r=!1;else{if(e=Fa,Fa=null,Em=0,Lt&6)throw Error(_e(331));var s=Lt;for(Lt|=4,Ge=e.current;Ge!==null;){var i=Ge,o=i.child;if(Ge.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Ge=d;Ge!==null;){var h=Ge;switch(h.tag){case 0:case 11:case 15:Ff(8,h,i)}var g=h.child;if(g!==null)g.return=h,Ge=g;else for(;Ge!==null;){h=Ge;var y=h.sibling,w=h.return;if(s4(h),h===d){Ge=null;break}if(y!==null){y.return=w,Ge=y;break}Ge=w}}}var S=i.alternate;if(S!==null){var C=S.child;if(C!==null){S.child=null;do{var A=C.sibling;C.sibling=null,C=A}while(C!==null)}}Ge=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ge=o;else e:for(;Ge!==null;){if(i=Ge,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ff(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,Ge=E;break e}Ge=i.return}}var k=e.current;for(Ge=k;Ge!==null;){o=Ge;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,Ge=I;else e:for(o=k;Ge!==null;){if(l=Ge,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:eg(9,l)}}catch(P){jn(l,l.return,P)}if(l===o){Ge=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,Ge=M;break e}Ge=l.return}}if(Lt=s,ml(),lo&&typeof lo.onPostCommitFiberRoot=="function")try{lo.onPostCommitFiberRoot(G1,e)}catch{}r=!0}return r}finally{Yt=n,ti.transition=t}}return!1}function tN(e,t,n){t=ld(n,t),t=XI(e,t,1),e=Ya(e,t,1),t=rs(),e!==null&&(Jh(e,1,t),Cs(e,t))}function jn(e,t,n){if(e.tag===3)tN(e,e,n);else for(;t!==null;){if(t.tag===3){tN(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qa===null||!qa.has(r))){e=ld(n,e),e=KI(t,e,1),t=Ya(t,e,1),e=rs(),t!==null&&(Jh(t,1,e),Cs(t,e));break}}t=t.return}}function V7(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=rs(),e.pingedLanes|=e.suspendedLanes&n,gr===e&&(Mr&n)===n&&(ir===4||ir===3&&(Mr&130023424)===Mr&&500>Wn()-kb?Jl(e,0):Tb|=n),Cs(e,t)}function p4(e,t){t===0&&(e.mode&1?(t=Dp,Dp<<=1,!(Dp&130023424)&&(Dp=4194304)):t=1);var n=rs();e=Yo(e,t),e!==null&&(Jh(e,t,n),Cs(e,n))}function H7(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),p4(e,n)}function U7(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(_e(314))}r!==null&&r.delete(t),p4(e,n)}var m4;m4=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||vs.current)ys=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ys=!1,R7(e,t,n);ys=!!(e.flags&131072)}else ys=!1,Sn&&t.flags&1048576&&wI(t,mm,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;L0(e,t),e=t.pendingProps;var s=sd(t,Kr.current);Du(t,n),s=bb(null,t,r,e,s,n);var i=Cb();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,bs(r)?(i=!0,hm(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,gb(t),s.updater=J1,t.stateNode=s,s._reactInternals=t,qw(t,r,e,n),t=Jw(null,t,r,!0,i,n)):(t.tag=0,Sn&&i&&cb(t),es(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(L0(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=W7(r),e=wi(r,e),s){case 0:t=Qw(null,t,r,e,n);break e;case 1:t=WE(null,t,r,e,n);break e;case 11:t=UE(null,t,r,e,n);break e;case 14:t=$E(null,t,r,wi(r.type,e),n);break e}throw Error(_e(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:wi(r,s),Qw(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:wi(r,s),WE(e,t,r,s,n);case 3:e:{if(QI(t),e===null)throw Error(_e(387));r=t.pendingProps,i=t.memoizedState,s=i.element,NI(e,t),ym(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ld(Error(_e(423)),t),t=GE(e,t,r,n,s);break e}else if(r!==s){s=ld(Error(_e(424)),t),t=GE(e,t,r,n,s);break e}else for(Ms=Ka(t.stateNode.containerInfo.firstChild),_s=t,Sn=!0,Ni=null,n=SI(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(id(),r===s){t=qo(e,t,n);break e}es(e,t,r,n)}t=t.child}return t;case 5:return AI(t),e===null&&Xw(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Hw(r,s)?o=null:i!==null&&Hw(r,i)&&(t.flags|=32),ZI(e,t),es(e,t,o,n),t.child;case 6:return e===null&&Xw(t),null;case 13:return JI(e,t,n);case 4:return xb(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=od(t,null,r,n):es(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:wi(r,s),UE(e,t,r,s,n);case 7:return es(e,t,t.pendingProps,n),t.child;case 8:return es(e,t,t.pendingProps.children,n),t.child;case 12:return es(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,an(gm,r._currentValue),r._currentValue=o,i!==null)if(Oi(i.value,o)){if(i.children===s.children&&!vs.current){t=qo(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=$o(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Kw(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(_e(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Kw(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}es(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Du(t,n),s=oi(s),r=r(s),t.flags|=1,es(e,t,r,n),t.child;case 14:return r=t.type,s=wi(r,t.pendingProps),s=wi(r.type,s),$E(e,t,r,s,n);case 15:return YI(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:wi(r,s),L0(e,t),t.tag=1,bs(r)?(e=!0,hm(t)):e=!1,Du(t,n),GI(t,r,s),qw(t,r,s,n),Jw(null,t,r,!0,e,n);case 19:return e4(e,t,n);case 22:return qI(e,t,n)}throw Error(_e(156,t.tag))};function g4(e,t){return Uk(e,t)}function $7(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qs(e,t,n,r){return new $7(e,t,n,r)}function _b(e){return e=e.prototype,!(!e||!e.isReactComponent)}function W7(e){if(typeof e=="function")return _b(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Z2)return 11;if(e===Q2)return 14}return 2}function Qa(e,t){var n=e.alternate;return n===null?(n=Qs(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function z0(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")_b(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case gu:return ec(n.children,s,i,t);case q2:o=8,s|=8;break;case vw:return e=Qs(12,n,t,s|2),e.elementType=vw,e.lanes=i,e;case bw:return e=Qs(13,n,t,s),e.elementType=bw,e.lanes=i,e;case Cw:return e=Qs(19,n,t,s),e.elementType=Cw,e.lanes=i,e;case Ak:return ng(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ek:o=10;break e;case Nk:o=9;break e;case Z2:o=11;break e;case Q2:o=14;break e;case va:o=16,r=null;break e}throw Error(_e(130,e==null?e:typeof e,""))}return t=Qs(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function ec(e,t,n,r){return e=Qs(7,e,r,t),e.lanes=n,e}function ng(e,t,n,r){return e=Qs(22,e,r,t),e.elementType=Ak,e.lanes=n,e.stateNode={isHidden:!1},e}function sy(e,t,n){return e=Qs(6,e,null,t),e.lanes=n,e}function iy(e,t,n){return t=Qs(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function G7(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fx(0),this.expirationTimes=Fx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fx(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ob(e,t,n,r,s,i,o,l,c){return e=new G7(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Qs(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gb(i),e}function X7(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function x4(e){if(!e)return ll;e=e._reactInternals;e:{if(Fc(e)!==e||e.tag!==1)throw Error(_e(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(bs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(_e(171))}if(e.tag===1){var n=e.type;if(bs(n))return xI(e,n,t)}return t}function y4(e,t,n,r,s,i,o,l,c){return e=Ob(n,r,!0,e,s,i,o,l,c),e.context=x4(null),n=e.current,r=rs(),s=Za(n),i=$o(r,s),i.callback=t??null,Ya(n,i,s),e.current.lanes=s,Jh(e,s,r),Cs(e,r),e}function rg(e,t,n,r){var s=t.current,i=rs(),o=Za(s);return n=x4(n),t.context===null?t.context=n:t.pendingContext=n,t=$o(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ya(s,t,o),e!==null&&(Ri(e,s,o,i),P0(e,s,o)),o}function Am(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Pb(e,t){nN(e,t),(e=e.alternate)&&nN(e,t)}function K7(){return null}var w4=typeof reportError=="function"?reportError:function(e){console.error(e)};function Db(e){this._internalRoot=e}sg.prototype.render=Db.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(_e(409));rg(e,t,null,null)};sg.prototype.unmount=Db.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Sc(function(){rg(null,e,null,null)}),t[Ko]=null}};function sg(e){this._internalRoot=e}sg.prototype.unstable_scheduleHydration=function(e){if(e){var t=qk();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ta.length&&t!==0&&t<Ta[n].priority;n++);Ta.splice(n,0,e),n===0&&Qk(e)}};function jb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ig(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rN(){}function Y7(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Am(o);i.call(d)}}var o=y4(t,r,e,0,null,!1,!1,"",rN);return e._reactRootContainer=o,e[Ko]=o.current,lh(e.nodeType===8?e.parentNode:e),Sc(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Am(c);l.call(d)}}var c=Ob(e,0,!1,null,null,!1,!1,"",rN);return e._reactRootContainer=c,e[Ko]=c.current,lh(e.nodeType===8?e.parentNode:e),Sc(function(){rg(t,c,n,r)}),c}function og(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Am(o);l.call(c)}}rg(t,o,e,s)}else o=Y7(n,t,e,s,r);return Am(o)}Kk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=wf(t.pendingLanes);n!==0&&(tb(t,n|1),Cs(t,Wn()),!(Lt&6)&&(cd=Wn()+500,ml()))}break;case 13:Sc(function(){var r=Yo(e,1);if(r!==null){var s=rs();Ri(r,e,1,s)}}),Pb(e,1)}};nb=function(e){if(e.tag===13){var t=Yo(e,134217728);if(t!==null){var n=rs();Ri(t,e,134217728,n)}Pb(e,134217728)}};Yk=function(e){if(e.tag===13){var t=Za(e),n=Yo(e,t);if(n!==null){var r=rs();Ri(n,e,t,r)}Pb(e,t)}};qk=function(){return Yt};Zk=function(e,t){var n=Yt;try{return Yt=e,t()}finally{Yt=n}};_w=function(e,t,n){switch(t){case"input":if(Nw(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=q1(r);if(!s)throw Error(_e(90));kk(r),Nw(r,s)}}}break;case"textarea":Rk(e,n);break;case"select":t=n.value,t!=null&&Mu(e,!!n.multiple,t,!1)}};Lk=Ib;Bk=Sc;var q7={usingClientEntryPoint:!1,Events:[tp,vu,q1,Dk,jk,Ib]},of={findFiberByHostInstance:Bl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Z7={bundleType:of.bundleType,version:of.version,rendererPackageName:of.rendererPackageName,rendererConfig:of.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:na.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Vk(e),e===null?null:e.stateNode},findFiberByHostInstance:of.findFiberByHostInstance||K7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gp.isDisabled&&Gp.supportsFiber)try{G1=Gp.inject(Z7),lo=Gp}catch{}}Ls.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q7;Ls.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jb(t))throw Error(_e(200));return X7(e,t,null,n)};Ls.createRoot=function(e,t){if(!jb(e))throw Error(_e(299));var n=!1,r="",s=w4;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ob(e,1,!1,null,null,n,!1,r,s),e[Ko]=t.current,lh(e.nodeType===8?e.parentNode:e),new Db(t)};Ls.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(_e(188)):(e=Object.keys(e).join(","),Error(_e(268,e)));return e=Vk(t),e=e===null?null:e.stateNode,e};Ls.flushSync=function(e){return Sc(e)};Ls.hydrate=function(e,t,n){if(!ig(t))throw Error(_e(200));return og(null,e,t,!0,n)};Ls.hydrateRoot=function(e,t,n){if(!jb(e))throw Error(_e(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=w4;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=y4(t,null,e,1,n??null,s,!1,i,o),e[Ko]=t.current,lh(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new sg(t)};Ls.render=function(e,t,n){if(!ig(t))throw Error(_e(200));return og(null,e,t,!1,n)};Ls.unmountComponentAtNode=function(e){if(!ig(e))throw Error(_e(40));return e._reactRootContainer?(Sc(function(){og(null,null,e,!1,function(){e._reactRootContainer=null,e[Ko]=null})}),!0):!1};Ls.unstable_batchedUpdates=Ib;Ls.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ig(n))throw Error(_e(200));if(e==null||e._reactInternals===void 0)throw Error(_e(38));return og(e,t,n,!1,r)};Ls.version="18.3.1-next-f1338f8080-20240426";function v4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(v4)}catch(e){console.error(e)}}v4(),vk.exports=Ls;var zc=vk.exports;const Lb=Zh(zc);var b4,sN=zc;b4=sN.createRoot,sN.hydrateRoot;const Q7=1,J7=1e6;let oy=0;function e9(){return oy=(oy+1)%Number.MAX_SAFE_INTEGER,oy.toString()}const ay=new Map,iN=e=>{if(ay.has(e))return;const t=setTimeout(()=>{ay.delete(e),Hf({type:"REMOVE_TOAST",toastId:e})},J7);ay.set(e,t)},t9=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Q7)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?iN(n):e.toasts.forEach(r=>{iN(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},V0=[];let H0={toasts:[]};function Hf(e){H0=t9(H0,e),V0.forEach(t=>{t(H0)})}function n9({...e}){const t=e9(),n=s=>Hf({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>Hf({type:"DISMISS_TOAST",toastId:t});return Hf({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function r9(){const[e,t]=N.useState(H0);return N.useEffect(()=>(V0.push(t),()=>{const n=V0.indexOf(t);n>-1&&V0.splice(n,1)}),[e]),{...e,toast:n9,dismiss:n=>Hf({type:"DISMISS_TOAST",toastId:n})}}function ze(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function oN(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function C4(...e){return t=>{let n=!1;const r=e.map(s=>{const i=oN(s,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():oN(e[s],null)}}}}function dt(...e){return N.useCallback(C4(...e),e)}function s9(e,t){const n=N.createContext(t),r=i=>{const{children:o,...l}=i,c=N.useMemo(()=>l,Object.values(l));return p.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function s(i){const o=N.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,s]}function cs(e,t=[]){let n=[];function r(i,o){const l=N.createContext(o),c=n.length;n=[...n,o];const d=g=>{var E;const{scope:y,children:w,...S}=g,C=((E=y==null?void 0:y[e])==null?void 0:E[c])||l,A=N.useMemo(()=>S,Object.values(S));return p.jsx(C.Provider,{value:A,children:w})};d.displayName=i+"Provider";function h(g,y){var C;const w=((C=y==null?void 0:y[e])==null?void 0:C[c])||l,S=N.useContext(w);if(S)return S;if(o!==void 0)return o;throw new Error(`\`${g}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(o=>N.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return N.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,i9(s,...t)]}function i9(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const g=c(i)[`__scope${d}`];return{...l,...g}},{});return N.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Ec(e){const t=a9(e),n=N.forwardRef((r,s)=>{const{children:i,...o}=r,l=N.Children.toArray(i),c=l.find(l9);if(c){const d=c.props.children,h=l.map(g=>g===c?N.Children.count(d)>1?N.Children.only(null):N.isValidElement(d)?d.props.children:null:g);return p.jsx(t,{...o,ref:s,children:N.isValidElement(d)?N.cloneElement(d,void 0,h):null})}return p.jsx(t,{...o,ref:s,children:i})});return n.displayName=`${e}.Slot`,n}var o9=Ec("Slot");function a9(e){const t=N.forwardRef((n,r)=>{const{children:s,...i}=n;if(N.isValidElement(s)){const o=u9(s),l=c9(i,s.props);return s.type!==N.Fragment&&(l.ref=r?C4(r,o):o),N.cloneElement(s,l)}return N.Children.count(s)>1?N.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var S4=Symbol("radix.slottable");function E4(e){const t=({children:n})=>p.jsx(p.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=S4,t}function l9(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===S4}function c9(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}function u9(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function ag(e){const t=e+"CollectionProvider",[n,r]=cs(t),[s,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=C=>{const{scope:A,children:E}=C,k=oe.useRef(null),I=oe.useRef(new Map).current;return p.jsx(s,{scope:A,itemMap:I,collectionRef:k,children:E})};o.displayName=t;const l=e+"CollectionSlot",c=Ec(l),d=oe.forwardRef((C,A)=>{const{scope:E,children:k}=C,I=i(l,E),M=dt(A,I.collectionRef);return p.jsx(c,{ref:M,children:k})});d.displayName=l;const h=e+"CollectionItemSlot",g="data-radix-collection-item",y=Ec(h),w=oe.forwardRef((C,A)=>{const{scope:E,children:k,...I}=C,M=oe.useRef(null),P=dt(A,M),j=i(h,E);return oe.useEffect(()=>(j.itemMap.set(M,{ref:M,...I}),()=>void j.itemMap.delete(M))),p.jsx(y,{[g]:"",ref:P,children:k})});w.displayName=h;function S(C){const A=i(e+"CollectionConsumer",C);return oe.useCallback(()=>{const k=A.collectionRef.current;if(!k)return[];const I=Array.from(k.querySelectorAll(`[${g}]`));return Array.from(A.itemMap.values()).sort((j,_)=>I.indexOf(j.ref.current)-I.indexOf(_.ref.current))},[A.collectionRef,A.itemMap])}return[{Provider:o,Slot:d,ItemSlot:w},S,r]}var d9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ye=d9.reduce((e,t)=>{const n=Ec(`Primitive.${t}`),r=N.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function N4(e,t){e&&zc.flushSync(()=>e.dispatchEvent(t))}function sr(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function f9(e,t=globalThis==null?void 0:globalThis.document){const n=sr(e);N.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var h9="DismissableLayer",dv="dismissableLayer.update",p9="dismissableLayer.pointerDownOutside",m9="dismissableLayer.focusOutside",aN,A4=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Pd=N.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=N.useContext(A4),[h,g]=N.useState(null),y=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=N.useState({}),S=dt(t,_=>g(_)),C=Array.from(d.layers),[A]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),E=C.indexOf(A),k=h?C.indexOf(h):-1,I=d.layersWithOutsidePointerEventsDisabled.size>0,M=k>=E,P=x9(_=>{const D=_.target,L=[...d.branches].some(U=>U.contains(D));!M||L||(s==null||s(_),o==null||o(_),_.defaultPrevented||l==null||l())},y),j=y9(_=>{const D=_.target;[...d.branches].some(U=>U.contains(D))||(i==null||i(_),o==null||o(_),_.defaultPrevented||l==null||l())},y);return f9(_=>{k===d.layers.size-1&&(r==null||r(_),!_.defaultPrevented&&l&&(_.preventDefault(),l()))},y),N.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(aN=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),lN(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=aN)}},[h,y,n,d]),N.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),lN())},[h,d]),N.useEffect(()=>{const _=()=>w({});return document.addEventListener(dv,_),()=>document.removeEventListener(dv,_)},[]),p.jsx(Ye.div,{...c,ref:S,style:{pointerEvents:I?M?"auto":"none":void 0,...e.style},onFocusCapture:ze(e.onFocusCapture,j.onFocusCapture),onBlurCapture:ze(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:ze(e.onPointerDownCapture,P.onPointerDownCapture)})});Pd.displayName=h9;var g9="DismissableLayerBranch",T4=N.forwardRef((e,t)=>{const n=N.useContext(A4),r=N.useRef(null),s=dt(t,r);return N.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),p.jsx(Ye.div,{...e,ref:s})});T4.displayName=g9;function x9(e,t=globalThis==null?void 0:globalThis.document){const n=sr(e),r=N.useRef(!1),s=N.useRef(()=>{});return N.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){k4(p9,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function y9(e,t=globalThis==null?void 0:globalThis.document){const n=sr(e),r=N.useRef(!1);return N.useEffect(()=>{const s=i=>{i.target&&!r.current&&k4(m9,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function lN(){const e=new CustomEvent(dv);document.dispatchEvent(e)}function k4(e,t,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?N4(s,i):s.dispatchEvent(i)}var w9=Pd,v9=T4,ar=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},b9="Portal",rp=N.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[s,i]=N.useState(!1);ar(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?Lb.createPortal(p.jsx(Ye.div,{...r,ref:t}),o):null});rp.displayName=b9;function C9(e,t){return N.useReducer((n,r)=>t[n][r]??n,e)}var us=e=>{const{present:t,children:n}=e,r=S9(t),s=typeof n=="function"?n({present:r.isPresent}):N.Children.only(n),i=dt(r.ref,E9(s));return typeof n=="function"||r.isPresent?N.cloneElement(s,{ref:i}):null};us.displayName="Presence";function S9(e){const[t,n]=N.useState(),r=N.useRef(null),s=N.useRef(e),i=N.useRef("none"),o=e?"mounted":"unmounted",[l,c]=C9(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const d=Xp(r.current);i.current=l==="mounted"?d:"none"},[l]),ar(()=>{const d=r.current,h=s.current;if(h!==e){const y=i.current,w=Xp(d);e?c("MOUNT"):w==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&y!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),ar(()=>{if(t){let d;const h=t.ownerDocument.defaultView??window,g=w=>{const C=Xp(r.current).includes(w.animationName);if(w.target===t&&C&&(c("ANIMATION_END"),!s.current)){const A=t.style.animationFillMode;t.style.animationFillMode="forwards",d=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=A)})}},y=w=>{w.target===t&&(i.current=Xp(r.current))};return t.addEventListener("animationstart",y),t.addEventListener("animationcancel",g),t.addEventListener("animationend",g),()=>{h.clearTimeout(d),t.removeEventListener("animationstart",y),t.removeEventListener("animationcancel",g),t.removeEventListener("animationend",g)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:N.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function Xp(e){return(e==null?void 0:e.animationName)||"none"}function E9(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var N9=W1[" useInsertionEffect ".trim().toString()]||ar;function li({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,i,o]=A9({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const h=N.useRef(e!==void 0);N.useEffect(()=>{const g=h.current;g!==l&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const d=N.useCallback(h=>{var g;if(l){const y=T9(h)?h(e):h;y!==e&&((g=o.current)==null||g.call(o,y))}else i(h)},[l,e,i,o]);return[c,d]}function A9({defaultProp:e,onChange:t}){const[n,r]=N.useState(e),s=N.useRef(n),i=N.useRef(t);return N9(()=>{i.current=t},[t]),N.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function T9(e){return typeof e=="function"}var I4=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),k9="VisuallyHidden",lg=N.forwardRef((e,t)=>p.jsx(Ye.span,{...e,ref:t,style:{...I4,...e.style}}));lg.displayName=k9;var I9=lg,Bb="ToastProvider",[Fb,R9,M9]=ag("Toast"),[R4,jce]=cs("Toast",[M9]),[_9,cg]=R4(Bb),M4=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=e,[l,c]=N.useState(null),[d,h]=N.useState(0),g=N.useRef(!1),y=N.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Bb}\`. Expected non-empty \`string\`.`),p.jsx(Fb.Provider,{scope:t,children:p.jsx(_9,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:N.useCallback(()=>h(w=>w+1),[]),onToastRemove:N.useCallback(()=>h(w=>w-1),[]),isFocusedToastEscapeKeyDownRef:g,isClosePausedRef:y,children:o})})};M4.displayName=Bb;var _4="ToastViewport",O9=["F8"],fv="toast.viewportPause",hv="toast.viewportResume",O4=N.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=O9,label:s="Notifications ({hotkey})",...i}=e,o=cg(_4,n),l=R9(n),c=N.useRef(null),d=N.useRef(null),h=N.useRef(null),g=N.useRef(null),y=dt(t,g,o.onViewportChange),w=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=o.toastCount>0;N.useEffect(()=>{const A=E=>{var I;r.length!==0&&r.every(M=>E[M]||E.code===M)&&((I=g.current)==null||I.focus())};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[r]),N.useEffect(()=>{const A=c.current,E=g.current;if(S&&A&&E){const k=()=>{if(!o.isClosePausedRef.current){const j=new CustomEvent(fv);E.dispatchEvent(j),o.isClosePausedRef.current=!0}},I=()=>{if(o.isClosePausedRef.current){const j=new CustomEvent(hv);E.dispatchEvent(j),o.isClosePausedRef.current=!1}},M=j=>{!A.contains(j.relatedTarget)&&I()},P=()=>{A.contains(document.activeElement)||I()};return A.addEventListener("focusin",k),A.addEventListener("focusout",M),A.addEventListener("pointermove",k),A.addEventListener("pointerleave",P),window.addEventListener("blur",k),window.addEventListener("focus",I),()=>{A.removeEventListener("focusin",k),A.removeEventListener("focusout",M),A.removeEventListener("pointermove",k),A.removeEventListener("pointerleave",P),window.removeEventListener("blur",k),window.removeEventListener("focus",I)}}},[S,o.isClosePausedRef]);const C=N.useCallback(({tabbingDirection:A})=>{const k=l().map(I=>{const M=I.ref.current,P=[M,...G9(M)];return A==="forwards"?P:P.reverse()});return(A==="forwards"?k.reverse():k).flat()},[l]);return N.useEffect(()=>{const A=g.current;if(A){const E=k=>{var P,j,_;const I=k.altKey||k.ctrlKey||k.metaKey;if(k.key==="Tab"&&!I){const D=document.activeElement,L=k.shiftKey;if(k.target===A&&L){(P=d.current)==null||P.focus();return}const q=C({tabbingDirection:L?"backwards":"forwards"}),re=q.findIndex(z=>z===D);ly(q.slice(re+1))?k.preventDefault():L?(j=d.current)==null||j.focus():(_=h.current)==null||_.focus()}};return A.addEventListener("keydown",E),()=>A.removeEventListener("keydown",E)}},[l,C]),p.jsxs(v9,{ref:c,role:"region","aria-label":s.replace("{hotkey}",w),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&p.jsx(pv,{ref:d,onFocusFromOutsideViewport:()=>{const A=C({tabbingDirection:"forwards"});ly(A)}}),p.jsx(Fb.Slot,{scope:n,children:p.jsx(Ye.ol,{tabIndex:-1,...i,ref:y})}),S&&p.jsx(pv,{ref:h,onFocusFromOutsideViewport:()=>{const A=C({tabbingDirection:"backwards"});ly(A)}})]})});O4.displayName=_4;var P4="ToastFocusProxy",pv=N.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,i=cg(P4,n);return p.jsx(lg,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&r()}})});pv.displayName=P4;var sp="Toast",P9="toast.swipeStart",D9="toast.swipeMove",j9="toast.swipeCancel",L9="toast.swipeEnd",D4=N.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=e,[l,c]=li({prop:r,defaultProp:s??!0,onChange:i,caller:sp});return p.jsx(us,{present:n||l,children:p.jsx(z9,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:sr(e.onPause),onResume:sr(e.onResume),onSwipeStart:ze(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ze(e.onSwipeMove,d=>{const{x:h,y:g}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${g}px`)}),onSwipeCancel:ze(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ze(e.onSwipeEnd,d=>{const{x:h,y:g}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${g}px`),c(!1)})})})});D4.displayName=sp;var[B9,F9]=R4(sp,{onClose(){}}),z9=N.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:h,onSwipeMove:g,onSwipeCancel:y,onSwipeEnd:w,...S}=e,C=cg(sp,n),[A,E]=N.useState(null),k=dt(t,z=>E(z)),I=N.useRef(null),M=N.useRef(null),P=s||C.duration,j=N.useRef(0),_=N.useRef(P),D=N.useRef(0),{onToastAdd:L,onToastRemove:U}=C,K=sr(()=>{var H;(A==null?void 0:A.contains(document.activeElement))&&((H=C.viewport)==null||H.focus()),o()}),q=N.useCallback(z=>{!z||z===1/0||(window.clearTimeout(D.current),j.current=new Date().getTime(),D.current=window.setTimeout(K,z))},[K]);N.useEffect(()=>{const z=C.viewport;if(z){const H=()=>{q(_.current),d==null||d()},Y=()=>{const X=new Date().getTime()-j.current;_.current=_.current-X,window.clearTimeout(D.current),c==null||c()};return z.addEventListener(fv,Y),z.addEventListener(hv,H),()=>{z.removeEventListener(fv,Y),z.removeEventListener(hv,H)}}},[C.viewport,P,c,d,q]),N.useEffect(()=>{i&&!C.isClosePausedRef.current&&q(P)},[i,P,C.isClosePausedRef,q]),N.useEffect(()=>(L(),()=>U()),[L,U]);const re=N.useMemo(()=>A?H4(A):null,[A]);return C.viewport?p.jsxs(p.Fragment,{children:[re&&p.jsx(V9,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:re}),p.jsx(B9,{scope:n,onClose:K,children:zc.createPortal(p.jsx(Fb.ItemSlot,{scope:n,children:p.jsx(w9,{asChild:!0,onEscapeKeyDown:ze(l,()=>{C.isFocusedToastEscapeKeyDownRef.current||K(),C.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(Ye.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":C.swipeDirection,...S,ref:k,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ze(e.onKeyDown,z=>{z.key==="Escape"&&(l==null||l(z.nativeEvent),z.nativeEvent.defaultPrevented||(C.isFocusedToastEscapeKeyDownRef.current=!0,K()))}),onPointerDown:ze(e.onPointerDown,z=>{z.button===0&&(I.current={x:z.clientX,y:z.clientY})}),onPointerMove:ze(e.onPointerMove,z=>{if(!I.current)return;const H=z.clientX-I.current.x,Y=z.clientY-I.current.y,X=!!M.current,W=["left","right"].includes(C.swipeDirection),V=["left","up"].includes(C.swipeDirection)?Math.min:Math.max,ee=W?V(0,H):0,ae=W?0:V(0,Y),se=z.pointerType==="touch"?10:2,G={x:ee,y:ae},Q={originalEvent:z,delta:G};X?(M.current=G,Kp(D9,g,Q,{discrete:!1})):cN(G,C.swipeDirection,se)?(M.current=G,Kp(P9,h,Q,{discrete:!1}),z.target.setPointerCapture(z.pointerId)):(Math.abs(H)>se||Math.abs(Y)>se)&&(I.current=null)}),onPointerUp:ze(e.onPointerUp,z=>{const H=M.current,Y=z.target;if(Y.hasPointerCapture(z.pointerId)&&Y.releasePointerCapture(z.pointerId),M.current=null,I.current=null,H){const X=z.currentTarget,W={originalEvent:z,delta:H};cN(H,C.swipeDirection,C.swipeThreshold)?Kp(L9,w,W,{discrete:!0}):Kp(j9,y,W,{discrete:!0}),X.addEventListener("click",V=>V.preventDefault(),{once:!0})}})})})}),C.viewport)})]}):null}),V9=e=>{const{__scopeToast:t,children:n,...r}=e,s=cg(sp,t),[i,o]=N.useState(!1),[l,c]=N.useState(!1);return $9(()=>o(!0)),N.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:p.jsx(rp,{asChild:!0,children:p.jsx(lg,{...r,children:i&&p.jsxs(p.Fragment,{children:[s.label," ",n]})})})},H9="ToastTitle",j4=N.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return p.jsx(Ye.div,{...r,ref:t})});j4.displayName=H9;var U9="ToastDescription",L4=N.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return p.jsx(Ye.div,{...r,ref:t})});L4.displayName=U9;var B4="ToastAction",F4=N.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?p.jsx(V4,{altText:n,asChild:!0,children:p.jsx(zb,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${B4}\`. Expected non-empty \`string\`.`),null)});F4.displayName=B4;var z4="ToastClose",zb=N.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=F9(z4,n);return p.jsx(V4,{asChild:!0,children:p.jsx(Ye.button,{type:"button",...r,ref:t,onClick:ze(e.onClick,s.onClose)})})});zb.displayName=z4;var V4=N.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return p.jsx(Ye.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function H4(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),W9(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...H4(r))}}),t}function Kp(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?N4(s,i):s.dispatchEvent(i)}var cN=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),i=r>s;return t==="left"||t==="right"?i&&r>n:!i&&s>n};function $9(e=()=>{}){const t=sr(e);ar(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function W9(e){return e.nodeType===e.ELEMENT_NODE}function G9(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function ly(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var X9=M4,U4=O4,$4=D4,W4=j4,G4=L4,X4=F4,K4=zb;function Y4(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Y4(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function q4(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Y4(e))&&(r&&(r+=" "),r+=t);return r}const uN=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,dN=q4,Dd=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return dN(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(d=>{const h=n==null?void 0:n[d],g=i==null?void 0:i[d];if(h===null)return null;const y=uN(h)||uN(g);return s[d][y]}),l=n&&Object.entries(n).reduce((d,h)=>{let[g,y]=h;return y===void 0||(d[g]=y),d},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:g,className:y,...w}=h;return Object.entries(w).every(S=>{let[C,A]=S;return Array.isArray(A)?A.includes({...i,...l}[C]):{...i,...l}[C]===A})?[...d,g,y]:d},[]);return dN(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Z4=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Y9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>N.createElement("svg",{ref:c,...Y9,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Z4("lucide",s),...l},[...o.map(([d,h])=>N.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(e,t)=>{const n=N.forwardRef(({className:r,...s},i)=>N.createElement(q9,{ref:i,iconNode:t,className:Z4(`lucide-${K9(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z9=Be("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q9=Be("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=Be("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=Be("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=Be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=Be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=Be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=Be("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=Be("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=Be("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=Be("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=Be("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=Be("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=Be("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=Be("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=Be("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=Be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=Be("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=Be("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=Be("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=Be("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=Be("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=Be("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=Be("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=Be("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=Be("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=Be("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=Be("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=Be("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=Be("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=Be("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=Be("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=Be("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=Be("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=Be("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=Be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=Be("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=Be("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=Be("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=Be("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=Be("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=Be("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=Be("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=Be("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=Be("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=Be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=Be("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=Be("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=Be("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=Be("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=Be("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=Be("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=Be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=Be("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=Be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=Be("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=Be("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=Be("Skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=Be("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=Be("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=Be("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=Be("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=Be("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=Be("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=Be("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=Be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=Be("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=Be("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=Be("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=Be("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=Be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=Be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=Be("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=Be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=Be("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),$b="-",DB=e=>{const t=LB(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split($b);return l[0]===""&&l.length!==1&&l.shift(),uR(l,t)||jB(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},uR=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?uR(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join($b);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},yN=/^\[(.+)\]$/,jB=e=>{if(yN.test(e)){const t=yN.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},LB=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return FB(Object.entries(e.classGroups),n).forEach(([i,o])=>{vv(o,r,i,t)}),r},vv=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:wN(t,s);i.classGroupId=n;return}if(typeof s=="function"){if(BB(s)){vv(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{vv(o,wN(t,i),n,r)})})},wN=(e,t)=>{let n=e;return t.split($b).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},BB=e=>e.isThemeGetter,FB=(e,t)=>t?e.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[n,s]}):e,zB=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},dR="!",VB=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],i=t.length,o=l=>{const c=[];let d=0,h=0,g;for(let A=0;A<l.length;A++){let E=l[A];if(d===0){if(E===s&&(r||l.slice(A,A+i)===t)){c.push(l.slice(h,A)),h=A+i;continue}if(E==="/"){g=A;continue}}E==="["?d++:E==="]"&&d--}const y=c.length===0?l:l.substring(h),w=y.startsWith(dR),S=w?y.substring(1):y,C=g&&g>h?g-h:void 0;return{modifiers:c,hasImportantModifier:w,baseClassName:S,maybePostfixModifierPosition:C}};return n?l=>n({className:l,parseClassName:o}):o},HB=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},UB=e=>({cache:zB(e.cacheSize),parseClassName:VB(e),...DB(e)}),$B=/\s+/,WB=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,i=[],o=e.trim().split($B);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:h,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:w}=n(d);let S=!!w,C=r(S?y.substring(0,w):y);if(!C){if(!S){l=d+(l.length>0?" "+l:l);continue}if(C=r(y),!C){l=d+(l.length>0?" "+l:l);continue}S=!1}const A=HB(h).join(":"),E=g?A+dR:A,k=E+C;if(i.includes(k))continue;i.push(k);const I=s(C,S);for(let M=0;M<I.length;++M){const P=I[M];i.push(E+P)}l=d+(l.length>0?" "+l:l)}return l};function GB(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=fR(t))&&(r&&(r+=" "),r+=n);return r}const fR=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=fR(e[r]))&&(n&&(n+=" "),n+=t);return n};function XB(e,...t){let n,r,s,i=o;function o(c){const d=t.reduce((h,g)=>g(h),e());return n=UB(d),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const d=r(c);if(d)return d;const h=WB(c,n);return s(c,h),h}return function(){return i(GB.apply(null,arguments))}}const pn=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},hR=/^\[(?:([a-z-]+):)?(.+)\]$/i,KB=/^\d+\/\d+$/,YB=new Set(["px","full","screen"]),qB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ZB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,QB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,JB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,eF=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,To=e=>Lu(e)||YB.has(e)||KB.test(e),ha=e=>jd(e,"length",lF),Lu=e=>!!e&&!Number.isNaN(Number(e)),uy=e=>jd(e,"number",Lu),af=e=>!!e&&Number.isInteger(Number(e)),tF=e=>e.endsWith("%")&&Lu(e.slice(0,-1)),wt=e=>hR.test(e),pa=e=>qB.test(e),nF=new Set(["length","size","percentage"]),rF=e=>jd(e,nF,pR),sF=e=>jd(e,"position",pR),iF=new Set(["image","url"]),oF=e=>jd(e,iF,uF),aF=e=>jd(e,"",cF),lf=()=>!0,jd=(e,t,n)=>{const r=hR.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},lF=e=>ZB.test(e)&&!QB.test(e),pR=()=>!1,cF=e=>JB.test(e),uF=e=>eF.test(e),dF=()=>{const e=pn("colors"),t=pn("spacing"),n=pn("blur"),r=pn("brightness"),s=pn("borderColor"),i=pn("borderRadius"),o=pn("borderSpacing"),l=pn("borderWidth"),c=pn("contrast"),d=pn("grayscale"),h=pn("hueRotate"),g=pn("invert"),y=pn("gap"),w=pn("gradientColorStops"),S=pn("gradientColorStopPositions"),C=pn("inset"),A=pn("margin"),E=pn("opacity"),k=pn("padding"),I=pn("saturate"),M=pn("scale"),P=pn("sepia"),j=pn("skew"),_=pn("space"),D=pn("translate"),L=()=>["auto","contain","none"],U=()=>["auto","hidden","clip","visible","scroll"],K=()=>["auto",wt,t],q=()=>[wt,t],re=()=>["",To,ha],z=()=>["auto",Lu,wt],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",wt],ee=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ae=()=>[Lu,wt];return{cacheSize:500,separator:":",theme:{colors:[lf],spacing:[To,ha],blur:["none","",pa,wt],brightness:ae(),borderColor:[e],borderRadius:["none","","full",pa,wt],borderSpacing:q(),borderWidth:re(),contrast:ae(),grayscale:V(),hueRotate:ae(),invert:V(),gap:q(),gradientColorStops:[e],gradientColorStopPositions:[tF,ha],inset:K(),margin:K(),opacity:ae(),padding:q(),saturate:ae(),scale:ae(),sepia:V(),skew:ae(),space:q(),translate:q()},classGroups:{aspect:[{aspect:["auto","square","video",wt]}],container:["container"],columns:[{columns:[pa]}],"break-after":[{"break-after":ee()}],"break-before":[{"break-before":ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),wt]}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[C]}],"inset-x":[{"inset-x":[C]}],"inset-y":[{"inset-y":[C]}],start:[{start:[C]}],end:[{end:[C]}],top:[{top:[C]}],right:[{right:[C]}],bottom:[{bottom:[C]}],left:[{left:[C]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",af,wt]}],basis:[{basis:K()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",wt]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",af,wt]}],"grid-cols":[{"grid-cols":[lf]}],"col-start-end":[{col:["auto",{span:["full",af,wt]},wt]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[lf]}],"row-start-end":[{row:["auto",{span:[af,wt]},wt]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",wt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",wt]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...W()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...W(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...W(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[k]}],px:[{px:[k]}],py:[{py:[k]}],ps:[{ps:[k]}],pe:[{pe:[k]}],pt:[{pt:[k]}],pr:[{pr:[k]}],pb:[{pb:[k]}],pl:[{pl:[k]}],m:[{m:[A]}],mx:[{mx:[A]}],my:[{my:[A]}],ms:[{ms:[A]}],me:[{me:[A]}],mt:[{mt:[A]}],mr:[{mr:[A]}],mb:[{mb:[A]}],ml:[{ml:[A]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",wt,t]}],"min-w":[{"min-w":[wt,t,"min","max","fit"]}],"max-w":[{"max-w":[wt,t,"none","full","min","max","fit","prose",{screen:[pa]},pa]}],h:[{h:[wt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[wt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[wt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[wt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",pa,ha]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",uy]}],"font-family":[{font:[lf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",wt]}],"line-clamp":[{"line-clamp":["none",Lu,uy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",To,wt]}],"list-image":[{"list-image":["none",wt]}],"list-style-type":[{list:["none","disc","decimal",wt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",To,ha]}],"underline-offset":[{"underline-offset":["auto",To,wt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",wt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",wt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),sF]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",rF]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},oF]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:Y()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[To,wt]}],"outline-w":[{outline:[To,ha]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:re()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[To,ha]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",pa,aF]}],"shadow-color":[{shadow:[lf]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",pa,wt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[g]}],saturate:[{saturate:[I]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[I]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",wt]}],duration:[{duration:ae()}],ease:[{ease:["linear","in","out","in-out",wt]}],delay:[{delay:ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",wt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[M]}],"scale-x":[{"scale-x":[M]}],"scale-y":[{"scale-y":[M]}],rotate:[{rotate:[af,wt]}],"translate-x":[{"translate-x":[D]}],"translate-y":[{"translate-y":[D]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",wt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",wt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":q()}],"scroll-mx":[{"scroll-mx":q()}],"scroll-my":[{"scroll-my":q()}],"scroll-ms":[{"scroll-ms":q()}],"scroll-me":[{"scroll-me":q()}],"scroll-mt":[{"scroll-mt":q()}],"scroll-mr":[{"scroll-mr":q()}],"scroll-mb":[{"scroll-mb":q()}],"scroll-ml":[{"scroll-ml":q()}],"scroll-p":[{"scroll-p":q()}],"scroll-px":[{"scroll-px":q()}],"scroll-py":[{"scroll-py":q()}],"scroll-ps":[{"scroll-ps":q()}],"scroll-pe":[{"scroll-pe":q()}],"scroll-pt":[{"scroll-pt":q()}],"scroll-pr":[{"scroll-pr":q()}],"scroll-pb":[{"scroll-pb":q()}],"scroll-pl":[{"scroll-pl":q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",wt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[To,ha,uy]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},fF=XB(dF);function Xe(...e){return fF(q4(e))}const hF=X9,mR=N.forwardRef(({className:e,...t},n)=>p.jsx(U4,{ref:n,className:Xe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));mR.displayName=U4.displayName;const pF=Dd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),gR=N.forwardRef(({className:e,variant:t,...n},r)=>p.jsx($4,{ref:r,className:Xe(pF({variant:t}),e),...n}));gR.displayName=$4.displayName;const mF=N.forwardRef(({className:e,...t},n)=>p.jsx(X4,{ref:n,className:Xe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));mF.displayName=X4.displayName;const xR=N.forwardRef(({className:e,...t},n)=>p.jsx(K4,{ref:n,className:Xe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:p.jsx(hg,{className:"h-4 w-4"})}));xR.displayName=K4.displayName;const yR=N.forwardRef(({className:e,...t},n)=>p.jsx(W4,{ref:n,className:Xe("text-sm font-semibold",e),...t}));yR.displayName=W4.displayName;const wR=N.forwardRef(({className:e,...t},n)=>p.jsx(G4,{ref:n,className:Xe("text-sm opacity-90",e),...t}));wR.displayName=G4.displayName;function gF(){const{toasts:e}=r9();return p.jsxs(hF,{children:[e.map(function({id:t,title:n,description:r,action:s,...i}){return p.jsxs(gR,{...i,children:[p.jsxs("div",{className:"grid gap-1",children:[n&&p.jsx(yR,{children:n}),r&&p.jsx(wR,{children:r})]}),s,p.jsx(xR,{})]},t)}),p.jsx(mR,{})]})}var vN=["light","dark"],xF="(prefers-color-scheme: dark)",yF=N.createContext(void 0),wF={setTheme:e=>{},themes:[]},vF=()=>{var e;return(e=N.useContext(yF))!=null?e:wF};N.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let d=i==="system",h=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(S=>`'${S}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,g=s?vN.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",y=(S,C=!1,A=!0)=>{let E=o?o[S]:S,k=C?S+"|| ''":`'${E}'`,I="";return s&&A&&!C&&vN.includes(S)&&(I+=`d.style.colorScheme = '${S}';`),n==="class"?C||E?I+=`c.add(${k})`:I+="null":E&&(I+=`d[s](n,${k})`),I},w=e?`!function(){${h}${y(e)}}()`:r?`!function(){try{${h}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${xF}',m=window.matchMedia(t);if(m.media!==t||m.matches){${y("dark")}}else{${y("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${y(o?"x[e]":"e",!0)}}${d?"":"else{"+y(i,!1,!1)+"}"}${g}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${y(o?"x[e]":"e",!0)}}else{${y(i,!1,!1)};}${g}}catch(t){}}();`;return N.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:w}})});var bF=e=>{switch(e){case"success":return EF;case"info":return AF;case"warning":return NF;case"error":return TF;default:return null}},CF=Array(12).fill(0),SF=({visible:e,className:t})=>oe.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},oe.createElement("div",{className:"sonner-spinner"},CF.map((n,r)=>oe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),EF=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),NF=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),AF=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),TF=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),kF=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},oe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),oe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),IF=()=>{let[e,t]=oe.useState(document.hidden);return oe.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},bv=1,RF=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:bv++,i=this.toasts.find(l=>l.id===s),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:n}),{...l,...e,id:s,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),s=n!==void 0,i,o=r.then(async c=>{if(i=["resolve",c],oe.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(_F(c)&&!c.ok){s=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:d,description:h})}else if(t.success!==void 0){s=!1;let d=typeof t.success=="function"?await t.success(c):t.success,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:d,description:h})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){s=!1;let d=typeof t.error=="function"?await t.error(c):t.error,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:d,description:h})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,d)=>o.then(()=>i[0]==="reject"?d(i[1]):c(i[1])).catch(d));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||bv++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ms=new RF,MF=(e,t)=>{let n=(t==null?void 0:t.id)||bv++;return ms.addToast({title:e,...t,id:n}),n},_F=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",OF=MF,PF=()=>ms.toasts,DF=()=>ms.getActiveToasts();Object.assign(OF,{success:ms.success,info:ms.info,warning:ms.warning,error:ms.error,custom:ms.custom,message:ms.message,promise:ms.promise,dismiss:ms.dismiss,loading:ms.loading},{getHistory:PF,getToasts:DF});function jF(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}jF(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Yp(e){return e.label!==void 0}var LF=3,BF="32px",FF="16px",bN=4e3,zF=356,VF=14,HF=20,UF=200;function xi(...e){return e.filter(Boolean).join(" ")}function $F(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var WF=e=>{var t,n,r,s,i,o,l,c,d,h,g;let{invert:y,toast:w,unstyled:S,interacting:C,setHeights:A,visibleToasts:E,heights:k,index:I,toasts:M,expanded:P,removeToast:j,defaultRichColors:_,closeButton:D,style:L,cancelButtonStyle:U,actionButtonStyle:K,className:q="",descriptionClassName:re="",duration:z,position:H,gap:Y,loadingIcon:X,expandByDefault:W,classNames:V,icons:ee,closeButtonAriaLabel:ae="Close toast",pauseWhenPageIsHidden:se}=e,[G,Q]=oe.useState(null),[te,ne]=oe.useState(null),[ie,de]=oe.useState(!1),[pe,ye]=oe.useState(!1),[Se,De]=oe.useState(!1),[xe,Ue]=oe.useState(!1),[nt,et]=oe.useState(!1),[je,be]=oe.useState(0),[$e,qt]=oe.useState(0),Te=oe.useRef(w.duration||z||bN),Ce=oe.useRef(null),Ee=oe.useRef(null),Ke=I===0,ot=I+1<=E,rt=w.type,Bt=w.dismissible!==!1,vn=w.className||"",Zt=w.descriptionClassName||"",Dr=oe.useMemo(()=>k.findIndex(Qe=>Qe.toastId===w.id)||0,[k,w.id]),Gt=oe.useMemo(()=>{var Qe;return(Qe=w.closeButton)!=null?Qe:D},[w.closeButton,D]),ur=oe.useMemo(()=>w.duration||z||bN,[w.duration,z]),Ot=oe.useRef(0),Ie=oe.useRef(0),_t=oe.useRef(0),ut=oe.useRef(null),[Nt,qr]=H.split("-"),Vs=oe.useMemo(()=>k.reduce((Qe,It,ft)=>ft>=Dr?Qe:Qe+It.height,0),[k,Dr]),Es=IF(),gt=w.invert||y,Ut=rt==="loading";Ie.current=oe.useMemo(()=>Dr*Y+Vs,[Dr,Vs]),oe.useEffect(()=>{Te.current=ur},[ur]),oe.useEffect(()=>{de(!0)},[]),oe.useEffect(()=>{let Qe=Ee.current;if(Qe){let It=Qe.getBoundingClientRect().height;return qt(It),A(ft=>[{toastId:w.id,height:It,position:w.position},...ft]),()=>A(ft=>ft.filter(Rn=>Rn.toastId!==w.id))}},[A,w.id]),oe.useLayoutEffect(()=>{if(!ie)return;let Qe=Ee.current,It=Qe.style.height;Qe.style.height="auto";let ft=Qe.getBoundingClientRect().height;Qe.style.height=It,qt(ft),A(Rn=>Rn.find(Pt=>Pt.toastId===w.id)?Rn.map(Pt=>Pt.toastId===w.id?{...Pt,height:ft}:Pt):[{toastId:w.id,height:ft,position:w.position},...Rn])},[ie,w.title,w.description,A,w.id]);let cn=oe.useCallback(()=>{ye(!0),be(Ie.current),A(Qe=>Qe.filter(It=>It.toastId!==w.id)),setTimeout(()=>{j(w)},UF)},[w,j,A,Ie]);oe.useEffect(()=>{if(w.promise&&rt==="loading"||w.duration===1/0||w.type==="loading")return;let Qe;return P||C||se&&Es?(()=>{if(_t.current<Ot.current){let It=new Date().getTime()-Ot.current;Te.current=Te.current-It}_t.current=new Date().getTime()})():Te.current!==1/0&&(Ot.current=new Date().getTime(),Qe=setTimeout(()=>{var It;(It=w.onAutoClose)==null||It.call(w,w),cn()},Te.current)),()=>clearTimeout(Qe)},[P,C,w,rt,se,Es,cn]),oe.useEffect(()=>{w.delete&&cn()},[cn,w.delete]);function Vi(){var Qe,It,ft;return ee!=null&&ee.loading?oe.createElement("div",{className:xi(V==null?void 0:V.loader,(Qe=w==null?void 0:w.classNames)==null?void 0:Qe.loader,"sonner-loader"),"data-visible":rt==="loading"},ee.loading):X?oe.createElement("div",{className:xi(V==null?void 0:V.loader,(It=w==null?void 0:w.classNames)==null?void 0:It.loader,"sonner-loader"),"data-visible":rt==="loading"},X):oe.createElement(SF,{className:xi(V==null?void 0:V.loader,(ft=w==null?void 0:w.classNames)==null?void 0:ft.loader),visible:rt==="loading"})}return oe.createElement("li",{tabIndex:0,ref:Ee,className:xi(q,vn,V==null?void 0:V.toast,(t=w==null?void 0:w.classNames)==null?void 0:t.toast,V==null?void 0:V.default,V==null?void 0:V[rt],(n=w==null?void 0:w.classNames)==null?void 0:n[rt]),"data-sonner-toast":"","data-rich-colors":(r=w.richColors)!=null?r:_,"data-styled":!(w.jsx||w.unstyled||S),"data-mounted":ie,"data-promise":!!w.promise,"data-swiped":nt,"data-removed":pe,"data-visible":ot,"data-y-position":Nt,"data-x-position":qr,"data-index":I,"data-front":Ke,"data-swiping":Se,"data-dismissible":Bt,"data-type":rt,"data-invert":gt,"data-swipe-out":xe,"data-swipe-direction":te,"data-expanded":!!(P||W&&ie),style:{"--index":I,"--toasts-before":I,"--z-index":M.length-I,"--offset":`${pe?je:Ie.current}px`,"--initial-height":W?"auto":`${$e}px`,...L,...w.style},onDragEnd:()=>{De(!1),Q(null),ut.current=null},onPointerDown:Qe=>{Ut||!Bt||(Ce.current=new Date,be(Ie.current),Qe.target.setPointerCapture(Qe.pointerId),Qe.target.tagName!=="BUTTON"&&(De(!0),ut.current={x:Qe.clientX,y:Qe.clientY}))},onPointerUp:()=>{var Qe,It,ft,Rn;if(xe||!Bt)return;ut.current=null;let Pt=Number(((Qe=Ee.current)==null?void 0:Qe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),un=Number(((It=Ee.current)==null?void 0:It.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Zr=new Date().getTime()-((ft=Ce.current)==null?void 0:ft.getTime()),dn=G==="x"?Pt:un,jr=Math.abs(dn)/Zr;if(Math.abs(dn)>=HF||jr>.11){be(Ie.current),(Rn=w.onDismiss)==null||Rn.call(w,w),ne(G==="x"?Pt>0?"right":"left":un>0?"down":"up"),cn(),Ue(!0),et(!1);return}De(!1),Q(null)},onPointerMove:Qe=>{var It,ft,Rn,Pt;if(!ut.current||!Bt||((It=window.getSelection())==null?void 0:It.toString().length)>0)return;let un=Qe.clientY-ut.current.y,Zr=Qe.clientX-ut.current.x,dn=(ft=e.swipeDirections)!=null?ft:$F(H);!G&&(Math.abs(Zr)>1||Math.abs(un)>1)&&Q(Math.abs(Zr)>Math.abs(un)?"x":"y");let jr={x:0,y:0};G==="y"?(dn.includes("top")||dn.includes("bottom"))&&(dn.includes("top")&&un<0||dn.includes("bottom")&&un>0)&&(jr.y=un):G==="x"&&(dn.includes("left")||dn.includes("right"))&&(dn.includes("left")&&Zr<0||dn.includes("right")&&Zr>0)&&(jr.x=Zr),(Math.abs(jr.x)>0||Math.abs(jr.y)>0)&&et(!0),(Rn=Ee.current)==null||Rn.style.setProperty("--swipe-amount-x",`${jr.x}px`),(Pt=Ee.current)==null||Pt.style.setProperty("--swipe-amount-y",`${jr.y}px`)}},Gt&&!w.jsx?oe.createElement("button",{"aria-label":ae,"data-disabled":Ut,"data-close-button":!0,onClick:Ut||!Bt?()=>{}:()=>{var Qe;cn(),(Qe=w.onDismiss)==null||Qe.call(w,w)},className:xi(V==null?void 0:V.closeButton,(s=w==null?void 0:w.classNames)==null?void 0:s.closeButton)},(i=ee==null?void 0:ee.close)!=null?i:kF):null,w.jsx||N.isValidElement(w.title)?w.jsx?w.jsx:typeof w.title=="function"?w.title():w.title:oe.createElement(oe.Fragment,null,rt||w.icon||w.promise?oe.createElement("div",{"data-icon":"",className:xi(V==null?void 0:V.icon,(o=w==null?void 0:w.classNames)==null?void 0:o.icon)},w.promise||w.type==="loading"&&!w.icon?w.icon||Vi():null,w.type!=="loading"?w.icon||(ee==null?void 0:ee[rt])||bF(rt):null):null,oe.createElement("div",{"data-content":"",className:xi(V==null?void 0:V.content,(l=w==null?void 0:w.classNames)==null?void 0:l.content)},oe.createElement("div",{"data-title":"",className:xi(V==null?void 0:V.title,(c=w==null?void 0:w.classNames)==null?void 0:c.title)},typeof w.title=="function"?w.title():w.title),w.description?oe.createElement("div",{"data-description":"",className:xi(re,Zt,V==null?void 0:V.description,(d=w==null?void 0:w.classNames)==null?void 0:d.description)},typeof w.description=="function"?w.description():w.description):null),N.isValidElement(w.cancel)?w.cancel:w.cancel&&Yp(w.cancel)?oe.createElement("button",{"data-button":!0,"data-cancel":!0,style:w.cancelButtonStyle||U,onClick:Qe=>{var It,ft;Yp(w.cancel)&&Bt&&((ft=(It=w.cancel).onClick)==null||ft.call(It,Qe),cn())},className:xi(V==null?void 0:V.cancelButton,(h=w==null?void 0:w.classNames)==null?void 0:h.cancelButton)},w.cancel.label):null,N.isValidElement(w.action)?w.action:w.action&&Yp(w.action)?oe.createElement("button",{"data-button":!0,"data-action":!0,style:w.actionButtonStyle||K,onClick:Qe=>{var It,ft;Yp(w.action)&&((ft=(It=w.action).onClick)==null||ft.call(It,Qe),!Qe.defaultPrevented&&cn())},className:xi(V==null?void 0:V.actionButton,(g=w==null?void 0:w.classNames)==null?void 0:g.actionButton)},w.action.label):null))};function CN(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function GF(e,t){let n={};return[e,t].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",l=i?FF:BF;function c(d){["top","right","bottom","left"].forEach(h=>{n[`${o}-${h}`]=typeof d=="number"?`${d}px`:d})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(d=>{r[d]===void 0?n[`${o}-${d}`]=l:n[`${o}-${d}`]=typeof r[d]=="number"?`${r[d]}px`:r[d]}):c(l)}),n}var XF=N.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:d,theme:h="light",richColors:g,duration:y,style:w,visibleToasts:S=LF,toastOptions:C,dir:A=CN(),gap:E=VF,loadingIcon:k,icons:I,containerAriaLabel:M="Notifications",pauseWhenPageIsHidden:P}=e,[j,_]=oe.useState([]),D=oe.useMemo(()=>Array.from(new Set([r].concat(j.filter(se=>se.position).map(se=>se.position)))),[j,r]),[L,U]=oe.useState([]),[K,q]=oe.useState(!1),[re,z]=oe.useState(!1),[H,Y]=oe.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),X=oe.useRef(null),W=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=oe.useRef(null),ee=oe.useRef(!1),ae=oe.useCallback(se=>{_(G=>{var Q;return(Q=G.find(te=>te.id===se.id))!=null&&Q.delete||ms.dismiss(se.id),G.filter(({id:te})=>te!==se.id)})},[]);return oe.useEffect(()=>ms.subscribe(se=>{if(se.dismiss){_(G=>G.map(Q=>Q.id===se.id?{...Q,delete:!0}:Q));return}setTimeout(()=>{Lb.flushSync(()=>{_(G=>{let Q=G.findIndex(te=>te.id===se.id);return Q!==-1?[...G.slice(0,Q),{...G[Q],...se},...G.slice(Q+1)]:[se,...G]})})})}),[]),oe.useEffect(()=>{if(h!=="system"){Y(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Y("dark"):Y("light")),typeof window>"u")return;let se=window.matchMedia("(prefers-color-scheme: dark)");try{se.addEventListener("change",({matches:G})=>{Y(G?"dark":"light")})}catch{se.addListener(({matches:Q})=>{try{Y(Q?"dark":"light")}catch(te){console.error(te)}})}},[h]),oe.useEffect(()=>{j.length<=1&&q(!1)},[j]),oe.useEffect(()=>{let se=G=>{var Q,te;s.every(ne=>G[ne]||G.code===ne)&&(q(!0),(Q=X.current)==null||Q.focus()),G.code==="Escape"&&(document.activeElement===X.current||(te=X.current)!=null&&te.contains(document.activeElement))&&q(!1)};return document.addEventListener("keydown",se),()=>document.removeEventListener("keydown",se)},[s]),oe.useEffect(()=>{if(X.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,ee.current=!1)}},[X.current]),oe.createElement("section",{ref:t,"aria-label":`${M} ${W}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},D.map((se,G)=>{var Q;let[te,ne]=se.split("-");return j.length?oe.createElement("ol",{key:se,dir:A==="auto"?CN():A,tabIndex:-1,ref:X,className:l,"data-sonner-toaster":!0,"data-theme":H,"data-y-position":te,"data-lifted":K&&j.length>1&&!i,"data-x-position":ne,style:{"--front-toast-height":`${((Q=L[0])==null?void 0:Q.height)||0}px`,"--width":`${zF}px`,"--gap":`${E}px`,...w,...GF(c,d)},onBlur:ie=>{ee.current&&!ie.currentTarget.contains(ie.relatedTarget)&&(ee.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:ie=>{ie.target instanceof HTMLElement&&ie.target.dataset.dismissible==="false"||ee.current||(ee.current=!0,V.current=ie.relatedTarget)},onMouseEnter:()=>q(!0),onMouseMove:()=>q(!0),onMouseLeave:()=>{re||q(!1)},onDragEnd:()=>q(!1),onPointerDown:ie=>{ie.target instanceof HTMLElement&&ie.target.dataset.dismissible==="false"||z(!0)},onPointerUp:()=>z(!1)},j.filter(ie=>!ie.position&&G===0||ie.position===se).map((ie,de)=>{var pe,ye;return oe.createElement(WF,{key:ie.id,icons:I,index:de,toast:ie,defaultRichColors:g,duration:(pe=C==null?void 0:C.duration)!=null?pe:y,className:C==null?void 0:C.className,descriptionClassName:C==null?void 0:C.descriptionClassName,invert:n,visibleToasts:S,closeButton:(ye=C==null?void 0:C.closeButton)!=null?ye:o,interacting:re,position:se,style:C==null?void 0:C.style,unstyled:C==null?void 0:C.unstyled,classNames:C==null?void 0:C.classNames,cancelButtonStyle:C==null?void 0:C.cancelButtonStyle,actionButtonStyle:C==null?void 0:C.actionButtonStyle,removeToast:ae,toasts:j.filter(Se=>Se.position==ie.position),heights:L.filter(Se=>Se.position==ie.position),setHeights:U,expandByDefault:i,gap:E,loadingIcon:k,expanded:K,pauseWhenPageIsHidden:P,swipeDirections:e.swipeDirections})})):null}))});const KF=({...e})=>{const{theme:t="system"}=vF();return p.jsx(XF,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var YF=W1[" useId ".trim().toString()]||(()=>{}),qF=0;function Mi(e){const[t,n]=N.useState(YF());return ar(()=>{e||n(r=>r??String(qF++))},[e]),e||(t?`radix-${t}`:"")}const ZF=["top","right","bottom","left"],cl=Math.min,Is=Math.max,Im=Math.round,qp=Math.floor,uo=e=>({x:e,y:e}),QF={left:"right",right:"left",bottom:"top",top:"bottom"},JF={start:"end",end:"start"};function Cv(e,t,n){return Is(e,cl(t,n))}function Zo(e,t){return typeof e=="function"?e(t):e}function Qo(e){return e.split("-")[0]}function Ld(e){return e.split("-")[1]}function Wb(e){return e==="x"?"y":"x"}function Gb(e){return e==="y"?"height":"width"}const ez=new Set(["top","bottom"]);function ao(e){return ez.has(Qo(e))?"y":"x"}function Xb(e){return Wb(ao(e))}function tz(e,t,n){n===void 0&&(n=!1);const r=Ld(e),s=Xb(e),i=Gb(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Rm(o)),[o,Rm(o)]}function nz(e){const t=Rm(e);return[Sv(e),t,Sv(t)]}function Sv(e){return e.replace(/start|end/g,t=>JF[t])}const SN=["left","right"],EN=["right","left"],rz=["top","bottom"],sz=["bottom","top"];function iz(e,t,n){switch(e){case"top":case"bottom":return n?t?EN:SN:t?SN:EN;case"left":case"right":return t?rz:sz;default:return[]}}function oz(e,t,n,r){const s=Ld(e);let i=iz(Qo(e),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(Sv)))),i}function Rm(e){return e.replace(/left|right|bottom|top/g,t=>QF[t])}function az(e){return{top:0,right:0,bottom:0,left:0,...e}}function vR(e){return typeof e!="number"?az(e):{top:e,right:e,bottom:e,left:e}}function Mm(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function NN(e,t,n){let{reference:r,floating:s}=e;const i=ao(t),o=Xb(t),l=Gb(o),c=Qo(t),d=i==="y",h=r.x+r.width/2-s.width/2,g=r.y+r.height/2-s.height/2,y=r[l]/2-s[l]/2;let w;switch(c){case"top":w={x:h,y:r.y-s.height};break;case"bottom":w={x:h,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:g};break;case"left":w={x:r.x-s.width,y:g};break;default:w={x:r.x,y:r.y}}switch(Ld(t)){case"start":w[o]-=y*(n&&d?-1:1);break;case"end":w[o]+=y*(n&&d?-1:1);break}return w}const lz=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:h,y:g}=NN(d,r,c),y=r,w={},S=0;for(let C=0;C<l.length;C++){const{name:A,fn:E}=l[C],{x:k,y:I,data:M,reset:P}=await E({x:h,y:g,initialPlacement:r,placement:y,strategy:s,middlewareData:w,rects:d,platform:o,elements:{reference:e,floating:t}});h=k??h,g=I??g,w={...w,[A]:{...w[A],...M}},P&&S<=50&&(S++,typeof P=="object"&&(P.placement&&(y=P.placement),P.rects&&(d=P.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):P.rects),{x:h,y:g}=NN(d,y,c)),C=-1)}return{x:h,y:g,placement:y,strategy:s,middlewareData:w}};async function xh(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:g="floating",altBoundary:y=!1,padding:w=0}=Zo(t,e),S=vR(w),A=l[y?g==="floating"?"reference":"floating":g],E=Mm(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(A)))==null||n?A:A.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),k=g==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,I=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),M=await(i.isElement==null?void 0:i.isElement(I))?await(i.getScale==null?void 0:i.getScale(I))||{x:1,y:1}:{x:1,y:1},P=Mm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:k,offsetParent:I,strategy:c}):k);return{top:(E.top-P.top+S.top)/M.y,bottom:(P.bottom-E.bottom+S.bottom)/M.y,left:(E.left-P.left+S.left)/M.x,right:(P.right-E.right+S.right)/M.x}}const cz=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:h=0}=Zo(e,t)||{};if(d==null)return{};const g=vR(h),y={x:n,y:r},w=Xb(s),S=Gb(w),C=await o.getDimensions(d),A=w==="y",E=A?"top":"left",k=A?"bottom":"right",I=A?"clientHeight":"clientWidth",M=i.reference[S]+i.reference[w]-y[w]-i.floating[S],P=y[w]-i.reference[w],j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let _=j?j[I]:0;(!_||!await(o.isElement==null?void 0:o.isElement(j)))&&(_=l.floating[I]||i.floating[S]);const D=M/2-P/2,L=_/2-C[S]/2-1,U=cl(g[E],L),K=cl(g[k],L),q=U,re=_-C[S]-K,z=_/2-C[S]/2+D,H=Cv(q,z,re),Y=!c.arrow&&Ld(s)!=null&&z!==H&&i.reference[S]/2-(z<q?U:K)-C[S]/2<0,X=Y?z<q?z-q:z-re:0;return{[w]:y[w]+X,data:{[w]:H,centerOffset:z-H-X,...Y&&{alignmentOffset:X}},reset:Y}}}),uz=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:h=!0,crossAxis:g=!0,fallbackPlacements:y,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:C=!0,...A}=Zo(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=Qo(s),k=ao(l),I=Qo(l)===l,M=await(c.isRTL==null?void 0:c.isRTL(d.floating)),P=y||(I||!C?[Rm(l)]:nz(l)),j=S!=="none";!y&&j&&P.push(...oz(l,C,S,M));const _=[l,...P],D=await xh(t,A),L=[];let U=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&L.push(D[E]),g){const z=tz(s,o,M);L.push(D[z[0]],D[z[1]])}if(U=[...U,{placement:s,overflows:L}],!L.every(z=>z<=0)){var K,q;const z=(((K=i.flip)==null?void 0:K.index)||0)+1,H=_[z];if(H&&(!(g==="alignment"?k!==ao(H):!1)||U.every(W=>W.overflows[0]>0&&ao(W.placement)===k)))return{data:{index:z,overflows:U},reset:{placement:H}};let Y=(q=U.filter(X=>X.overflows[0]<=0).sort((X,W)=>X.overflows[1]-W.overflows[1])[0])==null?void 0:q.placement;if(!Y)switch(w){case"bestFit":{var re;const X=(re=U.filter(W=>{if(j){const V=ao(W.placement);return V===k||V==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(V=>V>0).reduce((V,ee)=>V+ee,0)]).sort((W,V)=>W[1]-V[1])[0])==null?void 0:re[0];X&&(Y=X);break}case"initialPlacement":Y=l;break}if(s!==Y)return{reset:{placement:Y}}}return{}}}};function AN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function TN(e){return ZF.some(t=>e[t]>=0)}const dz=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Zo(e,t);switch(r){case"referenceHidden":{const i=await xh(t,{...s,elementContext:"reference"}),o=AN(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:TN(o)}}}case"escaped":{const i=await xh(t,{...s,altBoundary:!0}),o=AN(i,n.floating);return{data:{escapedOffsets:o,escaped:TN(o)}}}default:return{}}}}},bR=new Set(["left","top"]);async function fz(e,t){const{placement:n,platform:r,elements:s}=e,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Qo(n),l=Ld(n),c=ao(n)==="y",d=bR.has(o)?-1:1,h=i&&c?-1:1,g=Zo(t,e);let{mainAxis:y,crossAxis:w,alignmentAxis:S}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return l&&typeof S=="number"&&(w=l==="end"?S*-1:S),c?{x:w*h,y:y*d}:{x:y*d,y:w*h}}const hz=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=t,c=await fz(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},pz=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:A=>{let{x:E,y:k}=A;return{x:E,y:k}}},...c}=Zo(e,t),d={x:n,y:r},h=await xh(t,c),g=ao(Qo(s)),y=Wb(g);let w=d[y],S=d[g];if(i){const A=y==="y"?"top":"left",E=y==="y"?"bottom":"right",k=w+h[A],I=w-h[E];w=Cv(k,w,I)}if(o){const A=g==="y"?"top":"left",E=g==="y"?"bottom":"right",k=S+h[A],I=S-h[E];S=Cv(k,S,I)}const C=l.fn({...t,[y]:w,[g]:S});return{...C,data:{x:C.x-n,y:C.y-r,enabled:{[y]:i,[g]:o}}}}}},mz=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Zo(e,t),h={x:n,y:r},g=ao(s),y=Wb(g);let w=h[y],S=h[g];const C=Zo(l,t),A=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(c){const I=y==="y"?"height":"width",M=i.reference[y]-i.floating[I]+A.mainAxis,P=i.reference[y]+i.reference[I]-A.mainAxis;w<M?w=M:w>P&&(w=P)}if(d){var E,k;const I=y==="y"?"width":"height",M=bR.has(Qo(s)),P=i.reference[g]-i.floating[I]+(M&&((E=o.offset)==null?void 0:E[g])||0)+(M?0:A.crossAxis),j=i.reference[g]+i.reference[I]+(M?0:((k=o.offset)==null?void 0:k[g])||0)-(M?A.crossAxis:0);S<P?S=P:S>j&&(S=j)}return{[y]:w,[g]:S}}}},gz=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=Zo(e,t),h=await xh(t,d),g=Qo(s),y=Ld(s),w=ao(s)==="y",{width:S,height:C}=i.floating;let A,E;g==="top"||g==="bottom"?(A=g,E=y===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(E=g,A=y==="end"?"top":"bottom");const k=C-h.top-h.bottom,I=S-h.left-h.right,M=cl(C-h[A],k),P=cl(S-h[E],I),j=!t.middlewareData.shift;let _=M,D=P;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(D=I),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(_=k),j&&!y){const U=Is(h.left,0),K=Is(h.right,0),q=Is(h.top,0),re=Is(h.bottom,0);w?D=S-2*(U!==0||K!==0?U+K:Is(h.left,h.right)):_=C-2*(q!==0||re!==0?q+re:Is(h.top,h.bottom))}await c({...t,availableWidth:D,availableHeight:_});const L=await o.getDimensions(l.floating);return S!==L.width||C!==L.height?{reset:{rects:!0}}:{}}}};function pg(){return typeof window<"u"}function Bd(e){return CR(e)?(e.nodeName||"").toLowerCase():"#document"}function Ps(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function wo(e){var t;return(t=(CR(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function CR(e){return pg()?e instanceof Node||e instanceof Ps(e).Node:!1}function Pi(e){return pg()?e instanceof Element||e instanceof Ps(e).Element:!1}function mo(e){return pg()?e instanceof HTMLElement||e instanceof Ps(e).HTMLElement:!1}function kN(e){return!pg()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ps(e).ShadowRoot}const xz=new Set(["inline","contents"]);function ip(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=Di(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!xz.has(s)}const yz=new Set(["table","td","th"]);function wz(e){return yz.has(Bd(e))}const vz=[":popover-open",":modal"];function mg(e){return vz.some(t=>{try{return e.matches(t)}catch{return!1}})}const bz=["transform","translate","scale","rotate","perspective"],Cz=["transform","translate","scale","rotate","perspective","filter"],Sz=["paint","layout","strict","content"];function Kb(e){const t=Yb(),n=Pi(e)?Di(e):e;return bz.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Cz.some(r=>(n.willChange||"").includes(r))||Sz.some(r=>(n.contain||"").includes(r))}function Ez(e){let t=ul(e);for(;mo(t)&&!ud(t);){if(Kb(t))return t;if(mg(t))return null;t=ul(t)}return null}function Yb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Nz=new Set(["html","body","#document"]);function ud(e){return Nz.has(Bd(e))}function Di(e){return Ps(e).getComputedStyle(e)}function gg(e){return Pi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ul(e){if(Bd(e)==="html")return e;const t=e.assignedSlot||e.parentNode||kN(e)&&e.host||wo(e);return kN(t)?t.host:t}function SR(e){const t=ul(e);return ud(t)?e.ownerDocument?e.ownerDocument.body:e.body:mo(t)&&ip(t)?t:SR(t)}function yh(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=SR(e),i=s===((r=e.ownerDocument)==null?void 0:r.body),o=Ps(s);if(i){const l=Ev(o);return t.concat(o,o.visualViewport||[],ip(s)?s:[],l&&n?yh(l):[])}return t.concat(s,yh(s,[],n))}function Ev(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ER(e){const t=Di(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=mo(e),i=s?e.offsetWidth:n,o=s?e.offsetHeight:r,l=Im(n)!==i||Im(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function qb(e){return Pi(e)?e:e.contextElement}function Bu(e){const t=qb(e);if(!mo(t))return uo(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:i}=ER(t);let o=(i?Im(n.width):n.width)/r,l=(i?Im(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Az=uo(0);function NR(e){const t=Ps(e);return!Yb()||!t.visualViewport?Az:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Tz(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ps(e)?!1:t}function Ac(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=qb(e);let o=uo(1);t&&(r?Pi(r)&&(o=Bu(r)):o=Bu(e));const l=Tz(i,n,r)?NR(i):uo(0);let c=(s.left+l.x)/o.x,d=(s.top+l.y)/o.y,h=s.width/o.x,g=s.height/o.y;if(i){const y=Ps(i),w=r&&Pi(r)?Ps(r):r;let S=y,C=Ev(S);for(;C&&r&&w!==S;){const A=Bu(C),E=C.getBoundingClientRect(),k=Di(C),I=E.left+(C.clientLeft+parseFloat(k.paddingLeft))*A.x,M=E.top+(C.clientTop+parseFloat(k.paddingTop))*A.y;c*=A.x,d*=A.y,h*=A.x,g*=A.y,c+=I,d+=M,S=Ps(C),C=Ev(S)}}return Mm({width:h,height:g,x:c,y:d})}function Zb(e,t){const n=gg(e).scrollLeft;return t?t.left+n:Ac(wo(e)).left+n}function AR(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:Zb(e,r)),i=r.top+t.scrollTop;return{x:s,y:i}}function kz(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const i=s==="fixed",o=wo(r),l=t?mg(t.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},d=uo(1);const h=uo(0),g=mo(r);if((g||!g&&!i)&&((Bd(r)!=="body"||ip(o))&&(c=gg(r)),mo(r))){const w=Ac(r);d=Bu(r),h.x=w.x+r.clientLeft,h.y=w.y+r.clientTop}const y=o&&!g&&!i?AR(o,c,!0):uo(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+h.x+y.x,y:n.y*d.y-c.scrollTop*d.y+h.y+y.y}}function Iz(e){return Array.from(e.getClientRects())}function Rz(e){const t=wo(e),n=gg(e),r=e.ownerDocument.body,s=Is(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Is(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Zb(e);const l=-n.scrollTop;return Di(r).direction==="rtl"&&(o+=Is(t.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}function Mz(e,t){const n=Ps(e),r=wo(e),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const d=Yb();(!d||d&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}const _z=new Set(["absolute","fixed"]);function Oz(e,t){const n=Ac(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,i=mo(e)?Bu(e):uo(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,d=r*i.y;return{width:o,height:l,x:c,y:d}}function IN(e,t,n){let r;if(t==="viewport")r=Mz(e,n);else if(t==="document")r=Rz(wo(e));else if(Pi(t))r=Oz(t,n);else{const s=NR(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Mm(r)}function TR(e,t){const n=ul(e);return n===t||!Pi(n)||ud(n)?!1:Di(n).position==="fixed"||TR(n,t)}function Pz(e,t){const n=t.get(e);if(n)return n;let r=yh(e,[],!1).filter(l=>Pi(l)&&Bd(l)!=="body"),s=null;const i=Di(e).position==="fixed";let o=i?ul(e):e;for(;Pi(o)&&!ud(o);){const l=Di(o),c=Kb(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&_z.has(s.position)||ip(o)&&!c&&TR(e,o))?r=r.filter(h=>h!==o):s=l,o=ul(o)}return t.set(e,r),r}function Dz(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?mg(t)?[]:Pz(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((d,h)=>{const g=IN(t,h,s);return d.top=Is(g.top,d.top),d.right=cl(g.right,d.right),d.bottom=cl(g.bottom,d.bottom),d.left=Is(g.left,d.left),d},IN(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function jz(e){const{width:t,height:n}=ER(e);return{width:t,height:n}}function Lz(e,t,n){const r=mo(t),s=wo(t),i=n==="fixed",o=Ac(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=uo(0);function d(){c.x=Zb(s)}if(r||!r&&!i)if((Bd(t)!=="body"||ip(s))&&(l=gg(t)),r){const w=Ac(t,!0,i,t);c.x=w.x+t.clientLeft,c.y=w.y+t.clientTop}else s&&d();i&&!r&&s&&d();const h=s&&!r&&!i?AR(s,l):uo(0),g=o.left+l.scrollLeft-c.x-h.x,y=o.top+l.scrollTop-c.y-h.y;return{x:g,y,width:o.width,height:o.height}}function dy(e){return Di(e).position==="static"}function RN(e,t){if(!mo(e)||Di(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return wo(e)===n&&(n=n.ownerDocument.body),n}function kR(e,t){const n=Ps(e);if(mg(e))return n;if(!mo(e)){let s=ul(e);for(;s&&!ud(s);){if(Pi(s)&&!dy(s))return s;s=ul(s)}return n}let r=RN(e,t);for(;r&&wz(r)&&dy(r);)r=RN(r,t);return r&&ud(r)&&dy(r)&&!Kb(r)?n:r||Ez(e)||n}const Bz=async function(e){const t=this.getOffsetParent||kR,n=this.getDimensions,r=await n(e.floating);return{reference:Lz(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Fz(e){return Di(e).direction==="rtl"}const zz={convertOffsetParentRelativeRectToViewportRelativeRect:kz,getDocumentElement:wo,getClippingRect:Dz,getOffsetParent:kR,getElementRects:Bz,getClientRects:Iz,getDimensions:jz,getScale:Bu,isElement:Pi,isRTL:Fz};function IR(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Vz(e,t){let n=null,r;const s=wo(e);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:h,top:g,width:y,height:w}=d;if(l||t(),!y||!w)return;const S=qp(g),C=qp(s.clientWidth-(h+y)),A=qp(s.clientHeight-(g+w)),E=qp(h),I={rootMargin:-S+"px "+-C+"px "+-A+"px "+-E+"px",threshold:Is(0,cl(1,c))||1};let M=!0;function P(j){const _=j[0].intersectionRatio;if(_!==c){if(!M)return o();_?o(!1,_):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_===1&&!IR(d,e.getBoundingClientRect())&&o(),M=!1}try{n=new IntersectionObserver(P,{...I,root:s.ownerDocument})}catch{n=new IntersectionObserver(P,I)}n.observe(e)}return o(!0),i}function Hz(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=qb(e),h=s||i?[...d?yh(d):[],...yh(t)]:[];h.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const g=d&&l?Vz(d,n):null;let y=-1,w=null;o&&(w=new ResizeObserver(E=>{let[k]=E;k&&k.target===d&&w&&(w.unobserve(t),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var I;(I=w)==null||I.observe(t)})),n()}),d&&!c&&w.observe(d),w.observe(t));let S,C=c?Ac(e):null;c&&A();function A(){const E=Ac(e);C&&!IR(C,E)&&n(),C=E,S=requestAnimationFrame(A)}return n(),()=>{var E;h.forEach(k=>{s&&k.removeEventListener("scroll",n),i&&k.removeEventListener("resize",n)}),g==null||g(),(E=w)==null||E.disconnect(),w=null,c&&cancelAnimationFrame(S)}}const Uz=hz,$z=pz,Wz=uz,Gz=gz,Xz=dz,MN=cz,Kz=mz,Yz=(e,t,n)=>{const r=new Map,s={platform:zz,...n},i={...s.platform,_c:r};return lz(e,t,{...s,platform:i})};var qz=typeof document<"u",Zz=function(){},U0=qz?N.useLayoutEffect:Zz;function _m(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!_m(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&e.$$typeof)&&!_m(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function RR(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function _N(e,t){const n=RR(e);return Math.round(t*n)/n}function fy(e){const t=N.useRef(e);return U0(()=>{t.current=e}),t}function Qz(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[h,g]=N.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[y,w]=N.useState(r);_m(y,r)||w(r);const[S,C]=N.useState(null),[A,E]=N.useState(null),k=N.useCallback(W=>{W!==j.current&&(j.current=W,C(W))},[]),I=N.useCallback(W=>{W!==_.current&&(_.current=W,E(W))},[]),M=i||S,P=o||A,j=N.useRef(null),_=N.useRef(null),D=N.useRef(h),L=c!=null,U=fy(c),K=fy(s),q=fy(d),re=N.useCallback(()=>{if(!j.current||!_.current)return;const W={placement:t,strategy:n,middleware:y};K.current&&(W.platform=K.current),Yz(j.current,_.current,W).then(V=>{const ee={...V,isPositioned:q.current!==!1};z.current&&!_m(D.current,ee)&&(D.current=ee,zc.flushSync(()=>{g(ee)}))})},[y,t,n,K,q]);U0(()=>{d===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,g(W=>({...W,isPositioned:!1})))},[d]);const z=N.useRef(!1);U0(()=>(z.current=!0,()=>{z.current=!1}),[]),U0(()=>{if(M&&(j.current=M),P&&(_.current=P),M&&P){if(U.current)return U.current(M,P,re);re()}},[M,P,re,U,L]);const H=N.useMemo(()=>({reference:j,floating:_,setReference:k,setFloating:I}),[k,I]),Y=N.useMemo(()=>({reference:M,floating:P}),[M,P]),X=N.useMemo(()=>{const W={position:n,left:0,top:0};if(!Y.floating)return W;const V=_N(Y.floating,h.x),ee=_N(Y.floating,h.y);return l?{...W,transform:"translate("+V+"px, "+ee+"px)",...RR(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:V,top:ee}},[n,l,Y.floating,h.x,h.y]);return N.useMemo(()=>({...h,update:re,refs:H,elements:Y,floatingStyles:X}),[h,re,H,Y,X])}const Jz=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?MN({element:r.current,padding:s}).fn(n):{}:r?MN({element:r,padding:s}).fn(n):{}}}},eV=(e,t)=>({...Uz(e),options:[e,t]}),tV=(e,t)=>({...$z(e),options:[e,t]}),nV=(e,t)=>({...Kz(e),options:[e,t]}),rV=(e,t)=>({...Wz(e),options:[e,t]}),sV=(e,t)=>({...Gz(e),options:[e,t]}),iV=(e,t)=>({...Xz(e),options:[e,t]}),oV=(e,t)=>({...Jz(e),options:[e,t]});var aV="Arrow",MR=N.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...i}=e;return p.jsx(Ye.svg,{...i,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});MR.displayName=aV;var lV=MR;function xg(e){const[t,n]=N.useState(void 0);return ar(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Qb="Popper",[_R,Fd]=cs(Qb),[cV,OR]=_R(Qb),PR=e=>{const{__scopePopper:t,children:n}=e,[r,s]=N.useState(null);return p.jsx(cV,{scope:t,anchor:r,onAnchorChange:s,children:n})};PR.displayName=Qb;var DR="PopperAnchor",jR=N.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,i=OR(DR,n),o=N.useRef(null),l=dt(t,o);return N.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:p.jsx(Ye.div,{...s,ref:l})});jR.displayName=DR;var Jb="PopperContent",[uV,dV]=_R(Jb),LR=N.forwardRef((e,t)=>{var ie,de,pe,ye,Se,De;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:g="partial",hideWhenDetached:y=!1,updatePositionStrategy:w="optimized",onPlaced:S,...C}=e,A=OR(Jb,n),[E,k]=N.useState(null),I=dt(t,xe=>k(xe)),[M,P]=N.useState(null),j=xg(M),_=(j==null?void 0:j.width)??0,D=(j==null?void 0:j.height)??0,L=r+(i!=="center"?"-"+i:""),U=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},K=Array.isArray(d)?d:[d],q=K.length>0,re={padding:U,boundary:K.filter(hV),altBoundary:q},{refs:z,floatingStyles:H,placement:Y,isPositioned:X,middlewareData:W}=Qz({strategy:"fixed",placement:L,whileElementsMounted:(...xe)=>Hz(...xe,{animationFrame:w==="always"}),elements:{reference:A.anchor},middleware:[eV({mainAxis:s+D,alignmentAxis:o}),c&&tV({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?nV():void 0,...re}),c&&rV({...re}),sV({...re,apply:({elements:xe,rects:Ue,availableWidth:nt,availableHeight:et})=>{const{width:je,height:be}=Ue.reference,$e=xe.floating.style;$e.setProperty("--radix-popper-available-width",`${nt}px`),$e.setProperty("--radix-popper-available-height",`${et}px`),$e.setProperty("--radix-popper-anchor-width",`${je}px`),$e.setProperty("--radix-popper-anchor-height",`${be}px`)}}),M&&oV({element:M,padding:l}),pV({arrowWidth:_,arrowHeight:D}),y&&iV({strategy:"referenceHidden",...re})]}),[V,ee]=zR(Y),ae=sr(S);ar(()=>{X&&(ae==null||ae())},[X,ae]);const se=(ie=W.arrow)==null?void 0:ie.x,G=(de=W.arrow)==null?void 0:de.y,Q=((pe=W.arrow)==null?void 0:pe.centerOffset)!==0,[te,ne]=N.useState();return ar(()=>{E&&ne(window.getComputedStyle(E).zIndex)},[E]),p.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:X?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:te,"--radix-popper-transform-origin":[(ye=W.transformOrigin)==null?void 0:ye.x,(Se=W.transformOrigin)==null?void 0:Se.y].join(" "),...((De=W.hide)==null?void 0:De.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:p.jsx(uV,{scope:n,placedSide:V,onArrowChange:P,arrowX:se,arrowY:G,shouldHideArrow:Q,children:p.jsx(Ye.div,{"data-side":V,"data-align":ee,...C,ref:I,style:{...C.style,animation:X?void 0:"none"}})})})});LR.displayName=Jb;var BR="PopperArrow",fV={top:"bottom",right:"left",bottom:"top",left:"right"},FR=N.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,i=dV(BR,r),o=fV[i.placedSide];return p.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:p.jsx(lV,{...s,ref:n,style:{...s.style,display:"block"}})})});FR.displayName=BR;function hV(e){return e!==null}var pV=e=>({name:"transformOrigin",options:e,fn(t){var A,E,k;const{placement:n,rects:r,middlewareData:s}=t,o=((A=s.arrow)==null?void 0:A.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,h]=zR(n),g={start:"0%",center:"50%",end:"100%"}[h],y=(((E=s.arrow)==null?void 0:E.x)??0)+l/2,w=(((k=s.arrow)==null?void 0:k.y)??0)+c/2;let S="",C="";return d==="bottom"?(S=o?g:`${y}px`,C=`${-c}px`):d==="top"?(S=o?g:`${y}px`,C=`${r.floating.height+c}px`):d==="right"?(S=`${-c}px`,C=o?g:`${w}px`):d==="left"&&(S=`${r.floating.width+c}px`,C=o?g:`${w}px`),{data:{x:S,y:C}}}});function zR(e){const[t,n="center"]=e.split("-");return[t,n]}var eC=PR,yg=jR,tC=LR,nC=FR,[wg,Lce]=cs("Tooltip",[Fd]),vg=Fd(),VR="TooltipProvider",mV=700,Nv="tooltip.open",[gV,rC]=wg(VR),HR=e=>{const{__scopeTooltip:t,delayDuration:n=mV,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=e,o=N.useRef(!0),l=N.useRef(!1),c=N.useRef(0);return N.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),p.jsx(gV,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:N.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:N.useCallback(d=>{l.current=d},[]),disableHoverableContent:s,children:i})};HR.displayName=VR;var wh="Tooltip",[xV,bg]=wg(wh),UR=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,c=rC(wh,e.__scopeTooltip),d=vg(t),[h,g]=N.useState(null),y=Mi(),w=N.useRef(0),S=o??c.disableHoverableContent,C=l??c.delayDuration,A=N.useRef(!1),[E,k]=li({prop:r,defaultProp:s??!1,onChange:_=>{_?(c.onOpen(),document.dispatchEvent(new CustomEvent(Nv))):c.onClose(),i==null||i(_)},caller:wh}),I=N.useMemo(()=>E?A.current?"delayed-open":"instant-open":"closed",[E]),M=N.useCallback(()=>{window.clearTimeout(w.current),w.current=0,A.current=!1,k(!0)},[k]),P=N.useCallback(()=>{window.clearTimeout(w.current),w.current=0,k(!1)},[k]),j=N.useCallback(()=>{window.clearTimeout(w.current),w.current=window.setTimeout(()=>{A.current=!0,k(!0),w.current=0},C)},[C,k]);return N.useEffect(()=>()=>{w.current&&(window.clearTimeout(w.current),w.current=0)},[]),p.jsx(eC,{...d,children:p.jsx(xV,{scope:t,contentId:y,open:E,stateAttribute:I,trigger:h,onTriggerChange:g,onTriggerEnter:N.useCallback(()=>{c.isOpenDelayedRef.current?j():M()},[c.isOpenDelayedRef,j,M]),onTriggerLeave:N.useCallback(()=>{S?P():(window.clearTimeout(w.current),w.current=0)},[P,S]),onOpen:M,onClose:P,disableHoverableContent:S,children:n})})};UR.displayName=wh;var Av="TooltipTrigger",$R=N.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=bg(Av,n),i=rC(Av,n),o=vg(n),l=N.useRef(null),c=dt(t,l,s.onTriggerChange),d=N.useRef(!1),h=N.useRef(!1),g=N.useCallback(()=>d.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),p.jsx(yg,{asChild:!0,...o,children:p.jsx(Ye.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:ze(e.onPointerMove,y=>{y.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:ze(e.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:ze(e.onPointerDown,()=>{s.open&&s.onClose(),d.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:ze(e.onFocus,()=>{d.current||s.onOpen()}),onBlur:ze(e.onBlur,s.onClose),onClick:ze(e.onClick,s.onClose)})})});$R.displayName=Av;var yV="TooltipPortal",[Bce,wV]=wg(yV,{forceMount:void 0}),dd="TooltipContent",WR=N.forwardRef((e,t)=>{const n=wV(dd,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=e,o=bg(dd,e.__scopeTooltip);return p.jsx(us,{present:r||o.open,children:o.disableHoverableContent?p.jsx(GR,{side:s,...i,ref:t}):p.jsx(vV,{side:s,...i,ref:t})})}),vV=N.forwardRef((e,t)=>{const n=bg(dd,e.__scopeTooltip),r=rC(dd,e.__scopeTooltip),s=N.useRef(null),i=dt(t,s),[o,l]=N.useState(null),{trigger:c,onClose:d}=n,h=s.current,{onPointerInTransitChange:g}=r,y=N.useCallback(()=>{l(null),g(!1)},[g]),w=N.useCallback((S,C)=>{const A=S.currentTarget,E={x:S.clientX,y:S.clientY},k=NV(E,A.getBoundingClientRect()),I=AV(E,k),M=TV(C.getBoundingClientRect()),P=IV([...I,...M]);l(P),g(!0)},[g]);return N.useEffect(()=>()=>y(),[y]),N.useEffect(()=>{if(c&&h){const S=A=>w(A,h),C=A=>w(A,c);return c.addEventListener("pointerleave",S),h.addEventListener("pointerleave",C),()=>{c.removeEventListener("pointerleave",S),h.removeEventListener("pointerleave",C)}}},[c,h,w,y]),N.useEffect(()=>{if(o){const S=C=>{const A=C.target,E={x:C.clientX,y:C.clientY},k=(c==null?void 0:c.contains(A))||(h==null?void 0:h.contains(A)),I=!kV(E,o);k?y():I&&(y(),d())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[c,h,o,d,y]),p.jsx(GR,{...e,ref:i})}),[bV,CV]=wg(wh,{isInside:!1}),SV=E4("TooltipContent"),GR=N.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=bg(dd,n),d=vg(n),{onClose:h}=c;return N.useEffect(()=>(document.addEventListener(Nv,h),()=>document.removeEventListener(Nv,h)),[h]),N.useEffect(()=>{if(c.trigger){const g=y=>{const w=y.target;w!=null&&w.contains(c.trigger)&&h()};return window.addEventListener("scroll",g,{capture:!0}),()=>window.removeEventListener("scroll",g,{capture:!0})}},[c.trigger,h]),p.jsx(Pd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:g=>g.preventDefault(),onDismiss:h,children:p.jsxs(tC,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(SV,{children:r}),p.jsx(bV,{scope:n,isInside:!0,children:p.jsx(I9,{id:c.contentId,role:"tooltip",children:s||r})})]})})});WR.displayName=dd;var XR="TooltipArrow",EV=N.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=vg(n);return CV(XR,n).isInside?null:p.jsx(nC,{...s,...r,ref:t})});EV.displayName=XR;function NV(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function AV(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function TV(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function kV(e,t){const{x:n,y:r}=e;let s=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],d=l.x,h=l.y,g=c.x,y=c.y;h>r!=y>r&&n<(g-d)*(r-h)/(y-h)+d&&(s=!s)}return s}function IV(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),RV(t)}function RV(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var MV=HR,_V=UR,OV=$R,KR=WR;const Cg=MV,sC=_V,iC=OV,Sg=N.forwardRef(({className:e,sideOffset:t=4,...n},r)=>p.jsx(KR,{ref:r,sideOffset:t,className:Xe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));Sg.displayName=KR.displayName;var Eg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ng=typeof window>"u"||"Deno"in globalThis;function vi(){}function PV(e,t){return typeof e=="function"?e(t):e}function DV(e){return typeof e=="number"&&e>=0&&e!==1/0}function jV(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Tv(e,t){return typeof e=="function"?e(t):e}function LV(e,t){return typeof e=="function"?e(t):e}function ON(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==oC(o,t.options))return!1}else if(!bh(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function PN(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(vh(t.options.mutationKey)!==vh(i))return!1}else if(!bh(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function oC(e,t){return((t==null?void 0:t.queryKeyHashFn)||vh)(e)}function vh(e){return JSON.stringify(e,(t,n)=>kv(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function bh(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>bh(e[n],t[n])):!1}function YR(e,t){if(e===t)return e;const n=DN(e)&&DN(t);if(n||kv(e)&&kv(t)){const r=n?e:Object.keys(e),s=r.length,i=n?t:Object.keys(t),o=i.length,l=n?[]:{},c=new Set(r);let d=0;for(let h=0;h<o;h++){const g=n?h:i[h];(!n&&c.has(g)||n)&&e[g]===void 0&&t[g]===void 0?(l[g]=void 0,d++):(l[g]=YR(e[g],t[g]),l[g]===e[g]&&e[g]!==void 0&&d++)}return s===o&&d===s?e:l}return t}function DN(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function kv(e){if(!jN(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!jN(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function jN(e){return Object.prototype.toString.call(e)==="[object Object]"}function BV(e){return new Promise(t=>{setTimeout(t,e)})}function FV(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?YR(e,t):t}function zV(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function VV(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var aC=Symbol();function qR(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===aC?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Xl,Oa,Yu,ek,HV=(ek=class extends Eg{constructor(){super();zt(this,Xl);zt(this,Oa);zt(this,Yu);mt(this,Yu,t=>{if(!Ng&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){ve(this,Oa)||this.setEventListener(ve(this,Yu))}onUnsubscribe(){var t;this.hasListeners()||((t=ve(this,Oa))==null||t.call(this),mt(this,Oa,void 0))}setEventListener(t){var n;mt(this,Yu,t),(n=ve(this,Oa))==null||n.call(this),mt(this,Oa,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){ve(this,Xl)!==t&&(mt(this,Xl,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof ve(this,Xl)=="boolean"?ve(this,Xl):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Xl=new WeakMap,Oa=new WeakMap,Yu=new WeakMap,ek),ZR=new HV,qu,Pa,Zu,tk,UV=(tk=class extends Eg{constructor(){super();zt(this,qu,!0);zt(this,Pa);zt(this,Zu);mt(this,Zu,t=>{if(!Ng&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){ve(this,Pa)||this.setEventListener(ve(this,Zu))}onUnsubscribe(){var t;this.hasListeners()||((t=ve(this,Pa))==null||t.call(this),mt(this,Pa,void 0))}setEventListener(t){var n;mt(this,Zu,t),(n=ve(this,Pa))==null||n.call(this),mt(this,Pa,t(this.setOnline.bind(this)))}setOnline(t){ve(this,qu)!==t&&(mt(this,qu,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return ve(this,qu)}},qu=new WeakMap,Pa=new WeakMap,Zu=new WeakMap,tk),Om=new UV;function $V(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function WV(e){return Math.min(1e3*2**e,3e4)}function QR(e){return(e??"online")==="online"?Om.isOnline():!0}var JR=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function hy(e){return e instanceof JR}function eM(e){let t=!1,n=0,r=!1,s;const i=$V(),o=C=>{var A;r||(y(new JR(C)),(A=e.abort)==null||A.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>ZR.isFocused()&&(e.networkMode==="always"||Om.isOnline())&&e.canRun(),h=()=>QR(e.networkMode)&&e.canRun(),g=C=>{var A;r||(r=!0,(A=e.onSuccess)==null||A.call(e,C),s==null||s(),i.resolve(C))},y=C=>{var A;r||(r=!0,(A=e.onError)==null||A.call(e,C),s==null||s(),i.reject(C))},w=()=>new Promise(C=>{var A;s=E=>{(r||d())&&C(E)},(A=e.onPause)==null||A.call(e)}).then(()=>{var C;s=void 0,r||(C=e.onContinue)==null||C.call(e)}),S=()=>{if(r)return;let C;const A=n===0?e.initialPromise:void 0;try{C=A??e.fn()}catch(E){C=Promise.reject(E)}Promise.resolve(C).then(g).catch(E=>{var j;if(r)return;const k=e.retry??(Ng?0:3),I=e.retryDelay??WV,M=typeof I=="function"?I(n,E):I,P=k===!0||typeof k=="number"&&n<k||typeof k=="function"&&k(n,E);if(t||!P){y(E);return}n++,(j=e.onFail)==null||j.call(e,n,E),BV(M).then(()=>d()?void 0:w()).then(()=>{t?y(E):S()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?S():w().then(S),i)}}var GV=e=>setTimeout(e,0);function XV(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=GV;const i=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var ts=XV(),Kl,nk,tM=(nk=class{constructor(){zt(this,Kl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),DV(this.gcTime)&&mt(this,Kl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ng?1/0:5*60*1e3))}clearGcTimeout(){ve(this,Kl)&&(clearTimeout(ve(this,Kl)),mt(this,Kl,void 0))}},Kl=new WeakMap,nk),Qu,Yl,Gs,ql,Hr,Yh,Zl,bi,_o,rk,KV=(rk=class extends tM{constructor(t){super();zt(this,bi);zt(this,Qu);zt(this,Yl);zt(this,Gs);zt(this,ql);zt(this,Hr);zt(this,Yh);zt(this,Zl);mt(this,Zl,!1),mt(this,Yh,t.defaultOptions),this.setOptions(t.options),this.observers=[],mt(this,ql,t.client),mt(this,Gs,ve(this,ql).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,mt(this,Qu,qV(this.options)),this.state=t.state??ve(this,Qu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ve(this,Hr))==null?void 0:t.promise}setOptions(t){this.options={...ve(this,Yh),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ve(this,Gs).remove(this)}setData(t,n){const r=FV(this.state.data,t,this.options);return Fr(this,bi,_o).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Fr(this,bi,_o).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=ve(this,Hr))==null?void 0:r.promise;return(s=ve(this,Hr))==null||s.cancel(t),n?n.then(vi).catch(vi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ve(this,Qu))}isActive(){return this.observers.some(t=>LV(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===aC||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Tv(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!jV(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=ve(this,Hr))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=ve(this,Hr))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ve(this,Gs).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(ve(this,Hr)&&(ve(this,Zl)?ve(this,Hr).cancel({revert:!0}):ve(this,Hr).cancelRetry()),this.scheduleGc()),ve(this,Gs).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Fr(this,bi,_o).call(this,{type:"invalidate"})}fetch(t,n){var d,h,g;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(ve(this,Hr))return ve(this,Hr).continueRetry(),ve(this,Hr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const y=this.observers.find(w=>w.options.queryFn);y&&this.setOptions(y.options)}const r=new AbortController,s=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(mt(this,Zl,!0),r.signal)})},i=()=>{const y=qR(this.options,n),S=(()=>{const C={client:ve(this,ql),queryKey:this.queryKey,meta:this.meta};return s(C),C})();return mt(this,Zl,!1),this.options.persister?this.options.persister(y,S,this):y(S)},l=(()=>{const y={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:ve(this,ql),state:this.state,fetchFn:i};return s(y),y})();(d=this.options.behavior)==null||d.onFetch(l,this),mt(this,Yl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Fr(this,bi,_o).call(this,{type:"fetch",meta:(g=l.fetchOptions)==null?void 0:g.meta});const c=y=>{var w,S,C,A;hy(y)&&y.silent||Fr(this,bi,_o).call(this,{type:"error",error:y}),hy(y)||((S=(w=ve(this,Gs).config).onError)==null||S.call(w,y,this),(A=(C=ve(this,Gs).config).onSettled)==null||A.call(C,this.state.data,y,this)),this.scheduleGc()};return mt(this,Hr,eM({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:y=>{var w,S,C,A;if(y===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(y)}catch(E){c(E);return}(S=(w=ve(this,Gs).config).onSuccess)==null||S.call(w,y,this),(A=(C=ve(this,Gs).config).onSettled)==null||A.call(C,y,this.state.error,this),this.scheduleGc()},onError:c,onFail:(y,w)=>{Fr(this,bi,_o).call(this,{type:"failed",failureCount:y,error:w})},onPause:()=>{Fr(this,bi,_o).call(this,{type:"pause"})},onContinue:()=>{Fr(this,bi,_o).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),ve(this,Hr).start()}},Qu=new WeakMap,Yl=new WeakMap,Gs=new WeakMap,ql=new WeakMap,Hr=new WeakMap,Yh=new WeakMap,Zl=new WeakMap,bi=new WeakSet,_o=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...YV(r.data,this.options),fetchMeta:t.meta??null};case"success":return mt(this,Yl,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return hy(s)&&s.revert&&ve(this,Yl)?{...ve(this,Yl),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),ts.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ve(this,Gs).notify({query:this,type:"updated",action:t})})},rk);function YV(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:QR(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function qV(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var to,sk,ZV=(sk=class extends Eg{constructor(t={}){super();zt(this,to);this.config=t,mt(this,to,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??oC(s,n);let o=this.get(i);return o||(o=new KV({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){ve(this,to).has(t.queryHash)||(ve(this,to).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=ve(this,to).get(t.queryHash);n&&(t.destroy(),n===t&&ve(this,to).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ts.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return ve(this,to).get(t)}getAll(){return[...ve(this,to).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>ON(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>ON(t,r)):n}notify(t){ts.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){ts.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ts.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},to=new WeakMap,sk),no,Jr,Ql,ro,xa,ik,QV=(ik=class extends tM{constructor(t){super();zt(this,ro);zt(this,no);zt(this,Jr);zt(this,Ql);this.mutationId=t.mutationId,mt(this,Jr,t.mutationCache),mt(this,no,[]),this.state=t.state||JV(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ve(this,no).includes(t)||(ve(this,no).push(t),this.clearGcTimeout(),ve(this,Jr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){mt(this,no,ve(this,no).filter(n=>n!==t)),this.scheduleGc(),ve(this,Jr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){ve(this,no).length||(this.state.status==="pending"?this.scheduleGc():ve(this,Jr).remove(this))}continue(){var t;return((t=ve(this,Ql))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,l,c,d,h,g,y,w,S,C,A,E,k,I,M,P,j,_,D;const n=()=>{Fr(this,ro,xa).call(this,{type:"continue"})};mt(this,Ql,eM({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(L,U)=>{Fr(this,ro,xa).call(this,{type:"failed",failureCount:L,error:U})},onPause:()=>{Fr(this,ro,xa).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ve(this,Jr).canRun(this)}));const r=this.state.status==="pending",s=!ve(this,Ql).canStart();try{if(r)n();else{Fr(this,ro,xa).call(this,{type:"pending",variables:t,isPaused:s}),await((o=(i=ve(this,Jr).config).onMutate)==null?void 0:o.call(i,t,this));const U=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));U!==this.state.context&&Fr(this,ro,xa).call(this,{type:"pending",context:U,variables:t,isPaused:s})}const L=await ve(this,Ql).start();return await((h=(d=ve(this,Jr).config).onSuccess)==null?void 0:h.call(d,L,t,this.state.context,this)),await((y=(g=this.options).onSuccess)==null?void 0:y.call(g,L,t,this.state.context)),await((S=(w=ve(this,Jr).config).onSettled)==null?void 0:S.call(w,L,null,this.state.variables,this.state.context,this)),await((A=(C=this.options).onSettled)==null?void 0:A.call(C,L,null,t,this.state.context)),Fr(this,ro,xa).call(this,{type:"success",data:L}),L}catch(L){try{throw await((k=(E=ve(this,Jr).config).onError)==null?void 0:k.call(E,L,t,this.state.context,this)),await((M=(I=this.options).onError)==null?void 0:M.call(I,L,t,this.state.context)),await((j=(P=ve(this,Jr).config).onSettled)==null?void 0:j.call(P,void 0,L,this.state.variables,this.state.context,this)),await((D=(_=this.options).onSettled)==null?void 0:D.call(_,void 0,L,t,this.state.context)),L}finally{Fr(this,ro,xa).call(this,{type:"error",error:L})}}finally{ve(this,Jr).runNext(this)}}},no=new WeakMap,Jr=new WeakMap,Ql=new WeakMap,ro=new WeakSet,xa=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),ts.batch(()=>{ve(this,no).forEach(r=>{r.onMutationUpdate(t)}),ve(this,Jr).notify({mutation:this,type:"updated",action:t})})},ik);function JV(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Bo,Ci,qh,ok,eH=(ok=class extends Eg{constructor(t={}){super();zt(this,Bo);zt(this,Ci);zt(this,qh);this.config=t,mt(this,Bo,new Set),mt(this,Ci,new Map),mt(this,qh,0)}build(t,n,r){const s=new QV({mutationCache:this,mutationId:++Ip(this,qh)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){ve(this,Bo).add(t);const n=Zp(t);if(typeof n=="string"){const r=ve(this,Ci).get(n);r?r.push(t):ve(this,Ci).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(ve(this,Bo).delete(t)){const n=Zp(t);if(typeof n=="string"){const r=ve(this,Ci).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&ve(this,Ci).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Zp(t);if(typeof n=="string"){const r=ve(this,Ci).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Zp(t);if(typeof n=="string"){const s=(r=ve(this,Ci).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ts.batch(()=>{ve(this,Bo).forEach(t=>{this.notify({type:"removed",mutation:t})}),ve(this,Bo).clear(),ve(this,Ci).clear()})}getAll(){return Array.from(ve(this,Bo))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>PN(n,r))}findAll(t={}){return this.getAll().filter(n=>PN(t,n))}notify(t){ts.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return ts.batch(()=>Promise.all(t.map(n=>n.continue().catch(vi))))}},Bo=new WeakMap,Ci=new WeakMap,qh=new WeakMap,ok);function Zp(e){var t;return(t=e.options.scope)==null?void 0:t.id}function LN(e){return{onFetch:(t,n)=>{var h,g,y,w,S;const r=t.options,s=(y=(g=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:g.fetchMore)==null?void 0:y.direction,i=((w=t.state.data)==null?void 0:w.pages)||[],o=((S=t.state.data)==null?void 0:S.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let C=!1;const A=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(t.signal.aborted?C=!0:t.signal.addEventListener("abort",()=>{C=!0}),t.signal)})},E=qR(t.options,t.fetchOptions),k=async(I,M,P)=>{if(C)return Promise.reject();if(M==null&&I.pages.length)return Promise.resolve(I);const _=(()=>{const K={client:t.client,queryKey:t.queryKey,pageParam:M,direction:P?"backward":"forward",meta:t.options.meta};return A(K),K})(),D=await E(_),{maxPages:L}=t.options,U=P?VV:zV;return{pages:U(I.pages,D,L),pageParams:U(I.pageParams,M,L)}};if(s&&i.length){const I=s==="backward",M=I?tH:BN,P={pages:i,pageParams:o},j=M(r,P);l=await k(P,j,I)}else{const I=e??i.length;do{const M=c===0?o[0]??r.initialPageParam:BN(r,l);if(c>0&&M==null)break;l=await k(l,M),c++}while(c<I)}return l};t.options.persister?t.fetchFn=()=>{var C,A;return(A=(C=t.options).persister)==null?void 0:A.call(C,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function BN(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function tH(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Pn,Da,ja,Ju,ed,La,td,nd,ak,nH=(ak=class{constructor(e={}){zt(this,Pn);zt(this,Da);zt(this,ja);zt(this,Ju);zt(this,ed);zt(this,La);zt(this,td);zt(this,nd);mt(this,Pn,e.queryCache||new ZV),mt(this,Da,e.mutationCache||new eH),mt(this,ja,e.defaultOptions||{}),mt(this,Ju,new Map),mt(this,ed,new Map),mt(this,La,0)}mount(){Ip(this,La)._++,ve(this,La)===1&&(mt(this,td,ZR.subscribe(async e=>{e&&(await this.resumePausedMutations(),ve(this,Pn).onFocus())})),mt(this,nd,Om.subscribe(async e=>{e&&(await this.resumePausedMutations(),ve(this,Pn).onOnline())})))}unmount(){var e,t;Ip(this,La)._--,ve(this,La)===0&&((e=ve(this,td))==null||e.call(this),mt(this,td,void 0),(t=ve(this,nd))==null||t.call(this),mt(this,nd,void 0))}isFetching(e){return ve(this,Pn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return ve(this,Da).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=ve(this,Pn).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=ve(this,Pn).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Tv(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return ve(this,Pn).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=ve(this,Pn).get(r.queryHash),i=s==null?void 0:s.state.data,o=PV(t,i);if(o!==void 0)return ve(this,Pn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return ts.batch(()=>ve(this,Pn).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=ve(this,Pn).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=ve(this,Pn);ts.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=ve(this,Pn);return ts.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=ts.batch(()=>ve(this,Pn).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(vi).catch(vi)}invalidateQueries(e,t={}){return ts.batch(()=>(ve(this,Pn).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=ts.batch(()=>ve(this,Pn).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(vi)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(vi)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=ve(this,Pn).build(this,t);return n.isStaleByTime(Tv(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(vi).catch(vi)}fetchInfiniteQuery(e){return e.behavior=LN(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(vi).catch(vi)}ensureInfiniteQueryData(e){return e.behavior=LN(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Om.isOnline()?ve(this,Da).resumePausedMutations():Promise.resolve()}getQueryCache(){return ve(this,Pn)}getMutationCache(){return ve(this,Da)}getDefaultOptions(){return ve(this,ja)}setDefaultOptions(e){mt(this,ja,e)}setQueryDefaults(e,t){ve(this,Ju).set(vh(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...ve(this,Ju).values()],n={};return t.forEach(r=>{bh(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){ve(this,ed).set(vh(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...ve(this,ed).values()],n={};return t.forEach(r=>{bh(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...ve(this,ja).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=oC(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===aC&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...ve(this,ja).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){ve(this,Pn).clear(),ve(this,Da).clear()}},Pn=new WeakMap,Da=new WeakMap,ja=new WeakMap,Ju=new WeakMap,ed=new WeakMap,La=new WeakMap,td=new WeakMap,nd=new WeakMap,ak),rH=N.createContext(void 0),sH=({client:e,children:t})=>(N.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),p.jsx(rH.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ch(){return Ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ch.apply(this,arguments)}var za;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(za||(za={}));const FN="popstate";function iH(e){e===void 0&&(e={});function t(s,i){let{pathname:o="/",search:l="",hash:c=""}=Vc(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Iv("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof i=="string"?i:nM(i))}function r(s,i){Ag(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return aH(t,n,r,e)}function or(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ag(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function oH(){return Math.random().toString(36).substr(2,8)}function zN(e,t){return{usr:e.state,key:e.key,idx:t}}function Iv(e,t,n,r){return n===void 0&&(n=null),Ch({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Vc(t):t,{state:n,key:t&&t.key||r||oH()})}function nM(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Vc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function aH(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=za.Pop,c=null,d=h();d==null&&(d=0,o.replaceState(Ch({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function g(){l=za.Pop;let A=h(),E=A==null?null:A-d;d=A,c&&c({action:l,location:C.location,delta:E})}function y(A,E){l=za.Push;let k=Iv(C.location,A,E);n&&n(k,A),d=h()+1;let I=zN(k,d),M=C.createHref(k);try{o.pushState(I,"",M)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(M)}i&&c&&c({action:l,location:C.location,delta:1})}function w(A,E){l=za.Replace;let k=Iv(C.location,A,E);n&&n(k,A),d=h();let I=zN(k,d),M=C.createHref(k);o.replaceState(I,"",M),i&&c&&c({action:l,location:C.location,delta:0})}function S(A){let E=s.location.origin!=="null"?s.location.origin:s.location.href,k=typeof A=="string"?A:nM(A);return k=k.replace(/ $/,"%20"),or(E,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,E)}let C={get action(){return l},get location(){return e(s,o)},listen(A){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(FN,g),c=A,()=>{s.removeEventListener(FN,g),c=null}},createHref(A){return t(s,A)},createURL:S,encodeLocation(A){let E=S(A);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:y,replace:w,go(A){return o.go(A)}};return C}var VN;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(VN||(VN={}));function lH(e,t,n){return n===void 0&&(n="/"),cH(e,t,n,!1)}function cH(e,t,n,r){let s=typeof t=="string"?Vc(t):t,i=iM(s.pathname||"/",n);if(i==null)return null;let o=rM(e);uH(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=bH(i);l=wH(o[c],d,r)}return l}function rM(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(or(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=tc([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(or(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),rM(i.children,t,h,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:xH(d,i.index),routesMeta:h})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of sM(i.path))s(i,o,c)}),t}function sM(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=sM(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function uH(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:yH(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const dH=/^:[\w-]+$/,fH=3,hH=2,pH=1,mH=10,gH=-2,HN=e=>e==="*";function xH(e,t){let n=e.split("/"),r=n.length;return n.some(HN)&&(r+=gH),t&&(r+=hH),n.filter(s=>!HN(s)).reduce((s,i)=>s+(dH.test(i)?fH:i===""?pH:mH),r)}function yH(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function wH(e,t,n){let{routesMeta:r}=e,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,h=i==="/"?t:t.slice(i.length)||"/",g=UN({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),y=c.route;if(!g&&d&&n&&!r[r.length-1].route.index&&(g=UN({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!g)return null;Object.assign(s,g.params),o.push({params:s,pathname:tc([i,g.pathname]),pathnameBase:kH(tc([i,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(i=tc([i,g.pathnameBase]))}return o}function UN(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=vH(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,h,g)=>{let{paramName:y,isOptional:w}=h;if(y==="*"){let C=l[g]||"";o=i.slice(0,i.length-C.length).replace(/(.)\/+$/,"$1")}const S=l[g];return w&&!S?d[y]=void 0:d[y]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function vH(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ag(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function bH(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ag(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function iM(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const CH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SH=e=>CH.test(e);function EH(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Vc(e):e,i;if(n)if(SH(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Ag(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=$N(n.substring(1),"/"):i=$N(n,t)}else i=t;return{pathname:i,search:IH(r),hash:RH(s)}}function $N(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function py(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function NH(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function AH(e,t){let n=NH(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function TH(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Vc(e):(s=Ch({},e),or(!s.pathname||!s.pathname.includes("?"),py("?","pathname","search",s)),or(!s.pathname||!s.pathname.includes("#"),py("#","pathname","hash",s)),or(!s.search||!s.search.includes("#"),py("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let g=t.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),g-=1;s.pathname=y.join("/")}l=g>=0?t[g]:"/"}let c=EH(s,l),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const tc=e=>e.join("/").replace(/\/\/+/g,"/"),kH=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),IH=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,RH=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function MH(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const oM=["post","put","patch","delete"];new Set(oM);const _H=["get",...oM];new Set(_H);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sh(){return Sh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sh.apply(this,arguments)}const lC=N.createContext(null),OH=N.createContext(null),Tg=N.createContext(null),kg=N.createContext(null),zd=N.createContext({outlet:null,matches:[],isDataRoute:!1}),aM=N.createContext(null);function Ig(){return N.useContext(kg)!=null}function cC(){return Ig()||or(!1),N.useContext(kg).location}function lM(e){N.useContext(Tg).static||N.useLayoutEffect(e)}function cM(){let{isDataRoute:e}=N.useContext(zd);return e?GH():PH()}function PH(){Ig()||or(!1);let e=N.useContext(lC),{basename:t,future:n,navigator:r}=N.useContext(Tg),{matches:s}=N.useContext(zd),{pathname:i}=cC(),o=JSON.stringify(AH(s,n.v7_relativeSplatPath)),l=N.useRef(!1);return lM(()=>{l.current=!0}),N.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let g=TH(d,JSON.parse(o),i,h.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:tc([t,g.pathname])),(h.replace?r.replace:r.push)(g,h.state,h)},[t,r,o,i,e])}function DH(e,t){return jH(e,t)}function jH(e,t,n,r){Ig()||or(!1);let{navigator:s}=N.useContext(Tg),{matches:i}=N.useContext(zd),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=cC(),h;if(t){var g;let A=typeof t=="string"?Vc(t):t;c==="/"||(g=A.pathname)!=null&&g.startsWith(c)||or(!1),h=A}else h=d;let y=h.pathname||"/",w=y;if(c!=="/"){let A=c.replace(/^\//,"").split("/");w="/"+y.replace(/^\//,"").split("/").slice(A.length).join("/")}let S=lH(e,{pathname:w}),C=VH(S&&S.map(A=>Object.assign({},A,{params:Object.assign({},l,A.params),pathname:tc([c,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?c:tc([c,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),i,n,r);return t&&C?N.createElement(kg.Provider,{value:{location:Sh({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:za.Pop}},C):C}function LH(){let e=WH(),t=MH(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),n?N.createElement("pre",{style:s},n):null,null)}const BH=N.createElement(LH,null);class FH extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?N.createElement(zd.Provider,{value:this.props.routeContext},N.createElement(aM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zH(e){let{routeContext:t,match:n,children:r}=e,s=N.useContext(lC);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(zd.Provider,{value:t},r)}function VH(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);h>=0||or(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let g=o[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=h),g.route.id){let{loaderData:y,errors:w}=n,S=g.route.loader&&y[g.route.id]===void 0&&(!w||w[g.route.id]===void 0);if(g.route.lazy||S){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,g,y)=>{let w,S=!1,C=null,A=null;n&&(w=l&&g.route.id?l[g.route.id]:void 0,C=g.route.errorElement||BH,c&&(d<0&&y===0?(S=!0,A=null):d===y&&(S=!0,A=g.route.hydrateFallbackElement||null)));let E=t.concat(o.slice(0,y+1)),k=()=>{let I;return w?I=C:S?I=A:g.route.Component?I=N.createElement(g.route.Component,null):g.route.element?I=g.route.element:I=h,N.createElement(zH,{match:g,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:I})};return n&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?N.createElement(FH,{location:n.location,revalidation:n.revalidation,component:C,error:w,children:k(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):k()},null)}var uM=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(uM||{}),Pm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Pm||{});function HH(e){let t=N.useContext(lC);return t||or(!1),t}function UH(e){let t=N.useContext(OH);return t||or(!1),t}function $H(e){let t=N.useContext(zd);return t||or(!1),t}function dM(e){let t=$H(),n=t.matches[t.matches.length-1];return n.route.id||or(!1),n.route.id}function WH(){var e;let t=N.useContext(aM),n=UH(Pm.UseRouteError),r=dM(Pm.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function GH(){let{router:e}=HH(uM.UseNavigateStable),t=dM(Pm.UseNavigateStable),n=N.useRef(!1);return lM(()=>{n.current=!0}),N.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Sh({fromRouteId:t},i)))},[e,t])}function XH(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function $0(e){or(!1)}function KH(e){let{basename:t="/",children:n=null,location:r,navigationType:s=za.Pop,navigator:i,static:o=!1,future:l}=e;Ig()&&or(!1);let c=t.replace(/^\/*/,"/"),d=N.useMemo(()=>({basename:c,navigator:i,static:o,future:Sh({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Vc(r));let{pathname:h="/",search:g="",hash:y="",state:w=null,key:S="default"}=r,C=N.useMemo(()=>{let A=iM(h,c);return A==null?null:{location:{pathname:A,search:g,hash:y,state:w,key:S},navigationType:s}},[c,h,g,y,w,S,s]);return C==null?null:N.createElement(Tg.Provider,{value:d},N.createElement(kg.Provider,{children:n,value:C}))}function YH(e){let{children:t,location:n}=e;return DH(Rv(t),n)}new Promise(()=>{});function Rv(e,t){t===void 0&&(t=[]);let n=[];return N.Children.forEach(e,(r,s)=>{if(!N.isValidElement(r))return;let i=[...t,s];if(r.type===N.Fragment){n.push.apply(n,Rv(r.props.children,i));return}r.type!==$0&&or(!1),!r.props.index||!r.props.children||or(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Rv(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const qH="6";try{window.__reactRouterVersion=qH}catch{}const ZH="startTransition",WN=W1[ZH];function QH(e){let{basename:t,children:n,future:r,window:s}=e,i=N.useRef();i.current==null&&(i.current=iH({window:s,v5Compat:!0}));let o=i.current,[l,c]=N.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=N.useCallback(g=>{d&&WN?WN(()=>c(g)):c(g)},[c,d]);return N.useLayoutEffect(()=>o.listen(h),[o,h]),N.useEffect(()=>XH(r),[r]),N.createElement(KH,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var GN;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(GN||(GN={}));var XN;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(XN||(XN={}));const Qp="gamebook_save_slots",JH=5,KN=()=>({currentPageId:0,inventory:[],stats:{},history:[],variables:{},playerName:"",visitedPages:new Set,isCharacterSetupComplete:!1,bookmarks:{},shopInventories:{}});function eU(e){if(e.pages&&e.pages.length>0)return e.pages;if(e.sections&&e.sections.length>0){const t=e.sections[0];if("text"in t||"choices"in t)return e.sections.map(n=>({id:n.id,section:n.id,title:n.title||n.name,text:n.text||"",choices:n.choices||[],bookmark:n.bookmark,image:n.image,effects:n.effects,ending:n.ending,inputGate:n.inputGate}))}return[]}function tU(e){if(e.nextPageId!==void 0)return e.nextPageId;if(e.to!==void 0)return e.to}function fM(){const[e,t]=N.useState(null),[n,r]=N.useState([]),[s,i]=N.useState(KN()),[o,l]=N.useState(!1),c=N.useCallback(G=>{var xe,Ue,nt,et,je,be,$e,qt;t(G);const Q=eU(G);r(Q);const te=((xe=Q[0])==null?void 0:xe.id)??0,ne={};if((Ue=G.presets)!=null&&Ue.variables)for(const[Te,Ce]of Object.entries(G.presets.variables))ne[Te]=Ce;if((nt=G.player)!=null&&nt.startingVariables)for(const[Te,Ce]of Object.entries(G.player.startingVariables))ne[Te]=Ce;const ie={};if((et=G.presets)!=null&&et.stats&&((je=G.player)!=null&&je.useStats))for(const Te of G.player.useStats){const Ce=G.presets.stats[Te];Ce&&(ie[Te]=Ce.default)}let de=[];(be=G.player)!=null&&be.startingItems&&(de=[...G.player.startingItems]);const pe={};for(const Te of Q)Te.bookmark&&(pe[Te.bookmark]=Te.id);const ye={};for(const Te of Q)if(Te.shop){const Ce=String(Te.id);ye[Ce]={};for(const Ee of Te.shop.items)Ee.quantity!==void 0&&(ye[Ce][Ee.itemId]=Ee.quantity)}const Se=!!(($e=G.presets)!=null&&$e.stats&&((qt=G.player)!=null&&qt.useStats)&&G.player.useStats.length>0);i({currentPageId:te,inventory:de,stats:ie,history:[te],variables:ne,playerName:"",visitedPages:new Set([te]),isCharacterSetupComplete:!Se,bookmarks:pe,shopInventories:ye}),l(!0)},[]),d=N.useCallback((G,Q,te=[],ne={})=>{i(ie=>{const de={...ie.variables,...ne};return{...ie,playerName:G,stats:Q,inventory:[...ie.inventory,...te],variables:de,isCharacterSetupComplete:!0}})},[]),h=N.useCallback(G=>{i(Q=>({...Q,stats:G}))},[]),g=N.useCallback((G,Q)=>{i(te=>({...te,stats:{...te.stats,[G]:Q}}))},[]),y=N.useCallback(()=>n.find(G=>G.id===s.currentPageId)||null,[n,s.currentPageId]),w=N.useCallback(G=>n.find(Q=>Q.id===G)||null,[n]),S=N.useCallback(G=>{const Q=s.bookmarks[G];return Q===void 0?null:w(Q)},[s.bookmarks,w]),C=N.useCallback(G=>{if(G.items){for(const Q of G.items)if(!s.inventory.includes(Q))return!1}if(G.variables){for(const[Q,te]of Object.entries(G.variables))if(s.variables[Q]!==te)return!1}if(G.stats)for(const[Q,te]of Object.entries(G.stats)){const ne=s.stats[Q]??0;if(te.gte!==void 0&&ne<te.gte||te.lte!==void 0&&ne>te.lte)return!1}return!0},[s.stats,s.inventory,s.variables]),A=N.useCallback(G=>{if(G.stats)for(const[Q,te]of Object.entries(G.stats)){const ne=s.stats[Q]??0;if(te.gte!==void 0&&ne<te.gte||te.lte!==void 0&&ne>te.lte)return!1}if(G.items){for(const Q of G.items)if(!s.inventory.includes(Q))return!1}if(G.variables){for(const[Q,te]of Object.entries(G.variables))if(s.variables[Q]!==te)return!1}return!0},[s.stats,s.inventory,s.variables]),E=N.useCallback(G=>!(G.requiresItem&&!s.inventory.includes(G.requiresItem)||G.requiresStat&&(s.stats[G.requiresStat.name]??0)<G.requiresStat.min||G.conditions&&!A(G.conditions)||G.requires&&!C(G.requires)),[s.inventory,s.stats,A,C]),k=N.useCallback(G=>{if(e!=null&&e.items)if(Array.isArray(e.items)){const Q=e.items.find(te=>te.id===G);if(Q)return Q.name}else{const Q=e.items[G];if(Q)return Q.name}return G},[e]),I=N.useCallback(G=>{const Q=[];if(G.requiresItem&&!s.inventory.includes(G.requiresItem)&&Q.push(`Requires: ${k(G.requiresItem)}`),G.requiresStat&&(s.stats[G.requiresStat.name]??0)<G.requiresStat.min&&Q.push(`Requires: ${G.requiresStat.name}  ${G.requiresStat.min}`),G.conditions){if(G.conditions.stats)for(const[te,ne]of Object.entries(G.conditions.stats)){const ie=s.stats[te]??0;ne.gte!==void 0&&ie<ne.gte&&Q.push(`Requires: ${te}  ${ne.gte}`),ne.lte!==void 0&&ie>ne.lte&&Q.push(`Requires: ${te}  ${ne.lte}`)}if(G.conditions.items)for(const te of G.conditions.items)s.inventory.includes(te)||Q.push(`Requires: ${k(te)}`);if(G.conditions.variables)for(const[te,ne]of Object.entries(G.conditions.variables))s.variables[te]!==ne&&Q.push("Condition not met")}if(G.requires){if(G.requires.items)for(const te of G.requires.items)s.inventory.includes(te)||Q.push(`Requires: ${k(te)}`);if(G.requires.stats)for(const[te,ne]of Object.entries(G.requires.stats)){const ie=s.stats[te]??0;ne.gte!==void 0&&ie<ne.gte&&Q.push(`Requires: ${te}  ${ne.gte}`),ne.lte!==void 0&&ie>ne.lte&&Q.push(`Requires: ${te}  ${ne.lte}`)}if(G.requires.variables)for(const[,te]of Object.entries(G.requires.variables))s.variables[Object.keys(G.requires.variables)[0]]!==te&&Q.push("Condition not met")}return Q},[s,k]),M=N.useCallback((G,Q)=>{const te={};if(G.stats){const ne={...Q.stats};for(const[ie,de]of Object.entries(G.stats)){const pe=ne[ie]??0;ne[ie]=pe+de}te.stats=ne}if(G.variables){const ne={...Q.variables};for(const[ie,de]of Object.entries(G.variables))ne[ie]=de;te.variables=ne}if(G.itemsAdd){const ne=[...te.inventory||Q.inventory];for(const ie of G.itemsAdd)ne.includes(ie)||ne.push(ie);te.inventory=ne}if(G.itemsRemove){const ne=te.inventory||Q.inventory;te.inventory=ne.filter(ie=>!G.itemsRemove.includes(ie))}return te},[]),P=N.useCallback((G,Q)=>{let te=tU(G);if(G.toBookmark&&(te=s.bookmarks[G.toBookmark]),G.input!==void 0&&Q===!1&&G.failurePageId!==void 0&&(te=G.failurePageId),te===void 0)return;const ne=w(te);ne&&i(ie=>{let de=[...ie.inventory],pe={...ie.stats},ye={...ie.variables};const Se=new Set(ie.visitedPages),De=!Se.has(te);if(Se.add(te),G.effects&&(Q===void 0||Q===!0)){const xe=M(G.effects,{...ie,inventory:de,stats:pe,variables:ye});xe.inventory&&(de=xe.inventory),xe.stats&&(pe=xe.stats),xe.variables&&(ye=xe.variables)}if(De&&ne.effects){const xe=M(ne.effects,{...ie,inventory:de,stats:pe,variables:ye});xe.inventory&&(de=xe.inventory),xe.stats&&(pe=xe.stats),xe.variables&&(ye=xe.variables)}return De&&(ne.addItems&&ne.addItems.forEach(xe=>{de.includes(xe)||de.push(xe)}),ne.removeItems&&(de=de.filter(xe=>!ne.removeItems.includes(xe))),ne.statChanges&&ne.statChanges.forEach(xe=>{pe[xe.name]=(pe[xe.name]??0)+xe.value})),{...ie,currentPageId:te,inventory:de,stats:pe,variables:ye,history:[...ie.history,te],visitedPages:Se}})},[w,M,s.bookmarks]),j=N.useCallback(G=>{const Q=s.history.findIndex(te=>te===G);Q!==-1&&i(te=>({...te,currentPageId:G,history:te.history.slice(0,Q+1)}))},[s.history]),_=N.useCallback(()=>{var ye,Se,De,xe,Ue,nt;if(!e)return;const G=n,Q=((ye=G[0])==null?void 0:ye.id)??0,te={};if((Se=e.presets)!=null&&Se.variables)for(const[et,je]of Object.entries(e.presets.variables))te[et]=je;if((De=e.player)!=null&&De.startingVariables)for(const[et,je]of Object.entries(e.player.startingVariables))te[et]=je;const ne={};if((xe=e.presets)!=null&&xe.stats&&((Ue=e.player)!=null&&Ue.useStats))for(const et of e.player.useStats){const je=e.presets.stats[et];je&&(ne[et]=je.default)}let ie=[];(nt=e.player)!=null&&nt.startingItems&&(ie=[...e.player.startingItems]);const de={};for(const et of G)et.bookmark&&(de[et.bookmark]=et.id);const pe={};for(const et of G)if(et.shop){const je=String(et.id);pe[je]={};for(const be of et.shop.items)be.quantity!==void 0&&(pe[je][be.itemId]=be.quantity)}i({currentPageId:Q,inventory:ie,stats:ne,history:[Q],variables:te,playerName:"",visitedPages:new Set([Q]),isCharacterSetupComplete:!0,bookmarks:de,shopInventories:pe})},[e,n]),D=N.useCallback(()=>{var Q,te;const G=localStorage.getItem(Qp);if(!G)return[];try{const ne=JSON.parse(G);if(e){const ie=((Q=e.meta)==null?void 0:Q.storyId)||`legacy-${((te=e.meta)==null?void 0:te.title)||e.title||"untitled"}`;return ne.filter(de=>{var pe;return de.storyId?de.storyId===ie:de.storyTitle===(((pe=e.meta)==null?void 0:pe.title)||e.title)})}return ne}catch{return[]}},[e]),L=N.useCallback((G,Q)=>{var ye,Se,De,xe;if(!e)return;const te=y();if(((ye=te==null?void 0:te.ending)==null?void 0:ye.type)==="hard")return;const ne=((Se=e.meta)==null?void 0:Se.storyId)||`legacy-${((De=e.meta)==null?void 0:De.title)||e.title||"untitled"}`,ie=(te==null?void 0:te.text.substring(0,100))+"..."||"",de={id:G,name:Q,storyId:ne,storyTitle:((xe=e.meta)==null?void 0:xe.title)||e.title||"Untitled Story",currentPageId:s.currentPageId,pagePreview:ie,savedAt:new Date().toISOString(),inventory:s.inventory,stats:s.stats,history:s.history,variables:s.variables,playerName:s.playerName,visitedPages:Array.from(s.visitedPages),shopInventories:s.shopInventories},pe=D().filter(Ue=>Ue.id!==G);pe.push(de),localStorage.setItem(Qp,JSON.stringify(pe))},[e,s,y,D]),U=N.useCallback(G=>{var ie,de;if(!e)return;const Q=((ie=e.meta)==null?void 0:ie.storyId)||`legacy-${((de=e.meta)==null?void 0:de.title)||e.title||"untitled"}`;if((G.storyId||`legacy-${G.storyTitle}`)!==Q){console.error("Cannot load save from different story");return}const ne={};for(const pe of n)pe.bookmark&&(ne[pe.bookmark]=pe.id);i({currentPageId:G.currentPageId,inventory:G.inventory,stats:G.stats,history:G.history,variables:G.variables||{},playerName:G.playerName||"",visitedPages:new Set(G.visitedPages||G.history),isCharacterSetupComplete:!0,bookmarks:ne,shopInventories:G.shopInventories||{}})},[n,e]),K=N.useCallback(G=>{const Q=localStorage.getItem(Qp);if(Q)try{const ne=JSON.parse(Q).filter(ie=>ie.id!==G);localStorage.setItem(Qp,JSON.stringify(ne))}catch{}},[]),q=N.useCallback(()=>{l(!1),t(null),r([]),i(KN())},[]),re=N.useCallback(()=>{const G=y();return G?G.ending?{isEnd:!0,type:G.ending.type}:G.choices.length===0?{isEnd:!0,type:"soft"}:{isEnd:!1}:{isEnd:!1}},[y]),z=N.useCallback(()=>{const G=re();return!G.isEnd||G.type!=="hard"},[re]),H=N.useCallback(G=>{var te;const Q=(te=e==null?void 0:e.items)==null?void 0:te.find(ne=>ne.id===G);!Q||Q.type!=="consumable"||s.inventory.includes(G)&&i(ne=>{let de={inventory:ne.inventory.filter(pe=>pe!==G)};if(Q.effects){const pe=M(Q.effects,ne);de={...de,...pe}}return{...ne,...de}})},[e,s.inventory,M]),Y=N.useCallback((G,Q)=>{i(te=>({...te,variables:{...te.variables,[G]:Q}}))},[]),X=N.useCallback((G,Q,te,ne)=>{var ye;const ie=s.variables[ne]||0;if(ie<te||s.inventory.includes(Q))return!1;const de=String(G),pe=(ye=s.shopInventories[de])==null?void 0:ye[Q];return pe!==void 0&&pe<=0?!1:(i(Se=>{const De={...Se.variables};De[ne]=ie-te;const xe=[...Se.inventory,Q],Ue={...Se.shopInventories};return pe!==void 0&&(Ue[de]||(Ue[de]={}),Ue[de][Q]=pe-1),{...Se,variables:De,inventory:xe,shopInventories:Ue}}),!0)},[s]),W=N.useCallback(G=>{if(e!=null&&e.items&&Array.isArray(e.items))return e.items.find(Q=>Q.id===G)},[e]),V=N.useCallback(G=>{if(e!=null&&e.enemies&&Array.isArray(e.enemies))return e.enemies.find(Q=>Q.id===G)},[e]),ee=N.useCallback(G=>{var pe;const Q=require("lz-string"),te={version:"1.0",timestamp:Date.now(),storyId:((pe=e==null?void 0:e.meta)==null?void 0:pe.storyId)||"unknown",saveData:G},ne=JSON.stringify(te);return"EGBK-"+(Q.compressToBase64(ne).match(/.{1,4}/g)||[]).slice(0,4).join("-")},[e]),ae=N.useCallback(G=>{var Q;try{const te=require("lz-string"),ne=G.replace(/^EGBK[:-]?/i,"").replace(/-/g,""),ie=te.decompressFromBase64(ne);if(!ie)return null;const de=JSON.parse(ie);return de.storyId!==((Q=e==null?void 0:e.meta)==null?void 0:Q.storyId)?(console.error("Story ID mismatch"),null):de.saveData}catch(te){return console.error("Failed to import save:",te),null}},[e]),se=N.useCallback(G=>{i(G),l(!0)},[]);return{gamebookData:e,gameState:s,isPlaying:o,loadStory:c,completeCharacterSetup:d,updateStats:h,updateStat:g,updateVariable:Y,getCurrentPage:y,getPageById:w,getPageByBookmark:S,canChoose:E,getChoiceRequirements:I,makeChoice:P,jumpToPage:j,restart:_,getSaveSlots:D,saveGame:L,loadGame:U,deleteSave:K,exitStory:q,maxSaveSlots:JH,isEnding:re,canSave:z,consumeItem:H,purchaseItem:X,getItemDetails:W,getEnemyDetails:V,exportSaveAsCode:ee,importSaveFromCode:ae,loadGameState:se}}const uC=Dd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ne=N.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},i)=>{const o=r?o9:"button";return p.jsx(o,{className:Xe(uC({variant:t,size:n,className:e})),ref:i,...s})});Ne.displayName="Button";const Tt=N.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:Xe("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Tt.displayName="Card";const Wt=N.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:Xe("flex flex-col space-y-1.5 p-6",e),...t}));Wt.displayName="CardHeader";const Kt=N.forwardRef(({className:e,...t},n)=>p.jsx("h3",{ref:n,className:Xe("text-2xl font-semibold leading-none tracking-tight",e),...t}));Kt.displayName="CardTitle";const Fn=N.forwardRef(({className:e,...t},n)=>p.jsx("p",{ref:n,className:Xe("text-sm text-muted-foreground",e),...t}));Fn.displayName="CardDescription";const Dt=N.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:Xe("p-6 pt-0",e),...t}));Dt.displayName="CardContent";const nU=N.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:Xe("flex items-center p-6 pt-0",e),...t}));nU.displayName="CardFooter";const rU=Dd("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Eh=N.forwardRef(({className:e,variant:t,...n},r)=>p.jsx("div",{ref:r,role:"alert",className:Xe(rU({variant:t}),e),...n}));Eh.displayName="Alert";const sU=N.forwardRef(({className:e,...t},n)=>p.jsx("h5",{ref:n,className:Xe("mb-1 font-medium leading-none tracking-tight",e),...t}));sU.displayName="AlertTitle";const Nh=N.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:Xe("text-sm [&_p]:leading-relaxed",e),...t}));Nh.displayName="AlertDescription";var iU=N.createContext(void 0);function op(e){const t=N.useContext(iU);return e||t||"ltr"}var my="rovingFocusGroup.onEntryFocus",oU={bubbles:!1,cancelable:!0},ap="RovingFocusGroup",[Mv,hM,aU]=ag(ap),[lU,pM]=cs(ap,[aU]),[cU,uU]=lU(ap),mM=N.forwardRef((e,t)=>p.jsx(Mv.Provider,{scope:e.__scopeRovingFocusGroup,children:p.jsx(Mv.Slot,{scope:e.__scopeRovingFocusGroup,children:p.jsx(dU,{...e,ref:t})})}));mM.displayName=ap;var dU=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...g}=e,y=N.useRef(null),w=dt(t,y),S=op(i),[C,A]=li({prop:o,defaultProp:l??null,onChange:c,caller:ap}),[E,k]=N.useState(!1),I=sr(d),M=hM(n),P=N.useRef(!1),[j,_]=N.useState(0);return N.useEffect(()=>{const D=y.current;if(D)return D.addEventListener(my,I),()=>D.removeEventListener(my,I)},[I]),p.jsx(cU,{scope:n,orientation:r,dir:S,loop:s,currentTabStopId:C,onItemFocus:N.useCallback(D=>A(D),[A]),onItemShiftTab:N.useCallback(()=>k(!0),[]),onFocusableItemAdd:N.useCallback(()=>_(D=>D+1),[]),onFocusableItemRemove:N.useCallback(()=>_(D=>D-1),[]),children:p.jsx(Ye.div,{tabIndex:E||j===0?-1:0,"data-orientation":r,...g,ref:w,style:{outline:"none",...e.style},onMouseDown:ze(e.onMouseDown,()=>{P.current=!0}),onFocus:ze(e.onFocus,D=>{const L=!P.current;if(D.target===D.currentTarget&&L&&!E){const U=new CustomEvent(my,oU);if(D.currentTarget.dispatchEvent(U),!U.defaultPrevented){const K=M().filter(Y=>Y.focusable),q=K.find(Y=>Y.active),re=K.find(Y=>Y.id===C),H=[q,re,...K].filter(Boolean).map(Y=>Y.ref.current);yM(H,h)}}P.current=!1}),onBlur:ze(e.onBlur,()=>k(!1))})})}),gM="RovingFocusGroupItem",xM=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...l}=e,c=Mi(),d=i||c,h=uU(gM,n),g=h.currentTabStopId===d,y=hM(n),{onFocusableItemAdd:w,onFocusableItemRemove:S,currentTabStopId:C}=h;return N.useEffect(()=>{if(r)return w(),()=>S()},[r,w,S]),p.jsx(Mv.ItemSlot,{scope:n,id:d,focusable:r,active:s,children:p.jsx(Ye.span,{tabIndex:g?0:-1,"data-orientation":h.orientation,...l,ref:t,onMouseDown:ze(e.onMouseDown,A=>{r?h.onItemFocus(d):A.preventDefault()}),onFocus:ze(e.onFocus,()=>h.onItemFocus(d)),onKeyDown:ze(e.onKeyDown,A=>{if(A.key==="Tab"&&A.shiftKey){h.onItemShiftTab();return}if(A.target!==A.currentTarget)return;const E=pU(A,h.orientation,h.dir);if(E!==void 0){if(A.metaKey||A.ctrlKey||A.altKey||A.shiftKey)return;A.preventDefault();let I=y().filter(M=>M.focusable).map(M=>M.ref.current);if(E==="last")I.reverse();else if(E==="prev"||E==="next"){E==="prev"&&I.reverse();const M=I.indexOf(A.currentTarget);I=h.loop?mU(I,M+1):I.slice(M+1)}setTimeout(()=>yM(I))}}),children:typeof o=="function"?o({isCurrentTabStop:g,hasTabStop:C!=null}):o})})});xM.displayName=gM;var fU={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function hU(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function pU(e,t,n){const r=hU(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return fU[r]}function yM(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function mU(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var gU=mM,xU=xM,Rg="Tabs",[yU,Fce]=cs(Rg,[pM]),wM=pM(),[wU,dC]=yU(Rg),vM=N.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,h=op(l),[g,y]=li({prop:r,onChange:s,defaultProp:i??"",caller:Rg});return p.jsx(wU,{scope:n,baseId:Mi(),value:g,onValueChange:y,orientation:o,dir:h,activationMode:c,children:p.jsx(Ye.div,{dir:h,"data-orientation":o,...d,ref:t})})});vM.displayName=Rg;var bM="TabsList",CM=N.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,i=dC(bM,n),o=wM(n);return p.jsx(gU,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:p.jsx(Ye.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});CM.displayName=bM;var SM="TabsTrigger",EM=N.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=e,o=dC(SM,n),l=wM(n),c=TM(o.baseId,r),d=kM(o.baseId,r),h=r===o.value;return p.jsx(xU,{asChild:!0,...l,focusable:!s,active:h,children:p.jsx(Ye.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:t,onMouseDown:ze(e.onMouseDown,g=>{!s&&g.button===0&&g.ctrlKey===!1?o.onValueChange(r):g.preventDefault()}),onKeyDown:ze(e.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&o.onValueChange(r)}),onFocus:ze(e.onFocus,()=>{const g=o.activationMode!=="manual";!h&&!s&&g&&o.onValueChange(r)})})})});EM.displayName=SM;var NM="TabsContent",AM=N.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=e,l=dC(NM,n),c=TM(l.baseId,r),d=kM(l.baseId,r),h=r===l.value,g=N.useRef(h);return N.useEffect(()=>{const y=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(y)},[]),p.jsx(us,{present:s||h,children:({present:y})=>p.jsx(Ye.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!y,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:g.current?"0s":void 0},children:y&&i})})});AM.displayName=NM;function TM(e,t){return`${e}-trigger-${t}`}function kM(e,t){return`${e}-content-${t}`}var vU=vM,IM=CM,RM=EM,MM=AM;const Mg=vU,lp=N.forwardRef(({className:e,...t},n)=>p.jsx(IM,{ref:n,className:Xe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));lp.displayName=IM.displayName;const fo=N.forwardRef(({className:e,...t},n)=>p.jsx(RM,{ref:n,className:Xe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));fo.displayName=RM.displayName;const ho=N.forwardRef(({className:e,...t},n)=>p.jsx(MM,{ref:n,className:Xe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));ho.displayName=MM.displayName;function bU(e){if(!e||typeof e!="object"||Array.isArray(e))return{valid:!1,error:"Invalid gamebook file: expected one root object."};const t=e;if(t.pages!==void 0){if(!Array.isArray(t.pages))return{valid:!1,error:'Invalid gamebook file: "pages" must be an array.'};if(t.pages.length===0)return{valid:!1,error:'Invalid gamebook file: "pages" array cannot be empty.'};for(let n=0;n<t.pages.length;n++){const r=t.pages[n];if(!r||typeof r!="object")return{valid:!1,error:`Invalid gamebook file: page at index ${n} is not an object.`};const s=r;if(s.id===void 0)return{valid:!1,error:`Invalid gamebook file: page at index ${n} is missing "id".`};if(typeof s.text!="string")return{valid:!1,error:`Invalid gamebook file: page ${s.id} is missing "text" or it's not a string.`};if(!Array.isArray(s.choices))return{valid:!1,error:`Invalid gamebook file: page ${s.id} is missing "choices" array.`}}return{valid:!0}}if(t.sections!==void 0){if(!Array.isArray(t.sections))return{valid:!1,error:'Invalid gamebook file: "sections" must be an array.'};if(t.sections.length===0)return{valid:!1,error:'Invalid gamebook file: "sections" array cannot be empty.'};const n=t.sections[0];if("text"in n||"choices"in n){for(let r=0;r<t.sections.length;r++)if(t.sections[r].id===void 0)return{valid:!1,error:`Invalid gamebook file: section at index ${r} is missing "id".`};return{valid:!0}}}return{valid:!1,error:'Invalid gamebook file: expected a "pages" array with valid page objects.'}}function CU(e){var h,g,y;const t=[],n=SU(e),r=new Set(Object.keys(((h=e.presets)==null?void 0:h.variables)||{}));(g=e.player)!=null&&g.startingVariables&&Object.keys(e.player.startingVariables).forEach(w=>r.add(w));const s=new Set;e.items&&(Array.isArray(e.items)?e.items.forEach(w=>s.add(w.id)):Object.keys(e.items).forEach(w=>s.add(w)));const i=new Set,o=new Set,l=new Set,c=new Set;for(const w of n){const S=String(w.id);i.has(S)&&t.push({type:"error",message:`Duplicate page ID: ${w.id}`,context:`Page "${w.text.substring(0,50)}..."`}),i.add(S),w.bookmark&&l.add(w.bookmark)}for(const w of n){w.effects&&YN(w.effects,r,s,t,`Page ${w.id}`);for(const S of w.choices)S.nextPageId!==void 0&&o.add(S.nextPageId),S.to!==void 0&&o.add(S.to),S.failurePageId!==void 0&&o.add(S.failurePageId),S.toBookmark&&c.add(S.toBookmark),S.conditions&&EU(S.conditions,r,s,t,`Page ${w.id}, choice "${S.text}"`),S.requires&&NU(S.requires,r,s,t,`Page ${w.id}, choice "${S.text}"`),S.effects&&YN(S.effects,r,s,t,`Page ${w.id}, choice "${S.text}"`),S.requiresItem&&s.size>0&&!s.has(S.requiresItem)&&t.push({type:"warning",message:`Item "${S.requiresItem}" not declared in presets`,context:`Page ${w.id}, choice "${S.text}"`})}for(const w of o){const S=String(w);let C=!1;for(const A of i)if(String(A)===S){C=!0;break}C||t.push({type:"error",message:`Referenced page ID "${w}" does not exist`})}for(const w of c)l.has(w)||t.push({type:"error",message:`Referenced bookmark "${w}" does not exist`});const d=((y=e.player)==null?void 0:y.startingItems)||[];for(const w of d)s.size>0&&!s.has(w)&&t.push({type:"warning",message:`Starting item "${w}" not declared in items array`,context:"Player configuration"});return{valid:t.filter(w=>w.type==="error").length===0,errors:t}}function SU(e){if(e.pages&&e.pages.length>0)return e.pages;if(e.sections&&e.sections.length>0){const t=e.sections[0];if("text"in t||"choices"in t)return e.sections.map(n=>({id:n.id,section:n.id,title:n.title||n.name,text:n.text||"",choices:n.choices||[],bookmark:n.bookmark,image:n.image,effects:n.effects,ending:n.ending}))}return[]}function YN(e,t,n,r,s){if(e.variables)for(const i of Object.keys(e.variables))t.size>0&&!t.has(i)&&r.push({type:"warning",message:`Variable "${i}" not declared in presets`,context:s});if(e.itemsAdd)for(const i of e.itemsAdd)n.size>0&&!n.has(i)&&r.push({type:"warning",message:`Item "${i}" not declared in presets`,context:s});if(e.itemsRemove)for(const i of e.itemsRemove)n.size>0&&!n.has(i)&&r.push({type:"warning",message:`Item "${i}" not declared in presets`,context:s})}function EU(e,t,n,r,s){if(e.variables)for(const i of Object.keys(e.variables))t.size>0&&!t.has(i)&&r.push({type:"warning",message:`Variable "${i}" not declared in presets`,context:s});if(e.items)for(const i of e.items)n.size>0&&!n.has(i)&&r.push({type:"warning",message:`Item "${i}" not declared in presets`,context:s})}function NU(e,t,n,r,s){if(e.variables)for(const i of Object.keys(e.variables))t.size>0&&!t.has(i)&&r.push({type:"warning",message:`Variable "${i}" not declared in presets`,context:s});if(e.items)for(const i of e.items)n.size>0&&!n.has(i)&&r.push({type:"warning",message:`Item "${i}" not declared in presets`,context:s})}const qN={meta:{title:"Sample Adventure",author:"Demo Author",version:"1.0",storyId:"550e8400-e29b-41d4-a716-446655440999"},presets:{stats:{health:{name:"Health",min:1,max:20,default:10,description:"Your life force"},luck:{name:"Luck",min:1,max:10,default:5,description:"Fortune favors the lucky"}},variables:{has_key:!1,solved_puzzle:!1}},player:{creationMode:"sliders",allowCustomName:!0,useStats:["health","luck"],startingItems:["torch"],startingVariables:{has_key:!1,solved_puzzle:!1}},items:[{id:"torch",name:"Torch",visible:!0,type:"consumable"},{id:"ancient_key",name:"Ancient Key",visible:!0,type:"key"}],sections:[{id:0,name:"Introduction"},{id:1,name:"The Cave"},{id:2,name:"Endings"}],pages:[{id:1,section:0,text:"You stand at the entrance of a mysterious cave. The darkness within beckons you forward, while the safety of the sunlit forest lies behind.",choices:[{text:"Enter the cave",nextPageId:2},{text:"Return to the forest",nextPageId:3}]},{id:2,section:1,text:"Inside the cave, you discover a puzzle inscribed on the wall. What is 7 + 8?",choices:[{text:"Solve the puzzle",input:{type:"number",prompt:"Enter your answer",answer:15},effects:{variables:{solved_puzzle:!0},itemsAdd:["ancient_key"]},nextPageId:4,failurePageId:5},{text:"Leave the cave",nextPageId:1}]},{id:3,section:2,text:"You decide the cave is too dangerous. Perhaps another day.",ending:{type:"soft"},choices:[]},{id:4,section:1,text:"The wall slides open, revealing a hidden chamber. You found an Ancient Key!",choices:[{text:"Enter the final chamber",nextPageId:6,conditions:{items:["ancient_key"]}},{text:"Return to entrance",nextPageId:1}]},{id:5,section:1,text:"The puzzle rejects your answer. The wall remains sealed.",choices:[{text:"Try again",nextPageId:2},{text:"Leave",nextPageId:1}]},{id:6,section:2,text:"Using the Ancient Key, you unlock the final chamber. Inside lies the treasure of ages. You have completed the adventure!",ending:{type:"hard"},choices:[]}]};function AU({onLoadStory:e}){const[t,n]=N.useState(null),[r,s]=N.useState([]),[i,o]=N.useState(!1),l=N.useCallback(C=>{n(null),s([]);const A=new FileReader;A.onload=E=>{var k,I;try{const M=(k=E.target)==null?void 0:k.result;let P;try{P=JSON.parse(M)}catch(U){console.error("JSON parse error:",U),n("Failed to parse JSON file. Please check for syntax errors.");return}const j=bU(P);if(!j.valid){console.error("Structure validation failed:",j.error),n(j.error||"Invalid gamebook file.");return}const _=P,D=CU(_);if(!D.valid){const U=D.errors.filter(K=>K.type==="error");console.error("Validation errors:",U),n(U.map(K=>`${K.message}${K.context?` (${K.context})`:""}`).join(`
`));return}const L=D.errors.filter(U=>U.type==="warning");L.length>0&&s(L),console.log("Loading gamebook:",(I=_.meta)==null?void 0:I.title),e(_)}catch(M){console.error("Unexpected error:",M),n("An unexpected error occurred while processing the file.")}},A.onerror=()=>{console.error("FileReader error"),n("Failed to read the file.")},A.readAsText(C)},[e]),c=N.useCallback(C=>{var E;const A=(E=C.target.files)==null?void 0:E[0];A&&l(A)},[l]),d=N.useCallback(C=>{C.preventDefault(),o(!1);const A=C.dataTransfer.files[0];A?A.name.endsWith(".json")?l(A):n("Please drop a valid JSON file (.json extension required)."):n("Please drop a valid JSON file.")},[l]),h=N.useCallback(C=>{C.preventDefault(),o(!0)},[]),g=N.useCallback(()=>{o(!1)},[]),y=N.useCallback(()=>{const C=new Blob([JSON.stringify(qN,null,2)],{type:"application/json"}),A=URL.createObjectURL(C),E=document.createElement("a");E.href=A,E.download="gamebook-template.json",E.click(),URL.revokeObjectURL(A)},[]),w=N.useCallback(()=>{e(qN)},[e]),S=cM();return p.jsxs("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:[p.jsx("div",{className:"absolute top-4 right-4",children:p.jsxs(Ne,{onClick:()=>S("/builder"),size:"lg",className:"gap-2",children:[p.jsx(aB,{className:"h-5 w-5"}),"Story Builder"]})}),p.jsxs("div",{className:"w-full max-w-6xl space-y-6",children:[p.jsxs("div",{className:"text-center space-y-2",children:[p.jsx("h1",{className:"text-4xl font-serif font-bold text-foreground",children:"Interactive Gamebook"}),p.jsx("p",{className:"text-muted-foreground text-lg",children:"Upload your story and begin your adventure"})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsxs(Tt,{className:"h-fit",children:[p.jsxs(Wt,{children:[p.jsxs(Kt,{className:"flex items-center gap-2",children:[p.jsx(eR,{className:"h-5 w-5"}),"Load Your Story"]}),p.jsx(Fn,{children:"Upload a JSON file containing your gamebook pages and choices"})]}),p.jsxs(Dt,{className:"space-y-4",children:[p.jsxs("div",{onDrop:d,onDragOver:h,onDragLeave:g,className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${i?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}`,children:[p.jsx(fg,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),p.jsx("p",{className:"text-foreground font-medium mb-2",children:"Drag & drop your JSON file here"}),p.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"or"}),p.jsxs("label",{children:[p.jsx("input",{type:"file",accept:".json,application/json",onChange:c,className:"hidden"}),p.jsx(Ne,{variant:"outline",asChild:!0,children:p.jsx("span",{className:"cursor-pointer",children:"Browse Files"})})]})]}),t&&p.jsxs(Eh,{variant:"destructive",children:[p.jsx(Nc,{className:"h-4 w-4"}),p.jsx(Nh,{className:"whitespace-pre-wrap",children:t})]}),r.length>0&&p.jsxs(Eh,{children:[p.jsx(km,{className:"h-4 w-4"}),p.jsxs(Nh,{children:[p.jsx("p",{className:"font-medium mb-1",children:"Warnings (story will still load):"}),p.jsxs("ul",{className:"text-sm list-disc list-inside",children:[r.slice(0,5).map((C,A)=>p.jsx("li",{children:C.message},A)),r.length>5&&p.jsxs("li",{children:["...and ",r.length-5," more"]})]})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(Ne,{variant:"secondary",onClick:y,className:"flex-1",children:[p.jsx(Tm,{className:"h-4 w-4 mr-2"}),"Download Template"]}),p.jsxs(Ne,{variant:"default",onClick:w,className:"flex-1",children:[p.jsx(nB,{className:"h-4 w-4 mr-2"}),"Try Sample Story"]})]})]})]}),p.jsxs(Tt,{className:"h-fit",children:[p.jsxs(Wt,{children:[p.jsx(Kt,{children:"JSON Format & Preview"}),p.jsx(Fn,{children:"View the structure or see what it looks like"})]}),p.jsx(Dt,{children:p.jsxs(Mg,{defaultValue:"json",className:"w-full",children:[p.jsxs(lp,{className:"grid w-full grid-cols-2",children:[p.jsxs(fo,{value:"json",className:"gap-2",children:[p.jsx(sB,{className:"h-4 w-4"}),"JSON"]}),p.jsxs(fo,{value:"preview",className:"gap-2",children:[p.jsx(iB,{className:"h-4 w-4"}),"Preview"]})]}),p.jsxs(ho,{value:"json",className:"space-y-3 mt-4",children:[p.jsx("pre",{className:"bg-muted p-4 rounded-lg text-xs overflow-x-auto max-h-[400px]",children:`{
  "meta": { "title": "...", "author": "...", "version": "1.0" },
  "player": {
    "stats": { "Health": 10, "Focus": 5 },
    "variables": { "flag_a": false },
    "inventory": []
  },
  "items": [
    { "id": "key", "name": "Ancient Key", "visible": true }
  ],
  "pages": [{
    "id": 1, "text": "**Bold** and _italic_ text...",
    "choices": [{
      "text": "Choice text", "nextPageId": 2,
      "effects": { "stats": { "Health": -1 }, "itemsAdd": ["key"] }
    }]
  }]
}`}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Stats are author-defined numeric values. Effects apply raw deltas. Text supports **bold**, _italic_, and line breaks."})]}),p.jsx(ho,{value:"preview",className:"space-y-4 mt-4",children:p.jsxs("div",{className:"bg-muted/50 p-6 rounded-lg space-y-4 border border-border",children:[p.jsx("div",{className:"bg-background p-4 rounded-lg",children:p.jsxs("p",{className:"text-sm leading-relaxed",children:["You stand at the entrance of a ",p.jsx("strong",{children:"mysterious cave"}),". The darkness within beckons you forward, while the safety of the sunlit forest lies behind."]})}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Ne,{variant:"default",className:"w-full justify-start",children:"Enter the cave"}),p.jsxs(Ne,{variant:"outline",className:"w-full justify-start opacity-50 cursor-not-allowed",children:[p.jsx("span",{children:"Unlock the gate"}),p.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:"Requires: Ancient Key"})]})]}),p.jsx("div",{className:"pt-2 border-t border-border",children:p.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"This is how your story will appear to readers"})})]})})]})})]})]})]})]})}var gy="focusScope.autoFocusOnMount",xy="focusScope.autoFocusOnUnmount",ZN={bubbles:!1,cancelable:!0},TU="FocusScope",_g=N.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=e,[l,c]=N.useState(null),d=sr(s),h=sr(i),g=N.useRef(null),y=dt(t,C=>c(C)),w=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(r){let C=function(I){if(w.paused||!l)return;const M=I.target;l.contains(M)?g.current=M:ya(g.current,{select:!0})},A=function(I){if(w.paused||!l)return;const M=I.relatedTarget;M!==null&&(l.contains(M)||ya(g.current,{select:!0}))},E=function(I){if(document.activeElement===document.body)for(const P of I)P.removedNodes.length>0&&ya(l)};document.addEventListener("focusin",C),document.addEventListener("focusout",A);const k=new MutationObserver(E);return l&&k.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",A),k.disconnect()}}},[r,l,w.paused]),N.useEffect(()=>{if(l){JN.add(w);const C=document.activeElement;if(!l.contains(C)){const E=new CustomEvent(gy,ZN);l.addEventListener(gy,d),l.dispatchEvent(E),E.defaultPrevented||(kU(OU(_M(l)),{select:!0}),document.activeElement===C&&ya(l))}return()=>{l.removeEventListener(gy,d),setTimeout(()=>{const E=new CustomEvent(xy,ZN);l.addEventListener(xy,h),l.dispatchEvent(E),E.defaultPrevented||ya(C??document.body,{select:!0}),l.removeEventListener(xy,h),JN.remove(w)},0)}}},[l,d,h,w]);const S=N.useCallback(C=>{if(!n&&!r||w.paused)return;const A=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,E=document.activeElement;if(A&&E){const k=C.currentTarget,[I,M]=IU(k);I&&M?!C.shiftKey&&E===M?(C.preventDefault(),n&&ya(I,{select:!0})):C.shiftKey&&E===I&&(C.preventDefault(),n&&ya(M,{select:!0})):E===k&&C.preventDefault()}},[n,r,w.paused]);return p.jsx(Ye.div,{tabIndex:-1,...o,ref:y,onKeyDown:S})});_g.displayName=TU;function kU(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(ya(r,{select:t}),document.activeElement!==n)return}function IU(e){const t=_M(e),n=QN(t,e),r=QN(t.reverse(),e);return[n,r]}function _M(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function QN(e,t){for(const n of e)if(!RU(n,{upTo:t}))return n}function RU(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function MU(e){return e instanceof HTMLInputElement&&"select"in e}function ya(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&MU(e)&&t&&e.select()}}var JN=_U();function _U(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=eA(e,t),e.unshift(t)},remove(t){var n;e=eA(e,t),(n=e[0])==null||n.resume()}}}function eA(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function OU(e){return e.filter(t=>t.tagName!=="A")}var yy=0;function fC(){N.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??tA()),document.body.insertAdjacentElement("beforeend",e[1]??tA()),yy++,()=>{yy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),yy--}},[])}function tA(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var oo=function(){return oo=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},oo.apply(this,arguments)};function OM(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function PU(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,i;r<s;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var W0="right-scroll-bar-position",G0="width-before-scroll-bar",DU="with-scroll-bars-hidden",jU="--removed-body-scroll-bar-size";function wy(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function LU(e,t){var n=N.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var BU=typeof window<"u"?N.useLayoutEffect:N.useEffect,nA=new WeakMap;function FU(e,t){var n=LU(null,function(r){return e.forEach(function(s){return wy(s,r)})});return BU(function(){var r=nA.get(n);if(r){var s=new Set(r),i=new Set(e),o=n.current;s.forEach(function(l){i.has(l)||wy(l,null)}),i.forEach(function(l){s.has(l)||wy(l,o)})}nA.set(n,e)},[e]),n}function zU(e){return e}function VU(e,t){t===void 0&&(t=zU);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var h=o;o=[],h.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(h){o.push(h),d()},filter:function(h){return o=o.filter(h),n}}}};return s}function HU(e){e===void 0&&(e={});var t=VU(null);return t.options=oo({async:!0,ssr:!1},e),t}var PM=function(e){var t=e.sideCar,n=OM(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,oo({},n))};PM.isSideCarExport=!0;function UU(e,t){return e.useMedium(t),PM}var DM=HU(),vy=function(){},Og=N.forwardRef(function(e,t){var n=N.useRef(null),r=N.useState({onScrollCapture:vy,onWheelCapture:vy,onTouchMoveCapture:vy}),s=r[0],i=r[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,h=e.enabled,g=e.shards,y=e.sideCar,w=e.noRelative,S=e.noIsolation,C=e.inert,A=e.allowPinchZoom,E=e.as,k=E===void 0?"div":E,I=e.gapMode,M=OM(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=y,j=FU([n,t]),_=oo(oo({},M),s);return N.createElement(N.Fragment,null,h&&N.createElement(P,{sideCar:DM,removeScrollBar:d,shards:g,noRelative:w,noIsolation:S,inert:C,setCallbacks:i,allowPinchZoom:!!A,lockRef:n,gapMode:I}),o?N.cloneElement(N.Children.only(l),oo(oo({},_),{ref:j})):N.createElement(k,oo({},_,{className:c,ref:j}),l))});Og.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Og.classNames={fullWidth:G0,zeroRight:W0};var $U=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function WU(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=$U();return t&&e.setAttribute("nonce",t),e}function GU(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function XU(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var KU=function(){var e=0,t=null;return{add:function(n){e==0&&(t=WU())&&(GU(t,n),XU(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},YU=function(){var e=KU();return function(t,n){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},jM=function(){var e=YU(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},qU={left:0,top:0,right:0,gap:0},by=function(e){return parseInt(e||"",10)||0},ZU=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[by(n),by(r),by(s)]},QU=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return qU;var t=ZU(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},JU=jM(),Fu="data-scroll-locked",e$=function(e,t,n,r){var s=e.left,i=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(DU,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Fu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(W0,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(G0,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(W0," .").concat(W0,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(G0," .").concat(G0,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Fu,`] {
    `).concat(jU,": ").concat(l,`px;
  }
`)},rA=function(){var e=parseInt(document.body.getAttribute(Fu)||"0",10);return isFinite(e)?e:0},t$=function(){N.useEffect(function(){return document.body.setAttribute(Fu,(rA()+1).toString()),function(){var e=rA()-1;e<=0?document.body.removeAttribute(Fu):document.body.setAttribute(Fu,e.toString())}},[])},n$=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;t$();var i=N.useMemo(function(){return QU(s)},[s]);return N.createElement(JU,{styles:e$(i,!t,s,n?"":"!important")})},_v=!1;if(typeof window<"u")try{var Jp=Object.defineProperty({},"passive",{get:function(){return _v=!0,!0}});window.addEventListener("test",Jp,Jp),window.removeEventListener("test",Jp,Jp)}catch{_v=!1}var tu=_v?{passive:!1}:!1,r$=function(e){return e.tagName==="TEXTAREA"},LM=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!r$(e)&&n[t]==="visible")},s$=function(e){return LM(e,"overflowY")},i$=function(e){return LM(e,"overflowX")},sA=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=BM(e,r);if(s){var i=FM(e,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},o$=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},a$=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},BM=function(e,t){return e==="v"?s$(t):i$(t)},FM=function(e,t){return e==="v"?o$(t):a$(t)},l$=function(e,t){return e==="h"&&t==="rtl"?-1:1},c$=function(e,t,n,r,s){var i=l$(e,window.getComputedStyle(t).direction),o=i*r,l=n.target,c=t.contains(l),d=!1,h=o>0,g=0,y=0;do{if(!l)break;var w=FM(e,l),S=w[0],C=w[1],A=w[2],E=C-A-i*S;(S||E)&&BM(e,l)&&(g+=E,y+=S);var k=l.parentNode;l=k&&k.nodeType===Node.DOCUMENT_FRAGMENT_NODE?k.host:k}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(h&&(Math.abs(g)<1||!s)||!h&&(Math.abs(y)<1||!s))&&(d=!0),d},e0=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},iA=function(e){return[e.deltaX,e.deltaY]},oA=function(e){return e&&"current"in e?e.current:e},u$=function(e,t){return e[0]===t[0]&&e[1]===t[1]},d$=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},f$=0,nu=[];function h$(e){var t=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),s=N.useState(f$++)[0],i=N.useState(jM)[0],o=N.useRef(e);N.useEffect(function(){o.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var C=PU([e.lockRef.current],(e.shards||[]).map(oA),!0).filter(Boolean);return C.forEach(function(A){return A.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),C.forEach(function(A){return A.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=N.useCallback(function(C,A){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!o.current.allowPinchZoom;var E=e0(C),k=n.current,I="deltaX"in C?C.deltaX:k[0]-E[0],M="deltaY"in C?C.deltaY:k[1]-E[1],P,j=C.target,_=Math.abs(I)>Math.abs(M)?"h":"v";if("touches"in C&&_==="h"&&j.type==="range")return!1;var D=sA(_,j);if(!D)return!0;if(D?P=_:(P=_==="v"?"h":"v",D=sA(_,j)),!D)return!1;if(!r.current&&"changedTouches"in C&&(I||M)&&(r.current=P),!P)return!0;var L=r.current||P;return c$(L,A,C,L==="h"?I:M,!0)},[]),c=N.useCallback(function(C){var A=C;if(!(!nu.length||nu[nu.length-1]!==i)){var E="deltaY"in A?iA(A):e0(A),k=t.current.filter(function(P){return P.name===A.type&&(P.target===A.target||A.target===P.shadowParent)&&u$(P.delta,E)})[0];if(k&&k.should){A.cancelable&&A.preventDefault();return}if(!k){var I=(o.current.shards||[]).map(oA).filter(Boolean).filter(function(P){return P.contains(A.target)}),M=I.length>0?l(A,I[0]):!o.current.noIsolation;M&&A.cancelable&&A.preventDefault()}}},[]),d=N.useCallback(function(C,A,E,k){var I={name:C,delta:A,target:E,should:k,shadowParent:p$(E)};t.current.push(I),setTimeout(function(){t.current=t.current.filter(function(M){return M!==I})},1)},[]),h=N.useCallback(function(C){n.current=e0(C),r.current=void 0},[]),g=N.useCallback(function(C){d(C.type,iA(C),C.target,l(C,e.lockRef.current))},[]),y=N.useCallback(function(C){d(C.type,e0(C),C.target,l(C,e.lockRef.current))},[]);N.useEffect(function(){return nu.push(i),e.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:y}),document.addEventListener("wheel",c,tu),document.addEventListener("touchmove",c,tu),document.addEventListener("touchstart",h,tu),function(){nu=nu.filter(function(C){return C!==i}),document.removeEventListener("wheel",c,tu),document.removeEventListener("touchmove",c,tu),document.removeEventListener("touchstart",h,tu)}},[]);var w=e.removeScrollBar,S=e.inert;return N.createElement(N.Fragment,null,S?N.createElement(i,{styles:d$(s)}):null,w?N.createElement(n$,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function p$(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const m$=UU(DM,h$);var Pg=N.forwardRef(function(e,t){return N.createElement(Og,oo({},e,{ref:t,sideCar:m$}))});Pg.classNames=Og.classNames;var g$=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ru=new WeakMap,t0=new WeakMap,n0={},Cy=0,zM=function(e){return e&&(e.host||zM(e.parentNode))},x$=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=zM(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},y$=function(e,t,n,r){var s=x$(t,Array.isArray(e)?e:[e]);n0[n]||(n0[n]=new WeakMap);var i=n0[n],o=[],l=new Set,c=new Set(s),d=function(g){!g||l.has(g)||(l.add(g),d(g.parentNode))};s.forEach(d);var h=function(g){!g||c.has(g)||Array.prototype.forEach.call(g.children,function(y){if(l.has(y))h(y);else try{var w=y.getAttribute(r),S=w!==null&&w!=="false",C=(ru.get(y)||0)+1,A=(i.get(y)||0)+1;ru.set(y,C),i.set(y,A),o.push(y),C===1&&S&&t0.set(y,!0),A===1&&y.setAttribute(n,"true"),S||y.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",y,E)}})};return h(t),l.clear(),Cy++,function(){o.forEach(function(g){var y=ru.get(g)-1,w=i.get(g)-1;ru.set(g,y),i.set(g,w),y||(t0.has(g)||g.removeAttribute(r),t0.delete(g)),w||g.removeAttribute(n)}),Cy--,Cy||(ru=new WeakMap,ru=new WeakMap,t0=new WeakMap,n0={})}},hC=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=g$(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),y$(r,s,n,"aria-hidden")):function(){return null}},Dg="Dialog",[VM,HM]=cs(Dg),[w$,Fi]=VM(Dg),UM=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=e,l=N.useRef(null),c=N.useRef(null),[d,h]=li({prop:r,defaultProp:s??!1,onChange:i,caller:Dg});return p.jsx(w$,{scope:t,triggerRef:l,contentRef:c,contentId:Mi(),titleId:Mi(),descriptionId:Mi(),open:d,onOpenChange:h,onOpenToggle:N.useCallback(()=>h(g=>!g),[h]),modal:o,children:n})};UM.displayName=Dg;var $M="DialogTrigger",WM=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Fi($M,n),i=dt(t,s.triggerRef);return p.jsx(Ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":gC(s.open),...r,ref:i,onClick:ze(e.onClick,s.onOpenToggle)})});WM.displayName=$M;var pC="DialogPortal",[v$,GM]=VM(pC,{forceMount:void 0}),XM=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,i=Fi(pC,t);return p.jsx(v$,{scope:t,forceMount:n,children:N.Children.map(r,o=>p.jsx(us,{present:n||i.open,children:p.jsx(rp,{asChild:!0,container:s,children:o})}))})};XM.displayName=pC;var Dm="DialogOverlay",KM=N.forwardRef((e,t)=>{const n=GM(Dm,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=Fi(Dm,e.__scopeDialog);return i.modal?p.jsx(us,{present:r||i.open,children:p.jsx(C$,{...s,ref:t})}):null});KM.displayName=Dm;var b$=Ec("DialogOverlay.RemoveScroll"),C$=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Fi(Dm,n);return p.jsx(Pg,{as:b$,allowPinchZoom:!0,shards:[s.contentRef],children:p.jsx(Ye.div,{"data-state":gC(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Tc="DialogContent",YM=N.forwardRef((e,t)=>{const n=GM(Tc,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,i=Fi(Tc,e.__scopeDialog);return p.jsx(us,{present:r||i.open,children:i.modal?p.jsx(S$,{...s,ref:t}):p.jsx(E$,{...s,ref:t})})});YM.displayName=Tc;var S$=N.forwardRef((e,t)=>{const n=Fi(Tc,e.__scopeDialog),r=N.useRef(null),s=dt(t,n.contentRef,r);return N.useEffect(()=>{const i=r.current;if(i)return hC(i)},[]),p.jsx(qM,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ze(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ze(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:ze(e.onFocusOutside,i=>i.preventDefault())})}),E$=N.forwardRef((e,t)=>{const n=Fi(Tc,e.__scopeDialog),r=N.useRef(!1),s=N.useRef(!1);return p.jsx(qM,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),qM=N.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=e,l=Fi(Tc,n),c=N.useRef(null),d=dt(t,c);return fC(),p.jsxs(p.Fragment,{children:[p.jsx(_g,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:p.jsx(Pd,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":gC(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(A$,{titleId:l.titleId}),p.jsx(k$,{contentRef:c,descriptionId:l.descriptionId})]})]})}),mC="DialogTitle",ZM=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Fi(mC,n);return p.jsx(Ye.h2,{id:s.titleId,...r,ref:t})});ZM.displayName=mC;var QM="DialogDescription",JM=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Fi(QM,n);return p.jsx(Ye.p,{id:s.descriptionId,...r,ref:t})});JM.displayName=QM;var e8="DialogClose",t8=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Fi(e8,n);return p.jsx(Ye.button,{type:"button",...r,ref:t,onClick:ze(e.onClick,()=>s.onOpenChange(!1))})});t8.displayName=e8;function gC(e){return e?"open":"closed"}var n8="DialogTitleWarning",[N$,r8]=s9(n8,{contentName:Tc,titleName:mC,docsSlug:"dialog"}),A$=({titleId:e})=>{const t=r8(n8),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return N.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},T$="DialogDescriptionWarning",k$=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r8(T$).contentName}}.`;return N.useEffect(()=>{var i;const s=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},xC=UM,yC=WM,wC=XM,cp=KM,up=YM,dp=ZM,fp=JM,jg=t8;const go=xC,Lg=yC,I$=wC,s8=N.forwardRef(({className:e,...t},n)=>p.jsx(cp,{ref:n,className:Xe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));s8.displayName=cp.displayName;const ji=N.forwardRef(({className:e,children:t,...n},r)=>p.jsxs(I$,{children:[p.jsx(s8,{}),p.jsxs(up,{ref:r,className:Xe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,p.jsxs(jg,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[p.jsx(hg,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ji.displayName=up.displayName;const Li=({className:e,...t})=>p.jsx("div",{className:Xe("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Li.displayName="DialogHeader";const Hc=({className:e,...t})=>p.jsx("div",{className:Xe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Hc.displayName="DialogFooter";const Bi=N.forwardRef(({className:e,...t},n)=>p.jsx(dp,{ref:n,className:Xe("text-lg font-semibold leading-none tracking-tight",e),...t}));Bi.displayName=dp.displayName;const Jo=N.forwardRef(({className:e,...t},n)=>p.jsx(fp,{ref:n,className:Xe("text-sm text-muted-foreground",e),...t}));Jo.displayName=fp.displayName;const at=N.forwardRef(({className:e,type:t,...n},r)=>p.jsx("input",{type:t,className:Xe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));at.displayName="Input";var R$="Label",i8=N.forwardRef((e,t)=>p.jsx(Ye.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));i8.displayName=R$;var o8=i8;const M$=Dd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Fe=N.forwardRef(({className:e,...t},n)=>p.jsx(o8,{ref:n,className:Xe(M$(),e),...t}));Fe.displayName=o8.displayName;var We;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(We||(We={}));var aA=new Map([[We.QR_CODE,"QR_CODE"],[We.AZTEC,"AZTEC"],[We.CODABAR,"CODABAR"],[We.CODE_39,"CODE_39"],[We.CODE_93,"CODE_93"],[We.CODE_128,"CODE_128"],[We.DATA_MATRIX,"DATA_MATRIX"],[We.MAXICODE,"MAXICODE"],[We.ITF,"ITF"],[We.EAN_13,"EAN_13"],[We.EAN_8,"EAN_8"],[We.PDF_417,"PDF_417"],[We.RSS_14,"RSS_14"],[We.RSS_EXPANDED,"RSS_EXPANDED"],[We.UPC_A,"UPC_A"],[We.UPC_E,"UPC_E"],[We.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),lA;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(lA||(lA={}));function _$(e){return Object.values(We).includes(e)}var jm;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(jm||(jm={}));var O$=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[jm.SCAN_TYPE_CAMERA,jm.SCAN_TYPE_FILE],e}(),a8=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!aA.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,aA.get(t))},e}(),cA=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),Ov;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Ov||(Ov={}));var P$=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:Ov.UNKWOWN_ERROR}},e}(),D$=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Oo(e){return typeof e>"u"||e===null}var Tu=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),l8=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var r=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var s=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],i=new Set(s),o=Object.keys(t),l=0,c=o;l<c.length;l++){var d=c[l];if(i.has(d))return n.logError("".concat(d," is not supported videoConstaints."),!0),!1}return!0},e}(),Pv={exports:{}};(function(e,t){(function(n,r){r(t)})(Zd,function(n){function r(B){return B==null}var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,a){B.__proto__=a}||function(B,a){for(var u in a)a.hasOwnProperty(u)&&(B[u]=a[u])};function i(B,a){s(B,a);function u(){this.constructor=B}B.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}function o(B,a){var u=Object.setPrototypeOf;u?u(B,a):B.__proto__=a}function l(B,a){a===void 0&&(a=B.constructor);var u=Error.captureStackTrace;u&&u(B,a)}var c=function(B){i(a,B);function a(u){var f=this.constructor,m=B.call(this,u)||this;return Object.defineProperty(m,"name",{value:f.name,enumerable:!1}),o(m,f.prototype),l(m),m}return a}(Error);class d extends c{constructor(a=void 0){super(a),this.message=a}getKind(){return this.constructor.kind}}d.kind="Exception";class h extends d{}h.kind="ArgumentException";class g extends d{}g.kind="IllegalArgumentException";class y{constructor(a){if(this.binarizer=a,a===null)throw new g("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(a,u){return this.binarizer.getBlackRow(a,u)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(a,u,f,m){const x=this.binarizer.getLuminanceSource().crop(a,u,f,m);return new y(this.binarizer.createBinarizer(x))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const a=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new y(this.binarizer.createBinarizer(a))}rotateCounterClockwise45(){const a=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new y(this.binarizer.createBinarizer(a))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class w extends d{static getChecksumInstance(){return new w}}w.kind="ChecksumException";class S{constructor(a){this.source=a}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class C{static arraycopy(a,u,f,m,x){for(;x--;)f[m++]=a[u++]}static currentTimeMillis(){return Date.now()}}class A extends d{}A.kind="IndexOutOfBoundsException";class E extends A{constructor(a=void 0,u=void 0){super(u),this.index=a,this.message=u}}E.kind="ArrayIndexOutOfBoundsException";class k{static fill(a,u){for(let f=0,m=a.length;f<m;f++)a[f]=u}static fillWithin(a,u,f,m){k.rangeCheck(a.length,u,f);for(let x=u;x<f;x++)a[x]=m}static rangeCheck(a,u,f){if(u>f)throw new g("fromIndex("+u+") > toIndex("+f+")");if(u<0)throw new E(u);if(f>a)throw new E(f)}static asList(...a){return a}static create(a,u,f){return Array.from({length:a}).map(x=>Array.from({length:u}).fill(f))}static createInt32Array(a,u,f){return Array.from({length:a}).map(x=>Int32Array.from({length:u}).fill(f))}static equals(a,u){if(!a||!u||!a.length||!u.length||a.length!==u.length)return!1;for(let f=0,m=a.length;f<m;f++)if(a[f]!==u[f])return!1;return!0}static hashCode(a){if(a===null)return 0;let u=1;for(const f of a)u=31*u+f;return u}static fillUint8Array(a,u){for(let f=0;f!==a.length;f++)a[f]=u}static copyOf(a,u){return a.slice(0,u)}static copyOfUint8Array(a,u){if(a.length<=u){const f=new Uint8Array(u);return f.set(a),f}return a.slice(0,u)}static copyOfRange(a,u,f){const m=f-u,x=new Int32Array(m);return C.arraycopy(a,u,x,0,m),x}static binarySearch(a,u,f){f===void 0&&(f=k.numberComparator);let m=0,x=a.length-1;for(;m<=x;){const v=x+m>>1,b=f(u,a[v]);if(b>0)m=v+1;else if(b<0)x=v-1;else return v}return-m-1}static numberComparator(a,u){return a-u}}class I{static numberOfTrailingZeros(a){let u;if(a===0)return 32;let f=31;return u=a<<16,u!==0&&(f-=16,a=u),u=a<<8,u!==0&&(f-=8,a=u),u=a<<4,u!==0&&(f-=4,a=u),u=a<<2,u!==0&&(f-=2,a=u),f-(a<<1>>>31)}static numberOfLeadingZeros(a){if(a===0)return 32;let u=1;return a>>>16||(u+=16,a<<=16),a>>>24||(u+=8,a<<=8),a>>>28||(u+=4,a<<=4),a>>>30||(u+=2,a<<=2),u-=a>>>31,u}static toHexString(a){return a.toString(16)}static toBinaryString(a){return String(parseInt(String(a),2))}static bitCount(a){return a=a-(a>>>1&1431655765),a=(a&858993459)+(a>>>2&858993459),a=a+(a>>>4)&252645135,a=a+(a>>>8),a=a+(a>>>16),a&63}static truncDivision(a,u){return Math.trunc(a/u)}static parseInt(a,u=void 0){return parseInt(a,u)}}I.MIN_VALUE_32_BITS=-2147483648,I.MAX_VALUE=Number.MAX_SAFE_INTEGER;class M{constructor(a,u){a===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=a,u==null?this.bits=M.makeArray(a):this.bits=u)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(a){if(a>this.bits.length*32){const u=M.makeArray(a);C.arraycopy(this.bits,0,u,0,this.bits.length),this.bits=u}}get(a){return(this.bits[Math.floor(a/32)]&1<<(a&31))!==0}set(a){this.bits[Math.floor(a/32)]|=1<<(a&31)}flip(a){this.bits[Math.floor(a/32)]^=1<<(a&31)}getNextSet(a){const u=this.size;if(a>=u)return u;const f=this.bits;let m=Math.floor(a/32),x=f[m];x&=~((1<<(a&31))-1);const v=f.length;for(;x===0;){if(++m===v)return u;x=f[m]}const b=m*32+I.numberOfTrailingZeros(x);return b>u?u:b}getNextUnset(a){const u=this.size;if(a>=u)return u;const f=this.bits;let m=Math.floor(a/32),x=~f[m];x&=~((1<<(a&31))-1);const v=f.length;for(;x===0;){if(++m===v)return u;x=~f[m]}const b=m*32+I.numberOfTrailingZeros(x);return b>u?u:b}setBulk(a,u){this.bits[Math.floor(a/32)]=u}setRange(a,u){if(u<a||a<0||u>this.size)throw new g;if(u===a)return;u--;const f=Math.floor(a/32),m=Math.floor(u/32),x=this.bits;for(let v=f;v<=m;v++){const b=v>f?0:a&31,R=(2<<(v<m?31:u&31))-(1<<b);x[v]|=R}}clear(){const a=this.bits.length,u=this.bits;for(let f=0;f<a;f++)u[f]=0}isRange(a,u,f){if(u<a||a<0||u>this.size)throw new g;if(u===a)return!0;u--;const m=Math.floor(a/32),x=Math.floor(u/32),v=this.bits;for(let b=m;b<=x;b++){const T=b>m?0:a&31,O=(2<<(b<x?31:u&31))-(1<<T)&4294967295;if((v[b]&O)!==(f?O:0))return!1}return!0}appendBit(a){this.ensureCapacity(this.size+1),a&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(a,u){if(u<0||u>32)throw new g("Num bits must be between 0 and 32");this.ensureCapacity(this.size+u);for(let f=u;f>0;f--)this.appendBit((a>>f-1&1)===1)}appendBitArray(a){const u=a.size;this.ensureCapacity(this.size+u);for(let f=0;f<u;f++)this.appendBit(a.get(f))}xor(a){if(this.size!==a.size)throw new g("Sizes don't match");const u=this.bits;for(let f=0,m=u.length;f<m;f++)u[f]^=a.bits[f]}toBytes(a,u,f,m){for(let x=0;x<m;x++){let v=0;for(let b=0;b<8;b++)this.get(a)&&(v|=1<<7-b),a++;u[f+x]=v}}getBitArray(){return this.bits}reverse(){const a=new Int32Array(this.bits.length),u=Math.floor((this.size-1)/32),f=u+1,m=this.bits;for(let x=0;x<f;x++){let v=m[x];v=v>>1&1431655765|(v&1431655765)<<1,v=v>>2&858993459|(v&858993459)<<2,v=v>>4&252645135|(v&252645135)<<4,v=v>>8&16711935|(v&16711935)<<8,v=v>>16&65535|(v&65535)<<16,a[u-x]=v}if(this.size!==f*32){const x=f*32-this.size;let v=a[0]>>>x;for(let b=1;b<f;b++){const T=a[b];v|=T<<32-x,a[b-1]=v,v=T>>>x}a[f-1]=v}this.bits=a}static makeArray(a){return new Int32Array(Math.floor((a+31)/32))}equals(a){if(!(a instanceof M))return!1;const u=a;return this.size===u.size&&k.equals(this.bits,u.bits)}hashCode(){return 31*this.size+k.hashCode(this.bits)}toString(){let a="";for(let u=0,f=this.size;u<f;u++)u&7||(a+=" "),a+=this.get(u)?"X":".";return a}clone(){return new M(this.size,this.bits.slice())}}var P;(function(B){B[B.OTHER=0]="OTHER",B[B.PURE_BARCODE=1]="PURE_BARCODE",B[B.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",B[B.TRY_HARDER=3]="TRY_HARDER",B[B.CHARACTER_SET=4]="CHARACTER_SET",B[B.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",B[B.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",B[B.ASSUME_GS1=7]="ASSUME_GS1",B[B.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",B[B.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",B[B.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(P||(P={}));var j=P;class _ extends d{static getFormatInstance(){return new _}}_.kind="FormatException";var D;(function(B){B[B.Cp437=0]="Cp437",B[B.ISO8859_1=1]="ISO8859_1",B[B.ISO8859_2=2]="ISO8859_2",B[B.ISO8859_3=3]="ISO8859_3",B[B.ISO8859_4=4]="ISO8859_4",B[B.ISO8859_5=5]="ISO8859_5",B[B.ISO8859_6=6]="ISO8859_6",B[B.ISO8859_7=7]="ISO8859_7",B[B.ISO8859_8=8]="ISO8859_8",B[B.ISO8859_9=9]="ISO8859_9",B[B.ISO8859_10=10]="ISO8859_10",B[B.ISO8859_11=11]="ISO8859_11",B[B.ISO8859_13=12]="ISO8859_13",B[B.ISO8859_14=13]="ISO8859_14",B[B.ISO8859_15=14]="ISO8859_15",B[B.ISO8859_16=15]="ISO8859_16",B[B.SJIS=16]="SJIS",B[B.Cp1250=17]="Cp1250",B[B.Cp1251=18]="Cp1251",B[B.Cp1252=19]="Cp1252",B[B.Cp1256=20]="Cp1256",B[B.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",B[B.UTF8=22]="UTF8",B[B.ASCII=23]="ASCII",B[B.Big5=24]="Big5",B[B.GB18030=25]="GB18030",B[B.EUC_KR=26]="EUC_KR"})(D||(D={}));class L{constructor(a,u,f,...m){this.valueIdentifier=a,this.name=f,typeof u=="number"?this.values=Int32Array.from([u]):this.values=u,this.otherEncodingNames=m,L.VALUE_IDENTIFIER_TO_ECI.set(a,this),L.NAME_TO_ECI.set(f,this);const x=this.values;for(let v=0,b=x.length;v!==b;v++){const T=x[v];L.VALUES_TO_ECI.set(T,this)}for(const v of m)L.NAME_TO_ECI.set(v,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(a){if(a<0||a>=900)throw new _("incorect value");const u=L.VALUES_TO_ECI.get(a);if(u===void 0)throw new _("incorect value");return u}static getCharacterSetECIByName(a){const u=L.NAME_TO_ECI.get(a);if(u===void 0)throw new _("incorect value");return u}equals(a){if(!(a instanceof L))return!1;const u=a;return this.getName()===u.getName()}}L.VALUE_IDENTIFIER_TO_ECI=new Map,L.VALUES_TO_ECI=new Map,L.NAME_TO_ECI=new Map,L.Cp437=new L(D.Cp437,Int32Array.from([0,2]),"Cp437"),L.ISO8859_1=new L(D.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),L.ISO8859_2=new L(D.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),L.ISO8859_3=new L(D.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),L.ISO8859_4=new L(D.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),L.ISO8859_5=new L(D.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),L.ISO8859_6=new L(D.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),L.ISO8859_7=new L(D.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),L.ISO8859_8=new L(D.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),L.ISO8859_9=new L(D.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),L.ISO8859_10=new L(D.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),L.ISO8859_11=new L(D.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),L.ISO8859_13=new L(D.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),L.ISO8859_14=new L(D.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),L.ISO8859_15=new L(D.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),L.ISO8859_16=new L(D.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),L.SJIS=new L(D.SJIS,20,"SJIS","Shift_JIS"),L.Cp1250=new L(D.Cp1250,21,"Cp1250","windows-1250"),L.Cp1251=new L(D.Cp1251,22,"Cp1251","windows-1251"),L.Cp1252=new L(D.Cp1252,23,"Cp1252","windows-1252"),L.Cp1256=new L(D.Cp1256,24,"Cp1256","windows-1256"),L.UnicodeBigUnmarked=new L(D.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),L.UTF8=new L(D.UTF8,26,"UTF8","UTF-8"),L.ASCII=new L(D.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),L.Big5=new L(D.Big5,28,"Big5"),L.GB18030=new L(D.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),L.EUC_KR=new L(D.EUC_KR,30,"EUC_KR","EUC-KR");class U extends d{}U.kind="UnsupportedOperationException";class K{static decode(a,u){const f=this.encodingName(u);return this.customDecoder?this.customDecoder(a,f):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(f)?this.decodeFallback(a,f):new TextDecoder(f).decode(a)}static shouldDecodeOnFallback(a){return!K.isBrowser()&&a==="ISO-8859-1"}static encode(a,u){const f=this.encodingName(u);return this.customEncoder?this.customEncoder(a,f):typeof TextEncoder>"u"?this.encodeFallback(a):new TextEncoder().encode(a)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(a){return typeof a=="string"?a:a.getName()}static encodingCharacterSet(a){return a instanceof L?a:L.getCharacterSetECIByName(a)}static decodeFallback(a,u){const f=this.encodingCharacterSet(u);if(K.isDecodeFallbackSupported(f)){let m="";for(let x=0,v=a.length;x<v;x++){let b=a[x].toString(16);b.length<2&&(b="0"+b),m+="%"+b}return decodeURIComponent(m)}if(f.equals(L.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(a.buffer));throw new U(`Encoding ${this.encodingName(u)} not supported by fallback.`)}static isDecodeFallbackSupported(a){return a.equals(L.UTF8)||a.equals(L.ISO8859_1)||a.equals(L.ASCII)}static encodeFallback(a){const f=btoa(unescape(encodeURIComponent(a))).split(""),m=[];for(let x=0;x<f.length;x++)m.push(f[x].charCodeAt(0));return new Uint8Array(m)}}class q{static castAsNonUtf8Char(a,u=null){const f=u?u.getName():this.ISO88591;return K.decode(new Uint8Array([a]),f)}static guessEncoding(a,u){if(u!=null&&u.get(j.CHARACTER_SET)!==void 0)return u.get(j.CHARACTER_SET).toString();const f=a.length;let m=!0,x=!0,v=!0,b=0,T=0,R=0,O=0,F=0,$=0,J=0,le=0,ue=0,he=0,ge=0;const Oe=a.length>3&&a[0]===239&&a[1]===187&&a[2]===191;for(let Pe=0;Pe<f&&(m||x||v);Pe++){const ke=a[Pe]&255;v&&(b>0?ke&128?b--:v=!1:ke&128&&(ke&64?(b++,ke&32?(b++,ke&16?(b++,ke&8?v=!1:O++):R++):T++):v=!1)),m&&(ke>127&&ke<160?m=!1:ke>159&&(ke<192||ke===215||ke===247)&&ge++),x&&(F>0?ke<64||ke===127||ke>252?x=!1:F--:ke===128||ke===160||ke>239?x=!1:ke>160&&ke<224?($++,le=0,J++,J>ue&&(ue=J)):ke>127?(F++,J=0,le++,le>he&&(he=le)):(J=0,le=0))}return v&&b>0&&(v=!1),x&&F>0&&(x=!1),v&&(Oe||T+R+O>0)?q.UTF8:x&&(q.ASSUME_SHIFT_JIS||ue>=3||he>=3)?q.SHIFT_JIS:m&&x?ue===2&&$===2||ge*10>=f?q.SHIFT_JIS:q.ISO88591:m?q.ISO88591:x?q.SHIFT_JIS:v?q.UTF8:q.PLATFORM_DEFAULT_ENCODING}static format(a,...u){let f=-1;function m(v,b,T,R,O,F){if(v==="%%")return"%";if(u[++f]===void 0)return;v=R?parseInt(R.substr(1)):void 0;let $=O?parseInt(O.substr(1)):void 0,J;switch(F){case"s":J=u[f];break;case"c":J=u[f][0];break;case"f":J=parseFloat(u[f]).toFixed(v);break;case"p":J=parseFloat(u[f]).toPrecision(v);break;case"e":J=parseFloat(u[f]).toExponential(v);break;case"x":J=parseInt(u[f]).toString($||16);break;case"d":J=parseFloat(parseInt(u[f],$||10).toPrecision(v)).toFixed(0);break}J=typeof J=="object"?JSON.stringify(J):(+J).toString($);let le=parseInt(T),ue=T&&T[0]+""=="0"?"0":" ";for(;J.length<le;)J=b!==void 0?J+ue:ue+J;return J}let x=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return a.replace(x,m)}static getBytes(a,u){return K.encode(a,u)}static getCharCode(a,u=0){return a.charCodeAt(u)}static getCharAt(a){return String.fromCharCode(a)}}q.SHIFT_JIS=L.SJIS.getName(),q.GB2312="GB2312",q.ISO88591=L.ISO8859_1.getName(),q.EUC_JP="EUC_JP",q.UTF8=L.UTF8.getName(),q.PLATFORM_DEFAULT_ENCODING=q.UTF8,q.ASSUME_SHIFT_JIS=!1;class re{constructor(a=""){this.value=a}enableDecoding(a){return this.encoding=a,this}append(a){return typeof a=="string"?this.value+=a.toString():this.encoding?this.value+=q.castAsNonUtf8Char(a,this.encoding):this.value+=String.fromCharCode(a),this}appendChars(a,u,f){for(let m=u;u<u+f;m++)this.append(a[m]);return this}length(){return this.value.length}charAt(a){return this.value.charAt(a)}deleteCharAt(a){this.value=this.value.substr(0,a)+this.value.substring(a+1)}setCharAt(a,u){this.value=this.value.substr(0,a)+u+this.value.substr(a+1)}substring(a,u){return this.value.substring(a,u)}setLengthToZero(){this.value=""}toString(){return this.value}insert(a,u){this.value=this.value.substr(0,a)+u+this.value.substr(a+u.length)}}class z{constructor(a,u,f,m){if(this.width=a,this.height=u,this.rowSize=f,this.bits=m,u==null&&(u=a),this.height=u,a<1||u<1)throw new g("Both dimensions must be greater than 0");f==null&&(f=Math.floor((a+31)/32)),this.rowSize=f,m==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(a){const u=a.length,f=a[0].length,m=new z(f,u);for(let x=0;x<u;x++){const v=a[x];for(let b=0;b<f;b++)v[b]&&m.set(b,x)}return m}static parseFromString(a,u,f){if(a===null)throw new g("stringRepresentation cannot be null");const m=new Array(a.length);let x=0,v=0,b=-1,T=0,R=0;for(;R<a.length;)if(a.charAt(R)===`
`||a.charAt(R)==="\r"){if(x>v){if(b===-1)b=x-v;else if(x-v!==b)throw new g("row lengths do not match");v=x,T++}R++}else if(a.substring(R,R+u.length)===u)R+=u.length,m[x]=!0,x++;else if(a.substring(R,R+f.length)===f)R+=f.length,m[x]=!1,x++;else throw new g("illegal character encountered: "+a.substring(R));if(x>v){if(b===-1)b=x-v;else if(x-v!==b)throw new g("row lengths do not match");T++}const O=new z(b,T);for(let F=0;F<x;F++)m[F]&&O.set(Math.floor(F%b),Math.floor(F/b));return O}get(a,u){const f=u*this.rowSize+Math.floor(a/32);return(this.bits[f]>>>(a&31)&1)!==0}set(a,u){const f=u*this.rowSize+Math.floor(a/32);this.bits[f]|=1<<(a&31)&4294967295}unset(a,u){const f=u*this.rowSize+Math.floor(a/32);this.bits[f]&=~(1<<(a&31)&4294967295)}flip(a,u){const f=u*this.rowSize+Math.floor(a/32);this.bits[f]^=1<<(a&31)&4294967295}xor(a){if(this.width!==a.getWidth()||this.height!==a.getHeight()||this.rowSize!==a.getRowSize())throw new g("input matrix dimensions do not match");const u=new M(Math.floor(this.width/32)+1),f=this.rowSize,m=this.bits;for(let x=0,v=this.height;x<v;x++){const b=x*f,T=a.getRow(x,u).getBitArray();for(let R=0;R<f;R++)m[b+R]^=T[R]}}clear(){const a=this.bits,u=a.length;for(let f=0;f<u;f++)a[f]=0}setRegion(a,u,f,m){if(u<0||a<0)throw new g("Left and top must be nonnegative");if(m<1||f<1)throw new g("Height and width must be at least 1");const x=a+f,v=u+m;if(v>this.height||x>this.width)throw new g("The region must fit inside the matrix");const b=this.rowSize,T=this.bits;for(let R=u;R<v;R++){const O=R*b;for(let F=a;F<x;F++)T[O+Math.floor(F/32)]|=1<<(F&31)&4294967295}}getRow(a,u){u==null||u.getSize()<this.width?u=new M(this.width):u.clear();const f=this.rowSize,m=this.bits,x=a*f;for(let v=0;v<f;v++)u.setBulk(v*32,m[x+v]);return u}setRow(a,u){C.arraycopy(u.getBitArray(),0,this.bits,a*this.rowSize,this.rowSize)}rotate180(){const a=this.getWidth(),u=this.getHeight();let f=new M(a),m=new M(a);for(let x=0,v=Math.floor((u+1)/2);x<v;x++)f=this.getRow(x,f),m=this.getRow(u-1-x,m),f.reverse(),m.reverse(),this.setRow(x,m),this.setRow(u-1-x,f)}getEnclosingRectangle(){const a=this.width,u=this.height,f=this.rowSize,m=this.bits;let x=a,v=u,b=-1,T=-1;for(let R=0;R<u;R++)for(let O=0;O<f;O++){const F=m[R*f+O];if(F!==0){if(R<v&&(v=R),R>T&&(T=R),O*32<x){let $=0;for(;!(F<<31-$&4294967295);)$++;O*32+$<x&&(x=O*32+$)}if(O*32+31>b){let $=31;for(;!(F>>>$);)$--;O*32+$>b&&(b=O*32+$)}}}return b<x||T<v?null:Int32Array.from([x,v,b-x+1,T-v+1])}getTopLeftOnBit(){const a=this.rowSize,u=this.bits;let f=0;for(;f<u.length&&u[f]===0;)f++;if(f===u.length)return null;const m=f/a;let x=f%a*32;const v=u[f];let b=0;for(;!(v<<31-b&4294967295);)b++;return x+=b,Int32Array.from([x,m])}getBottomRightOnBit(){const a=this.rowSize,u=this.bits;let f=u.length-1;for(;f>=0&&u[f]===0;)f--;if(f<0)return null;const m=Math.floor(f/a);let x=Math.floor(f%a)*32;const v=u[f];let b=31;for(;!(v>>>b);)b--;return x+=b,Int32Array.from([x,m])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(a){if(!(a instanceof z))return!1;const u=a;return this.width===u.width&&this.height===u.height&&this.rowSize===u.rowSize&&k.equals(this.bits,u.bits)}hashCode(){let a=this.width;return a=31*a+this.width,a=31*a+this.height,a=31*a+this.rowSize,a=31*a+k.hashCode(this.bits),a}toString(a="X ",u="  ",f=`
`){return this.buildToString(a,u,f)}buildToString(a,u,f){let m=new re;for(let x=0,v=this.height;x<v;x++){for(let b=0,T=this.width;b<T;b++)m.append(this.get(b,x)?a:u);m.append(f)}return m.toString()}clone(){return new z(this.width,this.height,this.rowSize,this.bits.slice())}}class H extends d{static getNotFoundInstance(){return new H}}H.kind="NotFoundException";class Y extends S{constructor(a){super(a),this.luminances=Y.EMPTY,this.buckets=new Int32Array(Y.LUMINANCE_BUCKETS)}getBlackRow(a,u){const f=this.getLuminanceSource(),m=f.getWidth();u==null||u.getSize()<m?u=new M(m):u.clear(),this.initArrays(m);const x=f.getRow(a,this.luminances),v=this.buckets;for(let T=0;T<m;T++)v[(x[T]&255)>>Y.LUMINANCE_SHIFT]++;const b=Y.estimateBlackPoint(v);if(m<3)for(let T=0;T<m;T++)(x[T]&255)<b&&u.set(T);else{let T=x[0]&255,R=x[1]&255;for(let O=1;O<m-1;O++){const F=x[O+1]&255;(R*4-T-F)/2<b&&u.set(O),T=R,R=F}}return u}getBlackMatrix(){const a=this.getLuminanceSource(),u=a.getWidth(),f=a.getHeight(),m=new z(u,f);this.initArrays(u);const x=this.buckets;for(let T=1;T<5;T++){const R=Math.floor(f*T/5),O=a.getRow(R,this.luminances),F=Math.floor(u*4/5);for(let $=Math.floor(u/5);$<F;$++){const J=O[$]&255;x[J>>Y.LUMINANCE_SHIFT]++}}const v=Y.estimateBlackPoint(x),b=a.getMatrix();for(let T=0;T<f;T++){const R=T*u;for(let O=0;O<u;O++)(b[R+O]&255)<v&&m.set(O,T)}return m}createBinarizer(a){return new Y(a)}initArrays(a){this.luminances.length<a&&(this.luminances=new Uint8ClampedArray(a));const u=this.buckets;for(let f=0;f<Y.LUMINANCE_BUCKETS;f++)u[f]=0}static estimateBlackPoint(a){const u=a.length;let f=0,m=0,x=0;for(let O=0;O<u;O++)a[O]>x&&(m=O,x=a[O]),a[O]>f&&(f=a[O]);let v=0,b=0;for(let O=0;O<u;O++){const F=O-m,$=a[O]*F*F;$>b&&(v=O,b=$)}if(m>v){const O=m;m=v,v=O}if(v-m<=u/16)throw new H;let T=v-1,R=-1;for(let O=v-1;O>m;O--){const F=O-m,$=F*F*(v-O)*(f-a[O]);$>R&&(T=O,R=$)}return T<<Y.LUMINANCE_SHIFT}}Y.LUMINANCE_BITS=5,Y.LUMINANCE_SHIFT=8-Y.LUMINANCE_BITS,Y.LUMINANCE_BUCKETS=1<<Y.LUMINANCE_BITS,Y.EMPTY=Uint8ClampedArray.from([0]);class X extends Y{constructor(a){super(a),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const a=this.getLuminanceSource(),u=a.getWidth(),f=a.getHeight();if(u>=X.MINIMUM_DIMENSION&&f>=X.MINIMUM_DIMENSION){const m=a.getMatrix();let x=u>>X.BLOCK_SIZE_POWER;u&X.BLOCK_SIZE_MASK&&x++;let v=f>>X.BLOCK_SIZE_POWER;f&X.BLOCK_SIZE_MASK&&v++;const b=X.calculateBlackPoints(m,x,v,u,f),T=new z(u,f);X.calculateThresholdForBlock(m,x,v,u,f,b,T),this.matrix=T}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(a){return new X(a)}static calculateThresholdForBlock(a,u,f,m,x,v,b){const T=x-X.BLOCK_SIZE,R=m-X.BLOCK_SIZE;for(let O=0;O<f;O++){let F=O<<X.BLOCK_SIZE_POWER;F>T&&(F=T);const $=X.cap(O,2,f-3);for(let J=0;J<u;J++){let le=J<<X.BLOCK_SIZE_POWER;le>R&&(le=R);const ue=X.cap(J,2,u-3);let he=0;for(let Oe=-2;Oe<=2;Oe++){const Pe=v[$+Oe];he+=Pe[ue-2]+Pe[ue-1]+Pe[ue]+Pe[ue+1]+Pe[ue+2]}const ge=he/25;X.thresholdBlock(a,le,F,ge,m,b)}}}static cap(a,u,f){return a<u?u:a>f?f:a}static thresholdBlock(a,u,f,m,x,v){for(let b=0,T=f*x+u;b<X.BLOCK_SIZE;b++,T+=x)for(let R=0;R<X.BLOCK_SIZE;R++)(a[T+R]&255)<=m&&v.set(u+R,f+b)}static calculateBlackPoints(a,u,f,m,x){const v=x-X.BLOCK_SIZE,b=m-X.BLOCK_SIZE,T=new Array(f);for(let R=0;R<f;R++){T[R]=new Int32Array(u);let O=R<<X.BLOCK_SIZE_POWER;O>v&&(O=v);for(let F=0;F<u;F++){let $=F<<X.BLOCK_SIZE_POWER;$>b&&($=b);let J=0,le=255,ue=0;for(let ge=0,Oe=O*m+$;ge<X.BLOCK_SIZE;ge++,Oe+=m){for(let Pe=0;Pe<X.BLOCK_SIZE;Pe++){const ke=a[Oe+Pe]&255;J+=ke,ke<le&&(le=ke),ke>ue&&(ue=ke)}if(ue-le>X.MIN_DYNAMIC_RANGE)for(ge++,Oe+=m;ge<X.BLOCK_SIZE;ge++,Oe+=m)for(let Pe=0;Pe<X.BLOCK_SIZE;Pe++)J+=a[Oe+Pe]&255}let he=J>>X.BLOCK_SIZE_POWER*2;if(ue-le<=X.MIN_DYNAMIC_RANGE&&(he=le/2,R>0&&F>0)){const ge=(T[R-1][F]+2*T[R][F-1]+T[R-1][F-1])/4;le<ge&&(he=ge)}T[R][F]=he}}return T}}X.BLOCK_SIZE_POWER=3,X.BLOCK_SIZE=1<<X.BLOCK_SIZE_POWER,X.BLOCK_SIZE_MASK=X.BLOCK_SIZE-1,X.MINIMUM_DIMENSION=X.BLOCK_SIZE*5,X.MIN_DYNAMIC_RANGE=24;class W{constructor(a,u){this.width=a,this.height=u}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(a,u,f,m){throw new U("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new U("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new U("This luminance source does not support rotation by 45 degrees.")}toString(){const a=new Uint8ClampedArray(this.width);let u=new re;for(let f=0;f<this.height;f++){const m=this.getRow(f,a);for(let x=0;x<this.width;x++){const v=m[x]&255;let b;v<64?b="#":v<128?b="+":v<192?b=".":b=" ",u.append(b)}u.append(`
`)}return u.toString()}}class V extends W{constructor(a){super(a.getWidth(),a.getHeight()),this.delegate=a}getRow(a,u){const f=this.delegate.getRow(a,u),m=this.getWidth();for(let x=0;x<m;x++)f[x]=255-(f[x]&255);return f}getMatrix(){const a=this.delegate.getMatrix(),u=this.getWidth()*this.getHeight(),f=new Uint8ClampedArray(u);for(let m=0;m<u;m++)f[m]=255-(a[m]&255);return f}isCropSupported(){return this.delegate.isCropSupported()}crop(a,u,f,m){return new V(this.delegate.crop(a,u,f,m))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new V(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new V(this.delegate.rotateCounterClockwise45())}}class ee extends W{constructor(a){super(a.width,a.height),this.canvas=a,this.tempCanvasElement=null,this.buffer=ee.makeBufferFromCanvasImageData(a)}static makeBufferFromCanvasImageData(a){const u=a.getContext("2d").getImageData(0,0,a.width,a.height);return ee.toGrayscaleBuffer(u.data,a.width,a.height)}static toGrayscaleBuffer(a,u,f){const m=new Uint8ClampedArray(u*f);for(let x=0,v=0,b=a.length;x<b;x+=4,v++){let T;if(a[x+3]===0)T=255;else{const O=a[x],F=a[x+1],$=a[x+2];T=306*O+601*F+117*$+512>>10}m[v]=T}return m}getRow(a,u){if(a<0||a>=this.getHeight())throw new g("Requested row is outside the image: "+a);const f=this.getWidth(),m=a*f;return u===null?u=this.buffer.slice(m,m+f):(u.length<f&&(u=new Uint8ClampedArray(f)),u.set(this.buffer.slice(m,m+f))),u}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(a,u,f,m){return super.crop(a,u,f,m),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const a=this.canvas.ownerDocument.createElement("canvas");a.width=this.canvas.width,a.height=this.canvas.height,this.tempCanvasElement=a}return this.tempCanvasElement}rotate(a){const u=this.getTempCanvasElement(),f=u.getContext("2d"),m=a*ee.DEGREE_TO_RADIANS,x=this.canvas.width,v=this.canvas.height,b=Math.ceil(Math.abs(Math.cos(m))*x+Math.abs(Math.sin(m))*v),T=Math.ceil(Math.abs(Math.sin(m))*x+Math.abs(Math.cos(m))*v);return u.width=b,u.height=T,f.translate(b/2,T/2),f.rotate(m),f.drawImage(this.canvas,x/-2,v/-2),this.buffer=ee.makeBufferFromCanvasImageData(u),this}invert(){return new V(this)}}ee.DEGREE_TO_RADIANS=Math.PI/180;class ae{constructor(a,u,f){this.deviceId=a,this.label=u,this.kind="videoinput",this.groupId=f||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var se=(globalThis||Zd||self||window||void 0)&&(globalThis||Zd||self||window||void 0).__awaiter||function(B,a,u,f){function m(x){return x instanceof u?x:new u(function(v){v(x)})}return new(u||(u=Promise))(function(x,v){function b(O){try{R(f.next(O))}catch(F){v(F)}}function T(O){try{R(f.throw(O))}catch(F){v(F)}}function R(O){O.done?x(O.value):m(O.value).then(b,T)}R((f=f.apply(B,a||[])).next())})};class G{constructor(a,u=500,f){this.reader=a,this.timeBetweenScansMillis=u,this._hints=f,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(a){this._timeBetweenDecodingAttempts=a<0?0:a}set hints(a){this._hints=a||null}get hints(){return this._hints}listVideoInputDevices(){return se(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const a=yield navigator.mediaDevices.enumerateDevices(),u=[];for(const f of a){const m=f.kind==="video"?"videoinput":f.kind;if(m!=="videoinput")continue;const x=f.deviceId||f.id,v=f.label||`Video device ${u.length+1}`,b=f.groupId,T={deviceId:x,label:v,kind:m,groupId:b};u.push(T)}return u})}getVideoInputDevices(){return se(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(u=>new ae(u.deviceId,u.label))})}findDeviceById(a){return se(this,void 0,void 0,function*(){const u=yield this.listVideoInputDevices();return u?u.find(f=>f.deviceId===a):null})}decodeFromInputVideoDevice(a,u){return se(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(a,u)})}decodeOnceFromVideoDevice(a,u){return se(this,void 0,void 0,function*(){this.reset();let f;a?f={deviceId:{exact:a}}:f={facingMode:"environment"};const m={video:f};return yield this.decodeOnceFromConstraints(m,u)})}decodeOnceFromConstraints(a,u){return se(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeOnceFromStream(f,u)})}decodeOnceFromStream(a,u){return se(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(a,u);return yield this.decodeOnce(f)})}decodeFromInputVideoDeviceContinuously(a,u,f){return se(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(a,u,f)})}decodeFromVideoDevice(a,u,f){return se(this,void 0,void 0,function*(){let m;a?m={deviceId:{exact:a}}:m={facingMode:"environment"};const x={video:m};return yield this.decodeFromConstraints(x,u,f)})}decodeFromConstraints(a,u,f){return se(this,void 0,void 0,function*(){const m=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeFromStream(m,u,f)})}decodeFromStream(a,u,f){return se(this,void 0,void 0,function*(){this.reset();const m=yield this.attachStreamToVideo(a,u);return yield this.decodeContinuously(m,f)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(a,u){return se(this,void 0,void 0,function*(){const f=this.prepareVideoElement(u);return this.addVideoSource(f,a),this.videoElement=f,this.stream=a,yield this.playVideoOnLoadAsync(f),f})}playVideoOnLoadAsync(a){return new Promise((u,f)=>this.playVideoOnLoad(a,()=>u()))}playVideoOnLoad(a,u){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(a),a.addEventListener("ended",this.videoEndedListener),a.addEventListener("canplay",this.videoCanPlayListener),a.addEventListener("playing",u),this.tryPlayVideo(a)}isVideoPlaying(a){return a.currentTime>0&&!a.paused&&!a.ended&&a.readyState>2}tryPlayVideo(a){return se(this,void 0,void 0,function*(){if(this.isVideoPlaying(a)){console.warn("Trying to play video that is already playing.");return}try{yield a.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(a,u){const f=document.getElementById(a);if(!f)throw new h(`element with id '${a}' not found`);if(f.nodeName.toLowerCase()!==u.toLowerCase())throw new h(`element with id '${a}' must be an ${u} element`);return f}decodeFromImage(a,u){if(!a&&!u)throw new h("either imageElement with a src set or an url must be provided");return u&&!a?this.decodeFromImageUrl(u):this.decodeFromImageElement(a)}decodeFromVideo(a,u){if(!a&&!u)throw new h("Either an element with a src set or an URL must be provided");return u&&!a?this.decodeFromVideoUrl(u):this.decodeFromVideoElement(a)}decodeFromVideoContinuously(a,u,f){if(a===void 0&&u===void 0)throw new h("Either an element with a src set or an URL must be provided");return u&&!a?this.decodeFromVideoUrlContinuously(u,f):this.decodeFromVideoElementContinuously(a,f)}decodeFromImageElement(a){if(!a)throw new h("An image element must be provided.");this.reset();const u=this.prepareImageElement(a);this.imageElement=u;let f;return this.isImageLoaded(u)?f=this.decodeOnce(u,!1,!0):f=this._decodeOnLoadImage(u),f}decodeFromVideoElement(a){const u=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideo(u)}decodeFromVideoElementContinuously(a,u){const f=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideoContinuously(f,u)}_decodeFromVideoElementSetup(a){if(!a)throw new h("A video element must be provided.");this.reset();const u=this.prepareVideoElement(a);return this.videoElement=u,u}decodeFromImageUrl(a){if(!a)throw new h("An URL must be provided.");this.reset();const u=this.prepareImageElement();this.imageElement=u;const f=this._decodeOnLoadImage(u);return u.src=a,f}decodeFromVideoUrl(a){if(!a)throw new h("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),f=this.decodeFromVideoElement(u);return u.src=a,f}decodeFromVideoUrlContinuously(a,u){if(!a)throw new h("An URL must be provided.");this.reset();const f=this.prepareVideoElement(),m=this.decodeFromVideoElementContinuously(f,u);return f.src=a,m}_decodeOnLoadImage(a){return new Promise((u,f)=>{this.imageLoadedListener=()=>this.decodeOnce(a,!1,!0).then(u,f),a.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(a){return se(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(a),yield this.decodeOnce(a)})}_decodeOnLoadVideoContinuously(a,u){return se(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(a),this.decodeContinuously(a,u)})}isImageLoaded(a){return!(!a.complete||a.naturalWidth===0)}prepareImageElement(a){let u;return typeof a>"u"&&(u=document.createElement("img"),u.width=200,u.height=200),typeof a=="string"&&(u=this.getMediaElement(a,"img")),a instanceof HTMLImageElement&&(u=a),u}prepareVideoElement(a){let u;return!a&&typeof document<"u"&&(u=document.createElement("video"),u.width=200,u.height=200),typeof a=="string"&&(u=this.getMediaElement(a,"video")),a instanceof HTMLVideoElement&&(u=a),u.setAttribute("autoplay","true"),u.setAttribute("muted","true"),u.setAttribute("playsinline","true"),u}decodeOnce(a,u=!0,f=!0){this._stopAsyncDecode=!1;const m=(x,v)=>{if(this._stopAsyncDecode){v(new H("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const b=this.decode(a);x(b)}catch(b){const T=u&&b instanceof H,O=(b instanceof w||b instanceof _)&&f;if(T||O)return setTimeout(m,this._timeBetweenDecodingAttempts,x,v);v(b)}};return new Promise((x,v)=>m(x,v))}decodeContinuously(a,u){this._stopContinuousDecode=!1;const f=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const m=this.decode(a);u(m,null),setTimeout(f,this.timeBetweenScansMillis)}catch(m){u(null,m);const x=m instanceof w||m instanceof _,v=m instanceof H;(x||v)&&setTimeout(f,this._timeBetweenDecodingAttempts)}};f()}decode(a){const u=this.createBinaryBitmap(a);return this.decodeBitmap(u)}_isHTMLVideoElement(a){return a.videoWidth!==0}drawFrameOnCanvas(a,u,f){u||(u={sx:0,sy:0,sWidth:a.videoWidth,sHeight:a.videoHeight,dx:0,dy:0,dWidth:a.videoWidth,dHeight:a.videoHeight}),f||(f=this.captureCanvasContext),f.drawImage(a,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}drawImageOnCanvas(a,u,f=this.captureCanvasContext){u||(u={sx:0,sy:0,sWidth:a.naturalWidth,sHeight:a.naturalHeight,dx:0,dy:0,dWidth:a.naturalWidth,dHeight:a.naturalHeight}),f||(f=this.captureCanvasContext),f.drawImage(a,u.sx,u.sy,u.sWidth,u.sHeight,u.dx,u.dy,u.dWidth,u.dHeight)}createBinaryBitmap(a){this.getCaptureCanvasContext(a),this._isHTMLVideoElement(a)?this.drawFrameOnCanvas(a):this.drawImageOnCanvas(a);const u=this.getCaptureCanvas(a),f=new ee(u),m=new X(f);return new y(m)}getCaptureCanvasContext(a){if(!this.captureCanvasContext){const f=this.getCaptureCanvas(a).getContext("2d");this.captureCanvasContext=f}return this.captureCanvasContext}getCaptureCanvas(a){if(!this.captureCanvas){const u=this.createCaptureCanvas(a);this.captureCanvas=u}return this.captureCanvas}decodeBitmap(a){return this.reader.decode(a,this._hints)}createCaptureCanvas(a){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const u=document.createElement("canvas");let f,m;return typeof a<"u"&&(a instanceof HTMLVideoElement?(f=a.videoWidth,m=a.videoHeight):a instanceof HTMLImageElement&&(f=a.naturalWidth||a.width,m=a.naturalHeight||a.height)),u.style.width=f+"px",u.style.height=m+"px",u.width=f,u.height=m,u}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(a=>a.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(a,u){try{a.srcObject=u}catch{a.src=URL.createObjectURL(u)}}cleanVideoSource(a){try{a.srcObject=null}catch{a.src=""}this.videoElement.removeAttribute("src")}}class Q{constructor(a,u,f=u==null?0:8*u.length,m,x,v=C.currentTimeMillis()){this.text=a,this.rawBytes=u,this.numBits=f,this.resultPoints=m,this.format=x,this.timestamp=v,this.text=a,this.rawBytes=u,f==null?this.numBits=u==null?0:8*u.length:this.numBits=f,this.resultPoints=m,this.format=x,this.resultMetadata=null,v==null?this.timestamp=C.currentTimeMillis():this.timestamp=v}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(a,u){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(a,u)}putAllMetadata(a){a!==null&&(this.resultMetadata===null?this.resultMetadata=a:this.resultMetadata=new Map(a))}addResultPoints(a){const u=this.resultPoints;if(u===null)this.resultPoints=a;else if(a!==null&&a.length>0){const f=new Array(u.length+a.length);C.arraycopy(u,0,f,0,u.length),C.arraycopy(a,0,f,u.length,a.length),this.resultPoints=f}}getTimestamp(){return this.timestamp}toString(){return this.text}}var te;(function(B){B[B.AZTEC=0]="AZTEC",B[B.CODABAR=1]="CODABAR",B[B.CODE_39=2]="CODE_39",B[B.CODE_93=3]="CODE_93",B[B.CODE_128=4]="CODE_128",B[B.DATA_MATRIX=5]="DATA_MATRIX",B[B.EAN_8=6]="EAN_8",B[B.EAN_13=7]="EAN_13",B[B.ITF=8]="ITF",B[B.MAXICODE=9]="MAXICODE",B[B.PDF_417=10]="PDF_417",B[B.QR_CODE=11]="QR_CODE",B[B.RSS_14=12]="RSS_14",B[B.RSS_EXPANDED=13]="RSS_EXPANDED",B[B.UPC_A=14]="UPC_A",B[B.UPC_E=15]="UPC_E",B[B.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(te||(te={}));var ne=te,ie;(function(B){B[B.OTHER=0]="OTHER",B[B.ORIENTATION=1]="ORIENTATION",B[B.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",B[B.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",B[B.ISSUE_NUMBER=4]="ISSUE_NUMBER",B[B.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",B[B.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",B[B.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",B[B.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",B[B.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",B[B.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ie||(ie={}));var de=ie;class pe{constructor(a,u,f,m,x=-1,v=-1){this.rawBytes=a,this.text=u,this.byteSegments=f,this.ecLevel=m,this.structuredAppendSequenceNumber=x,this.structuredAppendParity=v,this.numBits=a==null?0:8*a.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(a){this.numBits=a}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(a){this.errorsCorrected=a}getErasures(){return this.erasures}setErasures(a){this.erasures=a}getOther(){return this.other}setOther(a){this.other=a}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ye{exp(a){return this.expTable[a]}log(a){if(a===0)throw new g;return this.logTable[a]}static addOrSubtract(a,u){return a^u}}class Se{constructor(a,u){if(u.length===0)throw new g;this.field=a;const f=u.length;if(f>1&&u[0]===0){let m=1;for(;m<f&&u[m]===0;)m++;m===f?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(f-m),C.arraycopy(u,m,this.coefficients,0,this.coefficients.length))}else this.coefficients=u}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(a===0)return this.getCoefficient(0);const u=this.coefficients;let f;if(a===1){f=0;for(let v=0,b=u.length;v!==b;v++){const T=u[v];f=ye.addOrSubtract(f,T)}return f}f=u[0];const m=u.length,x=this.field;for(let v=1;v<m;v++)f=ye.addOrSubtract(x.multiply(a,f),u[v]);return f}addOrSubtract(a){if(!this.field.equals(a.field))throw new g("GenericGFPolys do not have same GenericGF field");if(this.isZero())return a;if(a.isZero())return this;let u=this.coefficients,f=a.coefficients;if(u.length>f.length){const v=u;u=f,f=v}let m=new Int32Array(f.length);const x=f.length-u.length;C.arraycopy(f,0,m,0,x);for(let v=x;v<f.length;v++)m[v]=ye.addOrSubtract(u[v-x],f[v]);return new Se(this.field,m)}multiply(a){if(!this.field.equals(a.field))throw new g("GenericGFPolys do not have same GenericGF field");if(this.isZero()||a.isZero())return this.field.getZero();const u=this.coefficients,f=u.length,m=a.coefficients,x=m.length,v=new Int32Array(f+x-1),b=this.field;for(let T=0;T<f;T++){const R=u[T];for(let O=0;O<x;O++)v[T+O]=ye.addOrSubtract(v[T+O],b.multiply(R,m[O]))}return new Se(b,v)}multiplyScalar(a){if(a===0)return this.field.getZero();if(a===1)return this;const u=this.coefficients.length,f=this.field,m=new Int32Array(u),x=this.coefficients;for(let v=0;v<u;v++)m[v]=f.multiply(x[v],a);return new Se(f,m)}multiplyByMonomial(a,u){if(a<0)throw new g;if(u===0)return this.field.getZero();const f=this.coefficients,m=f.length,x=new Int32Array(m+a),v=this.field;for(let b=0;b<m;b++)x[b]=v.multiply(f[b],u);return new Se(v,x)}divide(a){if(!this.field.equals(a.field))throw new g("GenericGFPolys do not have same GenericGF field");if(a.isZero())throw new g("Divide by 0");const u=this.field;let f=u.getZero(),m=this;const x=a.getCoefficient(a.getDegree()),v=u.inverse(x);for(;m.getDegree()>=a.getDegree()&&!m.isZero();){const b=m.getDegree()-a.getDegree(),T=u.multiply(m.getCoefficient(m.getDegree()),v),R=a.multiplyByMonomial(b,T),O=u.buildMonomial(b,T);f=f.addOrSubtract(O),m=m.addOrSubtract(R)}return[f,m]}toString(){let a="";for(let u=this.getDegree();u>=0;u--){let f=this.getCoefficient(u);if(f!==0){if(f<0?(a+=" - ",f=-f):a.length>0&&(a+=" + "),u===0||f!==1){const m=this.field.log(f);m===0?a+="1":m===1?a+="a":(a+="a^",a+=m)}u!==0&&(u===1?a+="x":(a+="x^",a+=u))}}return a}}class De extends d{}De.kind="ArithmeticException";class xe extends ye{constructor(a,u,f){super(),this.primitive=a,this.size=u,this.generatorBase=f;const m=new Int32Array(u);let x=1;for(let b=0;b<u;b++)m[b]=x,x*=2,x>=u&&(x^=a,x&=u-1);this.expTable=m;const v=new Int32Array(u);for(let b=0;b<u-1;b++)v[m[b]]=b;this.logTable=v,this.zero=new Se(this,Int32Array.from([0])),this.one=new Se(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,u){if(a<0)throw new g;if(u===0)return this.zero;const f=new Int32Array(a+1);return f[0]=u,new Se(this,f)}inverse(a){if(a===0)throw new De;return this.expTable[this.size-this.logTable[a]-1]}multiply(a,u){return a===0||u===0?0:this.expTable[(this.logTable[a]+this.logTable[u])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+I.toHexString(this.primitive)+","+this.size+")"}equals(a){return a===this}}xe.AZTEC_DATA_12=new xe(4201,4096,1),xe.AZTEC_DATA_10=new xe(1033,1024,1),xe.AZTEC_DATA_6=new xe(67,64,1),xe.AZTEC_PARAM=new xe(19,16,1),xe.QR_CODE_FIELD_256=new xe(285,256,0),xe.DATA_MATRIX_FIELD_256=new xe(301,256,1),xe.AZTEC_DATA_8=xe.DATA_MATRIX_FIELD_256,xe.MAXICODE_FIELD_64=xe.AZTEC_DATA_6;class Ue extends d{}Ue.kind="ReedSolomonException";class nt extends d{}nt.kind="IllegalStateException";class et{constructor(a){this.field=a}decode(a,u){const f=this.field,m=new Se(f,a),x=new Int32Array(u);let v=!0;for(let J=0;J<u;J++){const le=m.evaluateAt(f.exp(J+f.getGeneratorBase()));x[x.length-1-J]=le,le!==0&&(v=!1)}if(v)return;const b=new Se(f,x),T=this.runEuclideanAlgorithm(f.buildMonomial(u,1),b,u),R=T[0],O=T[1],F=this.findErrorLocations(R),$=this.findErrorMagnitudes(O,F);for(let J=0;J<F.length;J++){const le=a.length-1-f.log(F[J]);if(le<0)throw new Ue("Bad error location");a[le]=xe.addOrSubtract(a[le],$[J])}}runEuclideanAlgorithm(a,u,f){if(a.getDegree()<u.getDegree()){const J=a;a=u,u=J}const m=this.field;let x=a,v=u,b=m.getZero(),T=m.getOne();for(;v.getDegree()>=(f/2|0);){let J=x,le=b;if(x=v,b=T,x.isZero())throw new Ue("r_{i-1} was zero");v=J;let ue=m.getZero();const he=x.getCoefficient(x.getDegree()),ge=m.inverse(he);for(;v.getDegree()>=x.getDegree()&&!v.isZero();){const Oe=v.getDegree()-x.getDegree(),Pe=m.multiply(v.getCoefficient(v.getDegree()),ge);ue=ue.addOrSubtract(m.buildMonomial(Oe,Pe)),v=v.addOrSubtract(x.multiplyByMonomial(Oe,Pe))}if(T=ue.multiply(b).addOrSubtract(le),v.getDegree()>=x.getDegree())throw new nt("Division algorithm failed to reduce polynomial?")}const R=T.getCoefficient(0);if(R===0)throw new Ue("sigmaTilde(0) was zero");const O=m.inverse(R),F=T.multiplyScalar(O),$=v.multiplyScalar(O);return[F,$]}findErrorLocations(a){const u=a.getDegree();if(u===1)return Int32Array.from([a.getCoefficient(1)]);const f=new Int32Array(u);let m=0;const x=this.field;for(let v=1;v<x.getSize()&&m<u;v++)a.evaluateAt(v)===0&&(f[m]=x.inverse(v),m++);if(m!==u)throw new Ue("Error locator degree does not match number of roots");return f}findErrorMagnitudes(a,u){const f=u.length,m=new Int32Array(f),x=this.field;for(let v=0;v<f;v++){const b=x.inverse(u[v]);let T=1;for(let R=0;R<f;R++)if(v!==R){const O=x.multiply(u[R],b),F=O&1?O&-2:O|1;T=x.multiply(T,F)}m[v]=x.multiply(a.evaluateAt(b),x.inverse(T)),x.getGeneratorBase()!==0&&(m[v]=x.multiply(m[v],b))}return m}}var je;(function(B){B[B.UPPER=0]="UPPER",B[B.LOWER=1]="LOWER",B[B.MIXED=2]="MIXED",B[B.DIGIT=3]="DIGIT",B[B.PUNCT=4]="PUNCT",B[B.BINARY=5]="BINARY"})(je||(je={}));class be{decode(a){this.ddata=a;let u=a.getBits(),f=this.extractBits(u),m=this.correctBits(f),x=be.convertBoolArrayToByteArray(m),v=be.getEncodedData(m),b=new pe(x,v,null,null);return b.setNumBits(m.length),b}static highLevelDecode(a){return this.getEncodedData(a)}static getEncodedData(a){let u=a.length,f=je.UPPER,m=je.UPPER,x="",v=0;for(;v<u;)if(m===je.BINARY){if(u-v<5)break;let b=be.readCode(a,v,5);if(v+=5,b===0){if(u-v<11)break;b=be.readCode(a,v,11)+31,v+=11}for(let T=0;T<b;T++){if(u-v<8){v=u;break}const R=be.readCode(a,v,8);x+=q.castAsNonUtf8Char(R),v+=8}m=f}else{let b=m===je.DIGIT?4:5;if(u-v<b)break;let T=be.readCode(a,v,b);v+=b;let R=be.getCharacter(m,T);R.startsWith("CTRL_")?(f=m,m=be.getTable(R.charAt(5)),R.charAt(6)==="L"&&(f=m)):(x+=R,m=f)}return x}static getTable(a){switch(a){case"L":return je.LOWER;case"P":return je.PUNCT;case"M":return je.MIXED;case"D":return je.DIGIT;case"B":return je.BINARY;case"U":default:return je.UPPER}}static getCharacter(a,u){switch(a){case je.UPPER:return be.UPPER_TABLE[u];case je.LOWER:return be.LOWER_TABLE[u];case je.MIXED:return be.MIXED_TABLE[u];case je.PUNCT:return be.PUNCT_TABLE[u];case je.DIGIT:return be.DIGIT_TABLE[u];default:throw new nt("Bad table")}}correctBits(a){let u,f;this.ddata.getNbLayers()<=2?(f=6,u=xe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(f=8,u=xe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(f=10,u=xe.AZTEC_DATA_10):(f=12,u=xe.AZTEC_DATA_12);let m=this.ddata.getNbDatablocks(),x=a.length/f;if(x<m)throw new _;let v=a.length%f,b=new Int32Array(x);for(let $=0;$<x;$++,v+=f)b[$]=be.readCode(a,v,f);try{new et(u).decode(b,x-m)}catch($){throw new _($)}let T=(1<<f)-1,R=0;for(let $=0;$<m;$++){let J=b[$];if(J===0||J===T)throw new _;(J===1||J===T-1)&&R++}let O=new Array(m*f-R),F=0;for(let $=0;$<m;$++){let J=b[$];if(J===1||J===T-1)O.fill(J>1,F,F+f-1),F+=f-1;else for(let le=f-1;le>=0;--le)O[F++]=(J&1<<le)!==0}return O}extractBits(a){let u=this.ddata.isCompact(),f=this.ddata.getNbLayers(),m=(u?11:14)+f*4,x=new Int32Array(m),v=new Array(this.totalBitsInLayer(f,u));if(u)for(let b=0;b<x.length;b++)x[b]=b;else{let b=m+1+2*I.truncDivision(I.truncDivision(m,2)-1,15),T=m/2,R=I.truncDivision(b,2);for(let O=0;O<T;O++){let F=O+I.truncDivision(O,15);x[T-O-1]=R-F-1,x[T+O]=R+F+1}}for(let b=0,T=0;b<f;b++){let R=(f-b)*4+(u?9:12),O=b*2,F=m-1-O;for(let $=0;$<R;$++){let J=$*2;for(let le=0;le<2;le++)v[T+J+le]=a.get(x[O+le],x[O+$]),v[T+2*R+J+le]=a.get(x[O+$],x[F-le]),v[T+4*R+J+le]=a.get(x[F-le],x[F-$]),v[T+6*R+J+le]=a.get(x[F-$],x[O+le])}T+=R*8}return v}static readCode(a,u,f){let m=0;for(let x=u;x<u+f;x++)m<<=1,a[x]&&(m|=1);return m}static readByte(a,u){let f=a.length-u;return f>=8?be.readCode(a,u,8):be.readCode(a,u,f)<<8-f}static convertBoolArrayToByteArray(a){let u=new Uint8Array((a.length+7)/8);for(let f=0;f<u.length;f++)u[f]=be.readByte(a,8*f);return u}totalBitsInLayer(a,u){return((u?88:112)+16*a)*a}}be.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],be.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],be.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],be.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],be.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class $e{constructor(){}static round(a){return a===NaN?0:a<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:a>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:a+(a<0?-.5:.5)|0}static distance(a,u,f,m){const x=a-f,v=u-m;return Math.sqrt(x*x+v*v)}static sum(a){let u=0;for(let f=0,m=a.length;f!==m;f++){const x=a[f];u+=x}return u}}class qt{static floatToIntBits(a){return a}}qt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Te{constructor(a,u){this.x=a,this.y=u}getX(){return this.x}getY(){return this.y}equals(a){if(a instanceof Te){const u=a;return this.x===u.x&&this.y===u.y}return!1}hashCode(){return 31*qt.floatToIntBits(this.x)+qt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(a){const u=this.distance(a[0],a[1]),f=this.distance(a[1],a[2]),m=this.distance(a[0],a[2]);let x,v,b;if(f>=u&&f>=m?(v=a[0],x=a[1],b=a[2]):m>=f&&m>=u?(v=a[1],x=a[0],b=a[2]):(v=a[2],x=a[0],b=a[1]),this.crossProductZ(x,v,b)<0){const T=x;x=b,b=T}a[0]=x,a[1]=v,a[2]=b}static distance(a,u){return $e.distance(a.x,a.y,u.x,u.y)}static crossProductZ(a,u,f){const m=u.x,x=u.y;return(f.x-m)*(a.y-x)-(f.y-x)*(a.x-m)}}class Ce{constructor(a,u){this.bits=a,this.points=u}getBits(){return this.bits}getPoints(){return this.points}}class Ee extends Ce{constructor(a,u,f,m,x){super(a,u),this.compact=f,this.nbDatablocks=m,this.nbLayers=x}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ke{constructor(a,u,f,m){this.image=a,this.height=a.getHeight(),this.width=a.getWidth(),u==null&&(u=Ke.INIT_SIZE),f==null&&(f=a.getWidth()/2|0),m==null&&(m=a.getHeight()/2|0);const x=u/2|0;if(this.leftInit=f-x,this.rightInit=f+x,this.upInit=m-x,this.downInit=m+x,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new H}detect(){let a=this.leftInit,u=this.rightInit,f=this.upInit,m=this.downInit,x=!1,v=!0,b=!1,T=!1,R=!1,O=!1,F=!1;const $=this.width,J=this.height;for(;v;){v=!1;let le=!0;for(;(le||!T)&&u<$;)le=this.containsBlackPoint(f,m,u,!1),le?(u++,v=!0,T=!0):T||u++;if(u>=$){x=!0;break}let ue=!0;for(;(ue||!R)&&m<J;)ue=this.containsBlackPoint(a,u,m,!0),ue?(m++,v=!0,R=!0):R||m++;if(m>=J){x=!0;break}let he=!0;for(;(he||!O)&&a>=0;)he=this.containsBlackPoint(f,m,a,!1),he?(a--,v=!0,O=!0):O||a--;if(a<0){x=!0;break}let ge=!0;for(;(ge||!F)&&f>=0;)ge=this.containsBlackPoint(a,u,f,!0),ge?(f--,v=!0,F=!0):F||f--;if(f<0){x=!0;break}v&&(b=!0)}if(!x&&b){const le=u-a;let ue=null;for(let Pe=1;ue===null&&Pe<le;Pe++)ue=this.getBlackPointOnSegment(a,m-Pe,a+Pe,m);if(ue==null)throw new H;let he=null;for(let Pe=1;he===null&&Pe<le;Pe++)he=this.getBlackPointOnSegment(a,f+Pe,a+Pe,f);if(he==null)throw new H;let ge=null;for(let Pe=1;ge===null&&Pe<le;Pe++)ge=this.getBlackPointOnSegment(u,f+Pe,u-Pe,f);if(ge==null)throw new H;let Oe=null;for(let Pe=1;Oe===null&&Pe<le;Pe++)Oe=this.getBlackPointOnSegment(u,m-Pe,u-Pe,m);if(Oe==null)throw new H;return this.centerEdges(Oe,ue,ge,he)}else throw new H}getBlackPointOnSegment(a,u,f,m){const x=$e.round($e.distance(a,u,f,m)),v=(f-a)/x,b=(m-u)/x,T=this.image;for(let R=0;R<x;R++){const O=$e.round(a+R*v),F=$e.round(u+R*b);if(T.get(O,F))return new Te(O,F)}return null}centerEdges(a,u,f,m){const x=a.getX(),v=a.getY(),b=u.getX(),T=u.getY(),R=f.getX(),O=f.getY(),F=m.getX(),$=m.getY(),J=Ke.CORR;return x<this.width/2?[new Te(F-J,$+J),new Te(b+J,T+J),new Te(R-J,O-J),new Te(x+J,v-J)]:[new Te(F+J,$+J),new Te(b+J,T-J),new Te(R-J,O+J),new Te(x-J,v-J)]}containsBlackPoint(a,u,f,m){const x=this.image;if(m){for(let v=a;v<=u;v++)if(x.get(v,f))return!0}else for(let v=a;v<=u;v++)if(x.get(f,v))return!0;return!1}}Ke.INIT_SIZE=10,Ke.CORR=1;class ot{static checkAndNudgePoints(a,u){const f=a.getWidth(),m=a.getHeight();let x=!0;for(let v=0;v<u.length&&x;v+=2){const b=Math.floor(u[v]),T=Math.floor(u[v+1]);if(b<-1||b>f||T<-1||T>m)throw new H;x=!1,b===-1?(u[v]=0,x=!0):b===f&&(u[v]=f-1,x=!0),T===-1?(u[v+1]=0,x=!0):T===m&&(u[v+1]=m-1,x=!0)}x=!0;for(let v=u.length-2;v>=0&&x;v-=2){const b=Math.floor(u[v]),T=Math.floor(u[v+1]);if(b<-1||b>f||T<-1||T>m)throw new H;x=!1,b===-1?(u[v]=0,x=!0):b===f&&(u[v]=f-1,x=!0),T===-1?(u[v+1]=0,x=!0):T===m&&(u[v+1]=m-1,x=!0)}}}class rt{constructor(a,u,f,m,x,v,b,T,R){this.a11=a,this.a21=u,this.a31=f,this.a12=m,this.a22=x,this.a32=v,this.a13=b,this.a23=T,this.a33=R}static quadrilateralToQuadrilateral(a,u,f,m,x,v,b,T,R,O,F,$,J,le,ue,he){const ge=rt.quadrilateralToSquare(a,u,f,m,x,v,b,T);return rt.squareToQuadrilateral(R,O,F,$,J,le,ue,he).times(ge)}transformPoints(a){const u=a.length,f=this.a11,m=this.a12,x=this.a13,v=this.a21,b=this.a22,T=this.a23,R=this.a31,O=this.a32,F=this.a33;for(let $=0;$<u;$+=2){const J=a[$],le=a[$+1],ue=x*J+T*le+F;a[$]=(f*J+v*le+R)/ue,a[$+1]=(m*J+b*le+O)/ue}}transformPointsWithValues(a,u){const f=this.a11,m=this.a12,x=this.a13,v=this.a21,b=this.a22,T=this.a23,R=this.a31,O=this.a32,F=this.a33,$=a.length;for(let J=0;J<$;J++){const le=a[J],ue=u[J],he=x*le+T*ue+F;a[J]=(f*le+v*ue+R)/he,u[J]=(m*le+b*ue+O)/he}}static squareToQuadrilateral(a,u,f,m,x,v,b,T){const R=a-f+x-b,O=u-m+v-T;if(R===0&&O===0)return new rt(f-a,x-f,a,m-u,v-m,u,0,0,1);{const F=f-x,$=b-x,J=m-v,le=T-v,ue=F*le-$*J,he=(R*le-$*O)/ue,ge=(F*O-R*J)/ue;return new rt(f-a+he*f,b-a+ge*b,a,m-u+he*m,T-u+ge*T,u,he,ge,1)}}static quadrilateralToSquare(a,u,f,m,x,v,b,T){return rt.squareToQuadrilateral(a,u,f,m,x,v,b,T).buildAdjoint()}buildAdjoint(){return new rt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(a){return new rt(this.a11*a.a11+this.a21*a.a12+this.a31*a.a13,this.a11*a.a21+this.a21*a.a22+this.a31*a.a23,this.a11*a.a31+this.a21*a.a32+this.a31*a.a33,this.a12*a.a11+this.a22*a.a12+this.a32*a.a13,this.a12*a.a21+this.a22*a.a22+this.a32*a.a23,this.a12*a.a31+this.a22*a.a32+this.a32*a.a33,this.a13*a.a11+this.a23*a.a12+this.a33*a.a13,this.a13*a.a21+this.a23*a.a22+this.a33*a.a23,this.a13*a.a31+this.a23*a.a32+this.a33*a.a33)}}class Bt extends ot{sampleGrid(a,u,f,m,x,v,b,T,R,O,F,$,J,le,ue,he,ge,Oe,Pe){const ke=rt.quadrilateralToQuadrilateral(m,x,v,b,T,R,O,F,$,J,le,ue,he,ge,Oe,Pe);return this.sampleGridWithTransform(a,u,f,ke)}sampleGridWithTransform(a,u,f,m){if(u<=0||f<=0)throw new H;const x=new z(u,f),v=new Float32Array(2*u);for(let b=0;b<f;b++){const T=v.length,R=b+.5;for(let O=0;O<T;O+=2)v[O]=O/2+.5,v[O+1]=R;m.transformPoints(v),ot.checkAndNudgePoints(a,v);try{for(let O=0;O<T;O+=2)a.get(Math.floor(v[O]),Math.floor(v[O+1]))&&x.set(O/2,b)}catch{throw new H}}return x}}class vn{static setGridSampler(a){vn.gridSampler=a}static getInstance(){return vn.gridSampler}}vn.gridSampler=new Bt;class Zt{constructor(a,u){this.x=a,this.y=u}toResultPoint(){return new Te(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Dr{constructor(a){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=a}detect(){return this.detectMirror(!1)}detectMirror(a){let u=this.getMatrixCenter(),f=this.getBullsEyeCorners(u);if(a){let v=f[0];f[0]=f[2],f[2]=v}this.extractParameters(f);let m=this.sampleGrid(this.image,f[this.shift%4],f[(this.shift+1)%4],f[(this.shift+2)%4],f[(this.shift+3)%4]),x=this.getMatrixCornerPoints(f);return new Ee(m,x,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(a){if(!this.isValidPoint(a[0])||!this.isValidPoint(a[1])||!this.isValidPoint(a[2])||!this.isValidPoint(a[3]))throw new H;let u=2*this.nbCenterLayers,f=new Int32Array([this.sampleLine(a[0],a[1],u),this.sampleLine(a[1],a[2],u),this.sampleLine(a[2],a[3],u),this.sampleLine(a[3],a[0],u)]);this.shift=this.getRotation(f,u);let m=0;for(let v=0;v<4;v++){let b=f[(this.shift+v)%4];this.compact?(m<<=7,m+=b>>1&127):(m<<=10,m+=(b>>2&992)+(b>>1&31))}let x=this.getCorrectedParameterData(m,this.compact);this.compact?(this.nbLayers=(x>>6)+1,this.nbDataBlocks=(x&63)+1):(this.nbLayers=(x>>11)+1,this.nbDataBlocks=(x&2047)+1)}getRotation(a,u){let f=0;a.forEach((m,x,v)=>{let b=(m>>u-2<<1)+(m&1);f=(f<<3)+b}),f=((f&1)<<11)+(f>>1);for(let m=0;m<4;m++)if(I.bitCount(f^this.EXPECTED_CORNER_BITS[m])<=2)return m;throw new H}getCorrectedParameterData(a,u){let f,m;u?(f=7,m=2):(f=10,m=4);let x=f-m,v=new Int32Array(f);for(let T=f-1;T>=0;--T)v[T]=a&15,a>>=4;try{new et(xe.AZTEC_PARAM).decode(v,x)}catch{throw new H}let b=0;for(let T=0;T<m;T++)b=(b<<4)+v[T];return b}getBullsEyeCorners(a){let u=a,f=a,m=a,x=a,v=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let F=this.getFirstDifferent(u,v,1,-1),$=this.getFirstDifferent(f,v,1,1),J=this.getFirstDifferent(m,v,-1,1),le=this.getFirstDifferent(x,v,-1,-1);if(this.nbCenterLayers>2){let ue=this.distancePoint(le,F)*this.nbCenterLayers/(this.distancePoint(x,u)*(this.nbCenterLayers+2));if(ue<.75||ue>1.25||!this.isWhiteOrBlackRectangle(F,$,J,le))break}u=F,f=$,m=J,x=le,v=!v}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new H;this.compact=this.nbCenterLayers===5;let b=new Te(u.getX()+.5,u.getY()-.5),T=new Te(f.getX()+.5,f.getY()+.5),R=new Te(m.getX()-.5,m.getY()+.5),O=new Te(x.getX()-.5,x.getY()-.5);return this.expandSquare([b,T,R,O],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let a,u,f,m;try{let b=new Ke(this.image).detect();a=b[0],u=b[1],f=b[2],m=b[3]}catch{let T=this.image.getWidth()/2,R=this.image.getHeight()/2;a=this.getFirstDifferent(new Zt(T+7,R-7),!1,1,-1).toResultPoint(),u=this.getFirstDifferent(new Zt(T+7,R+7),!1,1,1).toResultPoint(),f=this.getFirstDifferent(new Zt(T-7,R+7),!1,-1,1).toResultPoint(),m=this.getFirstDifferent(new Zt(T-7,R-7),!1,-1,-1).toResultPoint()}let x=$e.round((a.getX()+m.getX()+u.getX()+f.getX())/4),v=$e.round((a.getY()+m.getY()+u.getY()+f.getY())/4);try{let b=new Ke(this.image,15,x,v).detect();a=b[0],u=b[1],f=b[2],m=b[3]}catch{a=this.getFirstDifferent(new Zt(x+7,v-7),!1,1,-1).toResultPoint(),u=this.getFirstDifferent(new Zt(x+7,v+7),!1,1,1).toResultPoint(),f=this.getFirstDifferent(new Zt(x-7,v+7),!1,-1,1).toResultPoint(),m=this.getFirstDifferent(new Zt(x-7,v-7),!1,-1,-1).toResultPoint()}return x=$e.round((a.getX()+m.getX()+u.getX()+f.getX())/4),v=$e.round((a.getY()+m.getY()+u.getY()+f.getY())/4),new Zt(x,v)}getMatrixCornerPoints(a){return this.expandSquare(a,2*this.nbCenterLayers,this.getDimension())}sampleGrid(a,u,f,m,x){let v=vn.getInstance(),b=this.getDimension(),T=b/2-this.nbCenterLayers,R=b/2+this.nbCenterLayers;return v.sampleGrid(a,b,b,T,T,R,T,R,R,T,R,u.getX(),u.getY(),f.getX(),f.getY(),m.getX(),m.getY(),x.getX(),x.getY())}sampleLine(a,u,f){let m=0,x=this.distanceResultPoint(a,u),v=x/f,b=a.getX(),T=a.getY(),R=v*(u.getX()-a.getX())/x,O=v*(u.getY()-a.getY())/x;for(let F=0;F<f;F++)this.image.get($e.round(b+F*R),$e.round(T+F*O))&&(m|=1<<f-F-1);return m}isWhiteOrBlackRectangle(a,u,f,m){let x=3;a=new Zt(a.getX()-x,a.getY()+x),u=new Zt(u.getX()-x,u.getY()-x),f=new Zt(f.getX()+x,f.getY()-x),m=new Zt(m.getX()+x,m.getY()+x);let v=this.getColor(m,a);if(v===0)return!1;let b=this.getColor(a,u);return b!==v||(b=this.getColor(u,f),b!==v)?!1:(b=this.getColor(f,m),b===v)}getColor(a,u){let f=this.distancePoint(a,u),m=(u.getX()-a.getX())/f,x=(u.getY()-a.getY())/f,v=0,b=a.getX(),T=a.getY(),R=this.image.get(a.getX(),a.getY()),O=Math.ceil(f);for(let $=0;$<O;$++)b+=m,T+=x,this.image.get($e.round(b),$e.round(T))!==R&&v++;let F=v/f;return F>.1&&F<.9?0:F<=.1===R?1:-1}getFirstDifferent(a,u,f,m){let x=a.getX()+f,v=a.getY()+m;for(;this.isValid(x,v)&&this.image.get(x,v)===u;)x+=f,v+=m;for(x-=f,v-=m;this.isValid(x,v)&&this.image.get(x,v)===u;)x+=f;for(x-=f;this.isValid(x,v)&&this.image.get(x,v)===u;)v+=m;return v-=m,new Zt(x,v)}expandSquare(a,u,f){let m=f/(2*u),x=a[0].getX()-a[2].getX(),v=a[0].getY()-a[2].getY(),b=(a[0].getX()+a[2].getX())/2,T=(a[0].getY()+a[2].getY())/2,R=new Te(b+m*x,T+m*v),O=new Te(b-m*x,T-m*v);x=a[1].getX()-a[3].getX(),v=a[1].getY()-a[3].getY(),b=(a[1].getX()+a[3].getX())/2,T=(a[1].getY()+a[3].getY())/2;let F=new Te(b+m*x,T+m*v),$=new Te(b-m*x,T-m*v);return[R,F,O,$]}isValid(a,u){return a>=0&&a<this.image.getWidth()&&u>0&&u<this.image.getHeight()}isValidPoint(a){let u=$e.round(a.getX()),f=$e.round(a.getY());return this.isValid(u,f)}distancePoint(a,u){return $e.distance(a.getX(),a.getY(),u.getX(),u.getY())}distanceResultPoint(a,u){return $e.distance(a.getX(),a.getY(),u.getX(),u.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(I.truncDivision(this.nbLayers-4,8)+1)+15}}class Gt{decode(a,u=null){let f=null,m=new Dr(a.getBlackMatrix()),x=null,v=null;try{let O=m.detectMirror(!1);x=O.getPoints(),this.reportFoundResultPoints(u,x),v=new be().decode(O)}catch(O){f=O}if(v==null)try{let O=m.detectMirror(!0);x=O.getPoints(),this.reportFoundResultPoints(u,x),v=new be().decode(O)}catch(O){throw f??O}let b=new Q(v.getText(),v.getRawBytes(),v.getNumBits(),x,ne.AZTEC,C.currentTimeMillis()),T=v.getByteSegments();T!=null&&b.putMetadata(de.BYTE_SEGMENTS,T);let R=v.getECLevel();return R!=null&&b.putMetadata(de.ERROR_CORRECTION_LEVEL,R),b}reportFoundResultPoints(a,u){if(a!=null){let f=a.get(j.NEED_RESULT_POINT_CALLBACK);f!=null&&u.forEach((m,x,v)=>{f.foundPossibleResultPoint(m)})}}reset(){}}class ur extends G{constructor(a=500){super(new Gt,a)}}class Ot{decode(a,u){try{return this.doDecode(a,u)}catch{if(u&&u.get(j.TRY_HARDER)===!0&&a.isRotateSupported()){const x=a.rotateCounterClockwise(),v=this.doDecode(x,u),b=v.getResultMetadata();let T=270;b!==null&&b.get(de.ORIENTATION)===!0&&(T=T+b.get(de.ORIENTATION)%360),v.putMetadata(de.ORIENTATION,T);const R=v.getResultPoints();if(R!==null){const O=x.getHeight();for(let F=0;F<R.length;F++)R[F]=new Te(O-R[F].getY()-1,R[F].getX())}return v}else throw new H}}reset(){}doDecode(a,u){const f=a.getWidth(),m=a.getHeight();let x=new M(f);const v=u&&u.get(j.TRY_HARDER)===!0,b=Math.max(1,m>>(v?8:5));let T;v?T=m:T=15;const R=Math.trunc(m/2);for(let O=0;O<T;O++){const F=Math.trunc((O+1)/2),$=(O&1)===0,J=R+b*($?F:-F);if(J<0||J>=m)break;try{x=a.getBlackRow(J,x)}catch{continue}for(let le=0;le<2;le++){if(le===1&&(x.reverse(),u&&u.get(j.NEED_RESULT_POINT_CALLBACK)===!0)){const ue=new Map;u.forEach((he,ge)=>ue.set(ge,he)),ue.delete(j.NEED_RESULT_POINT_CALLBACK),u=ue}try{const ue=this.decodeRow(J,x,u);if(le===1){ue.putMetadata(de.ORIENTATION,180);const he=ue.getResultPoints();he!==null&&(he[0]=new Te(f-he[0].getX()-1,he[0].getY()),he[1]=new Te(f-he[1].getX()-1,he[1].getY()))}return ue}catch{}}}throw new H}static recordPattern(a,u,f){const m=f.length;for(let R=0;R<m;R++)f[R]=0;const x=a.getSize();if(u>=x)throw new H;let v=!a.get(u),b=0,T=u;for(;T<x;){if(a.get(T)!==v)f[b]++;else{if(++b===m)break;f[b]=1,v=!v}T++}if(!(b===m||b===m-1&&T===x))throw new H}static recordPatternInReverse(a,u,f){let m=f.length,x=a.get(u);for(;u>0&&m>=0;)a.get(--u)!==x&&(m--,x=!x);if(m>=0)throw new H;Ot.recordPattern(a,u+1,f)}static patternMatchVariance(a,u,f){const m=a.length;let x=0,v=0;for(let R=0;R<m;R++)x+=a[R],v+=u[R];if(x<v)return Number.POSITIVE_INFINITY;const b=x/v;f*=b;let T=0;for(let R=0;R<m;R++){const O=a[R],F=u[R]*b,$=O>F?O-F:F-O;if($>f)return Number.POSITIVE_INFINITY;T+=$}return T/x}}class Ie extends Ot{static findStartPattern(a){const u=a.getSize(),f=a.getNextSet(0);let m=0,x=Int32Array.from([0,0,0,0,0,0]),v=f,b=!1;const T=6;for(let R=f;R<u;R++)if(a.get(R)!==b)x[m]++;else{if(m===T-1){let O=Ie.MAX_AVG_VARIANCE,F=-1;for(let $=Ie.CODE_START_A;$<=Ie.CODE_START_C;$++){const J=Ot.patternMatchVariance(x,Ie.CODE_PATTERNS[$],Ie.MAX_INDIVIDUAL_VARIANCE);J<O&&(O=J,F=$)}if(F>=0&&a.isRange(Math.max(0,v-(R-v)/2),v,!1))return Int32Array.from([v,R,F]);v+=x[0]+x[1],x=x.slice(2,x.length-1),x[m-1]=0,x[m]=0,m--}else m++;x[m]=1,b=!b}throw new H}static decodeCode(a,u,f){Ot.recordPattern(a,f,u);let m=Ie.MAX_AVG_VARIANCE,x=-1;for(let v=0;v<Ie.CODE_PATTERNS.length;v++){const b=Ie.CODE_PATTERNS[v],T=this.patternMatchVariance(u,b,Ie.MAX_INDIVIDUAL_VARIANCE);T<m&&(m=T,x=v)}if(x>=0)return x;throw new H}decodeRow(a,u,f){const m=f&&f.get(j.ASSUME_GS1)===!0,x=Ie.findStartPattern(u),v=x[2];let b=0;const T=new Uint8Array(20);T[b++]=v;let R;switch(v){case Ie.CODE_START_A:R=Ie.CODE_CODE_A;break;case Ie.CODE_START_B:R=Ie.CODE_CODE_B;break;case Ie.CODE_START_C:R=Ie.CODE_CODE_C;break;default:throw new _}let O=!1,F=!1,$="",J=x[0],le=x[1];const ue=Int32Array.from([0,0,0,0,0,0]);let he=0,ge=0,Oe=v,Pe=0,ke=!0,Mt=!1,yt=!1;for(;!O;){const Jc=F;switch(F=!1,he=ge,ge=Ie.decodeCode(u,ue,le),T[b++]=ge,ge!==Ie.CODE_STOP&&(ke=!0),ge!==Ie.CODE_STOP&&(Pe++,Oe+=Pe*ge),J=le,le+=ue.reduce((Nj,Aj)=>Nj+Aj,0),ge){case Ie.CODE_START_A:case Ie.CODE_START_B:case Ie.CODE_START_C:throw new _}switch(R){case Ie.CODE_CODE_A:if(ge<64)yt===Mt?$+=String.fromCharCode(32+ge):$+=String.fromCharCode(32+ge+128),yt=!1;else if(ge<96)yt===Mt?$+=String.fromCharCode(ge-64):$+=String.fromCharCode(ge+64),yt=!1;else switch(ge!==Ie.CODE_STOP&&(ke=!1),ge){case Ie.CODE_FNC_1:m&&($.length===0?$+="]C1":$+="");break;case Ie.CODE_FNC_2:case Ie.CODE_FNC_3:break;case Ie.CODE_FNC_4_A:!Mt&&yt?(Mt=!0,yt=!1):Mt&&yt?(Mt=!1,yt=!1):yt=!0;break;case Ie.CODE_SHIFT:F=!0,R=Ie.CODE_CODE_B;break;case Ie.CODE_CODE_B:R=Ie.CODE_CODE_B;break;case Ie.CODE_CODE_C:R=Ie.CODE_CODE_C;break;case Ie.CODE_STOP:O=!0;break}break;case Ie.CODE_CODE_B:if(ge<96)yt===Mt?$+=String.fromCharCode(32+ge):$+=String.fromCharCode(32+ge+128),yt=!1;else switch(ge!==Ie.CODE_STOP&&(ke=!1),ge){case Ie.CODE_FNC_1:m&&($.length===0?$+="]C1":$+="");break;case Ie.CODE_FNC_2:case Ie.CODE_FNC_3:break;case Ie.CODE_FNC_4_B:!Mt&&yt?(Mt=!0,yt=!1):Mt&&yt?(Mt=!1,yt=!1):yt=!0;break;case Ie.CODE_SHIFT:F=!0,R=Ie.CODE_CODE_A;break;case Ie.CODE_CODE_A:R=Ie.CODE_CODE_A;break;case Ie.CODE_CODE_C:R=Ie.CODE_CODE_C;break;case Ie.CODE_STOP:O=!0;break}break;case Ie.CODE_CODE_C:if(ge<100)ge<10&&($+="0"),$+=ge;else switch(ge!==Ie.CODE_STOP&&(ke=!1),ge){case Ie.CODE_FNC_1:m&&($.length===0?$+="]C1":$+="");break;case Ie.CODE_CODE_A:R=Ie.CODE_CODE_A;break;case Ie.CODE_CODE_B:R=Ie.CODE_CODE_B;break;case Ie.CODE_STOP:O=!0;break}break}Jc&&(R=R===Ie.CODE_CODE_A?Ie.CODE_CODE_B:Ie.CODE_CODE_A)}const hs=le-J;if(le=u.getNextUnset(le),!u.isRange(le,Math.min(u.getSize(),le+(le-J)/2),!1))throw new H;if(Oe-=Pe*he,Oe%103!==he)throw new w;const mi=$.length;if(mi===0)throw new H;mi>0&&ke&&(R===Ie.CODE_CODE_C?$=$.substring(0,mi-2):$=$.substring(0,mi-1));const ps=(x[1]+x[0])/2,nn=J+hs/2,Sr=T.length,Ns=new Uint8Array(Sr);for(let Jc=0;Jc<Sr;Jc++)Ns[Jc]=T[Jc];const Qc=[new Te(ps,a),new Te(nn,a)];return new Q($,Ns,0,Qc,ne.CODE_128,new Date().getTime())}}Ie.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ie.MAX_AVG_VARIANCE=.25,Ie.MAX_INDIVIDUAL_VARIANCE=.7,Ie.CODE_SHIFT=98,Ie.CODE_CODE_C=99,Ie.CODE_CODE_B=100,Ie.CODE_CODE_A=101,Ie.CODE_FNC_1=102,Ie.CODE_FNC_2=97,Ie.CODE_FNC_3=96,Ie.CODE_FNC_4_A=101,Ie.CODE_FNC_4_B=100,Ie.CODE_START_A=103,Ie.CODE_START_B=104,Ie.CODE_START_C=105,Ie.CODE_STOP=106;class _t extends Ot{constructor(a=!1,u=!1){super(),this.usingCheckDigit=a,this.extendedMode=u,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(a,u,f){let m=this.counters;m.fill(0),this.decodeRowResult="";let x=_t.findAsteriskPattern(u,m),v=u.getNextSet(x[1]),b=u.getSize(),T,R;do{_t.recordPattern(u,v,m);let ue=_t.toNarrowWidePattern(m);if(ue<0)throw new H;T=_t.patternToChar(ue),this.decodeRowResult+=T,R=v;for(let he of m)v+=he;v=u.getNextSet(v)}while(T!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let O=0;for(let ue of m)O+=ue;let F=v-R-O;if(v!==b&&F*2<O)throw new H;if(this.usingCheckDigit){let ue=this.decodeRowResult.length-1,he=0;for(let ge=0;ge<ue;ge++)he+=_t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ge));if(this.decodeRowResult.charAt(ue)!==_t.ALPHABET_STRING.charAt(he%43))throw new w;this.decodeRowResult=this.decodeRowResult.substring(0,ue)}if(this.decodeRowResult.length===0)throw new H;let $;this.extendedMode?$=_t.decodeExtended(this.decodeRowResult):$=this.decodeRowResult;let J=(x[1]+x[0])/2,le=R+O/2;return new Q($,null,0,[new Te(J,a),new Te(le,a)],ne.CODE_39,new Date().getTime())}static findAsteriskPattern(a,u){let f=a.getSize(),m=a.getNextSet(0),x=0,v=m,b=!1,T=u.length;for(let R=m;R<f;R++)if(a.get(R)!==b)u[x]++;else{if(x===T-1){if(this.toNarrowWidePattern(u)===_t.ASTERISK_ENCODING&&a.isRange(Math.max(0,v-Math.floor((R-v)/2)),v,!1))return[v,R];v+=u[0]+u[1],u.copyWithin(0,2,2+x-1),u[x-1]=0,u[x]=0,x--}else x++;u[x]=1,b=!b}throw new H}static toNarrowWidePattern(a){let u=a.length,f=0,m;do{let x=2147483647;for(let T of a)T<x&&T>f&&(x=T);f=x,m=0;let v=0,b=0;for(let T=0;T<u;T++){let R=a[T];R>f&&(b|=1<<u-1-T,m++,v+=R)}if(m===3){for(let T=0;T<u&&m>0;T++){let R=a[T];if(R>f&&(m--,R*2>=v))return-1}return b}}while(m>3);return-1}static patternToChar(a){for(let u=0;u<_t.CHARACTER_ENCODINGS.length;u++)if(_t.CHARACTER_ENCODINGS[u]===a)return _t.ALPHABET_STRING.charAt(u);if(a===_t.ASTERISK_ENCODING)return"*";throw new H}static decodeExtended(a){let u=a.length,f="";for(let m=0;m<u;m++){let x=a.charAt(m);if(x==="+"||x==="$"||x==="%"||x==="/"){let v=a.charAt(m+1),b="\0";switch(x){case"+":if(v>="A"&&v<="Z")b=String.fromCharCode(v.charCodeAt(0)+32);else throw new _;break;case"$":if(v>="A"&&v<="Z")b=String.fromCharCode(v.charCodeAt(0)-64);else throw new _;break;case"%":if(v>="A"&&v<="E")b=String.fromCharCode(v.charCodeAt(0)-38);else if(v>="F"&&v<="J")b=String.fromCharCode(v.charCodeAt(0)-11);else if(v>="K"&&v<="O")b=String.fromCharCode(v.charCodeAt(0)+16);else if(v>="P"&&v<="T")b=String.fromCharCode(v.charCodeAt(0)+43);else if(v==="U")b="\0";else if(v==="V")b="@";else if(v==="W")b="`";else if(v==="X"||v==="Y"||v==="Z")b="";else throw new _;break;case"/":if(v>="A"&&v<="O")b=String.fromCharCode(v.charCodeAt(0)-32);else if(v==="Z")b=":";else throw new _;break}f+=b,m++}else f+=x}return f}}_t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",_t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],_t.ASTERISK_ENCODING=148;class ut extends Ot{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(a,u,f){let m=this.decodeStart(u),x=this.decodeEnd(u),v=new re;ut.decodeMiddle(u,m[1],x[0],v);let b=v.toString(),T=null;f!=null&&(T=f.get(j.ALLOWED_LENGTHS)),T==null&&(T=ut.DEFAULT_ALLOWED_LENGTHS);let R=b.length,O=!1,F=0;for(let le of T){if(R===le){O=!0;break}le>F&&(F=le)}if(!O&&R>F&&(O=!0),!O)throw new _;const $=[new Te(m[1],a),new Te(x[0],a)];return new Q(b,null,0,$,ne.ITF,new Date().getTime())}static decodeMiddle(a,u,f,m){let x=new Int32Array(10),v=new Int32Array(5),b=new Int32Array(5);for(x.fill(0),v.fill(0),b.fill(0);u<f;){Ot.recordPattern(a,u,x);for(let R=0;R<5;R++){let O=2*R;v[R]=x[O],b[R]=x[O+1]}let T=ut.decodeDigit(v);m.append(T.toString()),T=this.decodeDigit(b),m.append(T.toString()),x.forEach(function(R){u+=R})}}decodeStart(a){let u=ut.skipWhiteSpace(a),f=ut.findGuardPattern(a,u,ut.START_PATTERN);return this.narrowLineWidth=(f[1]-f[0])/4,this.validateQuietZone(a,f[0]),f}validateQuietZone(a,u){let f=this.narrowLineWidth*10;f=f<u?f:u;for(let m=u-1;f>0&&m>=0&&!a.get(m);m--)f--;if(f!==0)throw new H}static skipWhiteSpace(a){const u=a.getSize(),f=a.getNextSet(0);if(f===u)throw new H;return f}decodeEnd(a){a.reverse();try{let u=ut.skipWhiteSpace(a),f;try{f=ut.findGuardPattern(a,u,ut.END_PATTERN_REVERSED[0])}catch(x){x instanceof H&&(f=ut.findGuardPattern(a,u,ut.END_PATTERN_REVERSED[1]))}this.validateQuietZone(a,f[0]);let m=f[0];return f[0]=a.getSize()-f[1],f[1]=a.getSize()-m,f}finally{a.reverse()}}static findGuardPattern(a,u,f){let m=f.length,x=new Int32Array(m),v=a.getSize(),b=!1,T=0,R=u;x.fill(0);for(let O=u;O<v;O++)if(a.get(O)!==b)x[T]++;else{if(T===m-1){if(Ot.patternMatchVariance(x,f,ut.MAX_INDIVIDUAL_VARIANCE)<ut.MAX_AVG_VARIANCE)return[R,O];R+=x[0]+x[1],C.arraycopy(x,2,x,0,T-1),x[T-1]=0,x[T]=0,T--}else T++;x[T]=1,b=!b}throw new H}static decodeDigit(a){let u=ut.MAX_AVG_VARIANCE,f=-1,m=ut.PATTERNS.length;for(let x=0;x<m;x++){let v=ut.PATTERNS[x],b=Ot.patternMatchVariance(a,v,ut.MAX_INDIVIDUAL_VARIANCE);b<u?(u=b,f=x):b===u&&(f=-1)}if(f>=0)return f%10;throw new H}}ut.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ut.MAX_AVG_VARIANCE=.38,ut.MAX_INDIVIDUAL_VARIANCE=.5,ut.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ut.START_PATTERN=Int32Array.from([1,1,1,1]),ut.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Nt extends Ot{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(a){let u=!1,f,m=0,x=Int32Array.from([0,0,0]);for(;!u;){x=Int32Array.from([0,0,0]),f=Nt.findGuardPattern(a,m,!1,this.START_END_PATTERN,x);let v=f[0];m=f[1];let b=v-(m-v);b>=0&&(u=a.isRange(b,v,!1))}return f}static checkChecksum(a){return Nt.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let u=a.length;if(u===0)return!1;let f=parseInt(a.charAt(u-1),10);return Nt.getStandardUPCEANChecksum(a.substring(0,u-1))===f}static getStandardUPCEANChecksum(a){let u=a.length,f=0;for(let m=u-1;m>=0;m-=2){let x=a.charAt(m).charCodeAt(0)-48;if(x<0||x>9)throw new _;f+=x}f*=3;for(let m=u-2;m>=0;m-=2){let x=a.charAt(m).charCodeAt(0)-48;if(x<0||x>9)throw new _;f+=x}return(1e3-f)%10}static decodeEnd(a,u){return Nt.findGuardPattern(a,u,!1,Nt.START_END_PATTERN,new Int32Array(Nt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(a,u,f,m){return this.findGuardPattern(a,u,f,m,new Int32Array(m.length))}static findGuardPattern(a,u,f,m,x){let v=a.getSize();u=f?a.getNextUnset(u):a.getNextSet(u);let b=0,T=u,R=m.length,O=f;for(let F=u;F<v;F++)if(a.get(F)!==O)x[b]++;else{if(b===R-1){if(Ot.patternMatchVariance(x,m,Nt.MAX_INDIVIDUAL_VARIANCE)<Nt.MAX_AVG_VARIANCE)return Int32Array.from([T,F]);T+=x[0]+x[1];let $=x.slice(2,x.length-1);for(let J=0;J<b-1;J++)x[J]=$[J];x[b-1]=0,x[b]=0,b--}else b++;x[b]=1,O=!O}throw new H}static decodeDigit(a,u,f,m){this.recordPattern(a,f,u);let x=this.MAX_AVG_VARIANCE,v=-1,b=m.length;for(let T=0;T<b;T++){let R=m[T],O=Ot.patternMatchVariance(u,R,Nt.MAX_INDIVIDUAL_VARIANCE);O<x&&(x=O,v=T)}if(v>=0)return v;throw new H}}Nt.MAX_AVG_VARIANCE=.48,Nt.MAX_INDIVIDUAL_VARIANCE=.7,Nt.START_END_PATTERN=Int32Array.from([1,1,1]),Nt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Nt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Nt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class qr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,u,f){let m=this.decodeRowStringBuffer,x=this.decodeMiddle(u,f,m),v=m.toString(),b=qr.parseExtensionString(v),T=[new Te((f[0]+f[1])/2,a),new Te(x,a)],R=new Q(v,null,0,T,ne.UPC_EAN_EXTENSION,new Date().getTime());return b!=null&&R.putAllMetadata(b),R}decodeMiddle(a,u,f){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let x=a.getSize(),v=u[1],b=0;for(let R=0;R<5&&v<x;R++){let O=Nt.decodeDigit(a,m,v,Nt.L_AND_G_PATTERNS);f+=String.fromCharCode(48+O%10);for(let F of m)v+=F;O>=10&&(b|=1<<4-R),R!==4&&(v=a.getNextSet(v),v=a.getNextUnset(v))}if(f.length!==5)throw new H;let T=this.determineCheckDigit(b);if(qr.extensionChecksum(f.toString())!==T)throw new H;return v}static extensionChecksum(a){let u=a.length,f=0;for(let m=u-2;m>=0;m-=2)f+=a.charAt(m).charCodeAt(0)-48;f*=3;for(let m=u-1;m>=0;m-=2)f+=a.charAt(m).charCodeAt(0)-48;return f*=3,f%10}determineCheckDigit(a){for(let u=0;u<10;u++)if(a===this.CHECK_DIGIT_ENCODINGS[u])return u;throw new H}static parseExtensionString(a){if(a.length!==5)return null;let u=qr.parseExtension5String(a);return u==null?null:new Map([[de.SUGGESTED_PRICE,u]])}static parseExtension5String(a){let u;switch(a.charAt(0)){case"0":u="";break;case"5":u="$";break;case"9":switch(a){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}u="";break;default:u="";break}let f=parseInt(a.substring(1)),m=(f/100).toString(),x=f%100,v=x<10?"0"+x:x.toString();return u+m+"."+v}}class Vs{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,u,f){let m=this.decodeRowStringBuffer,x=this.decodeMiddle(u,f,m),v=m.toString(),b=Vs.parseExtensionString(v),T=[new Te((f[0]+f[1])/2,a),new Te(x,a)],R=new Q(v,null,0,T,ne.UPC_EAN_EXTENSION,new Date().getTime());return b!=null&&R.putAllMetadata(b),R}decodeMiddle(a,u,f){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let x=a.getSize(),v=u[1],b=0;for(let T=0;T<2&&v<x;T++){let R=Nt.decodeDigit(a,m,v,Nt.L_AND_G_PATTERNS);f+=String.fromCharCode(48+R%10);for(let O of m)v+=O;R>=10&&(b|=1<<1-T),T!==1&&(v=a.getNextSet(v),v=a.getNextUnset(v))}if(f.length!==2)throw new H;if(parseInt(f.toString())%4!==b)throw new H;return v}static parseExtensionString(a){return a.length!==2?null:new Map([[de.ISSUE_NUMBER,parseInt(a)]])}}class Es{static decodeRow(a,u,f){let m=Nt.findGuardPattern(u,f,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new qr().decodeRow(a,u,m)}catch{return new Vs().decodeRow(a,u,m)}}}Es.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class gt extends Nt{constructor(){super(),this.decodeRowStringBuffer="",gt.L_AND_G_PATTERNS=gt.L_PATTERNS.map(a=>Int32Array.from(a));for(let a=10;a<20;a++){let u=gt.L_PATTERNS[a-10],f=new Int32Array(u.length);for(let m=0;m<u.length;m++)f[m]=u[u.length-m-1];gt.L_AND_G_PATTERNS[a]=f}}decodeRow(a,u,f){let m=gt.findStartGuardPattern(u),x=f==null?null:f.get(j.NEED_RESULT_POINT_CALLBACK);if(x!=null){const ke=new Te((m[0]+m[1])/2,a);x.foundPossibleResultPoint(ke)}let v=this.decodeMiddle(u,m,this.decodeRowStringBuffer),b=v.rowOffset,T=v.resultString;if(x!=null){const ke=new Te(b,a);x.foundPossibleResultPoint(ke)}let R=this.decodeEnd(u,b);if(x!=null){const ke=new Te((R[0]+R[1])/2,a);x.foundPossibleResultPoint(ke)}let O=R[1],F=O+(O-R[0]);if(F>=u.getSize()||!u.isRange(O,F,!1))throw new H;let $=T.toString();if($.length<8)throw new _;if(!gt.checkChecksum($))throw new w;let J=(m[1]+m[0])/2,le=(R[1]+R[0])/2,ue=this.getBarcodeFormat(),he=[new Te(J,a),new Te(le,a)],ge=new Q($,null,0,he,ue,new Date().getTime()),Oe=0;try{let ke=Es.decodeRow(a,u,R[1]);ge.putMetadata(de.UPC_EAN_EXTENSION,ke.getText()),ge.putAllMetadata(ke.getResultMetadata()),ge.addResultPoints(ke.getResultPoints()),Oe=ke.getText().length}catch{}let Pe=f==null?null:f.get(j.ALLOWED_EAN_EXTENSIONS);if(Pe!=null){let ke=!1;for(let Mt in Pe)if(Oe.toString()===Mt){ke=!0;break}if(!ke)throw new H}return ge}decodeEnd(a,u){return gt.findGuardPattern(a,u,!1,gt.START_END_PATTERN,new Int32Array(gt.START_END_PATTERN.length).fill(0))}static checkChecksum(a){return gt.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let u=a.length;if(u===0)return!1;let f=parseInt(a.charAt(u-1),10);return gt.getStandardUPCEANChecksum(a.substring(0,u-1))===f}static getStandardUPCEANChecksum(a){let u=a.length,f=0;for(let m=u-1;m>=0;m-=2){let x=a.charAt(m).charCodeAt(0)-48;if(x<0||x>9)throw new _;f+=x}f*=3;for(let m=u-2;m>=0;m-=2){let x=a.charAt(m).charCodeAt(0)-48;if(x<0||x>9)throw new _;f+=x}return(1e3-f)%10}}class Ut extends gt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,u,f){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let x=a.getSize(),v=u[1],b=0;for(let R=0;R<6&&v<x;R++){let O=gt.decodeDigit(a,m,v,gt.L_AND_G_PATTERNS);f+=String.fromCharCode(48+O%10);for(let F of m)v+=F;O>=10&&(b|=1<<5-R)}f=Ut.determineFirstDigit(f,b),v=gt.findGuardPattern(a,v,!0,gt.MIDDLE_PATTERN,new Int32Array(gt.MIDDLE_PATTERN.length).fill(0))[1];for(let R=0;R<6&&v<x;R++){let O=gt.decodeDigit(a,m,v,gt.L_PATTERNS);f+=String.fromCharCode(48+O);for(let F of m)v+=F}return{rowOffset:v,resultString:f}}getBarcodeFormat(){return ne.EAN_13}static determineFirstDigit(a,u){for(let f=0;f<10;f++)if(u===this.FIRST_DIGIT_ENCODINGS[f])return a=String.fromCharCode(48+f)+a,a;throw new H}}Ut.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class cn extends gt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,u,f){const m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let x=a.getSize(),v=u[1];for(let T=0;T<4&&v<x;T++){let R=gt.decodeDigit(a,m,v,gt.L_PATTERNS);f+=String.fromCharCode(48+R);for(let O of m)v+=O}v=gt.findGuardPattern(a,v,!0,gt.MIDDLE_PATTERN,new Int32Array(gt.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<4&&v<x;T++){let R=gt.decodeDigit(a,m,v,gt.L_PATTERNS);f+=String.fromCharCode(48+R);for(let O of m)v+=O}return{rowOffset:v,resultString:f}}getBarcodeFormat(){return ne.EAN_8}}class Vi extends gt{constructor(){super(...arguments),this.ean13Reader=new Ut}getBarcodeFormat(){return ne.UPC_A}decode(a,u){return this.maybeReturnResult(this.ean13Reader.decode(a))}decodeRow(a,u,f){return this.maybeReturnResult(this.ean13Reader.decodeRow(a,u,f))}decodeMiddle(a,u,f){return this.ean13Reader.decodeMiddle(a,u,f)}maybeReturnResult(a){let u=a.getText();if(u.charAt(0)==="0"){let f=new Q(u.substring(1),null,null,a.getResultPoints(),ne.UPC_A);return a.getResultMetadata()!=null&&f.putAllMetadata(a.getResultMetadata()),f}else throw new H}reset(){this.ean13Reader.reset()}}class Qe extends gt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(a,u,f){const m=this.decodeMiddleCounters.map(R=>R);m[0]=0,m[1]=0,m[2]=0,m[3]=0;const x=a.getSize();let v=u[1],b=0;for(let R=0;R<6&&v<x;R++){const O=Qe.decodeDigit(a,m,v,Qe.L_AND_G_PATTERNS);f+=String.fromCharCode(48+O%10);for(let F of m)v+=F;O>=10&&(b|=1<<5-R)}let T=Qe.determineNumSysAndCheckDigit(f,b);return{rowOffset:v,resultString:T}}decodeEnd(a,u){return Qe.findGuardPatternWithoutCounters(a,u,!0,Qe.MIDDLE_END_PATTERN)}checkChecksum(a){return gt.checkChecksum(Qe.convertUPCEtoUPCA(a))}static determineNumSysAndCheckDigit(a,u){for(let f=0;f<=1;f++)for(let m=0;m<10;m++)if(u===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[f][m]){let x=String.fromCharCode(48+f),v=String.fromCharCode(48+m);return x+a+v}throw H.getNotFoundInstance()}getBarcodeFormat(){return ne.UPC_E}static convertUPCEtoUPCA(a){const u=a.slice(1,7).split("").map(x=>x.charCodeAt(0)),f=new re;f.append(a.charAt(0));let m=u[5];switch(m){case 0:case 1:case 2:f.appendChars(u,0,2),f.append(m),f.append("0000"),f.appendChars(u,2,3);break;case 3:f.appendChars(u,0,3),f.append("00000"),f.appendChars(u,3,2);break;case 4:f.appendChars(u,0,4),f.append("00000"),f.append(u[4]);break;default:f.appendChars(u,0,5),f.append("0000"),f.append(m);break}return a.length>=8&&f.append(a.charAt(7)),f.toString()}}Qe.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Qe.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class It extends Ot{constructor(a){super();let u=a==null?null:a.get(j.POSSIBLE_FORMATS),f=[];r(u)?(f.push(new Ut),f.push(new Vi),f.push(new cn),f.push(new Qe)):(u.indexOf(ne.EAN_13)>-1&&f.push(new Ut),u.indexOf(ne.UPC_A)>-1&&f.push(new Vi),u.indexOf(ne.EAN_8)>-1&&f.push(new cn),u.indexOf(ne.UPC_E)>-1&&f.push(new Qe)),this.readers=f}decodeRow(a,u,f){for(let m of this.readers)try{const x=m.decodeRow(a,u,f),v=x.getBarcodeFormat()===ne.EAN_13&&x.getText().charAt(0)==="0",b=f==null?null:f.get(j.POSSIBLE_FORMATS),T=b==null||b.includes(ne.UPC_A);if(v&&T){const R=x.getRawBytes(),O=new Q(x.getText().substring(1),R,R?R.length:null,x.getResultPoints(),ne.UPC_A);return O.putAllMetadata(x.getResultMetadata()),O}return x}catch{}throw new H}reset(){for(let a of this.readers)a.reset()}}class ft extends Ot{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(a,u){for(let f=0;f<u.length;f++)if(Ot.patternMatchVariance(a,u[f],ft.MAX_INDIVIDUAL_VARIANCE)<ft.MAX_AVG_VARIANCE)return f;throw new H}static count(a){return $e.sum(new Int32Array(a))}static increment(a,u){let f=0,m=u[0];for(let x=1;x<a.length;x++)u[x]>m&&(m=u[x],f=x);a[f]++}static decrement(a,u){let f=0,m=u[0];for(let x=1;x<a.length;x++)u[x]<m&&(m=u[x],f=x);a[f]--}static isFinderPattern(a){let u=a[0]+a[1],f=u+a[2]+a[3],m=u/f;if(m>=ft.MIN_FINDER_PATTERN_RATIO&&m<=ft.MAX_FINDER_PATTERN_RATIO){let x=Number.MAX_SAFE_INTEGER,v=Number.MIN_SAFE_INTEGER;for(let b of a)b>v&&(v=b),b<x&&(x=b);return v<10*x}return!1}}ft.MAX_AVG_VARIANCE=.2,ft.MAX_INDIVIDUAL_VARIANCE=.45,ft.MIN_FINDER_PATTERN_RATIO=9.5/12,ft.MAX_FINDER_PATTERN_RATIO=12.5/14;class Rn{constructor(a,u){this.value=a,this.checksumPortion=u}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(a){if(!(a instanceof Rn))return!1;const u=a;return this.value===u.value&&this.checksumPortion===u.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Pt{constructor(a,u,f,m,x){this.value=a,this.startEnd=u,this.value=a,this.startEnd=u,this.resultPoints=new Array,this.resultPoints.push(new Te(f,x)),this.resultPoints.push(new Te(m,x))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(a){if(!(a instanceof Pt))return!1;const u=a;return this.value===u.value}hashCode(){return this.value}}class un{constructor(){}static getRSSvalue(a,u,f){let m=0;for(let T of a)m+=T;let x=0,v=0,b=a.length;for(let T=0;T<b-1;T++){let R;for(R=1,v|=1<<T;R<a[T];R++,v&=~(1<<T)){let O=un.combins(m-R-1,b-T-2);if(f&&v===0&&m-R-(b-T-1)>=b-T-1&&(O-=un.combins(m-R-(b-T),b-T-2)),b-T-1>1){let F=0;for(let $=m-R-(b-T-2);$>u;$--)F+=un.combins(m-R-$-1,b-T-3);O-=F*(b-1-T)}else m-R>u&&O--;x+=O}m-=R}return x}static combins(a,u){let f,m;a-u>u?(m=u,f=a-u):(m=a-u,f=u);let x=1,v=1;for(let b=a;b>f;b--)x*=b,v<=m&&(x/=v,v++);for(;v<=m;)x/=v,v++;return x}}class Zr{static buildBitArray(a){let u=a.length*2-1;a[a.length-1].getRightChar()==null&&(u-=1);let f=12*u,m=new M(f),x=0,b=a[0].getRightChar().getValue();for(let T=11;T>=0;--T)b&1<<T&&m.set(x),x++;for(let T=1;T<a.length;++T){let R=a[T],O=R.getLeftChar().getValue();for(let F=11;F>=0;--F)O&1<<F&&m.set(x),x++;if(R.getRightChar()!=null){let F=R.getRightChar().getValue();for(let $=11;$>=0;--$)F&1<<$&&m.set(x),x++}}return m}}class dn{constructor(a,u){u?this.decodedInformation=null:(this.finished=a,this.decodedInformation=u)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class jr{constructor(a){this.newPosition=a}getNewPosition(){return this.newPosition}}class dr extends jr{constructor(a,u){super(a),this.value=u}getValue(){return this.value}isFNC1(){return this.value===dr.FNC1}}dr.FNC1="$";class ui extends jr{constructor(a,u,f){super(a),f?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=u}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class vr extends jr{constructor(a,u,f){if(super(a),u<0||u>10||f<0||f>10)throw new _;this.firstDigit=u,this.secondDigit=f}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===vr.FNC1}isSecondDigitFNC1(){return this.secondDigit===vr.FNC1}isAnyFNC1(){return this.firstDigit===vr.FNC1||this.secondDigit===vr.FNC1}}vr.FNC1=10;class Ve{constructor(){}static parseFieldsInGeneralPurpose(a){if(!a)return null;if(a.length<2)throw new H;let u=a.substring(0,2);for(let x of Ve.TWO_DIGIT_DATA_LENGTH)if(x[0]===u)return x[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(2,x[2],a):Ve.processFixedAI(2,x[1],a);if(a.length<3)throw new H;let f=a.substring(0,3);for(let x of Ve.THREE_DIGIT_DATA_LENGTH)if(x[0]===f)return x[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(3,x[2],a):Ve.processFixedAI(3,x[1],a);for(let x of Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(x[0]===f)return x[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,x[2],a):Ve.processFixedAI(4,x[1],a);if(a.length<4)throw new H;let m=a.substring(0,4);for(let x of Ve.FOUR_DIGIT_DATA_LENGTH)if(x[0]===m)return x[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,x[2],a):Ve.processFixedAI(4,x[1],a);throw new H}static processFixedAI(a,u,f){if(f.length<a)throw new H;let m=f.substring(0,a);if(f.length<a+u)throw new H;let x=f.substring(a,a+u),v=f.substring(a+u),b="("+m+")"+x,T=Ve.parseFieldsInGeneralPurpose(v);return T==null?b:b+T}static processVariableAI(a,u,f){let m=f.substring(0,a),x;f.length<a+u?x=f.length:x=a+u;let v=f.substring(a,x),b=f.substring(x),T="("+m+")"+v,R=Ve.parseFieldsInGeneralPurpose(b);return R==null?T:T+R}}Ve.VARIABLE_LENGTH=[],Ve.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ve.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ve.VARIABLE_LENGTH,20],["22",Ve.VARIABLE_LENGTH,29],["30",Ve.VARIABLE_LENGTH,8],["37",Ve.VARIABLE_LENGTH,8],["90",Ve.VARIABLE_LENGTH,30],["91",Ve.VARIABLE_LENGTH,30],["92",Ve.VARIABLE_LENGTH,30],["93",Ve.VARIABLE_LENGTH,30],["94",Ve.VARIABLE_LENGTH,30],["95",Ve.VARIABLE_LENGTH,30],["96",Ve.VARIABLE_LENGTH,30],["97",Ve.VARIABLE_LENGTH,3],["98",Ve.VARIABLE_LENGTH,30],["99",Ve.VARIABLE_LENGTH,30]],Ve.THREE_DIGIT_DATA_LENGTH=[["240",Ve.VARIABLE_LENGTH,30],["241",Ve.VARIABLE_LENGTH,30],["242",Ve.VARIABLE_LENGTH,6],["250",Ve.VARIABLE_LENGTH,30],["251",Ve.VARIABLE_LENGTH,30],["253",Ve.VARIABLE_LENGTH,17],["254",Ve.VARIABLE_LENGTH,20],["400",Ve.VARIABLE_LENGTH,30],["401",Ve.VARIABLE_LENGTH,30],["402",17],["403",Ve.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ve.VARIABLE_LENGTH,20],["421",Ve.VARIABLE_LENGTH,15],["422",3],["423",Ve.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ve.VARIABLE_LENGTH,15],["391",Ve.VARIABLE_LENGTH,18],["392",Ve.VARIABLE_LENGTH,15],["393",Ve.VARIABLE_LENGTH,18],["703",Ve.VARIABLE_LENGTH,30]],Ve.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ve.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ve.VARIABLE_LENGTH,20],["8003",Ve.VARIABLE_LENGTH,30],["8004",Ve.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ve.VARIABLE_LENGTH,30],["8008",Ve.VARIABLE_LENGTH,12],["8018",18],["8020",Ve.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ve.VARIABLE_LENGTH,70],["8200",Ve.VARIABLE_LENGTH,70]];class di{constructor(a){this.buffer=new re,this.information=a}decodeAllCodes(a,u){let f=u,m=null;do{let x=this.decodeGeneralPurposeField(f,m),v=Ve.parseFieldsInGeneralPurpose(x.getNewString());if(v!=null&&a.append(v),x.isRemaining()?m=""+x.getRemainingValue():m=null,f===x.getNewPosition())break;f=x.getNewPosition()}while(!0);return a.toString()}isStillNumeric(a){if(a+7>this.information.getSize())return a+4<=this.information.getSize();for(let u=a;u<a+3;++u)if(this.information.get(u))return!0;return this.information.get(a+3)}decodeNumeric(a){if(a+7>this.information.getSize()){let x=this.extractNumericValueFromBitArray(a,4);return x===0?new vr(this.information.getSize(),vr.FNC1,vr.FNC1):new vr(this.information.getSize(),x-1,vr.FNC1)}let u=this.extractNumericValueFromBitArray(a,7),f=(u-8)/11,m=(u-8)%11;return new vr(a+7,f,m)}extractNumericValueFromBitArray(a,u){return di.extractNumericValueFromBitArray(this.information,a,u)}static extractNumericValueFromBitArray(a,u,f){let m=0;for(let x=0;x<f;++x)a.get(u+x)&&(m|=1<<f-x-1);return m}decodeGeneralPurposeField(a,u){this.buffer.setLengthToZero(),u!=null&&this.buffer.append(u),this.current.setPosition(a);let f=this.parseBlocks();return f!=null&&f.isRemaining()?new ui(this.current.getPosition(),this.buffer.toString(),f.getRemainingValue()):new ui(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let a,u;do{let f=this.current.getPosition();if(this.current.isAlpha()?(u=this.parseAlphaBlock(),a=u.isFinished()):this.current.isIsoIec646()?(u=this.parseIsoIec646Block(),a=u.isFinished()):(u=this.parseNumericBlock(),a=u.isFinished()),!(f!==this.current.getPosition())&&!a)break}while(!a);return u.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let a=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFirstDigitFNC1()){let u;return a.isSecondDigitFNC1()?u=new ui(this.current.getPosition(),this.buffer.toString()):u=new ui(this.current.getPosition(),this.buffer.toString(),a.getSecondDigit()),new dn(!0,u)}if(this.buffer.append(a.getFirstDigit()),a.isSecondDigitFNC1()){let u=new ui(this.current.getPosition(),this.buffer.toString());return new dn(!0,u)}this.buffer.append(a.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new dn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let a=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1()){let u=new ui(this.current.getPosition(),this.buffer.toString());return new dn(!0,u)}this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new dn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let a=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1()){let u=new ui(this.current.getPosition(),this.buffer.toString());return new dn(!0,u)}this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new dn(!1)}isStillIsoIec646(a){if(a+5>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(a,5);if(u>=5&&u<16)return!0;if(a+7>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(a,7);if(f>=64&&f<116)return!0;if(a+8>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(a,8);return m>=232&&m<253}decodeIsoIec646(a){let u=this.extractNumericValueFromBitArray(a,5);if(u===15)return new dr(a+5,dr.FNC1);if(u>=5&&u<15)return new dr(a+5,"0"+(u-5));let f=this.extractNumericValueFromBitArray(a,7);if(f>=64&&f<90)return new dr(a+7,""+(f+1));if(f>=90&&f<116)return new dr(a+7,""+(f+7));let m=this.extractNumericValueFromBitArray(a,8),x;switch(m){case 232:x="!";break;case 233:x='"';break;case 234:x="%";break;case 235:x="&";break;case 236:x="'";break;case 237:x="(";break;case 238:x=")";break;case 239:x="*";break;case 240:x="+";break;case 241:x=",";break;case 242:x="-";break;case 243:x=".";break;case 244:x="/";break;case 245:x=":";break;case 246:x=";";break;case 247:x="<";break;case 248:x="=";break;case 249:x=">";break;case 250:x="?";break;case 251:x="_";break;case 252:x=" ";break;default:throw new _}return new dr(a+8,x)}isStillAlpha(a){if(a+5>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(a,5);if(u>=5&&u<16)return!0;if(a+6>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(a,6);return f>=16&&f<63}decodeAlphanumeric(a){let u=this.extractNumericValueFromBitArray(a,5);if(u===15)return new dr(a+5,dr.FNC1);if(u>=5&&u<15)return new dr(a+5,"0"+(u-5));let f=this.extractNumericValueFromBitArray(a,6);if(f>=32&&f<58)return new dr(a+6,""+(f+33));let m;switch(f){case 58:m="*";break;case 59:m=",";break;case 60:m="-";break;case 61:m=".";break;case 62:m="/";break;default:throw new nt("Decoding invalid alphanumeric value: "+f)}return new dr(a+6,m)}isAlphaTo646ToAlphaLatch(a){if(a+1>this.information.getSize())return!1;for(let u=0;u<5&&u+a<this.information.getSize();++u)if(u===2){if(!this.information.get(a+2))return!1}else if(this.information.get(a+u))return!1;return!0}isAlphaOr646ToNumericLatch(a){if(a+3>this.information.getSize())return!1;for(let u=a;u<a+3;++u)if(this.information.get(u))return!1;return!0}isNumericToAlphaNumericLatch(a){if(a+1>this.information.getSize())return!1;for(let u=0;u<4&&u+a<this.information.getSize();++u)if(this.information.get(a+u))return!1;return!0}}class bn{constructor(a){this.information=a,this.generalDecoder=new di(a)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Xn extends bn{constructor(a){super(a)}encodeCompressedGtin(a,u){a.append("(01)");let f=a.length();a.append("9"),this.encodeCompressedGtinWithoutAI(a,u,f)}encodeCompressedGtinWithoutAI(a,u,f){for(let m=0;m<4;++m){let x=this.getGeneralDecoder().extractNumericValueFromBitArray(u+10*m,10);x/100===0&&a.append("0"),x/10===0&&a.append("0"),a.append(x)}Xn.appendCheckDigit(a,f)}static appendCheckDigit(a,u){let f=0;for(let m=0;m<13;m++){let x=a.charAt(m+u).charCodeAt(0)-48;f+=m&1?x:3*x}f=10-f%10,f===10&&(f=0),a.append(f)}}Xn.GTIN_SIZE=40;class sn extends Xn{constructor(a){super(a)}parseInformation(){let a=new re;a.append("(01)");let u=a.length(),f=this.getGeneralDecoder().extractNumericValueFromBitArray(sn.HEADER_SIZE,4);return a.append(f),this.encodeCompressedGtinWithoutAI(a,sn.HEADER_SIZE+4,u),this.getGeneralDecoder().decodeAllCodes(a,sn.HEADER_SIZE+44)}}sn.HEADER_SIZE=4;class So extends bn{constructor(a){super(a)}parseInformation(){let a=new re;return this.getGeneralDecoder().decodeAllCodes(a,So.HEADER_SIZE)}}So.HEADER_SIZE=5;class Qt extends Xn{constructor(a){super(a)}encodeCompressedWeight(a,u,f){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(u,f);this.addWeightCode(a,m);let x=this.checkWeight(m),v=1e5;for(let b=0;b<5;++b)x/v===0&&a.append("0"),v/=10;a.append(x)}}class fr extends Qt{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()!=fr.HEADER_SIZE+Qt.GTIN_SIZE+fr.WEIGHT_SIZE)throw new H;let a=new re;return this.encodeCompressedGtin(a,fr.HEADER_SIZE),this.encodeCompressedWeight(a,fr.HEADER_SIZE+Qt.GTIN_SIZE,fr.WEIGHT_SIZE),a.toString()}}fr.HEADER_SIZE=5,fr.WEIGHT_SIZE=15;class Sl extends fr{constructor(a){super(a)}addWeightCode(a,u){a.append("(3103)")}checkWeight(a){return a}}class Hi extends fr{constructor(a){super(a)}addWeightCode(a,u){u<1e4?a.append("(3202)"):a.append("(3203)")}checkWeight(a){return a<1e4?a:a-1e4}}class Qr extends Xn{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<Qr.HEADER_SIZE+Xn.GTIN_SIZE)throw new H;let a=new re;this.encodeCompressedGtin(a,Qr.HEADER_SIZE);let u=this.getGeneralDecoder().extractNumericValueFromBitArray(Qr.HEADER_SIZE+Xn.GTIN_SIZE,Qr.LAST_DIGIT_SIZE);a.append("(392"),a.append(u),a.append(")");let f=this.getGeneralDecoder().decodeGeneralPurposeField(Qr.HEADER_SIZE+Xn.GTIN_SIZE+Qr.LAST_DIGIT_SIZE,null);return a.append(f.getNewString()),a.toString()}}Qr.HEADER_SIZE=8,Qr.LAST_DIGIT_SIZE=2;class Vn extends Xn{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<Vn.HEADER_SIZE+Xn.GTIN_SIZE)throw new H;let a=new re;this.encodeCompressedGtin(a,Vn.HEADER_SIZE);let u=this.getGeneralDecoder().extractNumericValueFromBitArray(Vn.HEADER_SIZE+Xn.GTIN_SIZE,Vn.LAST_DIGIT_SIZE);a.append("(393"),a.append(u),a.append(")");let f=this.getGeneralDecoder().extractNumericValueFromBitArray(Vn.HEADER_SIZE+Xn.GTIN_SIZE+Vn.LAST_DIGIT_SIZE,Vn.FIRST_THREE_DIGITS_SIZE);f/100==0&&a.append("0"),f/10==0&&a.append("0"),a.append(f);let m=this.getGeneralDecoder().decodeGeneralPurposeField(Vn.HEADER_SIZE+Xn.GTIN_SIZE+Vn.LAST_DIGIT_SIZE+Vn.FIRST_THREE_DIGITS_SIZE,null);return a.append(m.getNewString()),a.toString()}}Vn.HEADER_SIZE=8,Vn.LAST_DIGIT_SIZE=2,Vn.FIRST_THREE_DIGITS_SIZE=10;class $t extends Qt{constructor(a,u,f){super(a),this.dateCode=f,this.firstAIdigits=u}parseInformation(){if(this.getInformation().getSize()!=$t.HEADER_SIZE+$t.GTIN_SIZE+$t.WEIGHT_SIZE+$t.DATE_SIZE)throw new H;let a=new re;return this.encodeCompressedGtin(a,$t.HEADER_SIZE),this.encodeCompressedWeight(a,$t.HEADER_SIZE+$t.GTIN_SIZE,$t.WEIGHT_SIZE),this.encodeCompressedDate(a,$t.HEADER_SIZE+$t.GTIN_SIZE+$t.WEIGHT_SIZE),a.toString()}encodeCompressedDate(a,u){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(u,$t.DATE_SIZE);if(f==38400)return;a.append("("),a.append(this.dateCode),a.append(")");let m=f%32;f/=32;let x=f%12+1;f/=12;let v=f;v/10==0&&a.append("0"),a.append(v),x/10==0&&a.append("0"),a.append(x),m/10==0&&a.append("0"),a.append(m)}addWeightCode(a,u){a.append("("),a.append(this.firstAIdigits),a.append(u/1e5),a.append(")")}checkWeight(a){return a%1e5}}$t.HEADER_SIZE=8,$t.WEIGHT_SIZE=20,$t.DATE_SIZE=16;function El(B){try{if(B.get(1))return new sn(B);if(!B.get(2))return new So(B);switch(di.extractNumericValueFromBitArray(B,1,4)){case 4:return new Sl(B);case 5:return new Hi(B)}switch(di.extractNumericValueFromBitArray(B,1,5)){case 12:return new Qr(B);case 13:return new Vn(B)}switch(di.extractNumericValueFromBitArray(B,1,7)){case 56:return new $t(B,"310","11");case 57:return new $t(B,"320","11");case 58:return new $t(B,"310","13");case 59:return new $t(B,"320","13");case 60:return new $t(B,"310","15");case 61:return new $t(B,"320","15");case 62:return new $t(B,"310","17");case 63:return new $t(B,"320","17")}}catch(a){throw console.log(a),new nt("unknown decoder: "+B)}}class br{constructor(a,u,f,m){this.leftchar=a,this.rightchar=u,this.finderpattern=f,this.maybeLast=m}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(a,u){return a instanceof br?br.equalsOrNull(a.leftchar,u.leftchar)&&br.equalsOrNull(a.rightchar,u.rightchar)&&br.equalsOrNull(a.finderpattern,u.finderpattern):!1}static equalsOrNull(a,u){return a===null?u===null:br.equals(a,u)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ui{constructor(a,u,f){this.pairs=a,this.rowNumber=u,this.wasReversed=f}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(a){return this.checkEqualitity(this,a)}toString(){return"{ "+this.pairs+" }"}equals(a,u){return a instanceof Ui?this.checkEqualitity(a,u)&&a.wasReversed===u.wasReversed:!1}checkEqualitity(a,u){if(!a||!u)return;let f;return a.forEach((m,x)=>{u.forEach(v=>{m.getLeftChar().getValue()===v.getLeftChar().getValue()&&m.getRightChar().getValue()===v.getRightChar().getValue()&&m.getFinderPatter().getValue()===v.getFinderPatter().getValue()&&(f=!0)})}),f}}class we extends ft{constructor(a){super(...arguments),this.pairs=new Array(we.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=a===!0}decodeRow(a,u,f){this.pairs.length=0,this.startFromEven=!1;try{return we.constructResult(this.decodeRow2pairs(a,u))}catch(m){this.verbose&&console.log(m)}return this.pairs.length=0,this.startFromEven=!0,we.constructResult(this.decodeRow2pairs(a,u))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(a,u){let f=!1;for(;!f;)try{this.pairs.push(this.retrieveNextPair(u,this.pairs,a))}catch(x){if(x instanceof H){if(!this.pairs.length)throw new H;f=!0}}if(this.checkChecksum())return this.pairs;let m;if(this.rows.length?m=!0:m=!1,this.storeRow(a,!1),m){let x=this.checkRowsBoolean(!1);if(x!=null||(x=this.checkRowsBoolean(!0),x!=null))return x}throw new H}checkRowsBoolean(a){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,a&&(this.rows=this.rows.reverse());let u=null;try{u=this.checkRows(new Array,0)}catch(f){this.verbose&&console.log(f)}return a&&(this.rows=this.rows.reverse()),u}checkRows(a,u){for(let f=u;f<this.rows.length;f++){let m=this.rows[f];this.pairs.length=0;for(let v of a)this.pairs.push(v.getPairs());if(this.pairs.push(m.getPairs()),!we.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let x=new Array(a);x.push(m);try{return this.checkRows(x,f+1)}catch(v){this.verbose&&console.log(v)}}throw new H}static isValidSequence(a){for(let u of we.FINDER_PATTERN_SEQUENCES){if(a.length>u.length)continue;let f=!0;for(let m=0;m<a.length;m++)if(a[m].getFinderPattern().getValue()!=u[m]){f=!1;break}if(f)return!0}return!1}storeRow(a,u){let f=0,m=!1,x=!1;for(;f<this.rows.length;){let v=this.rows[f];if(v.getRowNumber()>a){x=v.isEquivalent(this.pairs);break}m=v.isEquivalent(this.pairs),f++}x||m||we.isPartialRow(this.pairs,this.rows)||(this.rows.push(f,new Ui(this.pairs,a,u)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(a,u){for(let f of u)if(f.getPairs().length!==a.length){for(let m of f.getPairs())for(let x of a)if(br.equals(m,x))break}}static isPartialRow(a,u){for(let f of u){let m=!0;for(let x of a){let v=!1;for(let b of f.getPairs())if(x.equals(b)){v=!0;break}if(!v){m=!1;break}}if(m)return!0}return!1}getRows(){return this.rows}static constructResult(a){let u=Zr.buildBitArray(a),m=El(u).parseInformation(),x=a[0].getFinderPattern().getResultPoints(),v=a[a.length-1].getFinderPattern().getResultPoints(),b=[x[0],x[1],v[0],v[1]];return new Q(m,null,null,b,ne.RSS_EXPANDED,null)}checkChecksum(){let a=this.pairs.get(0),u=a.getLeftChar(),f=a.getRightChar();if(f==null)return!1;let m=f.getChecksumPortion(),x=2;for(let b=1;b<this.pairs.size();++b){let T=this.pairs.get(b);m+=T.getLeftChar().getChecksumPortion(),x++;let R=T.getRightChar();R!=null&&(m+=R.getChecksumPortion(),x++)}return m%=211,211*(x-4)+m==u.getValue()}static getNextSecondBar(a,u){let f;return a.get(u)?(f=a.getNextUnset(u),f=a.getNextSet(f)):(f=a.getNextSet(u),f=a.getNextUnset(f)),f}retrieveNextPair(a,u,f){let m=u.length%2==0;this.startFromEven&&(m=!m);let x,v=!0,b=-1;do this.findNextPair(a,u,b),x=this.parseFoundFinderPattern(a,f,m),x==null?b=we.getNextSecondBar(a,this.startEnd[0]):v=!1;while(v);let T=this.decodeDataCharacter(a,x,m,!0);if(!this.isEmptyPair(u)&&u[u.length-1].mustBeLast())throw new H;let R;try{R=this.decodeDataCharacter(a,x,m,!1)}catch(O){R=null,this.verbose&&console.log(O)}return new br(T,R,x,!0)}isEmptyPair(a){return a.length===0}findNextPair(a,u,f){let m=this.getDecodeFinderCounters();m[0]=0,m[1]=0,m[2]=0,m[3]=0;let x=a.getSize(),v;f>=0?v=f:this.isEmptyPair(u)?v=0:v=u[u.length-1].getFinderPattern().getStartEnd()[1];let b=u.length%2!=0;this.startFromEven&&(b=!b);let T=!1;for(;v<x&&(T=!a.get(v),!!T);)v++;let R=0,O=v;for(let F=v;F<x;F++)if(a.get(F)!=T)m[R]++;else{if(R==3){if(b&&we.reverseCounters(m),we.isFinderPattern(m)){this.startEnd[0]=O,this.startEnd[1]=F;return}b&&we.reverseCounters(m),O+=m[0]+m[1],m[0]=m[2],m[1]=m[3],m[2]=0,m[3]=0,R--}else R++;m[R]=1,T=!T}throw new H}static reverseCounters(a){let u=a.length;for(let f=0;f<u/2;++f){let m=a[f];a[f]=a[u-f-1],a[u-f-1]=m}}parseFoundFinderPattern(a,u,f){let m,x,v;if(f){let R=this.startEnd[0]-1;for(;R>=0&&!a.get(R);)R--;R++,m=this.startEnd[0]-R,x=R,v=this.startEnd[1]}else x=this.startEnd[0],v=a.getNextUnset(this.startEnd[1]+1),m=v-this.startEnd[1];let b=this.getDecodeFinderCounters();C.arraycopy(b,0,b,1,b.length-1),b[0]=m;let T;try{T=this.parseFinderValue(b,we.FINDER_PATTERNS)}catch{return null}return new Pt(T,[x,v],x,v,u)}decodeDataCharacter(a,u,f,m){let x=this.getDataCharacterCounters();for(let nn=0;nn<x.length;nn++)x[nn]=0;if(m)we.recordPatternInReverse(a,u.getStartEnd()[0],x);else{we.recordPattern(a,u.getStartEnd()[1],x);for(let nn=0,Sr=x.length-1;nn<Sr;nn++,Sr--){let Ns=x[nn];x[nn]=x[Sr],x[Sr]=Ns}}let v=17,b=$e.sum(new Int32Array(x))/v,T=(u.getStartEnd()[1]-u.getStartEnd()[0])/15;if(Math.abs(b-T)/T>.3)throw new H;let R=this.getOddCounts(),O=this.getEvenCounts(),F=this.getOddRoundingErrors(),$=this.getEvenRoundingErrors();for(let nn=0;nn<x.length;nn++){let Sr=1*x[nn]/b,Ns=Sr+.5;if(Ns<1){if(Sr<.3)throw new H;Ns=1}else if(Ns>8){if(Sr>8.7)throw new H;Ns=8}let Qc=nn/2;nn&1?(O[Qc]=Ns,$[Qc]=Sr-Ns):(R[Qc]=Ns,F[Qc]=Sr-Ns)}this.adjustOddEvenCounts(v);let J=4*u.getValue()+(f?0:2)+(m?0:1)-1,le=0,ue=0;for(let nn=R.length-1;nn>=0;nn--){if(we.isNotA1left(u,f,m)){let Sr=we.WEIGHTS[J][2*nn];ue+=R[nn]*Sr}le+=R[nn]}let he=0;for(let nn=O.length-1;nn>=0;nn--)if(we.isNotA1left(u,f,m)){let Sr=we.WEIGHTS[J][2*nn+1];he+=O[nn]*Sr}let ge=ue+he;if(le&1||le>13||le<4)throw new H;let Oe=(13-le)/2,Pe=we.SYMBOL_WIDEST[Oe],ke=9-Pe,Mt=un.getRSSvalue(R,Pe,!0),yt=un.getRSSvalue(O,ke,!1),hs=we.EVEN_TOTAL_SUBSET[Oe],mi=we.GSUM[Oe],ps=Mt*hs+yt+mi;return new Rn(ps,ge)}static isNotA1left(a,u,f){return!(a.getValue()==0&&u&&f)}adjustOddEvenCounts(a){let u=$e.sum(new Int32Array(this.getOddCounts())),f=$e.sum(new Int32Array(this.getEvenCounts())),m=!1,x=!1;u>13?x=!0:u<4&&(m=!0);let v=!1,b=!1;f>13?b=!0:f<4&&(v=!0);let T=u+f-a,R=(u&1)==1,O=(f&1)==0;if(T==1)if(R){if(O)throw new H;x=!0}else{if(!O)throw new H;b=!0}else if(T==-1)if(R){if(O)throw new H;m=!0}else{if(!O)throw new H;v=!0}else if(T==0){if(R){if(!O)throw new H;u<f?(m=!0,b=!0):(x=!0,v=!0)}else if(O)throw new H}else throw new H;if(m){if(x)throw new H;we.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(x&&we.decrement(this.getOddCounts(),this.getOddRoundingErrors()),v){if(b)throw new H;we.increment(this.getEvenCounts(),this.getOddRoundingErrors())}b&&we.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}we.SYMBOL_WIDEST=[7,5,4,3,1],we.EVEN_TOTAL_SUBSET=[4,20,52,104,204],we.GSUM=[0,348,1388,2948,3988],we.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],we.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],we.FINDER_PAT_A=0,we.FINDER_PAT_B=1,we.FINDER_PAT_C=2,we.FINDER_PAT_D=3,we.FINDER_PAT_E=4,we.FINDER_PAT_F=5,we.FINDER_PATTERN_SEQUENCES=[[we.FINDER_PAT_A,we.FINDER_PAT_A],[we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B],[we.FINDER_PAT_A,we.FINDER_PAT_C,we.FINDER_PAT_B,we.FINDER_PAT_D],[we.FINDER_PAT_A,we.FINDER_PAT_E,we.FINDER_PAT_B,we.FINDER_PAT_D,we.FINDER_PAT_C],[we.FINDER_PAT_A,we.FINDER_PAT_E,we.FINDER_PAT_B,we.FINDER_PAT_D,we.FINDER_PAT_D,we.FINDER_PAT_F],[we.FINDER_PAT_A,we.FINDER_PAT_E,we.FINDER_PAT_B,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_F,we.FINDER_PAT_F],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_D],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_E],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_F,we.FINDER_PAT_F],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_E,we.FINDER_PAT_F,we.FINDER_PAT_F]],we.MAX_PAIRS=11;class Nl extends Rn{constructor(a,u,f){super(a,u),this.count=0,this.finderPattern=f}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Jt extends ft{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(a,u,f){const m=this.decodePair(u,!1,a,f);Jt.addOrTally(this.possibleLeftPairs,m),u.reverse();let x=this.decodePair(u,!0,a,f);Jt.addOrTally(this.possibleRightPairs,x),u.reverse();for(let v of this.possibleLeftPairs)if(v.getCount()>1){for(let b of this.possibleRightPairs)if(b.getCount()>1&&Jt.checkChecksum(v,b))return Jt.constructResult(v,b)}throw new H}static addOrTally(a,u){if(u==null)return;let f=!1;for(let m of a)if(m.getValue()===u.getValue()){m.incrementCount(),f=!0;break}f||a.push(u)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(a,u){let f=4537077*a.getValue()+u.getValue(),m=new String(f).toString(),x=new re;for(let R=13-m.length;R>0;R--)x.append("0");x.append(m);let v=0;for(let R=0;R<13;R++){let O=x.charAt(R).charCodeAt(0)-48;v+=R&1?O:3*O}v=10-v%10,v===10&&(v=0),x.append(v.toString());let b=a.getFinderPattern().getResultPoints(),T=u.getFinderPattern().getResultPoints();return new Q(x.toString(),null,0,[b[0],b[1],T[0],T[1]],ne.RSS_14,new Date().getTime())}static checkChecksum(a,u){let f=(a.getChecksumPortion()+16*u.getChecksumPortion())%79,m=9*a.getFinderPattern().getValue()+u.getFinderPattern().getValue();return m>72&&m--,m>8&&m--,f===m}decodePair(a,u,f,m){try{let x=this.findFinderPattern(a,u),v=this.parseFoundFinderPattern(a,f,u,x),b=m==null?null:m.get(j.NEED_RESULT_POINT_CALLBACK);if(b!=null){let O=(x[0]+x[1])/2;u&&(O=a.getSize()-1-O),b.foundPossibleResultPoint(new Te(O,f))}let T=this.decodeDataCharacter(a,v,!0),R=this.decodeDataCharacter(a,v,!1);return new Nl(1597*T.getValue()+R.getValue(),T.getChecksumPortion()+4*R.getChecksumPortion(),v)}catch{return null}}decodeDataCharacter(a,u,f){let m=this.getDataCharacterCounters();for(let he=0;he<m.length;he++)m[he]=0;if(f)Ot.recordPatternInReverse(a,u.getStartEnd()[0],m);else{Ot.recordPattern(a,u.getStartEnd()[1]+1,m);for(let he=0,ge=m.length-1;he<ge;he++,ge--){let Oe=m[he];m[he]=m[ge],m[ge]=Oe}}let x=f?16:15,v=$e.sum(new Int32Array(m))/x,b=this.getOddCounts(),T=this.getEvenCounts(),R=this.getOddRoundingErrors(),O=this.getEvenRoundingErrors();for(let he=0;he<m.length;he++){let ge=m[he]/v,Oe=Math.floor(ge+.5);Oe<1?Oe=1:Oe>8&&(Oe=8);let Pe=Math.floor(he/2);he&1?(T[Pe]=Oe,O[Pe]=ge-Oe):(b[Pe]=Oe,R[Pe]=ge-Oe)}this.adjustOddEvenCounts(f,x);let F=0,$=0;for(let he=b.length-1;he>=0;he--)$*=9,$+=b[he],F+=b[he];let J=0,le=0;for(let he=T.length-1;he>=0;he--)J*=9,J+=T[he],le+=T[he];let ue=$+3*J;if(f){if(F&1||F>12||F<4)throw new H;let he=(12-F)/2,ge=Jt.OUTSIDE_ODD_WIDEST[he],Oe=9-ge,Pe=un.getRSSvalue(b,ge,!1),ke=un.getRSSvalue(T,Oe,!0),Mt=Jt.OUTSIDE_EVEN_TOTAL_SUBSET[he],yt=Jt.OUTSIDE_GSUM[he];return new Rn(Pe*Mt+ke+yt,ue)}else{if(le&1||le>10||le<4)throw new H;let he=(10-le)/2,ge=Jt.INSIDE_ODD_WIDEST[he],Oe=9-ge,Pe=un.getRSSvalue(b,ge,!0),ke=un.getRSSvalue(T,Oe,!1),Mt=Jt.INSIDE_ODD_TOTAL_SUBSET[he],yt=Jt.INSIDE_GSUM[he];return new Rn(ke*Mt+Pe+yt,ue)}}findFinderPattern(a,u){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let m=a.getSize(),x=!1,v=0;for(;v<m&&(x=!a.get(v),u!==x);)v++;let b=0,T=v;for(let R=v;R<m;R++)if(a.get(R)!==x)f[b]++;else{if(b===3){if(ft.isFinderPattern(f))return[T,R];T+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,b--}else b++;f[b]=1,x=!x}throw new H}parseFoundFinderPattern(a,u,f,m){let x=a.get(m[0]),v=m[0]-1;for(;v>=0&&x!==a.get(v);)v--;v++;const b=m[0]-v,T=this.getDecodeFinderCounters(),R=new Int32Array(T.length);C.arraycopy(T,0,R,1,T.length-1),R[0]=b;const O=this.parseFinderValue(R,Jt.FINDER_PATTERNS);let F=v,$=m[1];return f&&(F=a.getSize()-1-F,$=a.getSize()-1-$),new Pt(O,[v,m[1]],F,$,u)}adjustOddEvenCounts(a,u){let f=$e.sum(new Int32Array(this.getOddCounts())),m=$e.sum(new Int32Array(this.getEvenCounts())),x=!1,v=!1,b=!1,T=!1;a?(f>12?v=!0:f<4&&(x=!0),m>12?T=!0:m<4&&(b=!0)):(f>11?v=!0:f<5&&(x=!0),m>10?T=!0:m<4&&(b=!0));let R=f+m-u,O=(f&1)===(a?1:0),F=(m&1)===1;if(R===1)if(O){if(F)throw new H;v=!0}else{if(!F)throw new H;T=!0}else if(R===-1)if(O){if(F)throw new H;x=!0}else{if(!F)throw new H;b=!0}else if(R===0){if(O){if(!F)throw new H;f<m?(x=!0,T=!0):(v=!0,b=!0)}else if(F)throw new H}else throw new H;if(x){if(v)throw new H;ft.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(v&&ft.decrement(this.getOddCounts(),this.getOddRoundingErrors()),b){if(T)throw new H;ft.increment(this.getEvenCounts(),this.getOddRoundingErrors())}T&&ft.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Jt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Jt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Jt.OUTSIDE_GSUM=[0,161,961,2015,2715],Jt.INSIDE_GSUM=[0,336,1036,1516],Jt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Jt.INSIDE_ODD_WIDEST=[2,4,6,8],Jt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Lr extends Ot{constructor(a,u){super(),this.readers=[],this.verbose=u===!0;const f=a?a.get(j.POSSIBLE_FORMATS):null,m=a&&a.get(j.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;f?((f.includes(ne.EAN_13)||f.includes(ne.UPC_A)||f.includes(ne.EAN_8)||f.includes(ne.UPC_E))&&this.readers.push(new It(a)),f.includes(ne.CODE_39)&&this.readers.push(new _t(m)),f.includes(ne.CODE_128)&&this.readers.push(new Ie),f.includes(ne.ITF)&&this.readers.push(new ut),f.includes(ne.RSS_14)&&this.readers.push(new Jt),f.includes(ne.RSS_EXPANDED)&&this.readers.push(new we(this.verbose))):(this.readers.push(new It(a)),this.readers.push(new _t),this.readers.push(new It(a)),this.readers.push(new Ie),this.readers.push(new ut),this.readers.push(new Jt),this.readers.push(new we(this.verbose)))}decodeRow(a,u,f){for(let m=0;m<this.readers.length;m++)try{return this.readers[m].decodeRow(a,u,f)}catch{}throw new H}reset(){this.readers.forEach(a=>a.reset())}}class ia extends G{constructor(a=500,u){super(new Lr(u),a,u)}}class At{constructor(a,u,f){this.ecCodewords=a,this.ecBlocks=[u],f&&this.ecBlocks.push(f)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Rt{constructor(a,u){this.count=a,this.dataCodewords=u}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class xt{constructor(a,u,f,m,x,v){this.versionNumber=a,this.symbolSizeRows=u,this.symbolSizeColumns=f,this.dataRegionSizeRows=m,this.dataRegionSizeColumns=x,this.ecBlocks=v;let b=0;const T=v.getECCodewords(),R=v.getECBlocks();for(let O of R)b+=O.getCount()*(O.getDataCodewords()+T);this.totalCodewords=b}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(a,u){if(a&1||u&1)throw new _;for(let f of xt.VERSIONS)if(f.symbolSizeRows===a&&f.symbolSizeColumns===u)return f;throw new _}toString(){return""+this.versionNumber}static buildVersions(){return[new xt(1,10,10,8,8,new At(5,new Rt(1,3))),new xt(2,12,12,10,10,new At(7,new Rt(1,5))),new xt(3,14,14,12,12,new At(10,new Rt(1,8))),new xt(4,16,16,14,14,new At(12,new Rt(1,12))),new xt(5,18,18,16,16,new At(14,new Rt(1,18))),new xt(6,20,20,18,18,new At(18,new Rt(1,22))),new xt(7,22,22,20,20,new At(20,new Rt(1,30))),new xt(8,24,24,22,22,new At(24,new Rt(1,36))),new xt(9,26,26,24,24,new At(28,new Rt(1,44))),new xt(10,32,32,14,14,new At(36,new Rt(1,62))),new xt(11,36,36,16,16,new At(42,new Rt(1,86))),new xt(12,40,40,18,18,new At(48,new Rt(1,114))),new xt(13,44,44,20,20,new At(56,new Rt(1,144))),new xt(14,48,48,22,22,new At(68,new Rt(1,174))),new xt(15,52,52,24,24,new At(42,new Rt(2,102))),new xt(16,64,64,14,14,new At(56,new Rt(2,140))),new xt(17,72,72,16,16,new At(36,new Rt(4,92))),new xt(18,80,80,18,18,new At(48,new Rt(4,114))),new xt(19,88,88,20,20,new At(56,new Rt(4,144))),new xt(20,96,96,22,22,new At(68,new Rt(4,174))),new xt(21,104,104,24,24,new At(56,new Rt(6,136))),new xt(22,120,120,18,18,new At(68,new Rt(6,175))),new xt(23,132,132,20,20,new At(62,new Rt(8,163))),new xt(24,144,144,22,22,new At(62,new Rt(8,156),new Rt(2,155))),new xt(25,8,18,6,16,new At(7,new Rt(1,5))),new xt(26,8,32,6,14,new At(11,new Rt(1,10))),new xt(27,12,26,10,24,new At(14,new Rt(1,16))),new xt(28,12,36,10,16,new At(18,new Rt(1,22))),new xt(29,16,36,14,16,new At(24,new Rt(1,32))),new xt(30,16,48,14,22,new At(28,new Rt(1,49)))]}}xt.VERSIONS=xt.buildVersions();class $d{constructor(a){const u=a.getHeight();if(u<8||u>144||u&1)throw new _;this.version=$d.readVersion(a),this.mappingBitMatrix=this.extractDataRegion(a),this.readMappingMatrix=new z(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(a){const u=a.getHeight(),f=a.getWidth();return xt.getVersionForDimensions(u,f)}readCodewords(){const a=new Int8Array(this.version.getTotalCodewords());let u=0,f=4,m=0;const x=this.mappingBitMatrix.getHeight(),v=this.mappingBitMatrix.getWidth();let b=!1,T=!1,R=!1,O=!1;do if(f===x&&m===0&&!b)a[u++]=this.readCorner1(x,v)&255,f-=2,m+=2,b=!0;else if(f===x-2&&m===0&&v&3&&!T)a[u++]=this.readCorner2(x,v)&255,f-=2,m+=2,T=!0;else if(f===x+4&&m===2&&!(v&7)&&!R)a[u++]=this.readCorner3(x,v)&255,f-=2,m+=2,R=!0;else if(f===x-2&&m===0&&(v&7)===4&&!O)a[u++]=this.readCorner4(x,v)&255,f-=2,m+=2,O=!0;else{do f<x&&m>=0&&!this.readMappingMatrix.get(m,f)&&(a[u++]=this.readUtah(f,m,x,v)&255),f-=2,m+=2;while(f>=0&&m<v);f+=1,m+=3;do f>=0&&m<v&&!this.readMappingMatrix.get(m,f)&&(a[u++]=this.readUtah(f,m,x,v)&255),f+=2,m-=2;while(f<x&&m>=0);f+=3,m+=1}while(f<x||m<v);if(u!==this.version.getTotalCodewords())throw new _;return a}readModule(a,u,f,m){return a<0&&(a+=f,u+=4-(f+4&7)),u<0&&(u+=m,a+=4-(m+4&7)),this.readMappingMatrix.set(u,a),this.mappingBitMatrix.get(u,a)}readUtah(a,u,f,m){let x=0;return this.readModule(a-2,u-2,f,m)&&(x|=1),x<<=1,this.readModule(a-2,u-1,f,m)&&(x|=1),x<<=1,this.readModule(a-1,u-2,f,m)&&(x|=1),x<<=1,this.readModule(a-1,u-1,f,m)&&(x|=1),x<<=1,this.readModule(a-1,u,f,m)&&(x|=1),x<<=1,this.readModule(a,u-2,f,m)&&(x|=1),x<<=1,this.readModule(a,u-1,f,m)&&(x|=1),x<<=1,this.readModule(a,u,f,m)&&(x|=1),x}readCorner1(a,u){let f=0;return this.readModule(a-1,0,a,u)&&(f|=1),f<<=1,this.readModule(a-1,1,a,u)&&(f|=1),f<<=1,this.readModule(a-1,2,a,u)&&(f|=1),f<<=1,this.readModule(0,u-2,a,u)&&(f|=1),f<<=1,this.readModule(0,u-1,a,u)&&(f|=1),f<<=1,this.readModule(1,u-1,a,u)&&(f|=1),f<<=1,this.readModule(2,u-1,a,u)&&(f|=1),f<<=1,this.readModule(3,u-1,a,u)&&(f|=1),f}readCorner2(a,u){let f=0;return this.readModule(a-3,0,a,u)&&(f|=1),f<<=1,this.readModule(a-2,0,a,u)&&(f|=1),f<<=1,this.readModule(a-1,0,a,u)&&(f|=1),f<<=1,this.readModule(0,u-4,a,u)&&(f|=1),f<<=1,this.readModule(0,u-3,a,u)&&(f|=1),f<<=1,this.readModule(0,u-2,a,u)&&(f|=1),f<<=1,this.readModule(0,u-1,a,u)&&(f|=1),f<<=1,this.readModule(1,u-1,a,u)&&(f|=1),f}readCorner3(a,u){let f=0;return this.readModule(a-1,0,a,u)&&(f|=1),f<<=1,this.readModule(a-1,u-1,a,u)&&(f|=1),f<<=1,this.readModule(0,u-3,a,u)&&(f|=1),f<<=1,this.readModule(0,u-2,a,u)&&(f|=1),f<<=1,this.readModule(0,u-1,a,u)&&(f|=1),f<<=1,this.readModule(1,u-3,a,u)&&(f|=1),f<<=1,this.readModule(1,u-2,a,u)&&(f|=1),f<<=1,this.readModule(1,u-1,a,u)&&(f|=1),f}readCorner4(a,u){let f=0;return this.readModule(a-3,0,a,u)&&(f|=1),f<<=1,this.readModule(a-2,0,a,u)&&(f|=1),f<<=1,this.readModule(a-1,0,a,u)&&(f|=1),f<<=1,this.readModule(0,u-2,a,u)&&(f|=1),f<<=1,this.readModule(0,u-1,a,u)&&(f|=1),f<<=1,this.readModule(1,u-1,a,u)&&(f|=1),f<<=1,this.readModule(2,u-1,a,u)&&(f|=1),f<<=1,this.readModule(3,u-1,a,u)&&(f|=1),f}extractDataRegion(a){const u=this.version.getSymbolSizeRows(),f=this.version.getSymbolSizeColumns();if(a.getHeight()!==u)throw new g("Dimension of bitMatrix must match the version size");const m=this.version.getDataRegionSizeRows(),x=this.version.getDataRegionSizeColumns(),v=u/m|0,b=f/x|0,T=v*m,R=b*x,O=new z(R,T);for(let F=0;F<v;++F){const $=F*m;for(let J=0;J<b;++J){const le=J*x;for(let ue=0;ue<m;++ue){const he=F*(m+2)+1+ue,ge=$+ue;for(let Oe=0;Oe<x;++Oe){const Pe=J*(x+2)+1+Oe;if(a.get(Pe,he)){const ke=le+Oe;O.set(ke,ge)}}}}}return O}}class Al{constructor(a,u){this.numDataCodewords=a,this.codewords=u}static getDataBlocks(a,u){const f=u.getECBlocks();let m=0;const x=f.getECBlocks();for(let ue of x)m+=ue.getCount();const v=new Array(m);let b=0;for(let ue of x)for(let he=0;he<ue.getCount();he++){const ge=ue.getDataCodewords(),Oe=f.getECCodewords()+ge;v[b++]=new Al(ge,new Uint8Array(Oe))}const R=v[0].codewords.length-f.getECCodewords(),O=R-1;let F=0;for(let ue=0;ue<O;ue++)for(let he=0;he<b;he++)v[he].codewords[ue]=a[F++];const $=u.getVersionNumber()===24,J=$?8:b;for(let ue=0;ue<J;ue++)v[ue].codewords[R-1]=a[F++];const le=v[0].codewords.length;for(let ue=R;ue<le;ue++)for(let he=0;he<b;he++){const ge=$?(he+8)%b:he,Oe=$&&ge>7?ue-1:ue;v[ge].codewords[Oe]=a[F++]}if(F!==a.length)throw new g;return v}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Eo{constructor(a){this.bytes=a,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(a){if(a<1||a>32||a>this.available())throw new g(""+a);let u=0,f=this.bitOffset,m=this.byteOffset;const x=this.bytes;if(f>0){const v=8-f,b=a<v?a:v,T=v-b,R=255>>8-b<<T;u=(x[m]&R)>>T,a-=b,f+=b,f===8&&(f=0,m++)}if(a>0){for(;a>=8;)u=u<<8|x[m]&255,m++,a-=8;if(a>0){const v=8-a,b=255>>v<<v;u=u<<a|(x[m]&b)>>v,f+=a}}return this.bitOffset=f,this.byteOffset=m,u}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var on;(function(B){B[B.PAD_ENCODE=0]="PAD_ENCODE",B[B.ASCII_ENCODE=1]="ASCII_ENCODE",B[B.C40_ENCODE=2]="C40_ENCODE",B[B.TEXT_ENCODE=3]="TEXT_ENCODE",B[B.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",B[B.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",B[B.BASE256_ENCODE=6]="BASE256_ENCODE"})(on||(on={}));class er{static decode(a){const u=new Eo(a),f=new re,m=new re,x=new Array;let v=on.ASCII_ENCODE;do if(v===on.ASCII_ENCODE)v=this.decodeAsciiSegment(u,f,m);else{switch(v){case on.C40_ENCODE:this.decodeC40Segment(u,f);break;case on.TEXT_ENCODE:this.decodeTextSegment(u,f);break;case on.ANSIX12_ENCODE:this.decodeAnsiX12Segment(u,f);break;case on.EDIFACT_ENCODE:this.decodeEdifactSegment(u,f);break;case on.BASE256_ENCODE:this.decodeBase256Segment(u,f,x);break;default:throw new _}v=on.ASCII_ENCODE}while(v!==on.PAD_ENCODE&&u.available()>0);return m.length()>0&&f.append(m.toString()),new pe(a,f.toString(),x.length===0?null:x,null)}static decodeAsciiSegment(a,u,f){let m=!1;do{let x=a.readBits(8);if(x===0)throw new _;if(x<=128)return m&&(x+=128),u.append(String.fromCharCode(x-1)),on.ASCII_ENCODE;if(x===129)return on.PAD_ENCODE;if(x<=229){const v=x-130;v<10&&u.append("0"),u.append(""+v)}else switch(x){case 230:return on.C40_ENCODE;case 231:return on.BASE256_ENCODE;case 232:u.append("");break;case 233:case 234:break;case 235:m=!0;break;case 236:u.append("[)>05"),f.insert(0,"");break;case 237:u.append("[)>06"),f.insert(0,"");break;case 238:return on.ANSIX12_ENCODE;case 239:return on.TEXT_ENCODE;case 240:return on.EDIFACT_ENCODE;case 241:break;default:if(x!==254||a.available()!==0)throw new _;break}}while(a.available()>0);return on.ASCII_ENCODE}static decodeC40Segment(a,u){let f=!1;const m=[];let x=0;do{if(a.available()===8)return;const v=a.readBits(8);if(v===254)return;this.parseTwoBytes(v,a.readBits(8),m);for(let b=0;b<3;b++){const T=m[b];switch(x){case 0:if(T<3)x=T+1;else if(T<this.C40_BASIC_SET_CHARS.length){const R=this.C40_BASIC_SET_CHARS[T];f?(u.append(String.fromCharCode(R.charCodeAt(0)+128)),f=!1):u.append(R)}else throw new _;break;case 1:f?(u.append(String.fromCharCode(T+128)),f=!1):u.append(String.fromCharCode(T)),x=0;break;case 2:if(T<this.C40_SHIFT2_SET_CHARS.length){const R=this.C40_SHIFT2_SET_CHARS[T];f?(u.append(String.fromCharCode(R.charCodeAt(0)+128)),f=!1):u.append(R)}else switch(T){case 27:u.append("");break;case 30:f=!0;break;default:throw new _}x=0;break;case 3:f?(u.append(String.fromCharCode(T+224)),f=!1):u.append(String.fromCharCode(T+96)),x=0;break;default:throw new _}}}while(a.available()>0)}static decodeTextSegment(a,u){let f=!1,m=[],x=0;do{if(a.available()===8)return;const v=a.readBits(8);if(v===254)return;this.parseTwoBytes(v,a.readBits(8),m);for(let b=0;b<3;b++){const T=m[b];switch(x){case 0:if(T<3)x=T+1;else if(T<this.TEXT_BASIC_SET_CHARS.length){const R=this.TEXT_BASIC_SET_CHARS[T];f?(u.append(String.fromCharCode(R.charCodeAt(0)+128)),f=!1):u.append(R)}else throw new _;break;case 1:f?(u.append(String.fromCharCode(T+128)),f=!1):u.append(String.fromCharCode(T)),x=0;break;case 2:if(T<this.TEXT_SHIFT2_SET_CHARS.length){const R=this.TEXT_SHIFT2_SET_CHARS[T];f?(u.append(String.fromCharCode(R.charCodeAt(0)+128)),f=!1):u.append(R)}else switch(T){case 27:u.append("");break;case 30:f=!0;break;default:throw new _}x=0;break;case 3:if(T<this.TEXT_SHIFT3_SET_CHARS.length){const R=this.TEXT_SHIFT3_SET_CHARS[T];f?(u.append(String.fromCharCode(R.charCodeAt(0)+128)),f=!1):u.append(R),x=0}else throw new _;break;default:throw new _}}}while(a.available()>0)}static decodeAnsiX12Segment(a,u){const f=[];do{if(a.available()===8)return;const m=a.readBits(8);if(m===254)return;this.parseTwoBytes(m,a.readBits(8),f);for(let x=0;x<3;x++){const v=f[x];switch(v){case 0:u.append("\r");break;case 1:u.append("*");break;case 2:u.append(">");break;case 3:u.append(" ");break;default:if(v<14)u.append(String.fromCharCode(v+44));else if(v<40)u.append(String.fromCharCode(v+51));else throw new _;break}}}while(a.available()>0)}static parseTwoBytes(a,u,f){let m=(a<<8)+u-1,x=Math.floor(m/1600);f[0]=x,m-=x*1600,x=Math.floor(m/40),f[1]=x,f[2]=m-x*40}static decodeEdifactSegment(a,u){do{if(a.available()<=16)return;for(let f=0;f<4;f++){let m=a.readBits(6);if(m===31){const x=8-a.getBitOffset();x!==8&&a.readBits(x);return}m&32||(m|=64),u.append(String.fromCharCode(m))}}while(a.available()>0)}static decodeBase256Segment(a,u,f){let m=1+a.getByteOffset();const x=this.unrandomize255State(a.readBits(8),m++);let v;if(x===0?v=a.available()/8|0:x<250?v=x:v=250*(x-249)+this.unrandomize255State(a.readBits(8),m++),v<0)throw new _;const b=new Uint8Array(v);for(let T=0;T<v;T++){if(a.available()<8)throw new _;b[T]=this.unrandomize255State(a.readBits(8),m++)}f.push(b);try{u.append(K.decode(b,q.ISO88591))}catch(T){throw new nt("Platform does not support required encoding: "+T.message)}}static unrandomize255State(a,u){const f=149*u%255+1,m=a-f;return m>=0?m:m+256}}er.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],er.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],er.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],er.TEXT_SHIFT2_SET_CHARS=er.C40_SHIFT2_SET_CHARS,er.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Wd{constructor(){this.rsDecoder=new et(xe.DATA_MATRIX_FIELD_256)}decode(a){const u=new $d(a),f=u.getVersion(),m=u.readCodewords(),x=Al.getDataBlocks(m,f);let v=0;for(let R of x)v+=R.getNumDataCodewords();const b=new Uint8Array(v),T=x.length;for(let R=0;R<T;R++){const O=x[R],F=O.getCodewords(),$=O.getNumDataCodewords();this.correctErrors(F,$);for(let J=0;J<$;J++)b[J*T+R]=F[J]}return er.decode(b)}correctErrors(a,u){const f=new Int32Array(a);try{this.rsDecoder.decode(f,a.length-u)}catch{throw new w}for(let m=0;m<u;m++)a[m]=f[m]}}class Cn{constructor(a){this.image=a,this.rectangleDetector=new Ke(this.image)}detect(){const a=this.rectangleDetector.detect();let u=this.detectSolid1(a);if(u=this.detectSolid2(u),u[3]=this.correctTopRight(u),!u[3])throw new H;u=this.shiftToModuleCenter(u);const f=u[0],m=u[1],x=u[2],v=u[3];let b=this.transitionsBetween(f,v)+1,T=this.transitionsBetween(x,v)+1;(b&1)===1&&(b+=1),(T&1)===1&&(T+=1),4*b<7*T&&4*T<7*b&&(b=T=Math.max(b,T));let R=Cn.sampleGrid(this.image,f,m,x,v,b,T);return new Ce(R,[f,m,x,v])}static shiftPoint(a,u,f){let m=(u.getX()-a.getX())/(f+1),x=(u.getY()-a.getY())/(f+1);return new Te(a.getX()+m,a.getY()+x)}static moveAway(a,u,f){let m=a.getX(),x=a.getY();return m<u?m-=1:m+=1,x<f?x-=1:x+=1,new Te(m,x)}detectSolid1(a){let u=a[0],f=a[1],m=a[3],x=a[2],v=this.transitionsBetween(u,f),b=this.transitionsBetween(f,m),T=this.transitionsBetween(m,x),R=this.transitionsBetween(x,u),O=v,F=[x,u,f,m];return O>b&&(O=b,F[0]=u,F[1]=f,F[2]=m,F[3]=x),O>T&&(O=T,F[0]=f,F[1]=m,F[2]=x,F[3]=u),O>R&&(F[0]=m,F[1]=x,F[2]=u,F[3]=f),F}detectSolid2(a){let u=a[0],f=a[1],m=a[2],x=a[3],v=this.transitionsBetween(u,x),b=Cn.shiftPoint(f,m,(v+1)*4),T=Cn.shiftPoint(m,f,(v+1)*4),R=this.transitionsBetween(b,u),O=this.transitionsBetween(T,x);return R<O?(a[0]=u,a[1]=f,a[2]=m,a[3]=x):(a[0]=f,a[1]=m,a[2]=x,a[3]=u),a}correctTopRight(a){let u=a[0],f=a[1],m=a[2],x=a[3],v=this.transitionsBetween(u,x),b=this.transitionsBetween(f,x),T=Cn.shiftPoint(u,f,(b+1)*4),R=Cn.shiftPoint(m,f,(v+1)*4);v=this.transitionsBetween(T,x),b=this.transitionsBetween(R,x);let O=new Te(x.getX()+(m.getX()-f.getX())/(v+1),x.getY()+(m.getY()-f.getY())/(v+1)),F=new Te(x.getX()+(u.getX()-f.getX())/(b+1),x.getY()+(u.getY()-f.getY())/(b+1));if(!this.isValid(O))return this.isValid(F)?F:null;if(!this.isValid(F))return O;let $=this.transitionsBetween(T,O)+this.transitionsBetween(R,O),J=this.transitionsBetween(T,F)+this.transitionsBetween(R,F);return $>J?O:F}shiftToModuleCenter(a){let u=a[0],f=a[1],m=a[2],x=a[3],v=this.transitionsBetween(u,x)+1,b=this.transitionsBetween(m,x)+1,T=Cn.shiftPoint(u,f,b*4),R=Cn.shiftPoint(m,f,v*4);v=this.transitionsBetween(T,x)+1,b=this.transitionsBetween(R,x)+1,(v&1)===1&&(v+=1),(b&1)===1&&(b+=1);let O=(u.getX()+f.getX()+m.getX()+x.getX())/4,F=(u.getY()+f.getY()+m.getY()+x.getY())/4;u=Cn.moveAway(u,O,F),f=Cn.moveAway(f,O,F),m=Cn.moveAway(m,O,F),x=Cn.moveAway(x,O,F);let $,J;return T=Cn.shiftPoint(u,f,b*4),T=Cn.shiftPoint(T,x,v*4),$=Cn.shiftPoint(f,u,b*4),$=Cn.shiftPoint($,m,v*4),R=Cn.shiftPoint(m,x,b*4),R=Cn.shiftPoint(R,f,v*4),J=Cn.shiftPoint(x,m,b*4),J=Cn.shiftPoint(J,u,v*4),[T,$,R,J]}isValid(a){return a.getX()>=0&&a.getX()<this.image.getWidth()&&a.getY()>0&&a.getY()<this.image.getHeight()}static sampleGrid(a,u,f,m,x,v,b){return vn.getInstance().sampleGrid(a,v,b,.5,.5,v-.5,.5,v-.5,b-.5,.5,b-.5,u.getX(),u.getY(),x.getX(),x.getY(),m.getX(),m.getY(),f.getX(),f.getY())}transitionsBetween(a,u){let f=Math.trunc(a.getX()),m=Math.trunc(a.getY()),x=Math.trunc(u.getX()),v=Math.trunc(u.getY()),b=Math.abs(v-m)>Math.abs(x-f);if(b){let ue=f;f=m,m=ue,ue=x,x=v,v=ue}let T=Math.abs(x-f),R=Math.abs(v-m),O=-T/2,F=m<v?1:-1,$=f<x?1:-1,J=0,le=this.image.get(b?m:f,b?f:m);for(let ue=f,he=m;ue!==x;ue+=$){let ge=this.image.get(b?he:ue,b?ue:he);if(ge!==le&&(J++,le=ge),O+=R,O>0){if(he===v)break;he+=F,O-=T}}return J}}class fi{constructor(){this.decoder=new Wd}decode(a,u=null){let f,m;if(u!=null&&u.has(j.PURE_BARCODE)){const R=fi.extractPureBits(a.getBlackMatrix());f=this.decoder.decode(R),m=fi.NO_POINTS}else{const R=new Cn(a.getBlackMatrix()).detect();f=this.decoder.decode(R.getBits()),m=R.getPoints()}const x=f.getRawBytes(),v=new Q(f.getText(),x,8*x.length,m,ne.DATA_MATRIX,C.currentTimeMillis()),b=f.getByteSegments();b!=null&&v.putMetadata(de.BYTE_SEGMENTS,b);const T=f.getECLevel();return T!=null&&v.putMetadata(de.ERROR_CORRECTION_LEVEL,T),v}reset(){}static extractPureBits(a){const u=a.getTopLeftOnBit(),f=a.getBottomRightOnBit();if(u==null||f==null)throw new H;const m=this.moduleSize(u,a);let x=u[1];const v=f[1];let b=u[0];const R=(f[0]-b+1)/m,O=(v-x+1)/m;if(R<=0||O<=0)throw new H;const F=m/2;x+=F,b+=F;const $=new z(R,O);for(let J=0;J<O;J++){const le=x+J*m;for(let ue=0;ue<R;ue++)a.get(b+ue*m,le)&&$.set(ue,J)}return $}static moduleSize(a,u){const f=u.getWidth();let m=a[0];const x=a[1];for(;m<f&&u.get(m,x);)m++;if(m===f)throw new H;const v=m-a[0];if(v===0)throw new H;return v}}fi.NO_POINTS=[];class Gd extends G{constructor(a=500){super(new fi,a)}}var No;(function(B){B[B.L=0]="L",B[B.M=1]="M",B[B.Q=2]="Q",B[B.H=3]="H"})(No||(No={}));class Ht{constructor(a,u,f){this.value=a,this.stringValue=u,this.bits=f,Ht.FOR_BITS.set(f,this),Ht.FOR_VALUE.set(a,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(a){switch(a){case"L":return Ht.L;case"M":return Ht.M;case"Q":return Ht.Q;case"H":return Ht.H;default:throw new h(a+"not available")}}toString(){return this.stringValue}equals(a){if(!(a instanceof Ht))return!1;const u=a;return this.value===u.value}static forBits(a){if(a<0||a>=Ht.FOR_BITS.size)throw new g;return Ht.FOR_BITS.get(a)}}Ht.FOR_BITS=new Map,Ht.FOR_VALUE=new Map,Ht.L=new Ht(No.L,"L",1),Ht.M=new Ht(No.M,"M",0),Ht.Q=new Ht(No.Q,"Q",3),Ht.H=new Ht(No.H,"H",2);class Hn{constructor(a){this.errorCorrectionLevel=Ht.forBits(a>>3&3),this.dataMask=a&7}static numBitsDiffering(a,u){return I.bitCount(a^u)}static decodeFormatInformation(a,u){const f=Hn.doDecodeFormatInformation(a,u);return f!==null?f:Hn.doDecodeFormatInformation(a^Hn.FORMAT_INFO_MASK_QR,u^Hn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(a,u){let f=Number.MAX_SAFE_INTEGER,m=0;for(const x of Hn.FORMAT_INFO_DECODE_LOOKUP){const v=x[0];if(v===a||v===u)return new Hn(x[1]);let b=Hn.numBitsDiffering(a,v);b<f&&(m=x[1],f=b),a!==u&&(b=Hn.numBitsDiffering(u,v),b<f&&(m=x[1],f=b))}return f<=3?new Hn(m):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(a){if(!(a instanceof Hn))return!1;const u=a;return this.errorCorrectionLevel===u.errorCorrectionLevel&&this.dataMask===u.dataMask}}Hn.FORMAT_INFO_MASK_QR=21522,Hn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class fe{constructor(a,...u){this.ecCodewordsPerBlock=a,this.ecBlocks=u}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let a=0;const u=this.ecBlocks;for(const f of u)a+=f.getCount();return a}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Z{constructor(a,u){this.count=a,this.dataCodewords=u}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class qe{constructor(a,u,...f){this.versionNumber=a,this.alignmentPatternCenters=u,this.ecBlocks=f;let m=0;const x=f[0].getECCodewordsPerBlock(),v=f[0].getECBlocks();for(const b of v)m+=b.getCount()*(b.getDataCodewords()+x);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(a){return this.ecBlocks[a.getValue()]}static getProvisionalVersionForDimension(a){if(a%4!==1)throw new _;try{return this.getVersionForNumber((a-17)/4)}catch{throw new _}}static getVersionForNumber(a){if(a<1||a>40)throw new g;return qe.VERSIONS[a-1]}static decodeVersionInformation(a){let u=Number.MAX_SAFE_INTEGER,f=0;for(let m=0;m<qe.VERSION_DECODE_INFO.length;m++){const x=qe.VERSION_DECODE_INFO[m];if(x===a)return qe.getVersionForNumber(m+7);const v=Hn.numBitsDiffering(a,x);v<u&&(f=m+7,u=v)}return u<=3?qe.getVersionForNumber(f):null}buildFunctionPattern(){const a=this.getDimensionForVersion(),u=new z(a);u.setRegion(0,0,9,9),u.setRegion(a-8,0,8,9),u.setRegion(0,a-8,9,8);const f=this.alignmentPatternCenters.length;for(let m=0;m<f;m++){const x=this.alignmentPatternCenters[m]-2;for(let v=0;v<f;v++)m===0&&(v===0||v===f-1)||m===f-1&&v===0||u.setRegion(this.alignmentPatternCenters[v]-2,x,5,5)}return u.setRegion(6,9,1,a-17),u.setRegion(9,6,a-17,1),this.versionNumber>6&&(u.setRegion(a-11,0,3,6),u.setRegion(0,a-11,6,3)),u}toString(){return""+this.versionNumber}}qe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),qe.VERSIONS=[new qe(1,new Int32Array(0),new fe(7,new Z(1,19)),new fe(10,new Z(1,16)),new fe(13,new Z(1,13)),new fe(17,new Z(1,9))),new qe(2,Int32Array.from([6,18]),new fe(10,new Z(1,34)),new fe(16,new Z(1,28)),new fe(22,new Z(1,22)),new fe(28,new Z(1,16))),new qe(3,Int32Array.from([6,22]),new fe(15,new Z(1,55)),new fe(26,new Z(1,44)),new fe(18,new Z(2,17)),new fe(22,new Z(2,13))),new qe(4,Int32Array.from([6,26]),new fe(20,new Z(1,80)),new fe(18,new Z(2,32)),new fe(26,new Z(2,24)),new fe(16,new Z(4,9))),new qe(5,Int32Array.from([6,30]),new fe(26,new Z(1,108)),new fe(24,new Z(2,43)),new fe(18,new Z(2,15),new Z(2,16)),new fe(22,new Z(2,11),new Z(2,12))),new qe(6,Int32Array.from([6,34]),new fe(18,new Z(2,68)),new fe(16,new Z(4,27)),new fe(24,new Z(4,19)),new fe(28,new Z(4,15))),new qe(7,Int32Array.from([6,22,38]),new fe(20,new Z(2,78)),new fe(18,new Z(4,31)),new fe(18,new Z(2,14),new Z(4,15)),new fe(26,new Z(4,13),new Z(1,14))),new qe(8,Int32Array.from([6,24,42]),new fe(24,new Z(2,97)),new fe(22,new Z(2,38),new Z(2,39)),new fe(22,new Z(4,18),new Z(2,19)),new fe(26,new Z(4,14),new Z(2,15))),new qe(9,Int32Array.from([6,26,46]),new fe(30,new Z(2,116)),new fe(22,new Z(3,36),new Z(2,37)),new fe(20,new Z(4,16),new Z(4,17)),new fe(24,new Z(4,12),new Z(4,13))),new qe(10,Int32Array.from([6,28,50]),new fe(18,new Z(2,68),new Z(2,69)),new fe(26,new Z(4,43),new Z(1,44)),new fe(24,new Z(6,19),new Z(2,20)),new fe(28,new Z(6,15),new Z(2,16))),new qe(11,Int32Array.from([6,30,54]),new fe(20,new Z(4,81)),new fe(30,new Z(1,50),new Z(4,51)),new fe(28,new Z(4,22),new Z(4,23)),new fe(24,new Z(3,12),new Z(8,13))),new qe(12,Int32Array.from([6,32,58]),new fe(24,new Z(2,92),new Z(2,93)),new fe(22,new Z(6,36),new Z(2,37)),new fe(26,new Z(4,20),new Z(6,21)),new fe(28,new Z(7,14),new Z(4,15))),new qe(13,Int32Array.from([6,34,62]),new fe(26,new Z(4,107)),new fe(22,new Z(8,37),new Z(1,38)),new fe(24,new Z(8,20),new Z(4,21)),new fe(22,new Z(12,11),new Z(4,12))),new qe(14,Int32Array.from([6,26,46,66]),new fe(30,new Z(3,115),new Z(1,116)),new fe(24,new Z(4,40),new Z(5,41)),new fe(20,new Z(11,16),new Z(5,17)),new fe(24,new Z(11,12),new Z(5,13))),new qe(15,Int32Array.from([6,26,48,70]),new fe(22,new Z(5,87),new Z(1,88)),new fe(24,new Z(5,41),new Z(5,42)),new fe(30,new Z(5,24),new Z(7,25)),new fe(24,new Z(11,12),new Z(7,13))),new qe(16,Int32Array.from([6,26,50,74]),new fe(24,new Z(5,98),new Z(1,99)),new fe(28,new Z(7,45),new Z(3,46)),new fe(24,new Z(15,19),new Z(2,20)),new fe(30,new Z(3,15),new Z(13,16))),new qe(17,Int32Array.from([6,30,54,78]),new fe(28,new Z(1,107),new Z(5,108)),new fe(28,new Z(10,46),new Z(1,47)),new fe(28,new Z(1,22),new Z(15,23)),new fe(28,new Z(2,14),new Z(17,15))),new qe(18,Int32Array.from([6,30,56,82]),new fe(30,new Z(5,120),new Z(1,121)),new fe(26,new Z(9,43),new Z(4,44)),new fe(28,new Z(17,22),new Z(1,23)),new fe(28,new Z(2,14),new Z(19,15))),new qe(19,Int32Array.from([6,30,58,86]),new fe(28,new Z(3,113),new Z(4,114)),new fe(26,new Z(3,44),new Z(11,45)),new fe(26,new Z(17,21),new Z(4,22)),new fe(26,new Z(9,13),new Z(16,14))),new qe(20,Int32Array.from([6,34,62,90]),new fe(28,new Z(3,107),new Z(5,108)),new fe(26,new Z(3,41),new Z(13,42)),new fe(30,new Z(15,24),new Z(5,25)),new fe(28,new Z(15,15),new Z(10,16))),new qe(21,Int32Array.from([6,28,50,72,94]),new fe(28,new Z(4,116),new Z(4,117)),new fe(26,new Z(17,42)),new fe(28,new Z(17,22),new Z(6,23)),new fe(30,new Z(19,16),new Z(6,17))),new qe(22,Int32Array.from([6,26,50,74,98]),new fe(28,new Z(2,111),new Z(7,112)),new fe(28,new Z(17,46)),new fe(30,new Z(7,24),new Z(16,25)),new fe(24,new Z(34,13))),new qe(23,Int32Array.from([6,30,54,78,102]),new fe(30,new Z(4,121),new Z(5,122)),new fe(28,new Z(4,47),new Z(14,48)),new fe(30,new Z(11,24),new Z(14,25)),new fe(30,new Z(16,15),new Z(14,16))),new qe(24,Int32Array.from([6,28,54,80,106]),new fe(30,new Z(6,117),new Z(4,118)),new fe(28,new Z(6,45),new Z(14,46)),new fe(30,new Z(11,24),new Z(16,25)),new fe(30,new Z(30,16),new Z(2,17))),new qe(25,Int32Array.from([6,32,58,84,110]),new fe(26,new Z(8,106),new Z(4,107)),new fe(28,new Z(8,47),new Z(13,48)),new fe(30,new Z(7,24),new Z(22,25)),new fe(30,new Z(22,15),new Z(13,16))),new qe(26,Int32Array.from([6,30,58,86,114]),new fe(28,new Z(10,114),new Z(2,115)),new fe(28,new Z(19,46),new Z(4,47)),new fe(28,new Z(28,22),new Z(6,23)),new fe(30,new Z(33,16),new Z(4,17))),new qe(27,Int32Array.from([6,34,62,90,118]),new fe(30,new Z(8,122),new Z(4,123)),new fe(28,new Z(22,45),new Z(3,46)),new fe(30,new Z(8,23),new Z(26,24)),new fe(30,new Z(12,15),new Z(28,16))),new qe(28,Int32Array.from([6,26,50,74,98,122]),new fe(30,new Z(3,117),new Z(10,118)),new fe(28,new Z(3,45),new Z(23,46)),new fe(30,new Z(4,24),new Z(31,25)),new fe(30,new Z(11,15),new Z(31,16))),new qe(29,Int32Array.from([6,30,54,78,102,126]),new fe(30,new Z(7,116),new Z(7,117)),new fe(28,new Z(21,45),new Z(7,46)),new fe(30,new Z(1,23),new Z(37,24)),new fe(30,new Z(19,15),new Z(26,16))),new qe(30,Int32Array.from([6,26,52,78,104,130]),new fe(30,new Z(5,115),new Z(10,116)),new fe(28,new Z(19,47),new Z(10,48)),new fe(30,new Z(15,24),new Z(25,25)),new fe(30,new Z(23,15),new Z(25,16))),new qe(31,Int32Array.from([6,30,56,82,108,134]),new fe(30,new Z(13,115),new Z(3,116)),new fe(28,new Z(2,46),new Z(29,47)),new fe(30,new Z(42,24),new Z(1,25)),new fe(30,new Z(23,15),new Z(28,16))),new qe(32,Int32Array.from([6,34,60,86,112,138]),new fe(30,new Z(17,115)),new fe(28,new Z(10,46),new Z(23,47)),new fe(30,new Z(10,24),new Z(35,25)),new fe(30,new Z(19,15),new Z(35,16))),new qe(33,Int32Array.from([6,30,58,86,114,142]),new fe(30,new Z(17,115),new Z(1,116)),new fe(28,new Z(14,46),new Z(21,47)),new fe(30,new Z(29,24),new Z(19,25)),new fe(30,new Z(11,15),new Z(46,16))),new qe(34,Int32Array.from([6,34,62,90,118,146]),new fe(30,new Z(13,115),new Z(6,116)),new fe(28,new Z(14,46),new Z(23,47)),new fe(30,new Z(44,24),new Z(7,25)),new fe(30,new Z(59,16),new Z(1,17))),new qe(35,Int32Array.from([6,30,54,78,102,126,150]),new fe(30,new Z(12,121),new Z(7,122)),new fe(28,new Z(12,47),new Z(26,48)),new fe(30,new Z(39,24),new Z(14,25)),new fe(30,new Z(22,15),new Z(41,16))),new qe(36,Int32Array.from([6,24,50,76,102,128,154]),new fe(30,new Z(6,121),new Z(14,122)),new fe(28,new Z(6,47),new Z(34,48)),new fe(30,new Z(46,24),new Z(10,25)),new fe(30,new Z(2,15),new Z(64,16))),new qe(37,Int32Array.from([6,28,54,80,106,132,158]),new fe(30,new Z(17,122),new Z(4,123)),new fe(28,new Z(29,46),new Z(14,47)),new fe(30,new Z(49,24),new Z(10,25)),new fe(30,new Z(24,15),new Z(46,16))),new qe(38,Int32Array.from([6,32,58,84,110,136,162]),new fe(30,new Z(4,122),new Z(18,123)),new fe(28,new Z(13,46),new Z(32,47)),new fe(30,new Z(48,24),new Z(14,25)),new fe(30,new Z(42,15),new Z(32,16))),new qe(39,Int32Array.from([6,26,54,82,110,138,166]),new fe(30,new Z(20,117),new Z(4,118)),new fe(28,new Z(40,47),new Z(7,48)),new fe(30,new Z(43,24),new Z(22,25)),new fe(30,new Z(10,15),new Z(67,16))),new qe(40,Int32Array.from([6,30,58,86,114,142,170]),new fe(30,new Z(19,118),new Z(6,119)),new fe(28,new Z(18,47),new Z(31,48)),new fe(30,new Z(34,24),new Z(34,25)),new fe(30,new Z(20,15),new Z(61,16)))];var Mn;(function(B){B[B.DATA_MASK_000=0]="DATA_MASK_000",B[B.DATA_MASK_001=1]="DATA_MASK_001",B[B.DATA_MASK_010=2]="DATA_MASK_010",B[B.DATA_MASK_011=3]="DATA_MASK_011",B[B.DATA_MASK_100=4]="DATA_MASK_100",B[B.DATA_MASK_101=5]="DATA_MASK_101",B[B.DATA_MASK_110=6]="DATA_MASK_110",B[B.DATA_MASK_111=7]="DATA_MASK_111"})(Mn||(Mn={}));class ds{constructor(a,u){this.value=a,this.isMasked=u}unmaskBitMatrix(a,u){for(let f=0;f<u;f++)for(let m=0;m<u;m++)this.isMasked(f,m)&&a.flip(m,f)}}ds.values=new Map([[Mn.DATA_MASK_000,new ds(Mn.DATA_MASK_000,(B,a)=>(B+a&1)===0)],[Mn.DATA_MASK_001,new ds(Mn.DATA_MASK_001,(B,a)=>(B&1)===0)],[Mn.DATA_MASK_010,new ds(Mn.DATA_MASK_010,(B,a)=>a%3===0)],[Mn.DATA_MASK_011,new ds(Mn.DATA_MASK_011,(B,a)=>(B+a)%3===0)],[Mn.DATA_MASK_100,new ds(Mn.DATA_MASK_100,(B,a)=>(Math.floor(B/2)+Math.floor(a/3)&1)===0)],[Mn.DATA_MASK_101,new ds(Mn.DATA_MASK_101,(B,a)=>B*a%6===0)],[Mn.DATA_MASK_110,new ds(Mn.DATA_MASK_110,(B,a)=>B*a%6<3)],[Mn.DATA_MASK_111,new ds(Mn.DATA_MASK_111,(B,a)=>(B+a+B*a%3&1)===0)]]);class Gc{constructor(a){const u=a.getHeight();if(u<21||(u&3)!==1)throw new _;this.bitMatrix=a}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let a=0;for(let x=0;x<6;x++)a=this.copyBit(x,8,a);a=this.copyBit(7,8,a),a=this.copyBit(8,8,a),a=this.copyBit(8,7,a);for(let x=5;x>=0;x--)a=this.copyBit(8,x,a);const u=this.bitMatrix.getHeight();let f=0;const m=u-7;for(let x=u-1;x>=m;x--)f=this.copyBit(8,x,f);for(let x=u-8;x<u;x++)f=this.copyBit(x,8,f);if(this.parsedFormatInfo=Hn.decodeFormatInformation(a,f),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new _}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const a=this.bitMatrix.getHeight(),u=Math.floor((a-17)/4);if(u<=6)return qe.getVersionForNumber(u);let f=0;const m=a-11;for(let v=5;v>=0;v--)for(let b=a-9;b>=m;b--)f=this.copyBit(b,v,f);let x=qe.decodeVersionInformation(f);if(x!==null&&x.getDimensionForVersion()===a)return this.parsedVersion=x,x;f=0;for(let v=5;v>=0;v--)for(let b=a-9;b>=m;b--)f=this.copyBit(v,b,f);if(x=qe.decodeVersionInformation(f),x!==null&&x.getDimensionForVersion()===a)return this.parsedVersion=x,x;throw new _}copyBit(a,u,f){return(this.isMirror?this.bitMatrix.get(u,a):this.bitMatrix.get(a,u))?f<<1|1:f<<1}readCodewords(){const a=this.readFormatInformation(),u=this.readVersion(),f=ds.values.get(a.getDataMask()),m=this.bitMatrix.getHeight();f.unmaskBitMatrix(this.bitMatrix,m);const x=u.buildFunctionPattern();let v=!0;const b=new Uint8Array(u.getTotalCodewords());let T=0,R=0,O=0;for(let F=m-1;F>0;F-=2){F===6&&F--;for(let $=0;$<m;$++){const J=v?m-1-$:$;for(let le=0;le<2;le++)x.get(F-le,J)||(O++,R<<=1,this.bitMatrix.get(F-le,J)&&(R|=1),O===8&&(b[T++]=R,O=0,R=0))}v=!v}if(T!==u.getTotalCodewords())throw new _;return b}remask(){if(this.parsedFormatInfo===null)return;const a=ds.values[this.parsedFormatInfo.getDataMask()],u=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,u)}setMirror(a){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=a}mirror(){const a=this.bitMatrix;for(let u=0,f=a.getWidth();u<f;u++)for(let m=u+1,x=a.getHeight();m<x;m++)a.get(u,m)!==a.get(m,u)&&(a.flip(m,u),a.flip(u,m))}}class oa{constructor(a,u){this.numDataCodewords=a,this.codewords=u}static getDataBlocks(a,u,f){if(a.length!==u.getTotalCodewords())throw new g;const m=u.getECBlocksForLevel(f);let x=0;const v=m.getECBlocks();for(const le of v)x+=le.getCount();const b=new Array(x);let T=0;for(const le of v)for(let ue=0;ue<le.getCount();ue++){const he=le.getDataCodewords(),ge=m.getECCodewordsPerBlock()+he;b[T++]=new oa(he,new Uint8Array(ge))}const R=b[0].codewords.length;let O=b.length-1;for(;O>=0&&b[O].codewords.length!==R;)O--;O++;const F=R-m.getECCodewordsPerBlock();let $=0;for(let le=0;le<F;le++)for(let ue=0;ue<T;ue++)b[ue].codewords[le]=a[$++];for(let le=O;le<T;le++)b[le].codewords[F]=a[$++];const J=b[0].codewords.length;for(let le=F;le<J;le++)for(let ue=0;ue<T;ue++){const he=ue<O?le:le+1;b[ue].codewords[he]=a[$++]}return b}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var fs;(function(B){B[B.TERMINATOR=0]="TERMINATOR",B[B.NUMERIC=1]="NUMERIC",B[B.ALPHANUMERIC=2]="ALPHANUMERIC",B[B.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",B[B.BYTE=4]="BYTE",B[B.ECI=5]="ECI",B[B.KANJI=6]="KANJI",B[B.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",B[B.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",B[B.HANZI=9]="HANZI"})(fs||(fs={}));class Je{constructor(a,u,f,m){this.value=a,this.stringValue=u,this.characterCountBitsForVersions=f,this.bits=m,Je.FOR_BITS.set(m,this),Je.FOR_VALUE.set(a,this)}static forBits(a){const u=Je.FOR_BITS.get(a);if(u===void 0)throw new g;return u}getCharacterCountBits(a){const u=a.getVersionNumber();let f;return u<=9?f=0:u<=26?f=1:f=2,this.characterCountBitsForVersions[f]}getValue(){return this.value}getBits(){return this.bits}equals(a){if(!(a instanceof Je))return!1;const u=a;return this.value===u.value}toString(){return this.stringValue}}Je.FOR_BITS=new Map,Je.FOR_VALUE=new Map,Je.TERMINATOR=new Je(fs.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Je.NUMERIC=new Je(fs.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Je.ALPHANUMERIC=new Je(fs.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Je.STRUCTURED_APPEND=new Je(fs.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Je.BYTE=new Je(fs.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Je.ECI=new Je(fs.ECI,"ECI",Int32Array.from([0,0,0]),7),Je.KANJI=new Je(fs.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Je.FNC1_FIRST_POSITION=new Je(fs.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Je.FNC1_SECOND_POSITION=new Je(fs.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Je.HANZI=new Je(fs.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class fn{static decode(a,u,f,m){const x=new Eo(a);let v=new re;const b=new Array;let T=-1,R=-1;try{let O=null,F=!1,$;do{if(x.available()<4)$=Je.TERMINATOR;else{const J=x.readBits(4);$=Je.forBits(J)}switch($){case Je.TERMINATOR:break;case Je.FNC1_FIRST_POSITION:case Je.FNC1_SECOND_POSITION:F=!0;break;case Je.STRUCTURED_APPEND:if(x.available()<16)throw new _;T=x.readBits(8),R=x.readBits(8);break;case Je.ECI:const J=fn.parseECIValue(x);if(O=L.getCharacterSetECIByValue(J),O===null)throw new _;break;case Je.HANZI:const le=x.readBits(4),ue=x.readBits($.getCharacterCountBits(u));le===fn.GB2312_SUBSET&&fn.decodeHanziSegment(x,v,ue);break;default:const he=x.readBits($.getCharacterCountBits(u));switch($){case Je.NUMERIC:fn.decodeNumericSegment(x,v,he);break;case Je.ALPHANUMERIC:fn.decodeAlphanumericSegment(x,v,he,F);break;case Je.BYTE:fn.decodeByteSegment(x,v,he,O,b,m);break;case Je.KANJI:fn.decodeKanjiSegment(x,v,he);break;default:throw new _}break}}while($!==Je.TERMINATOR)}catch{throw new _}return new pe(a,v.toString(),b.length===0?null:b,f===null?null:f.toString(),T,R)}static decodeHanziSegment(a,u,f){if(f*13>a.available())throw new _;const m=new Uint8Array(2*f);let x=0;for(;f>0;){const v=a.readBits(13);let b=v/96<<8&4294967295|v%96;b<959?b+=41377:b+=42657,m[x]=b>>8&255,m[x+1]=b&255,x+=2,f--}try{u.append(K.decode(m,q.GB2312))}catch(v){throw new _(v)}}static decodeKanjiSegment(a,u,f){if(f*13>a.available())throw new _;const m=new Uint8Array(2*f);let x=0;for(;f>0;){const v=a.readBits(13);let b=v/192<<8&4294967295|v%192;b<7936?b+=33088:b+=49472,m[x]=b>>8,m[x+1]=b,x+=2,f--}try{u.append(K.decode(m,q.SHIFT_JIS))}catch(v){throw new _(v)}}static decodeByteSegment(a,u,f,m,x,v){if(8*f>a.available())throw new _;const b=new Uint8Array(f);for(let R=0;R<f;R++)b[R]=a.readBits(8);let T;m===null?T=q.guessEncoding(b,v):T=m.getName();try{u.append(K.decode(b,T))}catch(R){throw new _(R)}x.push(b)}static toAlphaNumericChar(a){if(a>=fn.ALPHANUMERIC_CHARS.length)throw new _;return fn.ALPHANUMERIC_CHARS[a]}static decodeAlphanumericSegment(a,u,f,m){const x=u.length();for(;f>1;){if(a.available()<11)throw new _;const v=a.readBits(11);u.append(fn.toAlphaNumericChar(Math.floor(v/45))),u.append(fn.toAlphaNumericChar(v%45)),f-=2}if(f===1){if(a.available()<6)throw new _;u.append(fn.toAlphaNumericChar(a.readBits(6)))}if(m)for(let v=x;v<u.length();v++)u.charAt(v)==="%"&&(v<u.length()-1&&u.charAt(v+1)==="%"?u.deleteCharAt(v+1):u.setCharAt(v,""))}static decodeNumericSegment(a,u,f){for(;f>=3;){if(a.available()<10)throw new _;const m=a.readBits(10);if(m>=1e3)throw new _;u.append(fn.toAlphaNumericChar(Math.floor(m/100))),u.append(fn.toAlphaNumericChar(Math.floor(m/10)%10)),u.append(fn.toAlphaNumericChar(m%10)),f-=3}if(f===2){if(a.available()<7)throw new _;const m=a.readBits(7);if(m>=100)throw new _;u.append(fn.toAlphaNumericChar(Math.floor(m/10))),u.append(fn.toAlphaNumericChar(m%10))}else if(f===1){if(a.available()<4)throw new _;const m=a.readBits(4);if(m>=10)throw new _;u.append(fn.toAlphaNumericChar(m))}}static parseECIValue(a){const u=a.readBits(8);if(!(u&128))return u&127;if((u&192)===128){const f=a.readBits(8);return(u&63)<<8&4294967295|f}if((u&224)===192){const f=a.readBits(16);return(u&31)<<16&4294967295|f}throw new _}}fn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",fn.GB2312_SUBSET=1;class Sp{constructor(a){this.mirrored=a}isMirrored(){return this.mirrored}applyMirroredCorrection(a){if(!this.mirrored||a===null||a.length<3)return;const u=a[0];a[0]=a[2],a[2]=u}}class Un{constructor(){this.rsDecoder=new et(xe.QR_CODE_FIELD_256)}decodeBooleanArray(a,u){return this.decodeBitMatrix(z.parseFromBooleanArray(a),u)}decodeBitMatrix(a,u){const f=new Gc(a);let m=null;try{return this.decodeBitMatrixParser(f,u)}catch(x){m=x}try{f.remask(),f.setMirror(!0),f.readVersion(),f.readFormatInformation(),f.mirror();const x=this.decodeBitMatrixParser(f,u);return x.setOther(new Sp(!0)),x}catch(x){throw m!==null?m:x}}decodeBitMatrixParser(a,u){const f=a.readVersion(),m=a.readFormatInformation().getErrorCorrectionLevel(),x=a.readCodewords(),v=oa.getDataBlocks(x,f,m);let b=0;for(const O of v)b+=O.getNumDataCodewords();const T=new Uint8Array(b);let R=0;for(const O of v){const F=O.getCodewords(),$=O.getNumDataCodewords();this.correctErrors(F,$);for(let J=0;J<$;J++)T[R++]=F[J]}return fn.decode(T,f,m,u)}correctErrors(a,u){const f=new Int32Array(a);try{this.rsDecoder.decode(f,a.length-u)}catch{throw new w}for(let m=0;m<u;m++)a[m]=f[m]}}class $i extends Te{constructor(a,u,f){super(a,u),this.estimatedModuleSize=f}aboutEquals(a,u,f){if(Math.abs(u-this.getY())<=a&&Math.abs(f-this.getX())<=a){const m=Math.abs(a-this.estimatedModuleSize);return m<=1||m<=this.estimatedModuleSize}return!1}combineEstimate(a,u,f){const m=(this.getX()+u)/2,x=(this.getY()+a)/2,v=(this.estimatedModuleSize+f)/2;return new $i(m,x,v)}}class Xc{constructor(a,u,f,m,x,v,b){this.image=a,this.startX=u,this.startY=f,this.width=m,this.height=x,this.moduleSize=v,this.resultPointCallback=b,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const a=this.startX,u=this.height,f=this.width,m=a+f,x=this.startY+u/2,v=new Int32Array(3),b=this.image;for(let T=0;T<u;T++){const R=x+(T&1?-Math.floor((T+1)/2):Math.floor((T+1)/2));v[0]=0,v[1]=0,v[2]=0;let O=a;for(;O<m&&!b.get(O,R);)O++;let F=0;for(;O<m;){if(b.get(O,R))if(F===1)v[1]++;else if(F===2){if(this.foundPatternCross(v)){const $=this.handlePossibleCenter(v,R,O);if($!==null)return $}v[0]=v[2],v[1]=1,v[2]=0,F=1}else v[++F]++;else F===1&&F++,v[F]++;O++}if(this.foundPatternCross(v)){const $=this.handlePossibleCenter(v,R,m);if($!==null)return $}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new H}static centerFromEnd(a,u){return u-a[2]-a[1]/2}foundPatternCross(a){const u=this.moduleSize,f=u/2;for(let m=0;m<3;m++)if(Math.abs(u-a[m])>=f)return!1;return!0}crossCheckVertical(a,u,f,m){const x=this.image,v=x.getHeight(),b=this.crossCheckStateCount;b[0]=0,b[1]=0,b[2]=0;let T=a;for(;T>=0&&x.get(u,T)&&b[1]<=f;)b[1]++,T--;if(T<0||b[1]>f)return NaN;for(;T>=0&&!x.get(u,T)&&b[0]<=f;)b[0]++,T--;if(b[0]>f)return NaN;for(T=a+1;T<v&&x.get(u,T)&&b[1]<=f;)b[1]++,T++;if(T===v||b[1]>f)return NaN;for(;T<v&&!x.get(u,T)&&b[2]<=f;)b[2]++,T++;if(b[2]>f)return NaN;const R=b[0]+b[1]+b[2];return 5*Math.abs(R-m)>=2*m?NaN:this.foundPatternCross(b)?Xc.centerFromEnd(b,T):NaN}handlePossibleCenter(a,u,f){const m=a[0]+a[1]+a[2],x=Xc.centerFromEnd(a,f),v=this.crossCheckVertical(u,x,2*a[1],m);if(!isNaN(v)){const b=(a[0]+a[1]+a[2])/3;for(const R of this.possibleCenters)if(R.aboutEquals(b,v,x))return R.combineEstimate(v,x,b);const T=new $i(x,v,b);this.possibleCenters.push(T),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(T)}return null}}class Kc extends Te{constructor(a,u,f,m){super(a,u),this.estimatedModuleSize=f,this.count=m,m===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(a,u,f){if(Math.abs(u-this.getY())<=a&&Math.abs(f-this.getX())<=a){const m=Math.abs(a-this.estimatedModuleSize);return m<=1||m<=this.estimatedModuleSize}return!1}combineEstimate(a,u,f){const m=this.count+1,x=(this.count*this.getX()+u)/m,v=(this.count*this.getY()+a)/m,b=(this.count*this.estimatedModuleSize+f)/m;return new Kc(x,v,b,m)}}class Xd{constructor(a){this.bottomLeft=a[0],this.topLeft=a[1],this.topRight=a[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class $n{constructor(a,u){this.image=a,this.resultPointCallback=u,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=u}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(a){const u=a!=null&&a.get(j.TRY_HARDER)!==void 0,f=a!=null&&a.get(j.PURE_BARCODE)!==void 0,m=this.image,x=m.getHeight(),v=m.getWidth();let b=Math.floor(3*x/(4*$n.MAX_MODULES));(b<$n.MIN_SKIP||u)&&(b=$n.MIN_SKIP);let T=!1;const R=new Int32Array(5);for(let F=b-1;F<x&&!T;F+=b){R[0]=0,R[1]=0,R[2]=0,R[3]=0,R[4]=0;let $=0;for(let J=0;J<v;J++)if(m.get(J,F))($&1)===1&&$++,R[$]++;else if($&1)R[$]++;else if($===4)if($n.foundPatternCross(R)){if(this.handlePossibleCenter(R,F,J,f)===!0)if(b=2,this.hasSkipped===!0)T=this.haveMultiplyConfirmedCenters();else{const ue=this.findRowSkip();ue>R[2]&&(F+=ue-R[2]-b,J=v-1)}else{R[0]=R[2],R[1]=R[3],R[2]=R[4],R[3]=1,R[4]=0,$=3;continue}$=0,R[0]=0,R[1]=0,R[2]=0,R[3]=0,R[4]=0}else R[0]=R[2],R[1]=R[3],R[2]=R[4],R[3]=1,R[4]=0,$=3;else R[++$]++;$n.foundPatternCross(R)&&this.handlePossibleCenter(R,F,v,f)===!0&&(b=R[0],this.hasSkipped&&(T=this.haveMultiplyConfirmedCenters()))}const O=this.selectBestPatterns();return Te.orderBestPatterns(O),new Xd(O)}static centerFromEnd(a,u){return u-a[4]-a[3]-a[2]/2}static foundPatternCross(a){let u=0;for(let x=0;x<5;x++){const v=a[x];if(v===0)return!1;u+=v}if(u<7)return!1;const f=u/7,m=f/2;return Math.abs(f-a[0])<m&&Math.abs(f-a[1])<m&&Math.abs(3*f-a[2])<3*m&&Math.abs(f-a[3])<m&&Math.abs(f-a[4])<m}getCrossCheckStateCount(){const a=this.crossCheckStateCount;return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a}crossCheckDiagonal(a,u,f,m){const x=this.getCrossCheckStateCount();let v=0;const b=this.image;for(;a>=v&&u>=v&&b.get(u-v,a-v);)x[2]++,v++;if(a<v||u<v)return!1;for(;a>=v&&u>=v&&!b.get(u-v,a-v)&&x[1]<=f;)x[1]++,v++;if(a<v||u<v||x[1]>f)return!1;for(;a>=v&&u>=v&&b.get(u-v,a-v)&&x[0]<=f;)x[0]++,v++;if(x[0]>f)return!1;const T=b.getHeight(),R=b.getWidth();for(v=1;a+v<T&&u+v<R&&b.get(u+v,a+v);)x[2]++,v++;if(a+v>=T||u+v>=R)return!1;for(;a+v<T&&u+v<R&&!b.get(u+v,a+v)&&x[3]<f;)x[3]++,v++;if(a+v>=T||u+v>=R||x[3]>=f)return!1;for(;a+v<T&&u+v<R&&b.get(u+v,a+v)&&x[4]<f;)x[4]++,v++;if(x[4]>=f)return!1;const O=x[0]+x[1]+x[2]+x[3]+x[4];return Math.abs(O-m)<2*m&&$n.foundPatternCross(x)}crossCheckVertical(a,u,f,m){const x=this.image,v=x.getHeight(),b=this.getCrossCheckStateCount();let T=a;for(;T>=0&&x.get(u,T);)b[2]++,T--;if(T<0)return NaN;for(;T>=0&&!x.get(u,T)&&b[1]<=f;)b[1]++,T--;if(T<0||b[1]>f)return NaN;for(;T>=0&&x.get(u,T)&&b[0]<=f;)b[0]++,T--;if(b[0]>f)return NaN;for(T=a+1;T<v&&x.get(u,T);)b[2]++,T++;if(T===v)return NaN;for(;T<v&&!x.get(u,T)&&b[3]<f;)b[3]++,T++;if(T===v||b[3]>=f)return NaN;for(;T<v&&x.get(u,T)&&b[4]<f;)b[4]++,T++;if(b[4]>=f)return NaN;const R=b[0]+b[1]+b[2]+b[3]+b[4];return 5*Math.abs(R-m)>=2*m?NaN:$n.foundPatternCross(b)?$n.centerFromEnd(b,T):NaN}crossCheckHorizontal(a,u,f,m){const x=this.image,v=x.getWidth(),b=this.getCrossCheckStateCount();let T=a;for(;T>=0&&x.get(T,u);)b[2]++,T--;if(T<0)return NaN;for(;T>=0&&!x.get(T,u)&&b[1]<=f;)b[1]++,T--;if(T<0||b[1]>f)return NaN;for(;T>=0&&x.get(T,u)&&b[0]<=f;)b[0]++,T--;if(b[0]>f)return NaN;for(T=a+1;T<v&&x.get(T,u);)b[2]++,T++;if(T===v)return NaN;for(;T<v&&!x.get(T,u)&&b[3]<f;)b[3]++,T++;if(T===v||b[3]>=f)return NaN;for(;T<v&&x.get(T,u)&&b[4]<f;)b[4]++,T++;if(b[4]>=f)return NaN;const R=b[0]+b[1]+b[2]+b[3]+b[4];return 5*Math.abs(R-m)>=m?NaN:$n.foundPatternCross(b)?$n.centerFromEnd(b,T):NaN}handlePossibleCenter(a,u,f,m){const x=a[0]+a[1]+a[2]+a[3]+a[4];let v=$n.centerFromEnd(a,f),b=this.crossCheckVertical(u,Math.floor(v),a[2],x);if(!isNaN(b)&&(v=this.crossCheckHorizontal(Math.floor(v),Math.floor(b),a[2],x),!isNaN(v)&&(!m||this.crossCheckDiagonal(Math.floor(b),Math.floor(v),a[2],x)))){const T=x/7;let R=!1;const O=this.possibleCenters;for(let F=0,$=O.length;F<$;F++){const J=O[F];if(J.aboutEquals(T,b,v)){O[F]=J.combineEstimate(b,v,T),R=!0;break}}if(!R){const F=new Kc(v,b,T);O.push(F),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(F)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let u=null;for(const f of this.possibleCenters)if(f.getCount()>=$n.CENTER_QUORUM)if(u==null)u=f;else return this.hasSkipped=!0,Math.floor((Math.abs(u.getX()-f.getX())-Math.abs(u.getY()-f.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let a=0,u=0;const f=this.possibleCenters.length;for(const v of this.possibleCenters)v.getCount()>=$n.CENTER_QUORUM&&(a++,u+=v.getEstimatedModuleSize());if(a<3)return!1;const m=u/f;let x=0;for(const v of this.possibleCenters)x+=Math.abs(v.getEstimatedModuleSize()-m);return x<=.05*u}selectBestPatterns(){const a=this.possibleCenters.length;if(a<3)throw new H;const u=this.possibleCenters;let f;if(a>3){let m=0,x=0;for(const T of this.possibleCenters){const R=T.getEstimatedModuleSize();m+=R,x+=R*R}f=m/a;let v=Math.sqrt(x/a-f*f);u.sort((T,R)=>{const O=Math.abs(R.getEstimatedModuleSize()-f),F=Math.abs(T.getEstimatedModuleSize()-f);return O<F?-1:O>F?1:0});const b=Math.max(.2*f,v);for(let T=0;T<u.length&&u.length>3;T++){const R=u[T];Math.abs(R.getEstimatedModuleSize()-f)>b&&(u.splice(T,1),T--)}}if(u.length>3){let m=0;for(const x of u)m+=x.getEstimatedModuleSize();f=m/u.length,u.sort((x,v)=>{if(v.getCount()===x.getCount()){const b=Math.abs(v.getEstimatedModuleSize()-f),T=Math.abs(x.getEstimatedModuleSize()-f);return b<T?1:b>T?-1:0}else return v.getCount()-x.getCount()}),u.splice(3)}return[u[0],u[1],u[2]]}}$n.CENTER_QUORUM=2,$n.MIN_SKIP=3,$n.MAX_MODULES=57;class aa{constructor(a){this.image=a}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(a){this.resultPointCallback=a==null?null:a.get(j.NEED_RESULT_POINT_CALLBACK);const f=new $n(this.image,this.resultPointCallback).find(a);return this.processFinderPatternInfo(f)}processFinderPatternInfo(a){const u=a.getTopLeft(),f=a.getTopRight(),m=a.getBottomLeft(),x=this.calculateModuleSize(u,f,m);if(x<1)throw new H("No pattern found in proccess finder.");const v=aa.computeDimension(u,f,m,x),b=qe.getProvisionalVersionForDimension(v),T=b.getDimensionForVersion()-7;let R=null;if(b.getAlignmentPatternCenters().length>0){const J=f.getX()-u.getX()+m.getX(),le=f.getY()-u.getY()+m.getY(),ue=1-3/T,he=Math.floor(u.getX()+ue*(J-u.getX())),ge=Math.floor(u.getY()+ue*(le-u.getY()));for(let Oe=4;Oe<=16;Oe<<=1)try{R=this.findAlignmentInRegion(x,he,ge,Oe);break}catch(Pe){if(!(Pe instanceof H))throw Pe}}const O=aa.createTransform(u,f,m,R,v),F=aa.sampleGrid(this.image,O,v);let $;return R===null?$=[m,u,f]:$=[m,u,f,R],new Ce(F,$)}static createTransform(a,u,f,m,x){const v=x-3.5;let b,T,R,O;return m!==null?(b=m.getX(),T=m.getY(),R=v-3,O=R):(b=u.getX()-a.getX()+f.getX(),T=u.getY()-a.getY()+f.getY(),R=v,O=v),rt.quadrilateralToQuadrilateral(3.5,3.5,v,3.5,R,O,3.5,v,a.getX(),a.getY(),u.getX(),u.getY(),b,T,f.getX(),f.getY())}static sampleGrid(a,u,f){return vn.getInstance().sampleGridWithTransform(a,f,f,u)}static computeDimension(a,u,f,m){const x=$e.round(Te.distance(a,u)/m),v=$e.round(Te.distance(a,f)/m);let b=Math.floor((x+v)/2)+7;switch(b&3){case 0:b++;break;case 2:b--;break;case 3:throw new H("Dimensions could be not found.")}return b}calculateModuleSize(a,u,f){return(this.calculateModuleSizeOneWay(a,u)+this.calculateModuleSizeOneWay(a,f))/2}calculateModuleSizeOneWay(a,u){const f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(u.getX()),Math.floor(u.getY())),m=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(u.getX()),Math.floor(u.getY()),Math.floor(a.getX()),Math.floor(a.getY()));return isNaN(f)?m/7:isNaN(m)?f/7:(f+m)/14}sizeOfBlackWhiteBlackRunBothWays(a,u,f,m){let x=this.sizeOfBlackWhiteBlackRun(a,u,f,m),v=1,b=a-(f-a);b<0?(v=a/(a-b),b=0):b>=this.image.getWidth()&&(v=(this.image.getWidth()-1-a)/(b-a),b=this.image.getWidth()-1);let T=Math.floor(u-(m-u)*v);return v=1,T<0?(v=u/(u-T),T=0):T>=this.image.getHeight()&&(v=(this.image.getHeight()-1-u)/(T-u),T=this.image.getHeight()-1),b=Math.floor(a+(b-a)*v),x+=this.sizeOfBlackWhiteBlackRun(a,u,b,T),x-1}sizeOfBlackWhiteBlackRun(a,u,f,m){const x=Math.abs(m-u)>Math.abs(f-a);if(x){let J=a;a=u,u=J,J=f,f=m,m=J}const v=Math.abs(f-a),b=Math.abs(m-u);let T=-v/2;const R=a<f?1:-1,O=u<m?1:-1;let F=0;const $=f+R;for(let J=a,le=u;J!==$;J+=R){const ue=x?le:J,he=x?J:le;if(F===1===this.image.get(ue,he)){if(F===2)return $e.distance(J,le,a,u);F++}if(T+=b,T>0){if(le===m)break;le+=O,T-=v}}return F===2?$e.distance(f+R,m,a,u):NaN}findAlignmentInRegion(a,u,f,m){const x=Math.floor(m*a),v=Math.max(0,u-x),b=Math.min(this.image.getWidth()-1,u+x);if(b-v<a*3)throw new H("Alignment top exceeds estimated module size.");const T=Math.max(0,f-x),R=Math.min(this.image.getHeight()-1,f+x);if(R-T<a*3)throw new H("Alignment bottom exceeds estimated module size.");return new Xc(this.image,v,T,b-v,R-T,a,this.resultPointCallback).find()}}class Wi{constructor(){this.decoder=new Un}getDecoder(){return this.decoder}decode(a,u){let f,m;if(u!=null&&u.get(j.PURE_BARCODE)!==void 0){const T=Wi.extractPureBits(a.getBlackMatrix());f=this.decoder.decodeBitMatrix(T,u),m=Wi.NO_POINTS}else{const T=new aa(a.getBlackMatrix()).detect(u);f=this.decoder.decodeBitMatrix(T.getBits(),u),m=T.getPoints()}f.getOther()instanceof Sp&&f.getOther().applyMirroredCorrection(m);const x=new Q(f.getText(),f.getRawBytes(),void 0,m,ne.QR_CODE,void 0),v=f.getByteSegments();v!==null&&x.putMetadata(de.BYTE_SEGMENTS,v);const b=f.getECLevel();return b!==null&&x.putMetadata(de.ERROR_CORRECTION_LEVEL,b),f.hasStructuredAppend()&&(x.putMetadata(de.STRUCTURED_APPEND_SEQUENCE,f.getStructuredAppendSequenceNumber()),x.putMetadata(de.STRUCTURED_APPEND_PARITY,f.getStructuredAppendParity())),x}reset(){}static extractPureBits(a){const u=a.getTopLeftOnBit(),f=a.getBottomRightOnBit();if(u===null||f===null)throw new H;const m=this.moduleSize(u,a);let x=u[1],v=f[1],b=u[0],T=f[0];if(b>=T||x>=v)throw new H;if(v-x!==T-b&&(T=b+(v-x),T>=a.getWidth()))throw new H;const R=Math.round((T-b+1)/m),O=Math.round((v-x+1)/m);if(R<=0||O<=0)throw new H;if(O!==R)throw new H;const F=Math.floor(m/2);x+=F,b+=F;const $=b+Math.floor((R-1)*m)-T;if($>0){if($>F)throw new H;b-=$}const J=x+Math.floor((O-1)*m)-v;if(J>0){if(J>F)throw new H;x-=J}const le=new z(R,O);for(let ue=0;ue<O;ue++){const he=x+Math.floor(ue*m);for(let ge=0;ge<R;ge++)a.get(b+Math.floor(ge*m),he)&&le.set(ge,ue)}return le}static moduleSize(a,u){const f=u.getHeight(),m=u.getWidth();let x=a[0],v=a[1],b=!0,T=0;for(;x<m&&v<f;){if(b!==u.get(x,v)){if(++T===5)break;b=!b}x++,v++}if(x===m||v===f)throw new H;return(x-a[0])/7}}Wi.NO_POINTS=new Array;class Ze{PDF417Common(){}static getBitCountSum(a){return $e.sum(a)}static toIntArray(a){if(a==null||!a.length)return Ze.EMPTY_INT_ARRAY;const u=new Int32Array(a.length);let f=0;for(const m of a)u[f++]=m;return u}static getCodeword(a){const u=k.binarySearch(Ze.SYMBOL_TABLE,a&262143);return u<0?-1:(Ze.CODEWORD_TABLE[u]-1)%Ze.NUMBER_OF_CODEWORDS}}Ze.NUMBER_OF_CODEWORDS=929,Ze.MAX_CODEWORDS_IN_BARCODE=Ze.NUMBER_OF_CODEWORDS-1,Ze.MIN_ROWS_IN_BARCODE=3,Ze.MAX_ROWS_IN_BARCODE=90,Ze.MODULES_IN_CODEWORD=17,Ze.MODULES_IN_STOP_PATTERN=18,Ze.BARS_IN_MODULE=8,Ze.EMPTY_INT_ARRAY=new Int32Array([]),Ze.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ze.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ao{constructor(a,u){this.bits=a,this.points=u}getBits(){return this.bits}getPoints(){return this.points}}class pt{static detectMultiple(a,u,f){let m=a.getBlackMatrix(),x=pt.detect(f,m);return x.length||(m=m.clone(),m.rotate180(),x=pt.detect(f,m)),new Ao(m,x)}static detect(a,u){const f=new Array;let m=0,x=0,v=!1;for(;m<u.getHeight();){const b=pt.findVertices(u,m,x);if(b[0]==null&&b[3]==null){if(!v)break;v=!1,x=0;for(const T of f)T[1]!=null&&(m=Math.trunc(Math.max(m,T[1].getY()))),T[3]!=null&&(m=Math.max(m,Math.trunc(T[3].getY())));m+=pt.ROW_STEP;continue}if(v=!0,f.push(b),!a)break;b[2]!=null?(x=Math.trunc(b[2].getX()),m=Math.trunc(b[2].getY())):(x=Math.trunc(b[4].getX()),m=Math.trunc(b[4].getY()))}return f}static findVertices(a,u,f){const m=a.getHeight(),x=a.getWidth(),v=new Array(8);return pt.copyToResult(v,pt.findRowsWithPattern(a,m,x,u,f,pt.START_PATTERN),pt.INDEXES_START_PATTERN),v[4]!=null&&(f=Math.trunc(v[4].getX()),u=Math.trunc(v[4].getY())),pt.copyToResult(v,pt.findRowsWithPattern(a,m,x,u,f,pt.STOP_PATTERN),pt.INDEXES_STOP_PATTERN),v}static copyToResult(a,u,f){for(let m=0;m<f.length;m++)a[f[m]]=u[m]}static findRowsWithPattern(a,u,f,m,x,v){const b=new Array(4);let T=!1;const R=new Int32Array(v.length);for(;m<u;m+=pt.ROW_STEP){let F=pt.findGuardPattern(a,x,m,f,!1,v,R);if(F!=null){for(;m>0;){const $=pt.findGuardPattern(a,x,--m,f,!1,v,R);if($!=null)F=$;else{m++;break}}b[0]=new Te(F[0],m),b[1]=new Te(F[1],m),T=!0;break}}let O=m+1;if(T){let F=0,$=Int32Array.from([Math.trunc(b[0].getX()),Math.trunc(b[1].getX())]);for(;O<u;O++){const J=pt.findGuardPattern(a,$[0],O,f,!1,v,R);if(J!=null&&Math.abs($[0]-J[0])<pt.MAX_PATTERN_DRIFT&&Math.abs($[1]-J[1])<pt.MAX_PATTERN_DRIFT)$=J,F=0;else{if(F>pt.SKIPPED_ROW_COUNT_MAX)break;F++}}O-=F+1,b[2]=new Te($[0],O),b[3]=new Te($[1],O)}return O-m<pt.BARCODE_MIN_HEIGHT&&k.fill(b,null),b}static findGuardPattern(a,u,f,m,x,v,b){k.fillWithin(b,0,b.length,0);let T=u,R=0;for(;a.get(T,f)&&T>0&&R++<pt.MAX_PIXEL_DRIFT;)T--;let O=T,F=0,$=v.length;for(let J=x;O<m;O++)if(a.get(O,f)!==J)b[F]++;else{if(F===$-1){if(pt.patternMatchVariance(b,v,pt.MAX_INDIVIDUAL_VARIANCE)<pt.MAX_AVG_VARIANCE)return new Int32Array([T,O]);T+=b[0]+b[1],C.arraycopy(b,2,b,0,F-1),b[F-1]=0,b[F]=0,F--}else F++;b[F]=1,J=!J}return F===$-1&&pt.patternMatchVariance(b,v,pt.MAX_INDIVIDUAL_VARIANCE)<pt.MAX_AVG_VARIANCE?new Int32Array([T,O-1]):null}static patternMatchVariance(a,u,f){let m=a.length,x=0,v=0;for(let R=0;R<m;R++)x+=a[R],v+=u[R];if(x<v)return 1/0;let b=x/v;f*=b;let T=0;for(let R=0;R<m;R++){let O=a[R],F=u[R]*b,$=O>F?O-F:F-O;if($>f)return 1/0;T+=$}return T/x}}pt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),pt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),pt.MAX_AVG_VARIANCE=.42,pt.MAX_INDIVIDUAL_VARIANCE=.8,pt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),pt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),pt.MAX_PIXEL_DRIFT=3,pt.MAX_PATTERN_DRIFT=5,pt.SKIPPED_ROW_COUNT_MAX=25,pt.ROW_STEP=5,pt.BARCODE_MIN_HEIGHT=10;class Kn{constructor(a,u){if(u.length===0)throw new g;this.field=a;let f=u.length;if(f>1&&u[0]===0){let m=1;for(;m<f&&u[m]===0;)m++;m===f?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(f-m),C.arraycopy(u,m,this.coefficients,0,this.coefficients.length))}else this.coefficients=u}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(a===0)return this.getCoefficient(0);if(a===1){let m=0;for(let x of this.coefficients)m=this.field.add(m,x);return m}let u=this.coefficients[0],f=this.coefficients.length;for(let m=1;m<f;m++)u=this.field.add(this.field.multiply(a,u),this.coefficients[m]);return u}add(a){if(!this.field.equals(a.field))throw new g("ModulusPolys do not have same ModulusGF field");if(this.isZero())return a;if(a.isZero())return this;let u=this.coefficients,f=a.coefficients;if(u.length>f.length){let v=u;u=f,f=v}let m=new Int32Array(f.length),x=f.length-u.length;C.arraycopy(f,0,m,0,x);for(let v=x;v<f.length;v++)m[v]=this.field.add(u[v-x],f[v]);return new Kn(this.field,m)}subtract(a){if(!this.field.equals(a.field))throw new g("ModulusPolys do not have same ModulusGF field");return a.isZero()?this:this.add(a.negative())}multiply(a){return a instanceof Kn?this.multiplyOther(a):this.multiplyScalar(a)}multiplyOther(a){if(!this.field.equals(a.field))throw new g("ModulusPolys do not have same ModulusGF field");if(this.isZero()||a.isZero())return new Kn(this.field,new Int32Array([0]));let u=this.coefficients,f=u.length,m=a.coefficients,x=m.length,v=new Int32Array(f+x-1);for(let b=0;b<f;b++){let T=u[b];for(let R=0;R<x;R++)v[b+R]=this.field.add(v[b+R],this.field.multiply(T,m[R]))}return new Kn(this.field,v)}negative(){let a=this.coefficients.length,u=new Int32Array(a);for(let f=0;f<a;f++)u[f]=this.field.subtract(0,this.coefficients[f]);return new Kn(this.field,u)}multiplyScalar(a){if(a===0)return new Kn(this.field,new Int32Array([0]));if(a===1)return this;let u=this.coefficients.length,f=new Int32Array(u);for(let m=0;m<u;m++)f[m]=this.field.multiply(this.coefficients[m],a);return new Kn(this.field,f)}multiplyByMonomial(a,u){if(a<0)throw new g;if(u===0)return new Kn(this.field,new Int32Array([0]));let f=this.coefficients.length,m=new Int32Array(f+a);for(let x=0;x<f;x++)m[x]=this.field.multiply(this.coefficients[x],u);return new Kn(this.field,m)}toString(){let a=new re;for(let u=this.getDegree();u>=0;u--){let f=this.getCoefficient(u);f!==0&&(f<0?(a.append(" - "),f=-f):a.length()>0&&a.append(" + "),(u===0||f!==1)&&a.append(f),u!==0&&(u===1?a.append("x"):(a.append("x^"),a.append(u))))}return a.toString()}}class Kd{add(a,u){return(a+u)%this.modulus}subtract(a,u){return(this.modulus+a-u)%this.modulus}exp(a){return this.expTable[a]}log(a){if(a===0)throw new g;return this.logTable[a]}inverse(a){if(a===0)throw new De;return this.expTable[this.modulus-this.logTable[a]-1]}multiply(a,u){return a===0||u===0?0:this.expTable[(this.logTable[a]+this.logTable[u])%(this.modulus-1)]}getSize(){return this.modulus}equals(a){return a===this}}class Yc extends Kd{constructor(a,u){super(),this.modulus=a,this.expTable=new Int32Array(a),this.logTable=new Int32Array(a);let f=1;for(let m=0;m<a;m++)this.expTable[m]=f,f=f*u%a;for(let m=0;m<a-1;m++)this.logTable[this.expTable[m]]=m;this.zero=new Kn(this,new Int32Array([0])),this.one=new Kn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,u){if(a<0)throw new g;if(u===0)return this.zero;let f=new Int32Array(a+1);return f[0]=u,new Kn(this,f)}}Yc.PDF417_GF=new Yc(Ze.NUMBER_OF_CODEWORDS,3);class Hs{constructor(){this.field=Yc.PDF417_GF}decode(a,u,f){let m=new Kn(this.field,a),x=new Int32Array(u),v=!1;for(let le=u;le>0;le--){let ue=m.evaluateAt(this.field.exp(le));x[u-le]=ue,ue!==0&&(v=!0)}if(!v)return 0;let b=this.field.getOne();if(f!=null)for(const le of f){let ue=this.field.exp(a.length-1-le),he=new Kn(this.field,new Int32Array([this.field.subtract(0,ue),1]));b=b.multiply(he)}let T=new Kn(this.field,x),R=this.runEuclideanAlgorithm(this.field.buildMonomial(u,1),T,u),O=R[0],F=R[1],$=this.findErrorLocations(O),J=this.findErrorMagnitudes(F,O,$);for(let le=0;le<$.length;le++){let ue=a.length-1-this.field.log($[le]);if(ue<0)throw w.getChecksumInstance();a[ue]=this.field.subtract(a[ue],J[le])}return $.length}runEuclideanAlgorithm(a,u,f){if(a.getDegree()<u.getDegree()){let $=a;a=u,u=$}let m=a,x=u,v=this.field.getZero(),b=this.field.getOne();for(;x.getDegree()>=Math.round(f/2);){let $=m,J=v;if(m=x,v=b,m.isZero())throw w.getChecksumInstance();x=$;let le=this.field.getZero(),ue=m.getCoefficient(m.getDegree()),he=this.field.inverse(ue);for(;x.getDegree()>=m.getDegree()&&!x.isZero();){let ge=x.getDegree()-m.getDegree(),Oe=this.field.multiply(x.getCoefficient(x.getDegree()),he);le=le.add(this.field.buildMonomial(ge,Oe)),x=x.subtract(m.multiplyByMonomial(ge,Oe))}b=le.multiply(v).subtract(J).negative()}let T=b.getCoefficient(0);if(T===0)throw w.getChecksumInstance();let R=this.field.inverse(T),O=b.multiply(R),F=x.multiply(R);return[O,F]}findErrorLocations(a){let u=a.getDegree(),f=new Int32Array(u),m=0;for(let x=1;x<this.field.getSize()&&m<u;x++)a.evaluateAt(x)===0&&(f[m]=this.field.inverse(x),m++);if(m!==u)throw w.getChecksumInstance();return f}findErrorMagnitudes(a,u,f){let m=u.getDegree(),x=new Int32Array(m);for(let R=1;R<=m;R++)x[m-R]=this.field.multiply(R,u.getCoefficient(R));let v=new Kn(this.field,x),b=f.length,T=new Int32Array(b);for(let R=0;R<b;R++){let O=this.field.inverse(f[R]),F=this.field.subtract(0,a.evaluateAt(O)),$=this.field.inverse(v.evaluateAt(O));T[R]=this.field.multiply(F,$)}return T}}class Gi{constructor(a,u,f,m,x){a instanceof Gi?this.constructor_2(a):this.constructor_1(a,u,f,m,x)}constructor_1(a,u,f,m,x){const v=u==null||f==null,b=m==null||x==null;if(v&&b)throw new H;v?(u=new Te(0,m.getY()),f=new Te(0,x.getY())):b&&(m=new Te(a.getWidth()-1,u.getY()),x=new Te(a.getWidth()-1,f.getY())),this.image=a,this.topLeft=u,this.bottomLeft=f,this.topRight=m,this.bottomRight=x,this.minX=Math.trunc(Math.min(u.getX(),f.getX())),this.maxX=Math.trunc(Math.max(m.getX(),x.getX())),this.minY=Math.trunc(Math.min(u.getY(),m.getY())),this.maxY=Math.trunc(Math.max(f.getY(),x.getY()))}constructor_2(a){this.image=a.image,this.topLeft=a.getTopLeft(),this.bottomLeft=a.getBottomLeft(),this.topRight=a.getTopRight(),this.bottomRight=a.getBottomRight(),this.minX=a.getMinX(),this.maxX=a.getMaxX(),this.minY=a.getMinY(),this.maxY=a.getMaxY()}static merge(a,u){return a==null?u:u==null?a:new Gi(a.image,a.topLeft,a.bottomLeft,u.topRight,u.bottomRight)}addMissingRows(a,u,f){let m=this.topLeft,x=this.bottomLeft,v=this.topRight,b=this.bottomRight;if(a>0){let T=f?this.topLeft:this.topRight,R=Math.trunc(T.getY()-a);R<0&&(R=0);let O=new Te(T.getX(),R);f?m=O:v=O}if(u>0){let T=f?this.bottomLeft:this.bottomRight,R=Math.trunc(T.getY()+u);R>=this.image.getHeight()&&(R=this.image.getHeight()-1);let O=new Te(T.getX(),R);f?x=O:b=O}return new Gi(this.image,m,x,v,b)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ep{constructor(a,u,f,m){this.columnCount=a,this.errorCorrectionLevel=m,this.rowCountUpperPart=u,this.rowCountLowerPart=f,this.rowCount=u+f}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class la{constructor(){this.buffer=""}static form(a,u){let f=-1;function m(v,b,T,R,O,F){if(v==="%%")return"%";if(u[++f]===void 0)return;v=R?parseInt(R.substr(1)):void 0;let $=O?parseInt(O.substr(1)):void 0,J;switch(F){case"s":J=u[f];break;case"c":J=u[f][0];break;case"f":J=parseFloat(u[f]).toFixed(v);break;case"p":J=parseFloat(u[f]).toPrecision(v);break;case"e":J=parseFloat(u[f]).toExponential(v);break;case"x":J=parseInt(u[f]).toString($||16);break;case"d":J=parseFloat(parseInt(u[f],$||10).toPrecision(v)).toFixed(0);break}J=typeof J=="object"?JSON.stringify(J):(+J).toString($);let le=parseInt(T),ue=T&&T[0]+""=="0"?"0":" ";for(;J.length<le;)J=b!==void 0?J+ue:ue+J;return J}let x=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return a.replace(x,m)}format(a,...u){this.buffer+=la.form(a,u)}toString(){return this.buffer}}class ca{constructor(a){this.boundingBox=new Gi(a),this.codewords=new Array(a.getMaxY()-a.getMinY()+1)}getCodewordNearby(a){let u=this.getCodeword(a);if(u!=null)return u;for(let f=1;f<ca.MAX_NEARBY_DISTANCE;f++){let m=this.imageRowToCodewordIndex(a)-f;if(m>=0&&(u=this.codewords[m],u!=null)||(m=this.imageRowToCodewordIndex(a)+f,m<this.codewords.length&&(u=this.codewords[m],u!=null)))return u}return null}imageRowToCodewordIndex(a){return a-this.boundingBox.getMinY()}setCodeword(a,u){this.codewords[this.imageRowToCodewordIndex(a)]=u}getCodeword(a){return this.codewords[this.imageRowToCodewordIndex(a)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const a=new la;let u=0;for(const f of this.codewords){if(f==null){a.format("%3d:    |   %n",u++);continue}a.format("%3d: %3d|%3d%n",u++,f.getRowNumber(),f.getValue())}return a.toString()}}ca.MAX_NEARBY_DISTANCE=5;class Tl{constructor(){this.values=new Map}setValue(a){a=Math.trunc(a);let u=this.values.get(a);u==null&&(u=0),u++,this.values.set(a,u)}getValue(){let a=-1,u=new Array;for(const[f,m]of this.values.entries()){const x={getKey:()=>f,getValue:()=>m};x.getValue()>a?(a=x.getValue(),u=[],u.push(x.getKey())):x.getValue()===a&&u.push(x.getKey())}return Ze.toIntArray(u)}getConfidence(a){return this.values.get(a)}}class tt extends ca{constructor(a,u){super(a),this._isLeft=u}setRowNumbers(){for(let a of this.getCodewords())a!=null&&a.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(a){let u=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(u,a);let f=this.getBoundingBox(),m=this._isLeft?f.getTopLeft():f.getTopRight(),x=this._isLeft?f.getBottomLeft():f.getBottomRight(),v=this.imageRowToCodewordIndex(Math.trunc(m.getY())),b=this.imageRowToCodewordIndex(Math.trunc(x.getY())),T=-1,R=1,O=0;for(let F=v;F<b;F++){if(u[F]==null)continue;let $=u[F],J=$.getRowNumber()-T;if(J===0)O++;else if(J===1)R=Math.max(R,O),O=1,T=$.getRowNumber();else if(J<0||$.getRowNumber()>=a.getRowCount()||J>F)u[F]=null;else{let le;R>2?le=(R-2)*J:le=J;let ue=le>=F;for(let he=1;he<=le&&!ue;he++)ue=u[F-he]!=null;ue?u[F]=null:(T=$.getRowNumber(),O=1)}}}getRowHeights(){let a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);let u=new Int32Array(a.getRowCount());for(let f of this.getCodewords())if(f!=null){let m=f.getRowNumber();if(m>=u.length)continue;u[m]++}return u}adjustIncompleteIndicatorColumnRowNumbers(a){let u=this.getBoundingBox(),f=this._isLeft?u.getTopLeft():u.getTopRight(),m=this._isLeft?u.getBottomLeft():u.getBottomRight(),x=this.imageRowToCodewordIndex(Math.trunc(f.getY())),v=this.imageRowToCodewordIndex(Math.trunc(m.getY())),b=this.getCodewords(),T=-1;for(let R=x;R<v;R++){if(b[R]==null)continue;let O=b[R];O.setRowNumberAsRowIndicatorColumn();let F=O.getRowNumber()-T;F===0||(F===1?T=O.getRowNumber():O.getRowNumber()>=a.getRowCount()?b[R]=null:T=O.getRowNumber())}}getBarcodeMetadata(){let a=this.getCodewords(),u=new Tl,f=new Tl,m=new Tl,x=new Tl;for(let b of a){if(b==null)continue;b.setRowNumberAsRowIndicatorColumn();let T=b.getValue()%30,R=b.getRowNumber();switch(this._isLeft||(R+=2),R%3){case 0:f.setValue(T*3+1);break;case 1:x.setValue(T/3),m.setValue(T%3);break;case 2:u.setValue(T+1);break}}if(u.getValue().length===0||f.getValue().length===0||m.getValue().length===0||x.getValue().length===0||u.getValue()[0]<1||f.getValue()[0]+m.getValue()[0]<Ze.MIN_ROWS_IN_BARCODE||f.getValue()[0]+m.getValue()[0]>Ze.MAX_ROWS_IN_BARCODE)return null;let v=new Ep(u.getValue()[0],f.getValue()[0],m.getValue()[0],x.getValue()[0]);return this.removeIncorrectCodewords(a,v),v}removeIncorrectCodewords(a,u){for(let f=0;f<a.length;f++){let m=a[f];if(a[f]==null)continue;let x=m.getValue()%30,v=m.getRowNumber();if(v>u.getRowCount()){a[f]=null;continue}switch(this._isLeft||(v+=2),v%3){case 0:x*3+1!==u.getRowCountUpperPart()&&(a[f]=null);break;case 1:(Math.trunc(x/3)!==u.getErrorCorrectionLevel()||x%3!==u.getRowCountLowerPart())&&(a[f]=null);break;case 2:x+1!==u.getColumnCount()&&(a[f]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ce{constructor(a,u){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=a,this.barcodeColumnCount=a.getColumnCount(),this.boundingBox=u,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let a=Ze.MAX_CODEWORDS_IN_BARCODE,u;do u=a,a=this.adjustRowNumbersAndGetCount();while(a>0&&a<u);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(a){a!=null&&a.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let a=this.adjustRowNumbersByRow();if(a===0)return 0;for(let u=1;u<this.barcodeColumnCount+1;u++){let f=this.detectionResultColumns[u].getCodewords();for(let m=0;m<f.length;m++)f[m]!=null&&(f[m].hasValidRowNumber()||this.adjustRowNumbers(u,m,f))}return a}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let a=this.detectionResultColumns[0].getCodewords(),u=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let f=0;f<a.length;f++)if(a[f]!=null&&u[f]!=null&&a[f].getRowNumber()===u[f].getRowNumber())for(let m=1;m<=this.barcodeColumnCount;m++){let x=this.detectionResultColumns[m].getCodewords()[f];x!=null&&(x.setRowNumber(a[f].getRowNumber()),x.hasValidRowNumber()||(this.detectionResultColumns[m].getCodewords()[f]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let a=0,u=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let f=0;f<u.length;f++){if(u[f]==null)continue;let m=u[f].getRowNumber(),x=0;for(let v=this.barcodeColumnCount+1;v>0&&x<this.ADJUST_ROW_NUMBER_SKIP;v--){let b=this.detectionResultColumns[v].getCodewords()[f];b!=null&&(x=ce.adjustRowNumberIfValid(m,x,b),b.hasValidRowNumber()||a++)}}return a}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let a=0,u=this.detectionResultColumns[0].getCodewords();for(let f=0;f<u.length;f++){if(u[f]==null)continue;let m=u[f].getRowNumber(),x=0;for(let v=1;v<this.barcodeColumnCount+1&&x<this.ADJUST_ROW_NUMBER_SKIP;v++){let b=this.detectionResultColumns[v].getCodewords()[f];b!=null&&(x=ce.adjustRowNumberIfValid(m,x,b),b.hasValidRowNumber()||a++)}}return a}static adjustRowNumberIfValid(a,u,f){return f==null||f.hasValidRowNumber()||(f.isValidRowNumber(a)?(f.setRowNumber(a),u=0):++u),u}adjustRowNumbers(a,u,f){if(!this.detectionResultColumns[a-1])return;let m=f[u],x=this.detectionResultColumns[a-1].getCodewords(),v=x;this.detectionResultColumns[a+1]!=null&&(v=this.detectionResultColumns[a+1].getCodewords());let b=new Array(14);b[2]=x[u],b[3]=v[u],u>0&&(b[0]=f[u-1],b[4]=x[u-1],b[5]=v[u-1]),u>1&&(b[8]=f[u-2],b[10]=x[u-2],b[11]=v[u-2]),u<f.length-1&&(b[1]=f[u+1],b[6]=x[u+1],b[7]=v[u+1]),u<f.length-2&&(b[9]=f[u+2],b[12]=x[u+2],b[13]=v[u+2]);for(let T of b)if(ce.adjustRowNumber(m,T))return}static adjustRowNumber(a,u){return u==null?!1:u.hasValidRowNumber()&&u.getBucket()===a.getBucket()?(a.setRowNumber(u.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(a){this.boundingBox=a}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(a,u){this.detectionResultColumns[a]=u}getDetectionResultColumn(a){return this.detectionResultColumns[a]}toString(){let a=this.detectionResultColumns[0];a==null&&(a=this.detectionResultColumns[this.barcodeColumnCount+1]);let u=new la;for(let f=0;f<a.getCodewords().length;f++){u.format("CW %3d:",f);for(let m=0;m<this.barcodeColumnCount+2;m++){if(this.detectionResultColumns[m]==null){u.format("    |   ");continue}let x=this.detectionResultColumns[m].getCodewords()[f];if(x==null){u.format("    |   ");continue}u.format(" %3d|%3d",x.getRowNumber(),x.getValue())}u.format("%n")}return u.toString()}}class Re{constructor(a,u,f,m){this.rowNumber=Re.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(a),this.endX=Math.trunc(u),this.bucket=Math.trunc(f),this.value=Math.trunc(m)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(a){return a!==Re.BARCODE_ROW_UNKNOWN&&this.bucket===a%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(a){this.rowNumber=a}toString(){return this.rowNumber+"|"+this.value}}Re.BARCODE_ROW_UNKNOWN=-1;class Le{static initialize(){for(let a=0;a<Ze.SYMBOL_TABLE.length;a++){let u=Ze.SYMBOL_TABLE[a],f=u&1;for(let m=0;m<Ze.BARS_IN_MODULE;m++){let x=0;for(;(u&1)===f;)x+=1,u>>=1;f=u&1,Le.RATIOS_TABLE[a]||(Le.RATIOS_TABLE[a]=new Array(Ze.BARS_IN_MODULE)),Le.RATIOS_TABLE[a][Ze.BARS_IN_MODULE-m-1]=Math.fround(x/Ze.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(a){let u=Le.getDecodedCodewordValue(Le.sampleBitCounts(a));return u!==-1?u:Le.getClosestDecodedValue(a)}static sampleBitCounts(a){let u=$e.sum(a),f=new Int32Array(Ze.BARS_IN_MODULE),m=0,x=0;for(let v=0;v<Ze.MODULES_IN_CODEWORD;v++){let b=u/(2*Ze.MODULES_IN_CODEWORD)+v*u/Ze.MODULES_IN_CODEWORD;x+a[m]<=b&&(x+=a[m],m++),f[m]++}return f}static getDecodedCodewordValue(a){let u=Le.getBitValue(a);return Ze.getCodeword(u)===-1?-1:u}static getBitValue(a){let u=0;for(let f=0;f<a.length;f++)for(let m=0;m<a[f];m++)u=u<<1|(f%2===0?1:0);return Math.trunc(u)}static getClosestDecodedValue(a){let u=$e.sum(a),f=new Array(Ze.BARS_IN_MODULE);if(u>1)for(let v=0;v<f.length;v++)f[v]=Math.fround(a[v]/u);let m=qt.MAX_VALUE,x=-1;this.bSymbolTableReady||Le.initialize();for(let v=0;v<Le.RATIOS_TABLE.length;v++){let b=0,T=Le.RATIOS_TABLE[v];for(let R=0;R<Ze.BARS_IN_MODULE;R++){let O=Math.fround(T[R]-f[R]);if(b+=Math.fround(O*O),b>=m)break}b<m&&(m=b,x=Ze.SYMBOL_TABLE[v])}return x}}Le.bSymbolTableReady=!1,Le.RATIOS_TABLE=new Array(Ze.SYMBOL_TABLE.length).map(B=>new Array(Ze.BARS_IN_MODULE));class en{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(a){this.segmentIndex=a}getFileId(){return this.fileId}setFileId(a){this.fileId=a}getOptionalData(){return this.optionalData}setOptionalData(a){this.optionalData=a}isLastSegment(){return this.lastSegment}setLastSegment(a){this.lastSegment=a}getSegmentCount(){return this.segmentCount}setSegmentCount(a){this.segmentCount=a}getSender(){return this.sender||null}setSender(a){this.sender=a}getAddressee(){return this.addressee||null}setAddressee(a){this.addressee=a}getFileName(){return this.fileName}setFileName(a){this.fileName=a}getFileSize(){return this.fileSize}setFileSize(a){this.fileSize=a}getChecksum(){return this.checksum}setChecksum(a){this.checksum=a}getTimestamp(){return this.timestamp}setTimestamp(a){this.timestamp=a}}class tr{static parseLong(a,u=void 0){return parseInt(a,u)}}class En extends d{}En.kind="NullPointerException";class Br{writeBytes(a){this.writeBytesOffset(a,0,a.length)}writeBytesOffset(a,u,f){if(a==null)throw new En;if(u<0||u>a.length||f<0||u+f>a.length||u+f<0)throw new A;if(f===0)return;for(let m=0;m<f;m++)this.write(a[u+m])}flush(){}close(){}}class hi extends d{}class ua extends Br{constructor(a=32){if(super(),this.count=0,a<0)throw new g("Negative initial size: "+a);this.buf=new Uint8Array(a)}ensureCapacity(a){a-this.buf.length>0&&this.grow(a)}grow(a){let f=this.buf.length<<1;if(f-a<0&&(f=a),f<0){if(a<0)throw new hi;f=I.MAX_VALUE}this.buf=k.copyOfUint8Array(this.buf,f)}write(a){this.ensureCapacity(this.count+1),this.buf[this.count]=a,this.count+=1}writeBytesOffset(a,u,f){if(u<0||u>a.length||f<0||u+f-a.length>0)throw new A;this.ensureCapacity(this.count+f),C.arraycopy(a,u,this.buf,this.count,f),this.count+=f}writeTo(a){a.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return k.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(a){return a?typeof a=="string"?this.toString_string(a):this.toString_number(a):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(a){return new String(this.buf).toString()}toString_number(a){return new String(this.buf).toString()}close(){}}var Ft;(function(B){B[B.ALPHA=0]="ALPHA",B[B.LOWER=1]="LOWER",B[B.MIXED=2]="MIXED",B[B.PUNCT=3]="PUNCT",B[B.ALPHA_SHIFT=4]="ALPHA_SHIFT",B[B.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ft||(Ft={}));function Yn(){if(typeof window<"u")return window.BigInt||null;if(typeof Zd<"u")return Zd.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let kl;function pi(B){if(typeof kl>"u"&&(kl=Yn()),kl===null)throw new Error("BigInt is not supported!");return kl(B)}function hj(){let B=[];B[0]=pi(1);let a=pi(900);B[1]=a;for(let u=2;u<16;u++)B[u]=B[u-1]*a;return B}class me{static decode(a,u){let f=new re(""),m=L.ISO8859_1;f.enableDecoding(m);let x=1,v=a[x++],b=new en;for(;x<a[0];){switch(v){case me.TEXT_COMPACTION_MODE_LATCH:x=me.textCompaction(a,x,f);break;case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:x=me.byteCompaction(v,a,m,x,f);break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(a[x++]);break;case me.NUMERIC_COMPACTION_MODE_LATCH:x=me.numericCompaction(a,x,f);break;case me.ECI_CHARSET:L.getCharacterSetECIByValue(a[x++]);break;case me.ECI_GENERAL_PURPOSE:x+=2;break;case me.ECI_USER_DEFINED:x++;break;case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:x=me.decodeMacroBlock(a,x,b);break;case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:throw new _;default:x--,x=me.textCompaction(a,x,f);break}if(x<a.length)v=a[x++];else throw _.getFormatInstance()}if(f.length()===0)throw _.getFormatInstance();let T=new pe(null,f.toString(),null,u);return T.setOther(b),T}static decodeMacroBlock(a,u,f){if(u+me.NUMBER_OF_SEQUENCE_CODEWORDS>a[0])throw _.getFormatInstance();let m=new Int32Array(me.NUMBER_OF_SEQUENCE_CODEWORDS);for(let b=0;b<me.NUMBER_OF_SEQUENCE_CODEWORDS;b++,u++)m[b]=a[u];f.setSegmentIndex(I.parseInt(me.decodeBase900toBase10(m,me.NUMBER_OF_SEQUENCE_CODEWORDS)));let x=new re;u=me.textCompaction(a,u,x),f.setFileId(x.toString());let v=-1;for(a[u]===me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(v=u+1);u<a[0];)switch(a[u]){case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(u++,a[u]){case me.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let b=new re;u=me.textCompaction(a,u+1,b),f.setFileName(b.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let T=new re;u=me.textCompaction(a,u+1,T),f.setSender(T.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let R=new re;u=me.textCompaction(a,u+1,R),f.setAddressee(R.toString());break;case me.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let O=new re;u=me.numericCompaction(a,u+1,O),f.setSegmentCount(I.parseInt(O.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let F=new re;u=me.numericCompaction(a,u+1,F),f.setTimestamp(tr.parseLong(F.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let $=new re;u=me.numericCompaction(a,u+1,$),f.setChecksum(I.parseInt($.toString()));break;case me.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let J=new re;u=me.numericCompaction(a,u+1,J),f.setFileSize(tr.parseLong(J.toString()));break;default:throw _.getFormatInstance()}break;case me.MACRO_PDF417_TERMINATOR:u++,f.setLastSegment(!0);break;default:throw _.getFormatInstance()}if(v!==-1){let b=u-v;f.isLastSegment()&&b--,f.setOptionalData(k.copyOfRange(a,v,v+b))}return u}static textCompaction(a,u,f){let m=new Int32Array((a[0]-u)*2),x=new Int32Array((a[0]-u)*2),v=0,b=!1;for(;u<a[0]&&!b;){let T=a[u++];if(T<me.TEXT_COMPACTION_MODE_LATCH)m[v]=T/30,m[v+1]=T%30,v+=2;else switch(T){case me.TEXT_COMPACTION_MODE_LATCH:m[v++]=me.TEXT_COMPACTION_MODE_LATCH;break;case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:u--,b=!0;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m[v]=me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,T=a[u++],x[v]=T,v++;break}}return me.decodeTextCompaction(m,x,v,f),u}static decodeTextCompaction(a,u,f,m){let x=Ft.ALPHA,v=Ft.ALPHA,b=0;for(;b<f;){let T=a[b],R="";switch(x){case Ft.ALPHA:if(T<26)R=String.fromCharCode(65+T);else switch(T){case 26:R=" ";break;case me.LL:x=Ft.LOWER;break;case me.ML:x=Ft.MIXED;break;case me.PS:v=x,x=Ft.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(u[b]);break;case me.TEXT_COMPACTION_MODE_LATCH:x=Ft.ALPHA;break}break;case Ft.LOWER:if(T<26)R=String.fromCharCode(97+T);else switch(T){case 26:R=" ";break;case me.AS:v=x,x=Ft.ALPHA_SHIFT;break;case me.ML:x=Ft.MIXED;break;case me.PS:v=x,x=Ft.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(u[b]);break;case me.TEXT_COMPACTION_MODE_LATCH:x=Ft.ALPHA;break}break;case Ft.MIXED:if(T<me.PL)R=me.MIXED_CHARS[T];else switch(T){case me.PL:x=Ft.PUNCT;break;case 26:R=" ";break;case me.LL:x=Ft.LOWER;break;case me.AL:x=Ft.ALPHA;break;case me.PS:v=x,x=Ft.PUNCT_SHIFT;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(u[b]);break;case me.TEXT_COMPACTION_MODE_LATCH:x=Ft.ALPHA;break}break;case Ft.PUNCT:if(T<me.PAL)R=me.PUNCT_CHARS[T];else switch(T){case me.PAL:x=Ft.ALPHA;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(u[b]);break;case me.TEXT_COMPACTION_MODE_LATCH:x=Ft.ALPHA;break}break;case Ft.ALPHA_SHIFT:if(x=v,T<26)R=String.fromCharCode(65+T);else switch(T){case 26:R=" ";break;case me.TEXT_COMPACTION_MODE_LATCH:x=Ft.ALPHA;break}break;case Ft.PUNCT_SHIFT:if(x=v,T<me.PAL)R=me.PUNCT_CHARS[T];else switch(T){case me.PAL:x=Ft.ALPHA;break;case me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(u[b]);break;case me.TEXT_COMPACTION_MODE_LATCH:x=Ft.ALPHA;break}break}R!==""&&m.append(R),b++}}static byteCompaction(a,u,f,m,x){let v=new ua,b=0,T=0,R=!1;switch(a){case me.BYTE_COMPACTION_MODE_LATCH:let O=new Int32Array(6),F=u[m++];for(;m<u[0]&&!R;)switch(O[b++]=F,T=900*T+F,F=u[m++],F){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:m--,R=!0;break;default:if(b%5===0&&b>0){for(let $=0;$<6;++$)v.write(Number(pi(T)>>pi(8*(5-$))));T=0,b=0}break}m===u[0]&&F<me.TEXT_COMPACTION_MODE_LATCH&&(O[b++]=F);for(let $=0;$<b;$++)v.write(O[$]);break;case me.BYTE_COMPACTION_MODE_LATCH_6:for(;m<u[0]&&!R;){let $=u[m++];if($<me.TEXT_COMPACTION_MODE_LATCH)b++,T=900*T+$;else switch($){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.NUMERIC_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:m--,R=!0;break}if(b%5===0&&b>0){for(let J=0;J<6;++J)v.write(Number(pi(T)>>pi(8*(5-J))));T=0,b=0}}break}return x.append(K.decode(v.toByteArray(),f)),m}static numericCompaction(a,u,f){let m=0,x=!1,v=new Int32Array(me.MAX_NUMERIC_CODEWORDS);for(;u<a[0]&&!x;){let b=a[u++];if(u===a[0]&&(x=!0),b<me.TEXT_COMPACTION_MODE_LATCH)v[m]=b,m++;else switch(b){case me.TEXT_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH:case me.BYTE_COMPACTION_MODE_LATCH_6:case me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case me.MACRO_PDF417_TERMINATOR:u--,x=!0;break}(m%me.MAX_NUMERIC_CODEWORDS===0||b===me.NUMERIC_COMPACTION_MODE_LATCH||x)&&m>0&&(f.append(me.decodeBase900toBase10(v,m)),m=0)}return u}static decodeBase900toBase10(a,u){let f=pi(0);for(let x=0;x<u;x++)f+=me.EXP900[u-x-1]*pi(a[x]);let m=f.toString();if(m.charAt(0)!=="1")throw new _;return m.substring(1)}}me.TEXT_COMPACTION_MODE_LATCH=900,me.BYTE_COMPACTION_MODE_LATCH=901,me.NUMERIC_COMPACTION_MODE_LATCH=902,me.BYTE_COMPACTION_MODE_LATCH_6=924,me.ECI_USER_DEFINED=925,me.ECI_GENERAL_PURPOSE=926,me.ECI_CHARSET=927,me.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,me.MACRO_PDF417_TERMINATOR=922,me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,me.MAX_NUMERIC_CODEWORDS=15,me.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,me.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,me.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,me.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,me.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,me.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,me.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,me.PL=25,me.LL=27,me.AS=27,me.ML=28,me.AL=28,me.PS=29,me.PAL=29,me.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,me.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",me.EXP900=Yn()?hj():[],me.NUMBER_OF_SEQUENCE_CODEWORDS=2;class St{constructor(){}static decode(a,u,f,m,x,v,b){let T=new Gi(a,u,f,m,x),R=null,O=null,F;for(let le=!0;;le=!1){if(u!=null&&(R=St.getRowIndicatorColumn(a,T,u,!0,v,b)),m!=null&&(O=St.getRowIndicatorColumn(a,T,m,!1,v,b)),F=St.merge(R,O),F==null)throw H.getNotFoundInstance();let ue=F.getBoundingBox();if(le&&ue!=null&&(ue.getMinY()<T.getMinY()||ue.getMaxY()>T.getMaxY()))T=ue;else break}F.setBoundingBox(T);let $=F.getBarcodeColumnCount()+1;F.setDetectionResultColumn(0,R),F.setDetectionResultColumn($,O);let J=R!=null;for(let le=1;le<=$;le++){let ue=J?le:$-le;if(F.getDetectionResultColumn(ue)!==void 0)continue;let he;ue===0||ue===$?he=new tt(T,ue===0):he=new ca(T),F.setDetectionResultColumn(ue,he);let ge=-1,Oe=ge;for(let Pe=T.getMinY();Pe<=T.getMaxY();Pe++){if(ge=St.getStartColumn(F,ue,Pe,J),ge<0||ge>T.getMaxX()){if(Oe===-1)continue;ge=Oe}let ke=St.detectCodeword(a,T.getMinX(),T.getMaxX(),J,ge,Pe,v,b);ke!=null&&(he.setCodeword(Pe,ke),Oe=ge,v=Math.min(v,ke.getWidth()),b=Math.max(b,ke.getWidth()))}}return St.createDecoderResult(F)}static merge(a,u){if(a==null&&u==null)return null;let f=St.getBarcodeMetadata(a,u);if(f==null)return null;let m=Gi.merge(St.adjustBoundingBox(a),St.adjustBoundingBox(u));return new ce(f,m)}static adjustBoundingBox(a){if(a==null)return null;let u=a.getRowHeights();if(u==null)return null;let f=St.getMax(u),m=0;for(let b of u)if(m+=f-b,b>0)break;let x=a.getCodewords();for(let b=0;m>0&&x[b]==null;b++)m--;let v=0;for(let b=u.length-1;b>=0&&(v+=f-u[b],!(u[b]>0));b--);for(let b=x.length-1;v>0&&x[b]==null;b--)v--;return a.getBoundingBox().addMissingRows(m,v,a.isLeft())}static getMax(a){let u=-1;for(let f of a)u=Math.max(u,f);return u}static getBarcodeMetadata(a,u){let f;if(a==null||(f=a.getBarcodeMetadata())==null)return u==null?null:u.getBarcodeMetadata();let m;return u==null||(m=u.getBarcodeMetadata())==null?f:f.getColumnCount()!==m.getColumnCount()&&f.getErrorCorrectionLevel()!==m.getErrorCorrectionLevel()&&f.getRowCount()!==m.getRowCount()?null:f}static getRowIndicatorColumn(a,u,f,m,x,v){let b=new tt(u,m);for(let T=0;T<2;T++){let R=T===0?1:-1,O=Math.trunc(Math.trunc(f.getX()));for(let F=Math.trunc(Math.trunc(f.getY()));F<=u.getMaxY()&&F>=u.getMinY();F+=R){let $=St.detectCodeword(a,0,a.getWidth(),m,O,F,x,v);$!=null&&(b.setCodeword(F,$),m?O=$.getStartX():O=$.getEndX())}}return b}static adjustCodewordCount(a,u){let f=u[0][1],m=f.getValue(),x=a.getBarcodeColumnCount()*a.getBarcodeRowCount()-St.getNumberOfECCodeWords(a.getBarcodeECLevel());if(m.length===0){if(x<1||x>Ze.MAX_CODEWORDS_IN_BARCODE)throw H.getNotFoundInstance();f.setValue(x)}else m[0]!==x&&f.setValue(x)}static createDecoderResult(a){let u=St.createBarcodeMatrix(a);St.adjustCodewordCount(a,u);let f=new Array,m=new Int32Array(a.getBarcodeRowCount()*a.getBarcodeColumnCount()),x=[],v=new Array;for(let T=0;T<a.getBarcodeRowCount();T++)for(let R=0;R<a.getBarcodeColumnCount();R++){let O=u[T][R+1].getValue(),F=T*a.getBarcodeColumnCount()+R;O.length===0?f.push(F):O.length===1?m[F]=O[0]:(v.push(F),x.push(O))}let b=new Array(x.length);for(let T=0;T<b.length;T++)b[T]=x[T];return St.createDecoderResultFromAmbiguousValues(a.getBarcodeECLevel(),m,Ze.toIntArray(f),Ze.toIntArray(v),b)}static createDecoderResultFromAmbiguousValues(a,u,f,m,x){let v=new Int32Array(m.length),b=100;for(;b-- >0;){for(let T=0;T<v.length;T++)u[m[T]]=x[T][v[T]];try{return St.decodeCodewords(u,a,f)}catch(T){if(!(T instanceof w))throw T}if(v.length===0)throw w.getChecksumInstance();for(let T=0;T<v.length;T++)if(v[T]<x[T].length-1){v[T]++;break}else if(v[T]=0,T===v.length-1)throw w.getChecksumInstance()}throw w.getChecksumInstance()}static createBarcodeMatrix(a){let u=Array.from({length:a.getBarcodeRowCount()},()=>new Array(a.getBarcodeColumnCount()+2));for(let m=0;m<u.length;m++)for(let x=0;x<u[m].length;x++)u[m][x]=new Tl;let f=0;for(let m of a.getDetectionResultColumns()){if(m!=null){for(let x of m.getCodewords())if(x!=null){let v=x.getRowNumber();if(v>=0){if(v>=u.length)continue;u[v][f].setValue(x.getValue())}}}f++}return u}static isValidBarcodeColumn(a,u){return u>=0&&u<=a.getBarcodeColumnCount()+1}static getStartColumn(a,u,f,m){let x=m?1:-1,v=null;if(St.isValidBarcodeColumn(a,u-x)&&(v=a.getDetectionResultColumn(u-x).getCodeword(f)),v!=null)return m?v.getEndX():v.getStartX();if(v=a.getDetectionResultColumn(u).getCodewordNearby(f),v!=null)return m?v.getStartX():v.getEndX();if(St.isValidBarcodeColumn(a,u-x)&&(v=a.getDetectionResultColumn(u-x).getCodewordNearby(f)),v!=null)return m?v.getEndX():v.getStartX();let b=0;for(;St.isValidBarcodeColumn(a,u-x);){u-=x;for(let T of a.getDetectionResultColumn(u).getCodewords())if(T!=null)return(m?T.getEndX():T.getStartX())+x*b*(T.getEndX()-T.getStartX());b++}return m?a.getBoundingBox().getMinX():a.getBoundingBox().getMaxX()}static detectCodeword(a,u,f,m,x,v,b,T){x=St.adjustCodewordStartColumn(a,u,f,m,x,v);let R=St.getModuleBitCount(a,u,f,m,x,v);if(R==null)return null;let O,F=$e.sum(R);if(m)O=x+F;else{for(let le=0;le<R.length/2;le++){let ue=R[le];R[le]=R[R.length-1-le],R[R.length-1-le]=ue}O=x,x=O-F}if(!St.checkCodewordSkew(F,b,T))return null;let $=Le.getDecodedValue(R),J=Ze.getCodeword($);return J===-1?null:new Re(x,O,St.getCodewordBucketNumber($),J)}static getModuleBitCount(a,u,f,m,x,v){let b=x,T=new Int32Array(8),R=0,O=m?1:-1,F=m;for(;(m?b<f:b>=u)&&R<T.length;)a.get(b,v)===F?(T[R]++,b+=O):(R++,F=!F);return R===T.length||b===(m?f:u)&&R===T.length-1?T:null}static getNumberOfECCodeWords(a){return 2<<a}static adjustCodewordStartColumn(a,u,f,m,x,v){let b=x,T=m?-1:1;for(let R=0;R<2;R++){for(;(m?b>=u:b<f)&&m===a.get(b,v);){if(Math.abs(x-b)>St.CODEWORD_SKEW_SIZE)return x;b+=T}T=-T,m=!m}return b}static checkCodewordSkew(a,u,f){return u-St.CODEWORD_SKEW_SIZE<=a&&a<=f+St.CODEWORD_SKEW_SIZE}static decodeCodewords(a,u,f){if(a.length===0)throw _.getFormatInstance();let m=1<<u+1,x=St.correctErrors(a,f,m);St.verifyCodewordCount(a,m);let v=me.decode(a,""+u);return v.setErrorsCorrected(x),v.setErasures(f.length),v}static correctErrors(a,u,f){if(u!=null&&u.length>f/2+St.MAX_ERRORS||f<0||f>St.MAX_EC_CODEWORDS)throw w.getChecksumInstance();return St.errorCorrection.decode(a,f,u)}static verifyCodewordCount(a,u){if(a.length<4)throw _.getFormatInstance();let f=a[0];if(f>a.length)throw _.getFormatInstance();if(f===0)if(u<a.length)a[0]=a.length-u;else throw _.getFormatInstance()}static getBitCountForCodeword(a){let u=new Int32Array(8),f=0,m=u.length-1;for(;!((a&1)!==f&&(f=a&1,m--,m<0));)u[m]++,a>>=1;return u}static getCodewordBucketNumber(a){return a instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(a):this.getCodewordBucketNumber_number(a)}static getCodewordBucketNumber_number(a){return St.getCodewordBucketNumber(St.getBitCountForCodeword(a))}static getCodewordBucketNumber_Int32Array(a){return(a[0]-a[2]+a[4]-a[6]+9)%9}static toString(a){let u=new la;for(let f=0;f<a.length;f++){u.format("Row %2d: ",f);for(let m=0;m<a[f].length;m++){let x=a[f][m];x.getValue().length===0?u.format("        ",null):u.format("%4d(%2d)",x.getValue()[0],x.getConfidence(x.getValue()[0]))}u.format("%n")}return u.toString()}}St.CODEWORD_SKEW_SIZE=2,St.MAX_ERRORS=3,St.MAX_EC_CODEWORDS=512,St.errorCorrection=new Hs;class Cr{decode(a,u=null){let f=Cr.decode(a,u,!1);if(f==null||f.length===0||f[0]==null)throw H.getNotFoundInstance();return f[0]}decodeMultiple(a,u=null){try{return Cr.decode(a,u,!0)}catch(f){throw f instanceof _||f instanceof w?H.getNotFoundInstance():f}}static decode(a,u,f){const m=new Array,x=pt.detectMultiple(a,u,f);for(const v of x.getPoints()){const b=St.decode(x.getBits(),v[4],v[5],v[6],v[7],Cr.getMinCodewordWidth(v),Cr.getMaxCodewordWidth(v)),T=new Q(b.getText(),b.getRawBytes(),void 0,v,ne.PDF_417);T.putMetadata(de.ERROR_CORRECTION_LEVEL,b.getECLevel());const R=b.getOther();R!=null&&T.putMetadata(de.PDF417_EXTRA_METADATA,R),m.push(T)}return m.map(v=>v)}static getMaxWidth(a,u){return a==null||u==null?0:Math.trunc(Math.abs(a.getX()-u.getX()))}static getMinWidth(a,u){return a==null||u==null?I.MAX_VALUE:Math.trunc(Math.abs(a.getX()-u.getX()))}static getMaxCodewordWidth(a){return Math.floor(Math.max(Math.max(Cr.getMaxWidth(a[0],a[4]),Cr.getMaxWidth(a[6],a[2])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN),Math.max(Cr.getMaxWidth(a[1],a[5]),Cr.getMaxWidth(a[7],a[3])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(a){return Math.floor(Math.min(Math.min(Cr.getMinWidth(a[0],a[4]),Cr.getMinWidth(a[6],a[2])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN),Math.min(Cr.getMinWidth(a[1],a[5]),Cr.getMinWidth(a[7],a[3])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN)))}reset(){}}class Np extends d{}Np.kind="ReaderException";class US{constructor(a,u){this.verbose=a===!0,u&&this.setHints(u)}decode(a,u){return u&&this.setHints(u),this.decodeInternal(a)}decodeWithState(a){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(a)}setHints(a){this.hints=a;const u=!r(a)&&a.get(j.TRY_HARDER)===!0,f=r(a)?null:a.get(j.POSSIBLE_FORMATS),m=new Array;if(!r(f)){const x=f.some(v=>v===ne.UPC_A||v===ne.UPC_E||v===ne.EAN_13||v===ne.EAN_8||v===ne.CODABAR||v===ne.CODE_39||v===ne.CODE_93||v===ne.CODE_128||v===ne.ITF||v===ne.RSS_14||v===ne.RSS_EXPANDED);x&&!u&&m.push(new Lr(a,this.verbose)),f.includes(ne.QR_CODE)&&m.push(new Wi),f.includes(ne.DATA_MATRIX)&&m.push(new fi),f.includes(ne.AZTEC)&&m.push(new Gt),f.includes(ne.PDF_417)&&m.push(new Cr),x&&u&&m.push(new Lr(a,this.verbose))}m.length===0&&(u||m.push(new Lr(a,this.verbose)),m.push(new Wi),m.push(new fi),m.push(new Gt),m.push(new Cr),u&&m.push(new Lr(a,this.verbose))),this.readers=m}reset(){if(this.readers!==null)for(const a of this.readers)a.reset()}decodeInternal(a){if(this.readers===null)throw new Np("No readers where selected, nothing can be read.");for(const u of this.readers)try{return u.decode(a,this.hints)}catch(f){if(f instanceof Np)continue}throw new H("No MultiFormat Readers were able to detect the code.")}}class pj extends G{constructor(a=null,u=500){const f=new US;f.setHints(a),super(f,u)}decodeBitmap(a){return this.reader.decodeWithState(a)}}class mj extends G{constructor(a=500){super(new Cr,a)}}class gj extends G{constructor(a=500){super(new Wi,a)}}var Ax;(function(B){B[B.ERROR_CORRECTION=0]="ERROR_CORRECTION",B[B.CHARACTER_SET=1]="CHARACTER_SET",B[B.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",B[B.MIN_SIZE=3]="MIN_SIZE",B[B.MAX_SIZE=4]="MAX_SIZE",B[B.MARGIN=5]="MARGIN",B[B.PDF417_COMPACT=6]="PDF417_COMPACT",B[B.PDF417_COMPACTION=7]="PDF417_COMPACTION",B[B.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",B[B.AZTEC_LAYERS=9]="AZTEC_LAYERS",B[B.QR_VERSION=10]="QR_VERSION"})(Ax||(Ax={}));var nr=Ax;class Tx{constructor(a){this.field=a,this.cachedGenerators=[],this.cachedGenerators.push(new Se(a,Int32Array.from([1])))}buildGenerator(a){const u=this.cachedGenerators;if(a>=u.length){let f=u[u.length-1];const m=this.field;for(let x=u.length;x<=a;x++){const v=f.multiply(new Se(m,Int32Array.from([1,m.exp(x-1+m.getGeneratorBase())])));u.push(v),f=v}}return u[a]}encode(a,u){if(u===0)throw new g("No error correction bytes");const f=a.length-u;if(f<=0)throw new g("No data bytes provided");const m=this.buildGenerator(u),x=new Int32Array(f);C.arraycopy(a,0,x,0,f);let v=new Se(this.field,x);v=v.multiplyByMonomial(u,1);const T=v.divide(m)[1].getCoefficients(),R=u-T.length;for(let O=0;O<R;O++)a[f+O]=0;C.arraycopy(T,0,a,f+R,T.length)}}class _n{constructor(){}static applyMaskPenaltyRule1(a){return _n.applyMaskPenaltyRule1Internal(a,!0)+_n.applyMaskPenaltyRule1Internal(a,!1)}static applyMaskPenaltyRule2(a){let u=0;const f=a.getArray(),m=a.getWidth(),x=a.getHeight();for(let v=0;v<x-1;v++){const b=f[v];for(let T=0;T<m-1;T++){const R=b[T];R===b[T+1]&&R===f[v+1][T]&&R===f[v+1][T+1]&&u++}}return _n.N2*u}static applyMaskPenaltyRule3(a){let u=0;const f=a.getArray(),m=a.getWidth(),x=a.getHeight();for(let v=0;v<x;v++)for(let b=0;b<m;b++){const T=f[v];b+6<m&&T[b]===1&&T[b+1]===0&&T[b+2]===1&&T[b+3]===1&&T[b+4]===1&&T[b+5]===0&&T[b+6]===1&&(_n.isWhiteHorizontal(T,b-4,b)||_n.isWhiteHorizontal(T,b+7,b+11))&&u++,v+6<x&&f[v][b]===1&&f[v+1][b]===0&&f[v+2][b]===1&&f[v+3][b]===1&&f[v+4][b]===1&&f[v+5][b]===0&&f[v+6][b]===1&&(_n.isWhiteVertical(f,b,v-4,v)||_n.isWhiteVertical(f,b,v+7,v+11))&&u++}return u*_n.N3}static isWhiteHorizontal(a,u,f){u=Math.max(u,0),f=Math.min(f,a.length);for(let m=u;m<f;m++)if(a[m]===1)return!1;return!0}static isWhiteVertical(a,u,f,m){f=Math.max(f,0),m=Math.min(m,a.length);for(let x=f;x<m;x++)if(a[x][u]===1)return!1;return!0}static applyMaskPenaltyRule4(a){let u=0;const f=a.getArray(),m=a.getWidth(),x=a.getHeight();for(let T=0;T<x;T++){const R=f[T];for(let O=0;O<m;O++)R[O]===1&&u++}const v=a.getHeight()*a.getWidth();return Math.floor(Math.abs(u*2-v)*10/v)*_n.N4}static getDataMaskBit(a,u,f){let m,x;switch(a){case 0:m=f+u&1;break;case 1:m=f&1;break;case 2:m=u%3;break;case 3:m=(f+u)%3;break;case 4:m=Math.floor(f/2)+Math.floor(u/3)&1;break;case 5:x=f*u,m=(x&1)+x%3;break;case 6:x=f*u,m=(x&1)+x%3&1;break;case 7:x=f*u,m=x%3+(f+u&1)&1;break;default:throw new g("Invalid mask pattern: "+a)}return m===0}static applyMaskPenaltyRule1Internal(a,u){let f=0;const m=u?a.getHeight():a.getWidth(),x=u?a.getWidth():a.getHeight(),v=a.getArray();for(let b=0;b<m;b++){let T=0,R=-1;for(let O=0;O<x;O++){const F=u?v[b][O]:v[O][b];F===R?T++:(T>=5&&(f+=_n.N1+(T-5)),T=1,R=F)}T>=5&&(f+=_n.N1+(T-5))}return f}}_n.N1=3,_n.N2=3,_n.N3=40,_n.N4=10;class Ap{constructor(a,u){this.width=a,this.height=u;const f=new Array(u);for(let m=0;m!==u;m++)f[m]=new Uint8Array(a);this.bytes=f}getHeight(){return this.height}getWidth(){return this.width}get(a,u){return this.bytes[u][a]}getArray(){return this.bytes}setNumber(a,u,f){this.bytes[u][a]=f}setBoolean(a,u,f){this.bytes[u][a]=f?1:0}clear(a){for(const u of this.bytes)k.fill(u,a)}equals(a){if(!(a instanceof Ap))return!1;const u=a;if(this.width!==u.width||this.height!==u.height)return!1;for(let f=0,m=this.height;f<m;++f){const x=this.bytes[f],v=u.bytes[f];for(let b=0,T=this.width;b<T;++b)if(x[b]!==v[b])return!1}return!0}toString(){const a=new re;for(let u=0,f=this.height;u<f;++u){const m=this.bytes[u];for(let x=0,v=this.width;x<v;++x)switch(m[x]){case 0:a.append(" 0");break;case 1:a.append(" 1");break;default:a.append("  ");break}a.append(`
`)}return a.toString()}}class Il{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const a=new re;return a.append(`<<
`),a.append(" mode: "),a.append(this.mode?this.mode.toString():"null"),a.append(`
 ecLevel: `),a.append(this.ecLevel?this.ecLevel.toString():"null"),a.append(`
 version: `),a.append(this.version?this.version.toString():"null"),a.append(`
 maskPattern: `),a.append(this.maskPattern.toString()),this.matrix?(a.append(`
 matrix:
`),a.append(this.matrix.toString())):a.append(`
 matrix: null
`),a.append(`>>
`),a.toString()}setMode(a){this.mode=a}setECLevel(a){this.ecLevel=a}setVersion(a){this.version=a}setMaskPattern(a){this.maskPattern=a}setMatrix(a){this.matrix=a}static isValidMaskPattern(a){return a>=0&&a<Il.NUM_MASK_PATTERNS}}Il.NUM_MASK_PATTERNS=8;class tn extends d{}tn.kind="WriterException";class ct{constructor(){}static clearMatrix(a){a.clear(255)}static buildMatrix(a,u,f,m,x){ct.clearMatrix(x),ct.embedBasicPatterns(f,x),ct.embedTypeInfo(u,m,x),ct.maybeEmbedVersionInfo(f,x),ct.embedDataBits(a,m,x)}static embedBasicPatterns(a,u){ct.embedPositionDetectionPatternsAndSeparators(u),ct.embedDarkDotAtLeftBottomCorner(u),ct.maybeEmbedPositionAdjustmentPatterns(a,u),ct.embedTimingPatterns(u)}static embedTypeInfo(a,u,f){const m=new M;ct.makeTypeInfoBits(a,u,m);for(let x=0,v=m.getSize();x<v;++x){const b=m.get(m.getSize()-1-x),T=ct.TYPE_INFO_COORDINATES[x],R=T[0],O=T[1];if(f.setBoolean(R,O,b),x<8){const F=f.getWidth()-x-1;f.setBoolean(F,8,b)}else{const $=f.getHeight()-7+(x-8);f.setBoolean(8,$,b)}}}static maybeEmbedVersionInfo(a,u){if(a.getVersionNumber()<7)return;const f=new M;ct.makeVersionInfoBits(a,f);let m=6*3-1;for(let x=0;x<6;++x)for(let v=0;v<3;++v){const b=f.get(m);m--,u.setBoolean(x,u.getHeight()-11+v,b),u.setBoolean(u.getHeight()-11+v,x,b)}}static embedDataBits(a,u,f){let m=0,x=-1,v=f.getWidth()-1,b=f.getHeight()-1;for(;v>0;){for(v===6&&(v-=1);b>=0&&b<f.getHeight();){for(let T=0;T<2;++T){const R=v-T;if(!ct.isEmpty(f.get(R,b)))continue;let O;m<a.getSize()?(O=a.get(m),++m):O=!1,u!==255&&_n.getDataMaskBit(u,R,b)&&(O=!O),f.setBoolean(R,b,O)}b+=x}x=-x,b+=x,v-=2}if(m!==a.getSize())throw new tn("Not all bits consumed: "+m+"/"+a.getSize())}static findMSBSet(a){return 32-I.numberOfLeadingZeros(a)}static calculateBCHCode(a,u){if(u===0)throw new g("0 polynomial");const f=ct.findMSBSet(u);for(a<<=f-1;ct.findMSBSet(a)>=f;)a^=u<<ct.findMSBSet(a)-f;return a}static makeTypeInfoBits(a,u,f){if(!Il.isValidMaskPattern(u))throw new tn("Invalid mask pattern");const m=a.getBits()<<3|u;f.appendBits(m,5);const x=ct.calculateBCHCode(m,ct.TYPE_INFO_POLY);f.appendBits(x,10);const v=new M;if(v.appendBits(ct.TYPE_INFO_MASK_PATTERN,15),f.xor(v),f.getSize()!==15)throw new tn("should not happen but we got: "+f.getSize())}static makeVersionInfoBits(a,u){u.appendBits(a.getVersionNumber(),6);const f=ct.calculateBCHCode(a.getVersionNumber(),ct.VERSION_INFO_POLY);if(u.appendBits(f,12),u.getSize()!==18)throw new tn("should not happen but we got: "+u.getSize())}static isEmpty(a){return a===255}static embedTimingPatterns(a){for(let u=8;u<a.getWidth()-8;++u){const f=(u+1)%2;ct.isEmpty(a.get(u,6))&&a.setNumber(u,6,f),ct.isEmpty(a.get(6,u))&&a.setNumber(6,u,f)}}static embedDarkDotAtLeftBottomCorner(a){if(a.get(8,a.getHeight()-8)===0)throw new tn;a.setNumber(8,a.getHeight()-8,1)}static embedHorizontalSeparationPattern(a,u,f){for(let m=0;m<8;++m){if(!ct.isEmpty(f.get(a+m,u)))throw new tn;f.setNumber(a+m,u,0)}}static embedVerticalSeparationPattern(a,u,f){for(let m=0;m<7;++m){if(!ct.isEmpty(f.get(a,u+m)))throw new tn;f.setNumber(a,u+m,0)}}static embedPositionAdjustmentPattern(a,u,f){for(let m=0;m<5;++m){const x=ct.POSITION_ADJUSTMENT_PATTERN[m];for(let v=0;v<5;++v)f.setNumber(a+v,u+m,x[v])}}static embedPositionDetectionPattern(a,u,f){for(let m=0;m<7;++m){const x=ct.POSITION_DETECTION_PATTERN[m];for(let v=0;v<7;++v)f.setNumber(a+v,u+m,x[v])}}static embedPositionDetectionPatternsAndSeparators(a){const u=ct.POSITION_DETECTION_PATTERN[0].length;ct.embedPositionDetectionPattern(0,0,a),ct.embedPositionDetectionPattern(a.getWidth()-u,0,a),ct.embedPositionDetectionPattern(0,a.getWidth()-u,a);const f=8;ct.embedHorizontalSeparationPattern(0,f-1,a),ct.embedHorizontalSeparationPattern(a.getWidth()-f,f-1,a),ct.embedHorizontalSeparationPattern(0,a.getWidth()-f,a);const m=7;ct.embedVerticalSeparationPattern(m,0,a),ct.embedVerticalSeparationPattern(a.getHeight()-m-1,0,a),ct.embedVerticalSeparationPattern(m,a.getHeight()-m,a)}static maybeEmbedPositionAdjustmentPatterns(a,u){if(a.getVersionNumber()<2)return;const f=a.getVersionNumber()-1,m=ct.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[f];for(let x=0,v=m.length;x!==v;x++){const b=m[x];if(b>=0)for(let T=0;T!==v;T++){const R=m[T];R>=0&&ct.isEmpty(u.get(R,b))&&ct.embedPositionAdjustmentPattern(R-2,b-2,u)}}}}ct.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ct.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ct.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ct.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ct.VERSION_INFO_POLY=7973,ct.TYPE_INFO_POLY=1335,ct.TYPE_INFO_MASK_PATTERN=21522;class xj{constructor(a,u){this.dataBytes=a,this.errorCorrectionBytes=u}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class hn{constructor(){}static calculateMaskPenalty(a){return _n.applyMaskPenaltyRule1(a)+_n.applyMaskPenaltyRule2(a)+_n.applyMaskPenaltyRule3(a)+_n.applyMaskPenaltyRule4(a)}static encode(a,u,f=null){let m=hn.DEFAULT_BYTE_MODE_ENCODING;const x=f!==null&&f.get(nr.CHARACTER_SET)!==void 0;x&&(m=f.get(nr.CHARACTER_SET).toString());const v=this.chooseMode(a,m),b=new M;if(v===Je.BYTE&&(x||hn.DEFAULT_BYTE_MODE_ENCODING!==m)){const Pe=L.getCharacterSetECIByName(m);Pe!==void 0&&this.appendECI(Pe,b)}this.appendModeInfo(v,b);const T=new M;this.appendBytes(a,v,T,m);let R;if(f!==null&&f.get(nr.QR_VERSION)!==void 0){const Pe=Number.parseInt(f.get(nr.QR_VERSION).toString(),10);R=qe.getVersionForNumber(Pe);const ke=this.calculateBitsNeeded(v,b,T,R);if(!this.willFit(ke,R,u))throw new tn("Data too big for requested version")}else R=this.recommendVersion(u,v,b,T);const O=new M;O.appendBitArray(b);const F=v===Je.BYTE?T.getSizeInBytes():a.length;this.appendLengthInfo(F,R,v,O),O.appendBitArray(T);const $=R.getECBlocksForLevel(u),J=R.getTotalCodewords()-$.getTotalECCodewords();this.terminateBits(J,O);const le=this.interleaveWithECBytes(O,R.getTotalCodewords(),J,$.getNumBlocks()),ue=new Il;ue.setECLevel(u),ue.setMode(v),ue.setVersion(R);const he=R.getDimensionForVersion(),ge=new Ap(he,he),Oe=this.chooseMaskPattern(le,u,R,ge);return ue.setMaskPattern(Oe),ct.buildMatrix(le,u,R,Oe,ge),ue.setMatrix(ge),ue}static recommendVersion(a,u,f,m){const x=this.calculateBitsNeeded(u,f,m,qe.getVersionForNumber(1)),v=this.chooseVersion(x,a),b=this.calculateBitsNeeded(u,f,m,v);return this.chooseVersion(b,a)}static calculateBitsNeeded(a,u,f,m){return u.getSize()+a.getCharacterCountBits(m)+f.getSize()}static getAlphanumericCode(a){return a<hn.ALPHANUMERIC_TABLE.length?hn.ALPHANUMERIC_TABLE[a]:-1}static chooseMode(a,u=null){if(L.SJIS.getName()===u&&this.isOnlyDoubleByteKanji(a))return Je.KANJI;let f=!1,m=!1;for(let x=0,v=a.length;x<v;++x){const b=a.charAt(x);if(hn.isDigit(b))f=!0;else if(this.getAlphanumericCode(b.charCodeAt(0))!==-1)m=!0;else return Je.BYTE}return m?Je.ALPHANUMERIC:f?Je.NUMERIC:Je.BYTE}static isOnlyDoubleByteKanji(a){let u;try{u=K.encode(a,L.SJIS)}catch{return!1}const f=u.length;if(f%2!==0)return!1;for(let m=0;m<f;m+=2){const x=u[m]&255;if((x<129||x>159)&&(x<224||x>235))return!1}return!0}static chooseMaskPattern(a,u,f,m){let x=Number.MAX_SAFE_INTEGER,v=-1;for(let b=0;b<Il.NUM_MASK_PATTERNS;b++){ct.buildMatrix(a,u,f,b,m);let T=this.calculateMaskPenalty(m);T<x&&(x=T,v=b)}return v}static chooseVersion(a,u){for(let f=1;f<=40;f++){const m=qe.getVersionForNumber(f);if(hn.willFit(a,m,u))return m}throw new tn("Data too big")}static willFit(a,u,f){const m=u.getTotalCodewords(),v=u.getECBlocksForLevel(f).getTotalECCodewords(),b=m-v,T=(a+7)/8;return b>=T}static terminateBits(a,u){const f=a*8;if(u.getSize()>f)throw new tn("data bits cannot fit in the QR Code"+u.getSize()+" > "+f);for(let v=0;v<4&&u.getSize()<f;++v)u.appendBit(!1);const m=u.getSize()&7;if(m>0)for(let v=m;v<8;v++)u.appendBit(!1);const x=a-u.getSizeInBytes();for(let v=0;v<x;++v)u.appendBits(v&1?17:236,8);if(u.getSize()!==f)throw new tn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(a,u,f,m,x,v){if(m>=f)throw new tn("Block ID too large");const b=a%f,T=f-b,R=Math.floor(a/f),O=R+1,F=Math.floor(u/f),$=F+1,J=R-F,le=O-$;if(J!==le)throw new tn("EC bytes mismatch");if(f!==T+b)throw new tn("RS blocks mismatch");if(a!==(F+J)*T+($+le)*b)throw new tn("Total bytes mismatch");m<T?(x[0]=F,v[0]=J):(x[0]=$,v[0]=le)}static interleaveWithECBytes(a,u,f,m){if(a.getSizeInBytes()!==f)throw new tn("Number of bits and data bytes does not match");let x=0,v=0,b=0;const T=new Array;for(let O=0;O<m;++O){const F=new Int32Array(1),$=new Int32Array(1);hn.getNumDataBytesAndNumECBytesForBlockID(u,f,m,O,F,$);const J=F[0],le=new Uint8Array(J);a.toBytes(8*x,le,0,J);const ue=hn.generateECBytes(le,$[0]);T.push(new xj(le,ue)),v=Math.max(v,J),b=Math.max(b,ue.length),x+=F[0]}if(f!==x)throw new tn("Data bytes does not match offset");const R=new M;for(let O=0;O<v;++O)for(const F of T){const $=F.getDataBytes();O<$.length&&R.appendBits($[O],8)}for(let O=0;O<b;++O)for(const F of T){const $=F.getErrorCorrectionBytes();O<$.length&&R.appendBits($[O],8)}if(u!==R.getSizeInBytes())throw new tn("Interleaving error: "+u+" and "+R.getSizeInBytes()+" differ.");return R}static generateECBytes(a,u){const f=a.length,m=new Int32Array(f+u);for(let v=0;v<f;v++)m[v]=a[v]&255;new Tx(xe.QR_CODE_FIELD_256).encode(m,u);const x=new Uint8Array(u);for(let v=0;v<u;v++)x[v]=m[f+v];return x}static appendModeInfo(a,u){u.appendBits(a.getBits(),4)}static appendLengthInfo(a,u,f,m){const x=f.getCharacterCountBits(u);if(a>=1<<x)throw new tn(a+" is bigger than "+((1<<x)-1));m.appendBits(a,x)}static appendBytes(a,u,f,m){switch(u){case Je.NUMERIC:hn.appendNumericBytes(a,f);break;case Je.ALPHANUMERIC:hn.appendAlphanumericBytes(a,f);break;case Je.BYTE:hn.append8BitBytes(a,f,m);break;case Je.KANJI:hn.appendKanjiBytes(a,f);break;default:throw new tn("Invalid mode: "+u)}}static getDigit(a){return a.charCodeAt(0)-48}static isDigit(a){const u=hn.getDigit(a);return u>=0&&u<=9}static appendNumericBytes(a,u){const f=a.length;let m=0;for(;m<f;){const x=hn.getDigit(a.charAt(m));if(m+2<f){const v=hn.getDigit(a.charAt(m+1)),b=hn.getDigit(a.charAt(m+2));u.appendBits(x*100+v*10+b,10),m+=3}else if(m+1<f){const v=hn.getDigit(a.charAt(m+1));u.appendBits(x*10+v,7),m+=2}else u.appendBits(x,4),m++}}static appendAlphanumericBytes(a,u){const f=a.length;let m=0;for(;m<f;){const x=hn.getAlphanumericCode(a.charCodeAt(m));if(x===-1)throw new tn;if(m+1<f){const v=hn.getAlphanumericCode(a.charCodeAt(m+1));if(v===-1)throw new tn;u.appendBits(x*45+v,11),m+=2}else u.appendBits(x,6),m++}}static append8BitBytes(a,u,f){let m;try{m=K.encode(a,f)}catch(x){throw new tn(x)}for(let x=0,v=m.length;x!==v;x++){const b=m[x];u.appendBits(b,8)}}static appendKanjiBytes(a,u){let f;try{f=K.encode(a,L.SJIS)}catch(x){throw new tn(x)}const m=f.length;for(let x=0;x<m;x+=2){const v=f[x]&255,b=f[x+1]&255,T=v<<8&4294967295|b;let R=-1;if(T>=33088&&T<=40956?R=T-33088:T>=57408&&T<=60351&&(R=T-49472),R===-1)throw new tn("Invalid byte sequence");const O=(R>>8)*192+(R&255);u.appendBits(O,13)}}static appendECI(a,u){u.appendBits(Je.ECI.getBits(),4),u.appendBits(a.getValue(),8)}}hn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),hn.DEFAULT_BYTE_MODE_ENCODING=L.UTF8.getName();class Rl{write(a,u,f,m=null){if(a.length===0)throw new g("Found empty contents");if(u<0||f<0)throw new g("Requested dimensions are too small: "+u+"x"+f);let x=Ht.L,v=Rl.QUIET_ZONE_SIZE;m!==null&&(m.get(nr.ERROR_CORRECTION)!==void 0&&(x=Ht.fromString(m.get(nr.ERROR_CORRECTION).toString())),m.get(nr.MARGIN)!==void 0&&(v=Number.parseInt(m.get(nr.MARGIN).toString(),10)));const b=hn.encode(a,x,m);return this.renderResult(b,u,f,v)}writeToDom(a,u,f,m,x=null){typeof a=="string"&&(a=document.querySelector(a));const v=this.write(u,f,m,x);a&&a.appendChild(v)}renderResult(a,u,f,m){const x=a.getMatrix();if(x===null)throw new nt;const v=x.getWidth(),b=x.getHeight(),T=v+m*2,R=b+m*2,O=Math.max(u,T),F=Math.max(f,R),$=Math.min(Math.floor(O/T),Math.floor(F/R)),J=Math.floor((O-v*$)/2),le=Math.floor((F-b*$)/2),ue=this.createSVGElement(O,F);for(let he=0,ge=le;he<b;he++,ge+=$)for(let Oe=0,Pe=J;Oe<v;Oe++,Pe+=$)if(x.get(Oe,he)===1){const ke=this.createSvgRectElement(Pe,ge,$,$);ue.appendChild(ke)}return ue}createSVGElement(a,u){const f=document.createElementNS(Rl.SVG_NS,"svg");return f.setAttributeNS(null,"height",a.toString()),f.setAttributeNS(null,"width",u.toString()),f}createSvgRectElement(a,u,f,m){const x=document.createElementNS(Rl.SVG_NS,"rect");return x.setAttributeNS(null,"x",a.toString()),x.setAttributeNS(null,"y",u.toString()),x.setAttributeNS(null,"height",f.toString()),x.setAttributeNS(null,"width",m.toString()),x.setAttributeNS(null,"fill","#000000"),x}}Rl.QUIET_ZONE_SIZE=4,Rl.SVG_NS="http://www.w3.org/2000/svg";class qc{encode(a,u,f,m,x){if(a.length===0)throw new g("Found empty contents");if(u!==ne.QR_CODE)throw new g("Can only encode QR_CODE, but got "+u);if(f<0||m<0)throw new g(`Requested dimensions are too small: ${f}x${m}`);let v=Ht.L,b=qc.QUIET_ZONE_SIZE;x!==null&&(x.get(nr.ERROR_CORRECTION)!==void 0&&(v=Ht.fromString(x.get(nr.ERROR_CORRECTION).toString())),x.get(nr.MARGIN)!==void 0&&(b=Number.parseInt(x.get(nr.MARGIN).toString(),10)));const T=hn.encode(a,v,x);return qc.renderResult(T,f,m,b)}static renderResult(a,u,f,m){const x=a.getMatrix();if(x===null)throw new nt;const v=x.getWidth(),b=x.getHeight(),T=v+m*2,R=b+m*2,O=Math.max(u,T),F=Math.max(f,R),$=Math.min(Math.floor(O/T),Math.floor(F/R)),J=Math.floor((O-v*$)/2),le=Math.floor((F-b*$)/2),ue=new z(O,F);for(let he=0,ge=le;he<b;he++,ge+=$)for(let Oe=0,Pe=J;Oe<v;Oe++,Pe+=$)x.get(Oe,he)===1&&ue.setRegion(Pe,ge,$,$);return ue}}qc.QUIET_ZONE_SIZE=4;class yj{encode(a,u,f,m,x){let v;switch(u){case ne.QR_CODE:v=new qc;break;default:throw new g("No encoder available for format "+u)}return v.encode(a,u,f,m,x)}}class Xi extends W{constructor(a,u,f,m,x,v,b,T){if(super(v,b),this.yuvData=a,this.dataWidth=u,this.dataHeight=f,this.left=m,this.top=x,m+v>u||x+b>f)throw new g("Crop rectangle does not fit within image data.");T&&this.reverseHorizontal(v,b)}getRow(a,u){if(a<0||a>=this.getHeight())throw new g("Requested row is outside the image: "+a);const f=this.getWidth();(u==null||u.length<f)&&(u=new Uint8ClampedArray(f));const m=(a+this.top)*this.dataWidth+this.left;return C.arraycopy(this.yuvData,m,u,0,f),u}getMatrix(){const a=this.getWidth(),u=this.getHeight();if(a===this.dataWidth&&u===this.dataHeight)return this.yuvData;const f=a*u,m=new Uint8ClampedArray(f);let x=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return C.arraycopy(this.yuvData,x,m,0,f),m;for(let v=0;v<u;v++){const b=v*a;C.arraycopy(this.yuvData,x,m,b,a),x+=this.dataWidth}return m}isCropSupported(){return!0}crop(a,u,f,m){return new Xi(this.yuvData,this.dataWidth,this.dataHeight,this.left+a,this.top+u,f,m,!1)}renderThumbnail(){const a=this.getWidth()/Xi.THUMBNAIL_SCALE_FACTOR,u=this.getHeight()/Xi.THUMBNAIL_SCALE_FACTOR,f=new Int32Array(a*u),m=this.yuvData;let x=this.top*this.dataWidth+this.left;for(let v=0;v<u;v++){const b=v*a;for(let T=0;T<a;T++){const R=m[x+T*Xi.THUMBNAIL_SCALE_FACTOR]&255;f[b+T]=4278190080|R*65793}x+=this.dataWidth*Xi.THUMBNAIL_SCALE_FACTOR}return f}getThumbnailWidth(){return this.getWidth()/Xi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Xi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(a,u){const f=this.yuvData;for(let m=0,x=this.top*this.dataWidth+this.left;m<u;m++,x+=this.dataWidth){const v=x+a/2;for(let b=x,T=x+a-1;b<v;b++,T--){const R=f[b];f[b]=f[T],f[T]=R}}}invert(){return new V(this)}}Xi.THUMBNAIL_SCALE_FACTOR=2;class kx extends W{constructor(a,u,f,m,x,v,b){if(super(u,f),this.dataWidth=m,this.dataHeight=x,this.left=v,this.top=b,a.BYTES_PER_ELEMENT===4){const T=u*f,R=new Uint8ClampedArray(T);for(let O=0;O<T;O++){const F=a[O],$=F>>16&255,J=F>>7&510,le=F&255;R[O]=($+J+le)/4&255}this.luminances=R}else this.luminances=a;if(m===void 0&&(this.dataWidth=u),x===void 0&&(this.dataHeight=f),v===void 0&&(this.left=0),b===void 0&&(this.top=0),this.left+u>this.dataWidth||this.top+f>this.dataHeight)throw new g("Crop rectangle does not fit within image data.")}getRow(a,u){if(a<0||a>=this.getHeight())throw new g("Requested row is outside the image: "+a);const f=this.getWidth();(u==null||u.length<f)&&(u=new Uint8ClampedArray(f));const m=(a+this.top)*this.dataWidth+this.left;return C.arraycopy(this.luminances,m,u,0,f),u}getMatrix(){const a=this.getWidth(),u=this.getHeight();if(a===this.dataWidth&&u===this.dataHeight)return this.luminances;const f=a*u,m=new Uint8ClampedArray(f);let x=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return C.arraycopy(this.luminances,x,m,0,f),m;for(let v=0;v<u;v++){const b=v*a;C.arraycopy(this.luminances,x,m,b,a),x+=this.dataWidth}return m}isCropSupported(){return!0}crop(a,u,f,m){return new kx(this.luminances,f,m,this.dataWidth,this.dataHeight,this.left+a,this.top+u)}invert(){return new V(this)}}class $S extends L{static forName(a){return this.getCharacterSetECIByName(a)}}class Ix{}Ix.ISO_8859_1=L.ISO8859_1;class WS{isCompact(){return this.compact}setCompact(a){this.compact=a}getSize(){return this.size}setSize(a){this.size=a}getLayers(){return this.layers}setLayers(a){this.layers=a}getCodeWords(){return this.codeWords}setCodeWords(a){this.codeWords=a}getMatrix(){return this.matrix}setMatrix(a){this.matrix=a}}class GS{static singletonList(a){return[a]}static min(a,u){return a.sort(u)[0]}}class wj{constructor(a){this.previous=a}getPrevious(){return this.previous}}class Zc extends wj{constructor(a,u,f){super(a),this.value=u,this.bitCount=f}appendTo(a,u){a.appendBits(this.value,this.bitCount)}add(a,u){return new Zc(this,a,u)}addBinaryShift(a,u){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Zc(this,a,u)}toString(){let a=this.value&(1<<this.bitCount)-1;return a|=1<<this.bitCount,"<"+I.toBinaryString(a|1<<this.bitCount).substring(1)+">"}}class Rx extends Zc{constructor(a,u,f){super(a,0,0),this.binaryShiftStart=u,this.binaryShiftByteCount=f}appendTo(a,u){for(let f=0;f<this.binaryShiftByteCount;f++)(f===0||f===31&&this.binaryShiftByteCount<=62)&&(a.appendBits(31,5),this.binaryShiftByteCount>62?a.appendBits(this.binaryShiftByteCount-31,16):f===0?a.appendBits(Math.min(this.binaryShiftByteCount,31),5):a.appendBits(this.binaryShiftByteCount-31,5)),a.appendBits(u[this.binaryShiftStart+f],8)}addBinaryShift(a,u){return new Rx(this,a,u)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function vj(B,a,u){return new Rx(B,a,u)}function Yd(B,a,u){return new Zc(B,a,u)}const bj=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],da=0,Tp=1,Us=2,XS=3,Ki=4,Cj=new Zc(null,0,0),Mx=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Sj(B){for(let a of B)k.fill(a,-1);return B[da][Ki]=0,B[Tp][Ki]=0,B[Tp][da]=28,B[XS][Ki]=0,B[Us][Ki]=0,B[Us][da]=15,B}const KS=Sj(k.createInt32Array(6,6));class Yi{constructor(a,u,f,m){this.token=a,this.mode=u,this.binaryShiftByteCount=f,this.bitCount=m}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(a,u){let f=this.bitCount,m=this.token;if(a!==this.mode){let v=Mx[this.mode][a];m=Yd(m,v&65535,v>>16),f+=v>>16}let x=a===Us?4:5;return m=Yd(m,u,x),new Yi(m,a,0,f+x)}shiftAndAppend(a,u){let f=this.token,m=this.mode===Us?4:5;return f=Yd(f,KS[this.mode][a],m),f=Yd(f,u,5),new Yi(f,this.mode,0,this.bitCount+m+5)}addBinaryShiftChar(a){let u=this.token,f=this.mode,m=this.bitCount;if(this.mode===Ki||this.mode===Us){let b=Mx[f][da];u=Yd(u,b&65535,b>>16),m+=b>>16,f=da}let x=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,v=new Yi(u,f,this.binaryShiftByteCount+1,m+x);return v.binaryShiftByteCount===2078&&(v=v.endBinaryShift(a+1)),v}endBinaryShift(a){if(this.binaryShiftByteCount===0)return this;let u=this.token;return u=vj(u,a-this.binaryShiftByteCount,this.binaryShiftByteCount),new Yi(u,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(a){let u=this.bitCount+(Mx[this.mode][a.mode]>>16);return this.binaryShiftByteCount<a.binaryShiftByteCount?u+=Yi.calculateBinaryShiftCost(a)-Yi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>a.binaryShiftByteCount&&a.binaryShiftByteCount>0&&(u+=10),u<=a.bitCount}toBitArray(a){let u=[];for(let m=this.endBinaryShift(a.length).token;m!==null;m=m.getPrevious())u.unshift(m);let f=new M;for(const m of u)m.appendTo(f,a);return f}toString(){return q.format("%s bits=%d bytes=%d",bj[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(a){return a.binaryShiftByteCount>62?21:a.binaryShiftByteCount>31?20:a.binaryShiftByteCount>0?10:0}}Yi.INITIAL_STATE=new Yi(Cj,da,0,0);function Ej(B){const a=q.getCharCode(" "),u=q.getCharCode("."),f=q.getCharCode(",");B[da][a]=1;const m=q.getCharCode("Z"),x=q.getCharCode("A");for(let $=x;$<=m;$++)B[da][$]=$-x+2;B[Tp][a]=1;const v=q.getCharCode("z"),b=q.getCharCode("a");for(let $=b;$<=v;$++)B[Tp][$]=$-b+2;B[Us][a]=1;const T=q.getCharCode("9"),R=q.getCharCode("0");for(let $=R;$<=T;$++)B[Us][$]=$-R+2;B[Us][f]=12,B[Us][u]=13;const O=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let $=0;$<O.length;$++)B[XS][q.getCharCode(O[$])]=$;const F=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let $=0;$<F.length;$++)q.getCharCode(F[$])>0&&(B[Ki][q.getCharCode(F[$])]=$);return B}const _x=Ej(k.createInt32Array(5,256));class qd{constructor(a){this.text=a}encode(){const a=q.getCharCode(" "),u=q.getCharCode(`
`);let f=GS.singletonList(Yi.INITIAL_STATE);for(let x=0;x<this.text.length;x++){let v,b=x+1<this.text.length?this.text[x+1]:0;switch(this.text[x]){case q.getCharCode("\r"):v=b===u?2:0;break;case q.getCharCode("."):v=b===a?3:0;break;case q.getCharCode(","):v=b===a?4:0;break;case q.getCharCode(":"):v=b===a?5:0;break;default:v=0}v>0?(f=qd.updateStateListForPair(f,x,v),x++):f=this.updateStateListForChar(f,x)}return GS.min(f,(x,v)=>x.getBitCount()-v.getBitCount()).toBitArray(this.text)}updateStateListForChar(a,u){const f=[];for(let m of a)this.updateStateForChar(m,u,f);return qd.simplifyStates(f)}updateStateForChar(a,u,f){let m=this.text[u]&255,x=_x[a.getMode()][m]>0,v=null;for(let b=0;b<=Ki;b++){let T=_x[b][m];if(T>0){if(v==null&&(v=a.endBinaryShift(u)),!x||b===a.getMode()||b===Us){const R=v.latchAndAppend(b,T);f.push(R)}if(!x&&KS[a.getMode()][b]>=0){const R=v.shiftAndAppend(b,T);f.push(R)}}}if(a.getBinaryShiftByteCount()>0||_x[a.getMode()][m]===0){let b=a.addBinaryShiftChar(u);f.push(b)}}static updateStateListForPair(a,u,f){const m=[];for(let x of a)this.updateStateForPair(x,u,f,m);return this.simplifyStates(m)}static updateStateForPair(a,u,f,m){let x=a.endBinaryShift(u);if(m.push(x.latchAndAppend(Ki,f)),a.getMode()!==Ki&&m.push(x.shiftAndAppend(Ki,f)),f===3||f===4){let v=x.latchAndAppend(Us,16-f).latchAndAppend(Us,1);m.push(v)}if(a.getBinaryShiftByteCount()>0){let v=a.addBinaryShiftChar(u).addBinaryShiftChar(u+1);m.push(v)}}static simplifyStates(a){let u=[];for(const f of a){let m=!0;for(const x of u){if(x.isBetterThanOrEqualTo(f)){m=!1;break}f.isBetterThanOrEqualTo(x)&&(u=u.filter(v=>v!==x))}m&&u.push(f)}return u}}class jt{constructor(){}static encodeBytes(a){return jt.encode(a,jt.DEFAULT_EC_PERCENT,jt.DEFAULT_AZTEC_LAYERS)}static encode(a,u,f){let m=new qd(a).encode(),x=I.truncDivision(m.getSize()*u,100)+11,v=m.getSize()+x,b,T,R,O,F;if(f!==jt.DEFAULT_AZTEC_LAYERS){if(b=f<0,T=Math.abs(f),T>(b?jt.MAX_NB_BITS_COMPACT:jt.MAX_NB_BITS))throw new g(q.format("Illegal value %s for layers",f));R=jt.totalBitsInLayer(T,b),O=jt.WORD_SIZE[T];let ke=R-R%O;if(F=jt.stuffBits(m,O),F.getSize()+x>ke)throw new g("Data to large for user specified layer");if(b&&F.getSize()>O*64)throw new g("Data to large for user specified layer")}else{O=0,F=null;for(let ke=0;;ke++){if(ke>jt.MAX_NB_BITS)throw new g("Data too large for an Aztec code");if(b=ke<=3,T=b?ke+1:ke,R=jt.totalBitsInLayer(T,b),v>R)continue;(F==null||O!==jt.WORD_SIZE[T])&&(O=jt.WORD_SIZE[T],F=jt.stuffBits(m,O));let Mt=R-R%O;if(!(b&&F.getSize()>O*64)&&F.getSize()+x<=Mt)break}}let $=jt.generateCheckWords(F,R,O),J=F.getSize()/O,le=jt.generateModeMessage(b,T,J),ue=(b?11:14)+T*4,he=new Int32Array(ue),ge;if(b){ge=ue;for(let ke=0;ke<he.length;ke++)he[ke]=ke}else{ge=ue+1+2*I.truncDivision(I.truncDivision(ue,2)-1,15);let ke=I.truncDivision(ue,2),Mt=I.truncDivision(ge,2);for(let yt=0;yt<ke;yt++){let hs=yt+I.truncDivision(yt,15);he[ke-yt-1]=Mt-hs-1,he[ke+yt]=Mt+hs+1}}let Oe=new z(ge);for(let ke=0,Mt=0;ke<T;ke++){let yt=(T-ke)*4+(b?9:12);for(let hs=0;hs<yt;hs++){let mi=hs*2;for(let ps=0;ps<2;ps++)$.get(Mt+mi+ps)&&Oe.set(he[ke*2+ps],he[ke*2+hs]),$.get(Mt+yt*2+mi+ps)&&Oe.set(he[ke*2+hs],he[ue-1-ke*2-ps]),$.get(Mt+yt*4+mi+ps)&&Oe.set(he[ue-1-ke*2-ps],he[ue-1-ke*2-hs]),$.get(Mt+yt*6+mi+ps)&&Oe.set(he[ue-1-ke*2-hs],he[ke*2+ps])}Mt+=yt*8}if(jt.drawModeMessage(Oe,b,ge,le),b)jt.drawBullsEye(Oe,I.truncDivision(ge,2),5);else{jt.drawBullsEye(Oe,I.truncDivision(ge,2),7);for(let ke=0,Mt=0;ke<I.truncDivision(ue,2)-1;ke+=15,Mt+=16)for(let yt=I.truncDivision(ge,2)&1;yt<ge;yt+=2)Oe.set(I.truncDivision(ge,2)-Mt,yt),Oe.set(I.truncDivision(ge,2)+Mt,yt),Oe.set(yt,I.truncDivision(ge,2)-Mt),Oe.set(yt,I.truncDivision(ge,2)+Mt)}let Pe=new WS;return Pe.setCompact(b),Pe.setSize(ge),Pe.setLayers(T),Pe.setCodeWords(J),Pe.setMatrix(Oe),Pe}static drawBullsEye(a,u,f){for(let m=0;m<f;m+=2)for(let x=u-m;x<=u+m;x++)a.set(x,u-m),a.set(x,u+m),a.set(u-m,x),a.set(u+m,x);a.set(u-f,u-f),a.set(u-f+1,u-f),a.set(u-f,u-f+1),a.set(u+f,u-f),a.set(u+f,u-f+1),a.set(u+f,u+f-1)}static generateModeMessage(a,u,f){let m=new M;return a?(m.appendBits(u-1,2),m.appendBits(f-1,6),m=jt.generateCheckWords(m,28,4)):(m.appendBits(u-1,5),m.appendBits(f-1,11),m=jt.generateCheckWords(m,40,4)),m}static drawModeMessage(a,u,f,m){let x=I.truncDivision(f,2);if(u)for(let v=0;v<7;v++){let b=x-3+v;m.get(v)&&a.set(b,x-5),m.get(v+7)&&a.set(x+5,b),m.get(20-v)&&a.set(b,x+5),m.get(27-v)&&a.set(x-5,b)}else for(let v=0;v<10;v++){let b=x-5+v+I.truncDivision(v,5);m.get(v)&&a.set(b,x-7),m.get(v+10)&&a.set(x+7,b),m.get(29-v)&&a.set(b,x+7),m.get(39-v)&&a.set(x-7,b)}}static generateCheckWords(a,u,f){let m=a.getSize()/f,x=new Tx(jt.getGF(f)),v=I.truncDivision(u,f),b=jt.bitsToWords(a,f,v);x.encode(b,v-m);let T=u%f,R=new M;R.appendBits(0,T);for(const O of Array.from(b))R.appendBits(O,f);return R}static bitsToWords(a,u,f){let m=new Int32Array(f),x,v;for(x=0,v=a.getSize()/u;x<v;x++){let b=0;for(let T=0;T<u;T++)b|=a.get(x*u+T)?1<<u-T-1:0;m[x]=b}return m}static getGF(a){switch(a){case 4:return xe.AZTEC_PARAM;case 6:return xe.AZTEC_DATA_6;case 8:return xe.AZTEC_DATA_8;case 10:return xe.AZTEC_DATA_10;case 12:return xe.AZTEC_DATA_12;default:throw new g("Unsupported word size "+a)}}static stuffBits(a,u){let f=new M,m=a.getSize(),x=(1<<u)-2;for(let v=0;v<m;v+=u){let b=0;for(let T=0;T<u;T++)(v+T>=m||a.get(v+T))&&(b|=1<<u-1-T);(b&x)===x?(f.appendBits(b&x,u),v--):b&x?f.appendBits(b,u):(f.appendBits(b|1,u),v--)}return f}static totalBitsInLayer(a,u){return((u?88:112)+16*a)*a}}jt.DEFAULT_EC_PERCENT=33,jt.DEFAULT_AZTEC_LAYERS=0,jt.MAX_NB_BITS=32,jt.MAX_NB_BITS_COMPACT=4,jt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class kp{encode(a,u,f,m){return this.encodeWithHints(a,u,f,m,null)}encodeWithHints(a,u,f,m,x){let v=Ix.ISO_8859_1,b=jt.DEFAULT_EC_PERCENT,T=jt.DEFAULT_AZTEC_LAYERS;return x!=null&&(x.has(nr.CHARACTER_SET)&&(v=$S.forName(x.get(nr.CHARACTER_SET).toString())),x.has(nr.ERROR_CORRECTION)&&(b=I.parseInt(x.get(nr.ERROR_CORRECTION).toString())),x.has(nr.AZTEC_LAYERS)&&(T=I.parseInt(x.get(nr.AZTEC_LAYERS).toString()))),kp.encodeLayers(a,u,f,m,v,b,T)}static encodeLayers(a,u,f,m,x,v,b){if(u!==ne.AZTEC)throw new g("Can only encode AZTEC, but got "+u);let T=jt.encode(q.getBytes(a,x),v,b);return kp.renderResult(T,f,m)}static renderResult(a,u,f){let m=a.getMatrix();if(m==null)throw new nt;let x=m.getWidth(),v=m.getHeight(),b=Math.max(u,x),T=Math.max(f,v),R=Math.min(b/x,T/v),O=(b-x*R)/2,F=(T-v*R)/2,$=new z(b,T);for(let J=0,le=F;J<v;J++,le+=R)for(let ue=0,he=O;ue<x;ue++,he+=R)m.get(ue,J)&&$.setRegion(he,le,R,R);return $}}n.AbstractExpandedDecoder=bn,n.ArgumentException=h,n.ArithmeticException=De,n.AztecCode=WS,n.AztecCodeReader=Gt,n.AztecCodeWriter=kp,n.AztecDecoder=be,n.AztecDetector=Dr,n.AztecDetectorResult=Ee,n.AztecEncoder=jt,n.AztecHighLevelEncoder=qd,n.AztecPoint=Zt,n.BarcodeFormat=ne,n.Binarizer=S,n.BinaryBitmap=y,n.BitArray=M,n.BitMatrix=z,n.BitSource=Eo,n.BrowserAztecCodeReader=ur,n.BrowserBarcodeReader=ia,n.BrowserCodeReader=G,n.BrowserDatamatrixCodeReader=Gd,n.BrowserMultiFormatReader=pj,n.BrowserPDF417Reader=mj,n.BrowserQRCodeReader=gj,n.BrowserQRCodeSvgWriter=Rl,n.CharacterSetECI=L,n.ChecksumException=w,n.Code128Reader=Ie,n.Code39Reader=_t,n.DataMatrixDecodedBitStreamParser=er,n.DataMatrixReader=fi,n.DecodeHintType=j,n.DecoderResult=pe,n.DefaultGridSampler=Bt,n.DetectorResult=Ce,n.EAN13Reader=Ut,n.EncodeHintType=nr,n.Exception=d,n.FormatException=_,n.GenericGF=xe,n.GenericGFPoly=Se,n.GlobalHistogramBinarizer=Y,n.GridSampler=ot,n.GridSamplerInstance=vn,n.HTMLCanvasElementLuminanceSource=ee,n.HybridBinarizer=X,n.ITFReader=ut,n.IllegalArgumentException=g,n.IllegalStateException=nt,n.InvertedLuminanceSource=V,n.LuminanceSource=W,n.MathUtils=$e,n.MultiFormatOneDReader=Lr,n.MultiFormatReader=US,n.MultiFormatWriter=yj,n.NotFoundException=H,n.OneDReader=Ot,n.PDF417DecodedBitStreamParser=me,n.PDF417DecoderErrorCorrection=Hs,n.PDF417Reader=Cr,n.PDF417ResultMetadata=en,n.PerspectiveTransform=rt,n.PlanarYUVLuminanceSource=Xi,n.QRCodeByteMatrix=Ap,n.QRCodeDataMask=ds,n.QRCodeDecodedBitStreamParser=fn,n.QRCodeDecoderErrorCorrectionLevel=Ht,n.QRCodeDecoderFormatInformation=Hn,n.QRCodeEncoder=hn,n.QRCodeEncoderQRCode=Il,n.QRCodeMaskUtil=_n,n.QRCodeMatrixUtil=ct,n.QRCodeMode=Je,n.QRCodeReader=Wi,n.QRCodeVersion=qe,n.QRCodeWriter=qc,n.RGBLuminanceSource=kx,n.RSS14Reader=Jt,n.RSSExpandedReader=we,n.ReaderException=Np,n.ReedSolomonDecoder=et,n.ReedSolomonEncoder=Tx,n.ReedSolomonException=Ue,n.Result=Q,n.ResultMetadataType=de,n.ResultPoint=Te,n.StringUtils=q,n.UnsupportedOperationException=U,n.VideoInputDevice=ae,n.WhiteRectangleDetector=Ke,n.WriterException=tn,n.ZXingArrays=k,n.ZXingCharset=$S,n.ZXingInteger=I,n.ZXingStandardCharsets=Ix,n.ZXingStringBuilder=re,n.ZXingStringEncoding=K,n.ZXingSystem=C,n.createAbstractExpandedDecoder=El,Object.defineProperty(n,"__esModule",{value:!0})})})(Pv,Pv.exports);var gn=Pv.exports;const j$=Zh(gn),L$=lk({__proto__:null,default:j$},[gn]);var uA=function(){function e(t,n,r){if(this.formatMap=new Map([[We.QR_CODE,gn.BarcodeFormat.QR_CODE],[We.AZTEC,gn.BarcodeFormat.AZTEC],[We.CODABAR,gn.BarcodeFormat.CODABAR],[We.CODE_39,gn.BarcodeFormat.CODE_39],[We.CODE_93,gn.BarcodeFormat.CODE_93],[We.CODE_128,gn.BarcodeFormat.CODE_128],[We.DATA_MATRIX,gn.BarcodeFormat.DATA_MATRIX],[We.MAXICODE,gn.BarcodeFormat.MAXICODE],[We.ITF,gn.BarcodeFormat.ITF],[We.EAN_13,gn.BarcodeFormat.EAN_13],[We.EAN_8,gn.BarcodeFormat.EAN_8],[We.PDF_417,gn.BarcodeFormat.PDF_417],[We.RSS_14,gn.BarcodeFormat.RSS_14],[We.RSS_EXPANDED,gn.BarcodeFormat.RSS_EXPANDED],[We.UPC_A,gn.BarcodeFormat.UPC_A],[We.UPC_E,gn.BarcodeFormat.UPC_E],[We.UPC_EAN_EXTENSION,gn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!L$)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var s=this.createZXingFormats(t),i=new Map;i.set(gn.DecodeHintType.POSSIBLE_FORMATS,s),i.set(gn.DecodeHintType.TRY_HARDER,!1),this.hints=i}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(r,s){try{r(n.decode(t))}catch(i){s(i)}})},e.prototype.decode=function(t){var n=new gn.MultiFormatReader(this.verbose,this.hints),r=new gn.HTMLCanvasElementLuminanceSource(t),s=new gn.BinaryBitmap(new gn.HybridBinarizer(r)),i=n.decode(s);return{text:i.text,format:a8.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,s){t.set(n,r)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],r=0,s=t;r<s.length;r++){var i=s[r];this.formatMap.has(i)?n.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),B$=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{d(r.next(h))}catch(g){o(g)}}function c(h){try{d(r.throw(h))}catch(g){o(g)}}function d(h){h.done?i(h.value):s(h.value).then(l,c)}d((r=r.apply(e,t||[])).next())})},F$=function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(h){return c([d,h])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(n=0)),n;)try{if(r=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,s=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){n.label=d[1];break}if(d[0]===6&&n.label<i[1]){n.label=i[1],i=d;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(d);break}i[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(h){d=[6,h],s=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},dA=function(){function e(t,n,r){if(this.formatMap=new Map([[We.QR_CODE,"qr_code"],[We.AZTEC,"aztec"],[We.CODABAR,"codabar"],[We.CODE_39,"code_39"],[We.CODE_93,"code_93"],[We.CODE_128,"code_128"],[We.DATA_MATRIX,"data_matrix"],[We.ITF,"itf"],[We.EAN_13,"ean_13"],[We.EAN_8,"ean_8"],[We.PDF_417,"pdf417"],[We.UPC_A,"upc_a"],[We.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var s=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(s),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return B$(this,void 0,void 0,function(){var n,r;return F$(this,function(s){switch(s.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=s.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:a8.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,r=0,s=0,i=t;s<i.length;s++){var o=i[s],l=o.boundingBox.width*o.boundingBox.height;l>r&&(r=l,n=o)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],r=0,s=t;r<s.length;r++){var i=s[r];this.formatMap.has(i)?n.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,s){t.set(n,r)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),fA=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{d(r.next(h))}catch(g){o(g)}}function c(h){try{d(r.throw(h))}catch(g){o(g)}}function d(h){h.done?i(h.value):s(h.value).then(l,c)}d((r=r.apply(e,t||[])).next())})},hA=function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(h){return c([d,h])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(n=0)),n;)try{if(r=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,s=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){n.label=d[1];break}if(d[0]===6&&n.label<i[1]){n.label=i[1],i=d;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(d);break}i[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(h){d=[6,h],s=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},z$=function(){function e(t,n,r,s){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&dA.isSupported()?(this.primaryDecoder=new dA(t,r,s),this.secondaryDecoder=new uA(t,r,s)):this.primaryDecoder=new uA(t,r,s)}return e.prototype.decodeAsync=function(t){return fA(this,void 0,void 0,function(){var n;return hA(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return fA(this,void 0,void 0,function(){var n,r;return hA(this,function(s){switch(s.label){case 0:n=performance.now(),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,s.sent()];case 3:if(r=s.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,r=this.executionResults;n<r.length;n++){var s=r[n];t+=s}var i=t/this.executionResults.length;console.log("".concat(i," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),vC=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lm=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{d(r.next(h))}catch(g){o(g)}}function c(h){try{d(r.throw(h))}catch(g){o(g)}}function d(h){h.done?i(h.value):s(h.value).then(l,c)}d((r=r.apply(e,t||[])).next())})},Bm=function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(h){return c([d,h])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(n=0)),n;)try{if(r=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,s=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){n.label=d[1];break}if(d[0]===6&&n.label<i[1]){n.label=i[1],i=d;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(d);break}i[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(h){d=[6,h],s=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},c8=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var r={advanced:[n]};return this.track.applyConstraints(r)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e}(),V$=function(e){vC(t,e);function t(n,r){return e.call(this,n,r)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var r={};r[this.name]=n;var s={advanced:[r]};return this.track.applyConstraints(s)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(c8),H$=function(e){vC(t,e);function t(n){return e.call(this,"zoom",n)||this}return t}(V$),U$=function(e){vC(t,e);function t(n){return e.call(this,"torch",n)||this}return t}(c8),$$=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new H$(this.track)},e.prototype.torchFeature=function(){return new U$(this.track)},e}(),W$=function(){function e(t,n,r){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=t.surface.clientWidth,s=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(r,s),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,s){return Lm(this,void 0,void 0,function(){var i,o;return Bm(this,function(l){switch(l.label){case 0:return i=new e(t,n,s),r.aspectRatio?(o={aspectRatio:r.aspectRatio},[4,i.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:l.sent(),l.label=2;case 2:return i.setupSurface(),[2,i]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,r=function(){setTimeout(t,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Lm(this,void 0,void 0,function(){return Bm(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,r){var s=t.mediaStream.getVideoTracks(),i=s.length,o=0;t.mediaStream.getVideoTracks().forEach(function(l){t.mediaStream.removeTrack(l),l.stop(),++o,o>=i&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new $$(this.getFirstTrackOrFail())},e}(),G$=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,r){return Lm(this,void 0,void 0,function(){return Bm(this,function(s){return[2,W$.create(t,this.mediaStream,n,r)]})})},e.create=function(t){return Lm(this,void 0,void 0,function(){var n,r;return Bm(this,function(s){switch(s.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=s.sent(),[2,new e(r)]}})})},e}(),pA=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{d(r.next(h))}catch(g){o(g)}}function c(h){try{d(r.throw(h))}catch(g){o(g)}}function d(h){h.done?i(h.value):s(h.value).then(l,c)}d((r=r.apply(e,t||[])).next())})},mA=function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(h){return c([d,h])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(n=0)),n;)try{if(r=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,s=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){n.label=d[1];break}if(d[0]===6&&n.label<i[1]){n.label=i[1],i=d;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(d);break}i[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(h){d=[6,h],s=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},X$=function(){function e(){}return e.failIfNotSupported=function(){return pA(this,void 0,void 0,function(){return mA(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return pA(this,void 0,void 0,function(){return mA(this,function(n){return[2,G$.create(t)]})})},e}(),K$=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(h){try{d(r.next(h))}catch(g){o(g)}}function c(h){try{d(r.throw(h))}catch(g){o(g)}}function d(h){h.done?i(h.value):s(h.value).then(l,c)}d((r=r.apply(e,t||[])).next())})},Y$=function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(h){return c([d,h])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(n=0)),n;)try{if(r=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,s=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){n.label=d[1];break}if(d[0]===6&&n.label<i[1]){n.label=i[1],i=d;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(d);break}i[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(h){d=[6,h],s=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},q$=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Tu.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Tu.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return K$(this,void 0,void 0,function(){var t,n,r,s,i,o,l;return Y$(this,function(c){switch(c.label){case 0:return t=function(d){for(var h=d.getVideoTracks(),g=0,y=h;g<y.length;g++){var w=y[g];w.enabled=!1,w.stop(),d.removeTrack(w)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=c.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=c.sent(),s=[],i=0,o=r;i<o.length;i++)l=o[i],l.kind==="videoinput"&&s.push({id:l.deviceId,label:l.label});return t(n),[2,s]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var r=function(i){for(var o=[],l=0,c=i;l<c.length;l++){var d=c[l];d.kind==="video"&&o.push({id:d.id,label:d.label})}t(o)},s=MediaStreamTrack;s.getSources(r)})},e}(),Dn;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Dn||(Dn={}));var Z$=function(){function e(){this.state=Dn.NOT_STARTED,this.onGoingTransactionNewState=Dn.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Dn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Dn.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Dn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Dn.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Dn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Dn.UNKNOWN:throw"Transition from unknown is not allowed";case Dn.NOT_STARTED:this.failIfNewStateIs(t,[Dn.PAUSED]);break;case Dn.SCANNING:break;case Dn.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var r=0,s=n;r<s.length;r++){var i=s[r];if(t===i)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),Q$=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Dn.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Dn.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Dn.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Dn.PAUSED},e}(),J$=function(){function e(){}return e.create=function(){return new Q$(new Z$)},e}(),eW=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),As=function(e){eW(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(O$),tW=function(){function e(t,n){this.logger=n,this.fps=As.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=As.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?l8.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Oo(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),nW=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new D$(this.verbose),this.qrcode=new z$(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=J$.create()}return e.prototype.start=function(t,n,r,s){var i=this;if(!t)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var o;s?o=s:o=this.verbose?this.logger.log:function(){};var l=tW.create(n,this.logger);this.clearElement();var c=!1;l.videoConstraints&&(l.isMediaStreamConstraintsValid()?c=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var d=c,h=document.getElementById(this.elementId);h.clientWidth?h.clientWidth:As.DEFAULT_WIDTH,h.style.position="relative",this.shouldScan=!0,this.element=h;var g=this,y=this.stateManagerProxy.startTransition(Dn.SCANNING);return new Promise(function(w,S){var C=d?l.videoConstraints:g.createVideoConstraints(t);if(!C){y.cancel(),S("videoConstraints should be defined");return}var A={};(!d||l.aspectRatio)&&(A.aspectRatio=l.aspectRatio);var E={onRenderSurfaceReady:function(k,I){g.setupUi(k,I,l),g.isScanning=!0,g.foreverScan(l,r,o)}};X$.failIfNotSupported().then(function(k){k.create(C).then(function(I){return I.render(i.element,A,E).then(function(M){g.renderedCamera=M,y.execute(),w(null)}).catch(function(M){y.cancel(),S(M)})}).catch(function(I){y.cancel(),S(Tu.errorGettingUserMedia(I))})}).catch(function(k){y.cancel(),S(Tu.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Dn.PAUSED),this.showPausedState(),(Oo(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(Dn.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Dn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(t.element){var i=document.getElementById(As.SHADED_REGION_ELEMENT_ID);i&&t.element.removeChild(i)}},s=this;return this.renderedCamera.close().then(function(){return s.renderedCamera=null,s.element&&(s.element.removeChild(s.canvasElement),s.canvasElement=null),r(),s.qrRegion&&(s.qrRegion=null),s.context&&(s.context=null),n.execute(),s.hidePausedState(),s.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(t,n){var r=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Oo(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(s,i){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var o=new Image;o.onload=function(){var l=o.width,c=o.height,d=document.getElementById(r.elementId),h=d.clientWidth?d.clientWidth:As.DEFAULT_WIDTH,g=Math.max(d.clientHeight?d.clientHeight:c,As.FILE_SCAN_MIN_HEIGHT),y=r.computeCanvasDrawConfig(l,c,h,g);if(n){var w=r.createCanvasElement(h,g,"qr-canvas-visible");w.style.display="inline-block",d.appendChild(w);var S=w.getContext("2d");if(!S)throw"Unable to get 2d context from canvas";S.canvas.width=h,S.canvas.height=g,S.drawImage(o,0,0,l,c,y.x,y.y,y.width,y.height)}var C=As.FILE_SCAN_HIDDEN_CANVAS_PADDING,A=Math.max(o.width,y.width),E=Math.max(o.height,y.height),k=A+2*C,I=E+2*C,M=r.createCanvasElement(k,I);d.appendChild(M);var P=M.getContext("2d");if(!P)throw"Unable to get 2d context from canvas";P.canvas.width=k,P.canvas.height=I,P.drawImage(o,0,0,l,c,C,C,A,E);try{r.qrcode.decodeRobustlyAsync(M).then(function(j){s(cA.createFromQrcodeResult(j))}).catch(i)}catch(j){i("QR code parse error, error = ".concat(j))}},o.onerror=i,o.onabort=i,o.onstalled=i,o.onsuspend=i,o.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return q$.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!l8.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[We.QR_CODE,We.AZTEC,We.CODABAR,We.CODE_39,We.CODE_93,We.CODE_128,We.DATA_MATRIX,We.MAXICODE,We.ITF,We.EAN_13,We.EAN_8,We.PDF_417,We.RSS_14,We.RSS_EXPANDED,We.UPC_A,We.UPC_E,We.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],s=0,i=t.formatsToSupport;s<i.length;s++){var o=i[s];_$(o)?r.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Oo(t))return!0;if(!Oo(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Oo(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return Oo(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,r){var s=this,i=r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(t,n,i),l=function(d){if(d<As.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(As.MIN_QR_BOX_SIZE,"px.")},c=function(d){return d>t&&(s.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),d=t),d};l(o.width),l(o.height),o.width=c(o.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(t,n)}catch(s){throw new Error("qrbox config was passed as a function but it failed with unknown error"+s)}return r},e.prototype.setupUi=function(t,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,r);var s=Oo(r.qrbox)?{width:t,height:n}:r.qrbox;this.validateQrboxConfig(s);var i=this.toQrdimensions(t,n,s);i.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=r.isShadedBoxEnabled()&&i.height<=n,l={x:0,y:0,width:t,height:n},c=o?this.getShadedRegionBounds(t,n,i):l,d=this.createCanvasElement(c.width,c.height),h={willReadFrequently:!0},g=d.getContext("2d",h);g.canvas.width=c.width,g.canvas.height=c.height,this.element.append(d),o&&this.possiblyInsertShadingElement(this.element,t,n,i),this.createScannerPausedUiElement(this.element),this.qrRegion=c,this.context=g,this.canvasElement=d},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=Tu.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(s){return t(s.text,cA.createFromQrcodeResult(s)),r.possiblyUpdateShaders(!0),!0}).catch(function(s){r.possiblyUpdateShaders(!1);var i=Tu.codeParseError(s);return n(i,P$.createFrom(i)),!1})},e.prototype.foreverScan=function(t,n,r){var s=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),o=i.videoWidth/i.clientWidth,l=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var c=this.qrRegion.width*o,d=this.qrRegion.height*l,h=this.qrRegion.x*o,g=this.qrRegion.y*l;this.context.drawImage(i,h,g,c,d,0,0,this.qrRegion.width,this.qrRegion.height);var y=function(){s.foreverScanTimeout=setTimeout(function(){s.foreverScan(t,n,r)},s.getTimeoutFps(t.fps))};this.scanContext(n,r).then(function(w){!w&&t.disableFlip!==!0?(s.context.translate(s.context.canvas.width,0),s.context.scale(-1,1),s.scanContext(n,r).finally(function(){y()})):y()}).catch(function(w){s.logger.logError("Error happend while scanning context",w),y()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",r="deviceId",s={user:!0,environment:!0},i="exact",o=function(S){if(S in s)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(S,"'")},l=Object.keys(t);if(l.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(l.length," keys");var c=Object.keys(t)[0];if(c!==n&&c!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(c===n){var d=t.facingMode;if(typeof d=="string"){if(o(d))return{facingMode:d}}else if(typeof d=="object")if(i in d){if(o(d["".concat(i)]))return{facingMode:{exact:d["".concat(i)]}}}else throw"'facingMode' should be string or object with"+" ".concat(i," as key.");else{var h=typeof d;throw"Invalid type of 'facingMode' = ".concat(h)}}else{var g=t.deviceId;if(typeof g=="string")return{deviceId:g};if(typeof g=="object"){if(i in g)return{deviceId:{exact:g["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}else{var y=typeof g;throw"Invalid type of 'deviceId' = ".concat(y)}}}var w=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(w)},e.prototype.computeCanvasDrawConfig=function(t,n,r,s){if(t<=r&&n<=s){var i=(r-t)/2,o=(s-n)/2;return{x:i,y:o,width:t,height:n}}else{var l=t,c=n;return t>r&&(n=r/t*n,t=r),n>s&&(t=s/n*t,n=s),this.logger.log("Image downsampled from "+"".concat(l,"X").concat(c)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,r,s)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?As.BORDER_SHADER_MATCH_COLOR:As.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,r){var s=t,i=n,o=document.createElement("canvas");return o.style.width="".concat(s,"px"),o.style.height="".concat(i,"px"),o.style.display="none",o.id=Oo(r)?"qr-canvas":r,o},e.prototype.getShadedRegionBounds=function(t,n,r){if(r.width>t||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(t,n,r,s){if(!(n-s.width<1||r-s.height<1)){var i=document.createElement("div");i.style.position="absolute";var o=(n-s.width)/2,l=(r-s.height)/2;if(i.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(As.SHADED_REGION_ELEMENT_ID),n-s.width<11||r-s.height<11)this.hasBorderShaders=!1;else{var c=5,d=40;this.insertShaderBorders(i,d,c,-c,null,0,!0),this.insertShaderBorders(i,d,c,-c,null,0,!1),this.insertShaderBorders(i,d,c,null,-c,0,!0),this.insertShaderBorders(i,d,c,null,-c,0,!1),this.insertShaderBorders(i,c,d+c,-c,null,-c,!0),this.insertShaderBorders(i,c,d+c,null,-c,-c,!0),this.insertShaderBorders(i,c,d+c,-c,null,-c,!1),this.insertShaderBorders(i,c,d+c,null,-c,-c,!1),this.hasBorderShaders=!0}t.append(i)}},e.prototype.insertShaderBorders=function(t,n,r,s,i,o,l){var c=document.createElement("div");c.style.position="absolute",c.style.backgroundColor=As.BORDER_SHADER_DEFAULT_COLOR,c.style.width="".concat(n,"px"),c.style.height="".concat(r,"px"),s!==null&&(c.style.top="".concat(s,"px")),i!==null&&(c.style.bottom="".concat(i,"px")),l?c.style.left="".concat(o,"px"):c.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(c),t.appendChild(c)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),gA;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(gA||(gA={}));function rW({gamebookData:e,onStartNew:t,onLoadSave:n}){var A,E;const[r,s]=N.useState(!1),[i,o]=N.useState(!1),[l,c]=N.useState(""),[d,h]=N.useState(null),[g,y]=N.useState(!1),w=()=>{var k;h(null);try{const I=xA(l.trim());if(I.storyId!==((k=e.meta)==null?void 0:k.storyId)){h("This save is for a different story. Please load the correct story first.");return}n(I.saveData),s(!1)}catch(I){h("Invalid save code. Please check and try again."),console.error("Import error:",I)}},S=async k=>{var M,P;const I=(M=k.target.files)==null?void 0:M[0];if(I){h(null);try{const j=await I.text(),_=JSON.parse(j);if(_.storyId!==((P=e.meta)==null?void 0:P.storyId)){h("This save is for a different story.");return}n(_.saveData),s(!1)}catch(j){h("Failed to read save file."),console.error("File import error:",j)}}},C=async()=>{y(!0),h(null);try{const k=new nW("qr-reader");await k.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},I=>{k.stop().then(()=>{var M;y(!1),o(!1);try{const P=xA(I);if(P.storyId!==((M=e.meta)==null?void 0:M.storyId)){h("This save is for a different story.");return}n(P.saveData),s(!1)}catch{h("Invalid QR code.")}})},I=>{})}catch(k){h("Failed to access camera. Please check permissions."),y(!1),console.error("QR scan error:",k)}};return p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:p.jsxs("div",{className:"w-full max-w-2xl space-y-6",children:[p.jsxs("div",{className:"text-center space-y-2",children:[p.jsx("h1",{className:"text-4xl font-serif font-bold text-foreground",children:((A=e.meta)==null?void 0:A.title)||"Interactive Gamebook"}),p.jsxs("p",{className:"text-muted-foreground text-lg",children:["by ",((E=e.meta)==null?void 0:E.author)||"Unknown Author"]})]}),p.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[p.jsxs(Tt,{className:"hover:border-primary transition-colors cursor-pointer",onClick:t,children:[p.jsxs(Wt,{children:[p.jsxs(Kt,{className:"flex items-center gap-2",children:[p.jsx(rB,{className:"h-5 w-5"}),"Start New Game"]}),p.jsx(Fn,{children:"Begin a fresh adventure from the beginning"})]}),p.jsx(Dt,{children:p.jsx("p",{className:"text-sm text-muted-foreground",children:"Create your character and start your journey"})})]}),p.jsxs(Tt,{className:"hover:border-primary transition-colors cursor-pointer",onClick:()=>s(!0),children:[p.jsxs(Wt,{children:[p.jsxs(Kt,{className:"flex items-center gap-2",children:[p.jsx(fg,{className:"h-5 w-5"}),"Import Save"]}),p.jsx(Fn,{children:"Continue from a previous save"})]}),p.jsx(Dt,{children:p.jsx("p",{className:"text-sm text-muted-foreground",children:"Load save via QR code, share code, or file"})})]})]}),p.jsx(go,{open:r,onOpenChange:s,children:p.jsxs(ji,{className:"sm:max-w-md",children:[p.jsxs(Li,{children:[p.jsx(Bi,{children:"Import Save"}),p.jsx(Jo,{children:"Choose how you want to import your save"})]}),p.jsxs("div",{className:"space-y-4",children:[d&&p.jsx(Eh,{variant:"destructive",children:p.jsx(Nh,{children:d})}),i?p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{id:"qr-reader",className:"w-full"}),p.jsx(Ne,{variant:"outline",className:"w-full",onClick:()=>{o(!1),y(!1)},children:"Cancel Scan"})]}):p.jsxs(p.Fragment,{children:[p.jsxs(Ne,{variant:"outline",className:"w-full justify-start",onClick:C,disabled:g,children:[p.jsx(sR,{className:"h-4 w-4 mr-2"}),"Scan QR Code"]}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("span",{className:"w-full border-t"})}),p.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:p.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{htmlFor:"share-code",children:"Paste Share Code"}),p.jsx(at,{id:"share-code",placeholder:"EGBK-XXXX-XXXX-XXXX",value:l,onChange:k=>c(k.target.value)}),p.jsx(Ne,{className:"w-full",onClick:w,disabled:!l.trim(),children:"Import from Code"})]}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("span",{className:"w-full border-t"})}),p.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:p.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{htmlFor:"file-import",children:"Upload Save File"}),p.jsx(at,{id:"file-import",type:"file",accept:".json",onChange:S})]})]})]})]})})]})})}function xA(e){const t=e.replace(/^EGBK[:-]?/i,"").replace(/-/g,"");if(e.startsWith("{"))return JSON.parse(e);const r=require("lz-string").decompressFromBase64(t);if(!r)throw new Error("Failed to decompress save data");return JSON.parse(r)}const sW=xC,iW=yC,oW=wC,u8=N.forwardRef(({className:e,...t},n)=>p.jsx(cp,{className:Xe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));u8.displayName=cp.displayName;const aW=Dd("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),d8=N.forwardRef(({side:e="right",className:t,children:n,...r},s)=>p.jsxs(oW,{children:[p.jsx(u8,{}),p.jsxs(up,{ref:s,className:Xe(aW({side:e}),t),...r,children:[n,p.jsxs(jg,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[p.jsx(hg,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));d8.displayName=up.displayName;const lW=N.forwardRef(({className:e,...t},n)=>p.jsx(dp,{ref:n,className:Xe("text-lg font-semibold text-foreground",e),...t}));lW.displayName=dp.displayName;const cW=N.forwardRef(({className:e,...t},n)=>p.jsx(fp,{ref:n,className:Xe("text-sm text-muted-foreground",e),...t}));cW.displayName=fp.displayName;function Ah(e,[t,n]){return Math.min(n,Math.max(t,e))}function uW(e,t){return N.useReducer((n,r)=>t[n][r]??n,e)}var bC="ScrollArea",[f8,zce]=cs(bC),[dW,ci]=f8(bC),h8=N.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=e,[l,c]=N.useState(null),[d,h]=N.useState(null),[g,y]=N.useState(null),[w,S]=N.useState(null),[C,A]=N.useState(null),[E,k]=N.useState(0),[I,M]=N.useState(0),[P,j]=N.useState(!1),[_,D]=N.useState(!1),L=dt(t,K=>c(K)),U=op(s);return p.jsx(dW,{scope:n,type:r,dir:U,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:h,content:g,onContentChange:y,scrollbarX:w,onScrollbarXChange:S,scrollbarXEnabled:P,onScrollbarXEnabledChange:j,scrollbarY:C,onScrollbarYChange:A,scrollbarYEnabled:_,onScrollbarYEnabledChange:D,onCornerWidthChange:k,onCornerHeightChange:M,children:p.jsx(Ye.div,{dir:U,...o,ref:L,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":I+"px",...e.style}})})});h8.displayName=bC;var p8="ScrollAreaViewport",m8=N.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=e,o=ci(p8,n),l=N.useRef(null),c=dt(t,l,o.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),p.jsx(Ye.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:p.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});m8.displayName=p8;var vo="ScrollAreaScrollbar",CC=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=ci(vo,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,l=e.orientation==="horizontal";return N.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),s.type==="hover"?p.jsx(fW,{...r,ref:t,forceMount:n}):s.type==="scroll"?p.jsx(hW,{...r,ref:t,forceMount:n}):s.type==="auto"?p.jsx(g8,{...r,ref:t,forceMount:n}):s.type==="always"?p.jsx(SC,{...r,ref:t}):null});CC.displayName=vo;var fW=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=ci(vo,e.__scopeScrollArea),[i,o]=N.useState(!1);return N.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},h=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),p.jsx(us,{present:n||i,children:p.jsx(g8,{"data-state":i?"visible":"hidden",...r,ref:t})})}),hW=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=ci(vo,e.__scopeScrollArea),i=e.orientation==="horizontal",o=Fg(()=>c("SCROLL_END"),100),[l,c]=uW("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return N.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,s.scrollHideDelay,c]),N.useEffect(()=>{const d=s.viewport,h=i?"scrollLeft":"scrollTop";if(d){let g=d[h];const y=()=>{const w=d[h];g!==w&&(c("SCROLL"),o()),g=w};return d.addEventListener("scroll",y),()=>d.removeEventListener("scroll",y)}},[s.viewport,i,c,o]),p.jsx(us,{present:n||l!=="hidden",children:p.jsx(SC,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:ze(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ze(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),g8=N.forwardRef((e,t)=>{const n=ci(vo,e.__scopeScrollArea),{forceMount:r,...s}=e,[i,o]=N.useState(!1),l=e.orientation==="horizontal",c=Fg(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?d:h)}},10);return fd(n.viewport,c),fd(n.content,c),p.jsx(us,{present:r||i,children:p.jsx(SC,{"data-state":i?"visible":"hidden",...s,ref:t})})}),SC=N.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=ci(vo,e.__scopeScrollArea),i=N.useRef(null),o=N.useRef(0),[l,c]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=b8(l.viewport,l.content),h={...r,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:y=>i.current=y,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:y=>o.current=y};function g(y,w){return wW(y,o.current,l,w)}return n==="horizontal"?p.jsx(pW,{...h,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const y=s.viewport.scrollLeft,w=yA(y,l,s.dir);i.current.style.transform=`translate3d(${w}px, 0, 0)`}},onWheelScroll:y=>{s.viewport&&(s.viewport.scrollLeft=y)},onDragScroll:y=>{s.viewport&&(s.viewport.scrollLeft=g(y,s.dir))}}):n==="vertical"?p.jsx(mW,{...h,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const y=s.viewport.scrollTop,w=yA(y,l);i.current.style.transform=`translate3d(0, ${w}px, 0)`}},onWheelScroll:y=>{s.viewport&&(s.viewport.scrollTop=y)},onDragScroll:y=>{s.viewport&&(s.viewport.scrollTop=g(y))}}):null}),pW=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=ci(vo,e.__scopeScrollArea),[o,l]=N.useState(),c=N.useRef(null),d=dt(t,c,i.onScrollbarXChange);return N.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),p.jsx(y8,{"data-orientation":"horizontal",...s,ref:d,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Bg(n)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,g)=>{if(i.viewport){const y=i.viewport.scrollLeft+h.deltaX;e.onWheelScroll(y),S8(y,g)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:zm(o.paddingLeft),paddingEnd:zm(o.paddingRight)}})}})}),mW=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,i=ci(vo,e.__scopeScrollArea),[o,l]=N.useState(),c=N.useRef(null),d=dt(t,c,i.onScrollbarYChange);return N.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),p.jsx(y8,{"data-orientation":"vertical",...s,ref:d,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Bg(n)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,g)=>{if(i.viewport){const y=i.viewport.scrollTop+h.deltaY;e.onWheelScroll(y),S8(y,g)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:zm(o.paddingTop),paddingEnd:zm(o.paddingBottom)}})}})}),[gW,x8]=f8(vo),y8=N.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:h,onResize:g,...y}=e,w=ci(vo,n),[S,C]=N.useState(null),A=dt(t,L=>C(L)),E=N.useRef(null),k=N.useRef(""),I=w.viewport,M=r.content-r.viewport,P=sr(h),j=sr(c),_=Fg(g,10);function D(L){if(E.current){const U=L.clientX-E.current.left,K=L.clientY-E.current.top;d({x:U,y:K})}}return N.useEffect(()=>{const L=U=>{const K=U.target;(S==null?void 0:S.contains(K))&&P(U,M)};return document.addEventListener("wheel",L,{passive:!1}),()=>document.removeEventListener("wheel",L,{passive:!1})},[I,S,M,P]),N.useEffect(j,[r,j]),fd(S,_),fd(w.content,_),p.jsx(gW,{scope:n,scrollbar:S,hasThumb:s,onThumbChange:sr(i),onThumbPointerUp:sr(o),onThumbPositionChange:j,onThumbPointerDown:sr(l),children:p.jsx(Ye.div,{...y,ref:A,style:{position:"absolute",...y.style},onPointerDown:ze(e.onPointerDown,L=>{L.button===0&&(L.target.setPointerCapture(L.pointerId),E.current=S.getBoundingClientRect(),k.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",w.viewport&&(w.viewport.style.scrollBehavior="auto"),D(L))}),onPointerMove:ze(e.onPointerMove,D),onPointerUp:ze(e.onPointerUp,L=>{const U=L.target;U.hasPointerCapture(L.pointerId)&&U.releasePointerCapture(L.pointerId),document.body.style.webkitUserSelect=k.current,w.viewport&&(w.viewport.style.scrollBehavior=""),E.current=null})})})}),Fm="ScrollAreaThumb",w8=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=x8(Fm,e.__scopeScrollArea);return p.jsx(us,{present:n||s.hasThumb,children:p.jsx(xW,{ref:t,...r})})}),xW=N.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,i=ci(Fm,n),o=x8(Fm,n),{onThumbPositionChange:l}=o,c=dt(t,g=>o.onThumbChange(g)),d=N.useRef(void 0),h=Fg(()=>{d.current&&(d.current(),d.current=void 0)},100);return N.useEffect(()=>{const g=i.viewport;if(g){const y=()=>{if(h(),!d.current){const w=vW(g,l);d.current=w,l()}};return l(),g.addEventListener("scroll",y),()=>g.removeEventListener("scroll",y)}},[i.viewport,h,l]),p.jsx(Ye.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ze(e.onPointerDownCapture,g=>{const w=g.target.getBoundingClientRect(),S=g.clientX-w.left,C=g.clientY-w.top;o.onThumbPointerDown({x:S,y:C})}),onPointerUp:ze(e.onPointerUp,o.onThumbPointerUp)})});w8.displayName=Fm;var EC="ScrollAreaCorner",v8=N.forwardRef((e,t)=>{const n=ci(EC,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?p.jsx(yW,{...e,ref:t}):null});v8.displayName=EC;var yW=N.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=ci(EC,n),[i,o]=N.useState(0),[l,c]=N.useState(0),d=!!(i&&l);return fd(s.scrollbarX,()=>{var g;const h=((g=s.scrollbarX)==null?void 0:g.offsetHeight)||0;s.onCornerHeightChange(h),c(h)}),fd(s.scrollbarY,()=>{var g;const h=((g=s.scrollbarY)==null?void 0:g.offsetWidth)||0;s.onCornerWidthChange(h),o(h)}),d?p.jsx(Ye.div,{...r,ref:t,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function zm(e){return e?parseInt(e,10):0}function b8(e,t){const n=e/t;return isNaN(n)?0:n}function Bg(e){const t=b8(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function wW(e,t,n,r="ltr"){const s=Bg(n),i=s/2,o=t||i,l=s-o,c=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,h=n.content-n.viewport,g=r==="ltr"?[0,h]:[h*-1,0];return C8([c,d],g)(e)}function yA(e,t,n="ltr"){const r=Bg(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,o=t.content-t.viewport,l=i-r,c=n==="ltr"?[0,o]:[o*-1,0],d=Ah(e,c);return C8([0,o],[0,l])(d)}function C8(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function S8(e,t){return e>0&&e<t}var vW=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,l=n.top!==i.top;(o||l)&&t(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function Fg(e,t){const n=sr(e),r=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),N.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function fd(e,t){const n=sr(t);ar(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var E8=h8,bW=m8,CW=v8;const nc=N.forwardRef(({className:e,children:t,...n},r)=>p.jsxs(E8,{ref:r,className:Xe("relative overflow-hidden",e),...n,children:[p.jsx(bW,{className:"h-full w-full rounded-[inherit]",children:t}),p.jsx(N8,{}),p.jsx(CW,{})]}));nc.displayName=E8.displayName;const N8=N.forwardRef(({className:e,orientation:t="vertical",...n},r)=>p.jsx(CC,{ref:r,orientation:t,className:Xe("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:p.jsx(w8,{className:"relative flex-1 rounded-full bg-border"})}));N8.displayName=CC.displayName;function SW({history:e,currentPageId:t,getPageById:n,onJumpToPage:r}){return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[p.jsx(fB,{className:"h-4 w-4"}),"Reading History"]}),p.jsx(nc,{className:"h-48",children:p.jsx("div",{className:"space-y-1 pr-4",children:e.map((s,i)=>{const o=n(s),l=s===t,c=(o==null?void 0:o.text.replace(/<[^>]+>/g,"").substring(0,50))+"..."||"Unknown page";return p.jsx(Ne,{variant:l?"secondary":"ghost",className:"w-full justify-start h-auto py-2 px-3 text-left",onClick:()=>r(s),children:p.jsxs("div",{className:"flex items-center gap-2 w-full min-w-0",children:[p.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:[i+1,"."]}),p.jsx("span",{className:"truncate text-sm flex-1",children:c}),l&&p.jsx(Q4,{className:"h-3 w-3 flex-shrink-0 text-primary"})]})},`${s}-${i}`)})})})]})}const EW=Dd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function wn({className:e,variant:t,...n}){return p.jsx("div",{className:Xe(EW({variant:t}),e),...n})}var NW="Separator",wA="horizontal",AW=["horizontal","vertical"],A8=N.forwardRef((e,t)=>{const{decorative:n,orientation:r=wA,...s}=e,i=TW(r)?r:wA,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return p.jsx(Ye.div,{"data-orientation":i,...l,...s,ref:t})});A8.displayName=NW;function TW(e){return AW.includes(e)}var T8=A8;const Xr=N.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},s)=>p.jsx(T8,{ref:s,decorative:n,orientation:t,className:Xe("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Xr.displayName=T8.displayName;var zg="Collapsible",[kW,Vce]=cs(zg),[IW,NC]=kW(zg),k8=N.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:i,onOpenChange:o,...l}=e,[c,d]=li({prop:r,defaultProp:s??!1,onChange:o,caller:zg});return p.jsx(IW,{scope:n,disabled:i,contentId:Mi(),open:c,onOpenToggle:N.useCallback(()=>d(h=>!h),[d]),children:p.jsx(Ye.div,{"data-state":TC(c),"data-disabled":i?"":void 0,...l,ref:t})})});k8.displayName=zg;var I8="CollapsibleTrigger",R8=N.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,s=NC(I8,n);return p.jsx(Ye.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":TC(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:t,onClick:ze(e.onClick,s.onOpenToggle)})});R8.displayName=I8;var AC="CollapsibleContent",M8=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=NC(AC,e.__scopeCollapsible);return p.jsx(us,{present:n||s.open,children:({present:i})=>p.jsx(RW,{...r,ref:t,present:i})})});M8.displayName=AC;var RW=N.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:s,...i}=e,o=NC(AC,n),[l,c]=N.useState(r),d=N.useRef(null),h=dt(t,d),g=N.useRef(0),y=g.current,w=N.useRef(0),S=w.current,C=o.open||l,A=N.useRef(C),E=N.useRef(void 0);return N.useEffect(()=>{const k=requestAnimationFrame(()=>A.current=!1);return()=>cancelAnimationFrame(k)},[]),ar(()=>{const k=d.current;if(k){E.current=E.current||{transitionDuration:k.style.transitionDuration,animationName:k.style.animationName},k.style.transitionDuration="0s",k.style.animationName="none";const I=k.getBoundingClientRect();g.current=I.height,w.current=I.width,A.current||(k.style.transitionDuration=E.current.transitionDuration,k.style.animationName=E.current.animationName),c(r)}},[o.open,r]),p.jsx(Ye.div,{"data-state":TC(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!C,...i,ref:h,style:{"--radix-collapsible-content-height":y?`${y}px`:void 0,"--radix-collapsible-content-width":S?`${S}px`:void 0,...e.style},children:C&&s})});function TC(e){return e?"open":"closed"}var MW=k8;const _W=MW,OW=R8,PW=M8;var _8="AlertDialog",[DW,Hce]=cs(_8,[HM]),ra=HM(),O8=e=>{const{__scopeAlertDialog:t,...n}=e,r=ra(t);return p.jsx(xC,{...r,...n,modal:!0})};O8.displayName=_8;var jW="AlertDialogTrigger",P8=N.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ra(n);return p.jsx(yC,{...s,...r,ref:t})});P8.displayName=jW;var LW="AlertDialogPortal",D8=e=>{const{__scopeAlertDialog:t,...n}=e,r=ra(t);return p.jsx(wC,{...r,...n})};D8.displayName=LW;var BW="AlertDialogOverlay",j8=N.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ra(n);return p.jsx(cp,{...s,...r,ref:t})});j8.displayName=BW;var zu="AlertDialogContent",[FW,zW]=DW(zu),VW=E4("AlertDialogContent"),L8=N.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...s}=e,i=ra(n),o=N.useRef(null),l=dt(t,o),c=N.useRef(null);return p.jsx(N$,{contentName:zu,titleName:B8,docsSlug:"alert-dialog",children:p.jsx(FW,{scope:n,cancelRef:c,children:p.jsxs(up,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:ze(s.onOpenAutoFocus,d=>{var h;d.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[p.jsx(VW,{children:r}),p.jsx(UW,{contentRef:o})]})})})});L8.displayName=zu;var B8="AlertDialogTitle",F8=N.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ra(n);return p.jsx(dp,{...s,...r,ref:t})});F8.displayName=B8;var z8="AlertDialogDescription",V8=N.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ra(n);return p.jsx(fp,{...s,...r,ref:t})});V8.displayName=z8;var HW="AlertDialogAction",H8=N.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=ra(n);return p.jsx(jg,{...s,...r,ref:t})});H8.displayName=HW;var U8="AlertDialogCancel",$8=N.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:s}=zW(U8,n),i=ra(n),o=dt(t,s);return p.jsx(jg,{...i,...r,ref:o})});$8.displayName=U8;var UW=({contentRef:e})=>{const t=`\`${zu}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${zu}\` by passing a \`${z8}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${zu}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return N.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},$W=O8,WW=P8,GW=D8,W8=j8,G8=L8,X8=H8,K8=$8,Y8=F8,q8=V8;const Vu=$W,Z8=WW,XW=GW,Q8=N.forwardRef(({className:e,...t},n)=>p.jsx(W8,{className:Xe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Q8.displayName=W8.displayName;const rc=N.forwardRef(({className:e,...t},n)=>p.jsxs(XW,{children:[p.jsx(Q8,{}),p.jsx(G8,{ref:n,className:Xe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));rc.displayName=G8.displayName;const sc=({className:e,...t})=>p.jsx("div",{className:Xe("flex flex-col space-y-2 text-center sm:text-left",e),...t});sc.displayName="AlertDialogHeader";const ic=({className:e,...t})=>p.jsx("div",{className:Xe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ic.displayName="AlertDialogFooter";const oc=N.forwardRef(({className:e,...t},n)=>p.jsx(Y8,{ref:n,className:Xe("text-lg font-semibold",e),...t}));oc.displayName=Y8.displayName;const ac=N.forwardRef(({className:e,...t},n)=>p.jsx(q8,{ref:n,className:Xe("text-sm text-muted-foreground",e),...t}));ac.displayName=q8.displayName;const lc=N.forwardRef(({className:e,...t},n)=>p.jsx(X8,{ref:n,className:Xe(uC(),e),...t}));lc.displayName=X8.displayName;const cc=N.forwardRef(({className:e,...t},n)=>p.jsx(K8,{ref:n,className:Xe(uC({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));cc.displayName=K8.displayName;function KW({inventory:e,stats:t,gamebookData:n,onUpdateStat:r,onConsumeItem:s}){var L;const[i,o]=N.useState(!1),[l,c]=N.useState(null),[d,h]=N.useState(""),[g,y]=N.useState(!1),[w,S]=N.useState(null),C=U=>{var q,re;if(n!=null&&n.items)if(Array.isArray(n.items)){const z=n.items.find(H=>H.id===U);if(z)return z}else{const z=n.items[U];if(z)return{...z,id:U}}const K=(re=(q=n==null?void 0:n.presets)==null?void 0:q.items)==null?void 0:re[U];return K?{id:U,name:K.name,visible:K.visible!==!1,type:K.type}:{id:U,name:U,visible:!0}},A=e.filter(U=>C(U).visible),E=U=>{switch(U){case"key":return"default";case"clue":return"secondary";default:return"outline"}},k=Object.keys(t).length>0,I=A.length>0,M=(n==null?void 0:n.enemies)||Object.entries(((L=n==null?void 0:n.presets)==null?void 0:L.enemies)||{}).map(([U,K])=>({id:U,...K})),P=M.length>0,j=(U,K)=>{c(U),h(String(K))},_=U=>{const K=parseInt(d,10);!isNaN(K)&&r&&r(U,K),c(null),h("")},D=()=>{c(null),h("")};return!k&&!I&&!P?p.jsxs("div",{className:"space-y-3",children:[p.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[p.jsx(xv,{className:"h-4 w-4"}),"Inventory & Stats"]}),p.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Nothing yet..."})]}):p.jsxs("div",{className:"space-y-4",children:[k&&p.jsxs("div",{className:"space-y-3",children:[p.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[p.jsx(eB,{className:"h-4 w-4"}),"Stats",r&&p.jsx("span",{className:"text-xs text-muted-foreground font-normal",children:"(editable)"})]}),p.jsx("div",{className:"space-y-2",children:Object.entries(t).map(([U,K])=>p.jsx("div",{className:"space-y-1",children:p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsx("span",{className:"font-medium",children:U}),l===U?p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(at,{type:"number",value:d,onChange:q=>h(q.target.value),className:"h-6 w-16 text-right text-sm px-1",onKeyDown:q=>{q.key==="Enter"&&_(U),q.key==="Escape"&&D()},autoFocus:!0}),p.jsx(Ne,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>_(U),children:p.jsx(ug,{className:"h-3 w-3"})}),p.jsx(Ne,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:D,children:p.jsx(hg,{className:"h-3 w-3"})})]}):p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"text-muted-foreground",children:K}),r&&p.jsx(Ne,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-50 hover:opacity-100",onClick:()=>j(U,K),children:p.jsx(SB,{className:"h-3 w-3"})})]})]})},U))})]}),k&&I&&p.jsx(Xr,{}),I&&p.jsxs("div",{className:"space-y-3",children:[p.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[p.jsx(xv,{className:"h-4 w-4"}),"Inventory"]}),p.jsx(Cg,{children:p.jsx("div",{className:"flex flex-wrap gap-2",children:A.map(U=>{const K=C(U),q=K.type==="consumable";return p.jsxs(sC,{children:[p.jsx(iC,{asChild:!0,children:p.jsx("div",{className:"relative",children:p.jsxs(wn,{variant:E(K.type),className:`text-xs ${q?"cursor-pointer hover:opacity-80":""}`,onClick:()=>{q&&"effects"in K&&s&&(S(K),y(!0))},children:[q&&p.jsx(EB,{className:"w-3 h-3 mr-1"}),K.name]})})}),("description"in K&&K.description||q)&&p.jsx(Sg,{children:p.jsxs("div",{className:"max-w-xs space-y-1",children:["description"in K&&K.description&&p.jsx("p",{children:K.description}),q&&"effects"in K&&p.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Click to use this consumable item"})]})})]},U)})})})]}),(k||I)&&P&&p.jsx(Xr,{}),P&&p.jsxs(_W,{open:i,onOpenChange:o,children:[p.jsx(OW,{asChild:!0,children:p.jsxs(Ne,{variant:"ghost",size:"sm",className:"w-full justify-between",children:[p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx(aR,{className:"h-4 w-4"}),"Enemies Reference"]}),p.jsx(Vb,{className:`h-4 w-4 transition-transform ${i?"rotate-180":""}`})]})}),p.jsx(PW,{className:"pt-2",children:p.jsx("div",{className:"space-y-2",children:M.map(U=>p.jsxs("div",{className:"p-2 bg-muted/50 rounded text-sm",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"font-medium",children:U.name}),"rank"in U&&U.rank!==void 0&&p.jsxs(wn,{variant:"outline",className:"text-xs",children:["Rank ",U.rank]})]}),p.jsxs("div",{className:"text-xs text-muted-foreground mt-1 flex gap-3",children:["hayat"in U&&U.hayat!==void 0&&p.jsxs("span",{children:["HP: ",U.hayat]}),"attack"in U&&U.attack!==void 0&&p.jsxs("span",{children:["ATK: ",U.attack]})]}),"note"in U&&U.note&&p.jsx("p",{className:"text-xs text-muted-foreground italic mt-1",children:U.note})]},U.id))})})]}),p.jsx(Vu,{open:g,onOpenChange:y,children:p.jsxs(rc,{children:[p.jsxs(sc,{children:[p.jsxs(oc,{children:["Use ",w==null?void 0:w.name,"?"]}),p.jsxs(ac,{children:[(w==null?void 0:w.description)||"Are you sure you want to consume this item?",(w==null?void 0:w.effects)&&p.jsxs("div",{className:"mt-3 p-3 bg-muted rounded text-sm space-y-1",children:[p.jsx("p",{className:"font-medium",children:"Effects:"}),w.effects.stats&&p.jsx("div",{children:Object.entries(w.effects.stats).map(([U,K])=>p.jsxs("div",{children:[U,": ",K>0?"+":"",K]},U))}),w.effects.itemsAdd&&p.jsxs("div",{children:["Adds items: ",w.effects.itemsAdd.join(", ")]})]})]})]}),p.jsxs(ic,{children:[p.jsx(cc,{children:"Cancel"}),p.jsx(lc,{onClick:()=>{w&&s&&s(w.id),y(!1),S(null)},children:"Use Item"})]})]})})]})}var hp={},YW=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},J8={},Fs={};let kC;const qW=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Fs.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};Fs.getSymbolTotalCodewords=function(t){return qW[t]};Fs.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};Fs.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');kC=t};Fs.isKanjiModeEnabled=function(){return typeof kC<"u"};Fs.toSJIS=function(t){return kC(t)};var Vg={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},e.from=function(r,s){if(e.isValid(r))return r;try{return t(r)}catch{return s}}})(Vg);function e_(){this.buffer=[],this.length=0}e_.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var ZW=e_;function pp(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}pp.prototype.set=function(e,t,n,r){const s=e*this.size+t;this.data[s]=n,r&&(this.reservedBit[s]=!0)};pp.prototype.get=function(e,t){return this.data[e*this.size+t]};pp.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};pp.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var QW=pp,t_={};(function(e){const t=Fs.getSymbolSize;e.getRowColCoords=function(r){if(r===1)return[];const s=Math.floor(r/7)+2,i=t(r),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,l=[i-7];for(let c=1;c<s-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},e.getPositions=function(r){const s=[],i=e.getRowColCoords(r),o=i.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||s.push([i[l],i[c]]);return s}})(t_);var n_={};const JW=Fs.getSymbolSize,vA=7;n_.getPositions=function(t){const n=JW(t);return[[0,0],[n-vA,0],[0,n-vA]]};var r_={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},e.from=function(s){return e.isValid(s)?parseInt(s,10):void 0},e.getPenaltyN1=function(s){const i=s.size;let o=0,l=0,c=0,d=null,h=null;for(let g=0;g<i;g++){l=c=0,d=h=null;for(let y=0;y<i;y++){let w=s.get(g,y);w===d?l++:(l>=5&&(o+=t.N1+(l-5)),d=w,l=1),w=s.get(y,g),w===h?c++:(c>=5&&(o+=t.N1+(c-5)),h=w,c=1)}l>=5&&(o+=t.N1+(l-5)),c>=5&&(o+=t.N1+(c-5))}return o},e.getPenaltyN2=function(s){const i=s.size;let o=0;for(let l=0;l<i-1;l++)for(let c=0;c<i-1;c++){const d=s.get(l,c)+s.get(l,c+1)+s.get(l+1,c)+s.get(l+1,c+1);(d===4||d===0)&&o++}return o*t.N2},e.getPenaltyN3=function(s){const i=s.size;let o=0,l=0,c=0;for(let d=0;d<i;d++){l=c=0;for(let h=0;h<i;h++)l=l<<1&2047|s.get(d,h),h>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|s.get(h,d),h>=10&&(c===1488||c===93)&&o++}return o*t.N3},e.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let c=0;c<o;c++)i+=s.data[c];return Math.abs(Math.ceil(i*100/o/5)-10)*t.N4};function n(r,s,i){switch(r){case e.Patterns.PATTERN000:return(s+i)%2===0;case e.Patterns.PATTERN001:return s%2===0;case e.Patterns.PATTERN010:return i%3===0;case e.Patterns.PATTERN011:return(s+i)%3===0;case e.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case e.Patterns.PATTERN101:return s*i%2+s*i%3===0;case e.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case e.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}e.applyMask=function(s,i){const o=i.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)i.isReserved(c,l)||i.xor(c,l,n(s,c,l))},e.getBestMask=function(s,i){const o=Object.keys(e.Patterns).length;let l=0,c=1/0;for(let d=0;d<o;d++){i(d),e.applyMask(d,s);const h=e.getPenaltyN1(s)+e.getPenaltyN2(s)+e.getPenaltyN3(s)+e.getPenaltyN4(s);e.applyMask(d,s),h<c&&(c=h,l=d)}return l}})(r_);var Hg={};const Va=Vg,r0=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s0=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Hg.getBlocksCount=function(t,n){switch(n){case Va.L:return r0[(t-1)*4+0];case Va.M:return r0[(t-1)*4+1];case Va.Q:return r0[(t-1)*4+2];case Va.H:return r0[(t-1)*4+3];default:return}};Hg.getTotalCodewordsCount=function(t,n){switch(n){case Va.L:return s0[(t-1)*4+0];case Va.M:return s0[(t-1)*4+1];case Va.Q:return s0[(t-1)*4+2];case Va.H:return s0[(t-1)*4+3];default:return}};var s_={},Ug={};const Uf=new Uint8Array(512),Vm=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)Uf[n]=t,Vm[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)Uf[n]=Uf[n-255]})();Ug.log=function(t){if(t<1)throw new Error("log("+t+")");return Vm[t]};Ug.exp=function(t){return Uf[t]};Ug.mul=function(t,n){return t===0||n===0?0:Uf[Vm[t]+Vm[n]]};(function(e){const t=Ug;e.mul=function(r,s){const i=new Uint8Array(r.length+s.length-1);for(let o=0;o<r.length;o++)for(let l=0;l<s.length;l++)i[o+l]^=t.mul(r[o],s[l]);return i},e.mod=function(r,s){let i=new Uint8Array(r);for(;i.length-s.length>=0;){const o=i[0];for(let c=0;c<s.length;c++)i[c]^=t.mul(s[c],o);let l=0;for(;l<i.length&&i[l]===0;)l++;i=i.slice(l)}return i},e.generateECPolynomial=function(r){let s=new Uint8Array([1]);for(let i=0;i<r;i++)s=e.mul(s,new Uint8Array([1,t.exp(i)]));return s}})(s_);const i_=s_;function IC(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}IC.prototype.initialize=function(t){this.degree=t,this.genPoly=i_.generateECPolynomial(this.degree)};IC.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(t.length+this.degree);n.set(t);const r=i_.mod(n,this.genPoly),s=this.degree-r.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(r,s),i}return r};var eG=IC,o_={},gl={},RC={};RC.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var bo={};const a_="[0-9]+",tG="[A-Z $%*+\\-./:]+";let Th="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Th=Th.replace(/u/g,"\\u");const nG="(?:(?![A-Z0-9 $%*+\\-./:]|"+Th+`)(?:.|[\r
]))+`;bo.KANJI=new RegExp(Th,"g");bo.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");bo.BYTE=new RegExp(nG,"g");bo.NUMERIC=new RegExp(a_,"g");bo.ALPHANUMERIC=new RegExp(tG,"g");const rG=new RegExp("^"+Th+"$"),sG=new RegExp("^"+a_+"$"),iG=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");bo.testKanji=function(t){return rG.test(t)};bo.testNumeric=function(t){return sG.test(t)};bo.testAlphanumeric=function(t){return iG.test(t)};(function(e){const t=RC,n=bo;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},e.getBestModeForData=function(i){return n.testNumeric(i)?e.NUMERIC:n.testAlphanumeric(i)?e.ALPHANUMERIC:n.testKanji(i)?e.KANJI:e.BYTE},e.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},e.isValid=function(i){return i&&i.bit&&i.ccBits};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+s)}}e.from=function(i,o){if(e.isValid(i))return i;try{return r(i)}catch{return o}}})(gl);(function(e){const t=Fs,n=Hg,r=Vg,s=gl,i=RC,o=7973,l=t.getBCHDigit(o);function c(y,w,S){for(let C=1;C<=40;C++)if(w<=e.getCapacity(C,S,y))return C}function d(y,w){return s.getCharCountIndicator(y,w)+4}function h(y,w){let S=0;return y.forEach(function(C){const A=d(C.mode,w);S+=A+C.getBitsLength()}),S}function g(y,w){for(let S=1;S<=40;S++)if(h(y,S)<=e.getCapacity(S,w,s.MIXED))return S}e.from=function(w,S){return i.isValid(w)?parseInt(w,10):S},e.getCapacity=function(w,S,C){if(!i.isValid(w))throw new Error("Invalid QR Code version");typeof C>"u"&&(C=s.BYTE);const A=t.getSymbolTotalCodewords(w),E=n.getTotalCodewordsCount(w,S),k=(A-E)*8;if(C===s.MIXED)return k;const I=k-d(C,w);switch(C){case s.NUMERIC:return Math.floor(I/10*3);case s.ALPHANUMERIC:return Math.floor(I/11*2);case s.KANJI:return Math.floor(I/13);case s.BYTE:default:return Math.floor(I/8)}},e.getBestVersionForData=function(w,S){let C;const A=r.from(S,r.M);if(Array.isArray(w)){if(w.length>1)return g(w,A);if(w.length===0)return 1;C=w[0]}else C=w;return c(C.mode,C.getLength(),A)},e.getEncodedBits=function(w){if(!i.isValid(w)||w<7)throw new Error("Invalid QR Code version");let S=w<<12;for(;t.getBCHDigit(S)-l>=0;)S^=o<<t.getBCHDigit(S)-l;return w<<12|S}})(o_);var l_={};const Dv=Fs,c_=1335,oG=21522,bA=Dv.getBCHDigit(c_);l_.getEncodedBits=function(t,n){const r=t.bit<<3|n;let s=r<<10;for(;Dv.getBCHDigit(s)-bA>=0;)s^=c_<<Dv.getBCHDigit(s)-bA;return(r<<10|s)^oG};var u_={};const aG=gl;function hd(e){this.mode=aG.NUMERIC,this.data=e.toString()}hd.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};hd.prototype.getLength=function(){return this.data.length};hd.prototype.getBitsLength=function(){return hd.getBitsLength(this.data.length)};hd.prototype.write=function(t){let n,r,s;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),s=parseInt(r,10),t.put(s,10);const i=this.data.length-n;i>0&&(r=this.data.substr(n),s=parseInt(r,10),t.put(s,i*3+1))};var lG=hd;const cG=gl,Sy=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function pd(e){this.mode=cG.ALPHANUMERIC,this.data=e}pd.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};pd.prototype.getLength=function(){return this.data.length};pd.prototype.getBitsLength=function(){return pd.getBitsLength(this.data.length)};pd.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let r=Sy.indexOf(this.data[n])*45;r+=Sy.indexOf(this.data[n+1]),t.put(r,11)}this.data.length%2&&t.put(Sy.indexOf(this.data[n]),6)};var uG=pd;const dG=gl;function md(e){this.mode=dG.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}md.getBitsLength=function(t){return t*8};md.prototype.getLength=function(){return this.data.length};md.prototype.getBitsLength=function(){return md.getBitsLength(this.data.length)};md.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var fG=md;const hG=gl,pG=Fs;function gd(e){this.mode=hG.KANJI,this.data=e}gd.getBitsLength=function(t){return t*13};gd.prototype.getLength=function(){return this.data.length};gd.prototype.getBitsLength=function(){return gd.getBitsLength(this.data.length)};gd.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=pG.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};var mG=gd,d_={exports:{}};(function(e){var t={single_source_shortest_paths:function(n,r,s){var i={},o={};o[r]=0;var l=t.PriorityQueue.make();l.push(r,0);for(var c,d,h,g,y,w,S,C,A;!l.empty();){c=l.pop(),d=c.value,g=c.cost,y=n[d]||{};for(h in y)y.hasOwnProperty(h)&&(w=y[h],S=g+w,C=o[h],A=typeof o[h]>"u",(A||C>S)&&(o[h]=S,l.push(h,S),i[h]=d))}if(typeof s<"u"&&typeof o[s]>"u"){var E=["Could not find a path from ",r," to ",s,"."].join("");throw new Error(E)}return i},extract_shortest_path_from_predecessor_list:function(n,r){for(var s=[],i=r;i;)s.push(i),n[i],i=n[i];return s.reverse(),s},find_path:function(n,r,s){var i=t.single_source_shortest_paths(n,r,s);return t.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(n){var r=t.PriorityQueue,s={},i;n=n||{};for(i in r)r.hasOwnProperty(i)&&(s[i]=r[i]);return s.queue=[],s.sorter=n.sorter||r.default_sorter,s},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var s={value:n,cost:r};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(d_);var gG=d_.exports;(function(e){const t=gl,n=lG,r=uG,s=fG,i=mG,o=bo,l=Fs,c=gG;function d(E){return unescape(encodeURIComponent(E)).length}function h(E,k,I){const M=[];let P;for(;(P=E.exec(I))!==null;)M.push({data:P[0],index:P.index,mode:k,length:P[0].length});return M}function g(E){const k=h(o.NUMERIC,t.NUMERIC,E),I=h(o.ALPHANUMERIC,t.ALPHANUMERIC,E);let M,P;return l.isKanjiModeEnabled()?(M=h(o.BYTE,t.BYTE,E),P=h(o.KANJI,t.KANJI,E)):(M=h(o.BYTE_KANJI,t.BYTE,E),P=[]),k.concat(I,M,P).sort(function(_,D){return _.index-D.index}).map(function(_){return{data:_.data,mode:_.mode,length:_.length}})}function y(E,k){switch(k){case t.NUMERIC:return n.getBitsLength(E);case t.ALPHANUMERIC:return r.getBitsLength(E);case t.KANJI:return i.getBitsLength(E);case t.BYTE:return s.getBitsLength(E)}}function w(E){return E.reduce(function(k,I){const M=k.length-1>=0?k[k.length-1]:null;return M&&M.mode===I.mode?(k[k.length-1].data+=I.data,k):(k.push(I),k)},[])}function S(E){const k=[];for(let I=0;I<E.length;I++){const M=E[I];switch(M.mode){case t.NUMERIC:k.push([M,{data:M.data,mode:t.ALPHANUMERIC,length:M.length},{data:M.data,mode:t.BYTE,length:M.length}]);break;case t.ALPHANUMERIC:k.push([M,{data:M.data,mode:t.BYTE,length:M.length}]);break;case t.KANJI:k.push([M,{data:M.data,mode:t.BYTE,length:d(M.data)}]);break;case t.BYTE:k.push([{data:M.data,mode:t.BYTE,length:d(M.data)}])}}return k}function C(E,k){const I={},M={start:{}};let P=["start"];for(let j=0;j<E.length;j++){const _=E[j],D=[];for(let L=0;L<_.length;L++){const U=_[L],K=""+j+L;D.push(K),I[K]={node:U,lastCount:0},M[K]={};for(let q=0;q<P.length;q++){const re=P[q];I[re]&&I[re].node.mode===U.mode?(M[re][K]=y(I[re].lastCount+U.length,U.mode)-y(I[re].lastCount,U.mode),I[re].lastCount+=U.length):(I[re]&&(I[re].lastCount=U.length),M[re][K]=y(U.length,U.mode)+4+t.getCharCountIndicator(U.mode,k))}}P=D}for(let j=0;j<P.length;j++)M[P[j]].end=0;return{map:M,table:I}}function A(E,k){let I;const M=t.getBestModeForData(E);if(I=t.from(k,M),I!==t.BYTE&&I.bit<M.bit)throw new Error('"'+E+'" cannot be encoded with mode '+t.toString(I)+`.
 Suggested mode is: `+t.toString(M));switch(I===t.KANJI&&!l.isKanjiModeEnabled()&&(I=t.BYTE),I){case t.NUMERIC:return new n(E);case t.ALPHANUMERIC:return new r(E);case t.KANJI:return new i(E);case t.BYTE:return new s(E)}}e.fromArray=function(k){return k.reduce(function(I,M){return typeof M=="string"?I.push(A(M,null)):M.data&&I.push(A(M.data,M.mode)),I},[])},e.fromString=function(k,I){const M=g(k,l.isKanjiModeEnabled()),P=S(M),j=C(P,I),_=c.find_path(j.map,"start","end"),D=[];for(let L=1;L<_.length-1;L++)D.push(j.table[_[L]].node);return e.fromArray(w(D))},e.rawSplit=function(k){return e.fromArray(g(k,l.isKanjiModeEnabled()))}})(u_);const $g=Fs,Ey=Vg,xG=ZW,yG=QW,wG=t_,vG=n_,jv=r_,Lv=Hg,bG=eG,Hm=o_,CG=l_,SG=gl,Ny=u_;function EG(e,t){const n=e.size,r=vG.getPositions(t);for(let s=0;s<r.length;s++){const i=r[s][0],o=r[s][1];for(let l=-1;l<=7;l++)if(!(i+l<=-1||n<=i+l))for(let c=-1;c<=7;c++)o+c<=-1||n<=o+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?e.set(i+l,o+c,!0,!0):e.set(i+l,o+c,!1,!0))}}function NG(e){const t=e.size;for(let n=8;n<t-8;n++){const r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}function AG(e,t){const n=wG.getPositions(t);for(let r=0;r<n.length;r++){const s=n[r][0],i=n[r][1];for(let o=-2;o<=2;o++)for(let l=-2;l<=2;l++)o===-2||o===2||l===-2||l===2||o===0&&l===0?e.set(s+o,i+l,!0,!0):e.set(s+o,i+l,!1,!0)}}function TG(e,t){const n=e.size,r=Hm.getEncodedBits(t);let s,i,o;for(let l=0;l<18;l++)s=Math.floor(l/3),i=l%3+n-8-3,o=(r>>l&1)===1,e.set(s,i,o,!0),e.set(i,s,o,!0)}function Ay(e,t,n){const r=e.size,s=CG.getEncodedBits(t,n);let i,o;for(i=0;i<15;i++)o=(s>>i&1)===1,i<6?e.set(i,8,o,!0):i<8?e.set(i+1,8,o,!0):e.set(r-15+i,8,o,!0),i<8?e.set(8,r-i-1,o,!0):i<9?e.set(8,15-i-1+1,o,!0):e.set(8,15-i-1,o,!0);e.set(r-8,8,1,!0)}function kG(e,t){const n=e.size;let r=-1,s=n-1,i=7,o=0;for(let l=n-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!e.isReserved(s,l-c)){let d=!1;o<t.length&&(d=(t[o]>>>i&1)===1),e.set(s,l-c,d),i--,i===-1&&(o++,i=7)}if(s+=r,s<0||n<=s){s-=r,r=-r;break}}}function IG(e,t,n){const r=new xG;n.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),SG.getCharCountIndicator(c.mode,e)),c.write(r)});const s=$g.getSymbolTotalCodewords(e),i=Lv.getTotalCodewordsCount(e,t),o=(s-i)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const l=(o-r.getLengthInBits())/8;for(let c=0;c<l;c++)r.put(c%2?17:236,8);return RG(r,e,t)}function RG(e,t,n){const r=$g.getSymbolTotalCodewords(t),s=Lv.getTotalCodewordsCount(t,n),i=r-s,o=Lv.getBlocksCount(t,n),l=r%o,c=o-l,d=Math.floor(r/o),h=Math.floor(i/o),g=h+1,y=d-h,w=new bG(y);let S=0;const C=new Array(o),A=new Array(o);let E=0;const k=new Uint8Array(e.buffer);for(let _=0;_<o;_++){const D=_<c?h:g;C[_]=k.slice(S,S+D),A[_]=w.encode(C[_]),S+=D,E=Math.max(E,D)}const I=new Uint8Array(r);let M=0,P,j;for(P=0;P<E;P++)for(j=0;j<o;j++)P<C[j].length&&(I[M++]=C[j][P]);for(P=0;P<y;P++)for(j=0;j<o;j++)I[M++]=A[j][P];return I}function MG(e,t,n,r){let s;if(Array.isArray(e))s=Ny.fromArray(e);else if(typeof e=="string"){let d=t;if(!d){const h=Ny.rawSplit(e);d=Hm.getBestVersionForData(h,n)}s=Ny.fromString(e,d||40)}else throw new Error("Invalid data");const i=Hm.getBestVersionForData(s,n);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=i;else if(t<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=IG(t,n,s),l=$g.getSymbolSize(t),c=new yG(l);return EG(c,t),NG(c),AG(c,t),Ay(c,n,0),t>=7&&TG(c,t),kG(c,o),isNaN(r)&&(r=jv.getBestMask(c,Ay.bind(null,c,n))),jv.applyMask(r,c),Ay(c,n,r),{modules:c,version:t,errorCorrectionLevel:n,maskPattern:r,segments:s}}J8.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let r=Ey.M,s,i;return typeof n<"u"&&(r=Ey.from(n.errorCorrectionLevel,Ey.M),s=Hm.from(n.version),i=jv.from(n.maskPattern),n.toSJISFunc&&$g.setToSJISFunction(n.toSJISFunc)),MG(t,s,r,i)};var f_={},MC={};(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(i){return[i,i]}))),r.length===6&&r.push("F","F");const s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+r.slice(0,6).join("")}}e.getOptions=function(r){r||(r={}),r.color||(r.color={});const s=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,i=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:t(r.color.dark||"#000000ff"),light:t(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},e.getScale=function(r,s){return s.width&&s.width>=r+s.margin*2?s.width/(r+s.margin*2):s.scale},e.getImageWidth=function(r,s){const i=e.getScale(r,s);return Math.floor((r+s.margin*2)*i)},e.qrToImageData=function(r,s,i){const o=s.modules.size,l=s.modules.data,c=e.getScale(o,i),d=Math.floor((o+i.margin*2)*c),h=i.margin*c,g=[i.color.light,i.color.dark];for(let y=0;y<d;y++)for(let w=0;w<d;w++){let S=(y*d+w)*4,C=i.color.light;if(y>=h&&w>=h&&y<d-h&&w<d-h){const A=Math.floor((y-h)/c),E=Math.floor((w-h)/c);C=g[l[A*o+E]?1:0]}r[S++]=C.r,r[S++]=C.g,r[S++]=C.b,r[S]=C.a}}})(MC);(function(e){const t=MC;function n(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(i,o,l){let c=l,d=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(d=r()),c=t.getOptions(c);const h=t.getImageWidth(i.modules.size,c),g=d.getContext("2d"),y=g.createImageData(h,h);return t.qrToImageData(y.data,i,c),n(g,d,h),g.putImageData(y,0,0),d},e.renderToDataURL=function(i,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const d=e.render(i,o,c),h=c.type||"image/png",g=c.rendererOpts||{};return d.toDataURL(h,g.quality)}})(f_);var h_={};const _G=MC;function CA(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function Ty(e,t,n){let r=e+t;return typeof n<"u"&&(r+=" "+n),r}function OG(e,t,n){let r="",s=0,i=!1,o=0;for(let l=0;l<e.length;l++){const c=Math.floor(l%t),d=Math.floor(l/t);!c&&!i&&(i=!0),e[l]?(o++,l>0&&c>0&&e[l-1]||(r+=i?Ty("M",c+n,.5+d+n):Ty("m",s,0),s=0,i=!1),c+1<t&&e[l+1]||(r+=Ty("h",o),o=0)):s++}return r}h_.render=function(t,n,r){const s=_G.getOptions(n),i=t.modules.size,o=t.modules.data,l=i+s.margin*2,c=s.color.light.a?"<path "+CA(s.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",d="<path "+CA(s.color.dark,"stroke")+' d="'+OG(o,i,s.margin)+'"/>',h='viewBox="0 0 '+l+" "+l+'"',y='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+h+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof r=="function"&&r(null,y),y};const PG=YW,Bv=J8,p_=f_,DG=h_;function _C(e,t,n,r,s){const i=[].slice.call(arguments,1),o=i.length,l=typeof i[o-1]=="function";if(!l&&!PG())throw new Error("Callback required as last argument");if(l){if(o<2)throw new Error("Too few arguments provided");o===2?(s=n,n=t,t=r=void 0):o===3&&(t.getContext&&typeof s>"u"?(s=r,r=void 0):(s=r,r=n,n=t,t=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(n=t,t=r=void 0):o===2&&!t.getContext&&(r=n,n=t,t=void 0),new Promise(function(c,d){try{const h=Bv.create(n,r);c(e(h,t,r))}catch(h){d(h)}})}try{const c=Bv.create(n,r);s(null,e(c,t,r))}catch(c){s(c)}}hp.create=Bv.create;hp.toCanvas=_C.bind(null,p_.render);hp.toDataURL=_C.bind(null,p_.renderToDataURL);hp.toString=_C.bind(null,function(e,t,n){return DG.render(e,n)});function jG({saveSlots:e,onSave:t,onLoad:n,onDelete:r,maxSlots:s,onExportSave:i}){const[o,l]=N.useState(""),[c,d]=N.useState(!1),[h,g]=N.useState(!1),[y,w]=N.useState(null),[S,C]=N.useState(""),[A,E]=N.useState(""),[k,I]=N.useState(!1),M=()=>{const K=e.map(q=>q.id);for(let q=1;q<=s;q++)if(!K.includes(q))return q;return 1},P=()=>{const K=M();t(K,o||`Save ${K}`),l(""),d(!1)},j=K=>new Date(K).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),_=async K=>{if(!i)return;w(K);const q=i(K);E(q);try{const re=await hp.toDataURL(q,{width:300,margin:2,color:{dark:"#000000",light:"#ffffff"}});C(re)}catch(re){console.error("Failed to generate QR code:",re)}g(!0),I(!1)},D=()=>{navigator.clipboard.writeText(A),I(!0),setTimeout(()=>I(!1),2e3)},L=()=>{const K=document.createElement("a");K.href=S,K.download=`${(y==null?void 0:y.name)||"save"}-qr.png`,K.click()},U=()=>{if(!y)return;const K=new Blob([JSON.stringify(y.state,null,2)],{type:"application/json"}),q=URL.createObjectURL(K),re=document.createElement("a");re.href=q,re.download=`${y.name}.json`,re.click(),URL.revokeObjectURL(q)};return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[p.jsx(Hb,{className:"h-4 w-4"}),"Save / Load"]}),p.jsxs(go,{open:c,onOpenChange:d,children:[p.jsx(Lg,{asChild:!0,children:p.jsxs(Ne,{size:"sm",variant:"outline",disabled:e.length>=s,children:[p.jsx(Os,{className:"h-3 w-3 mr-1"}),"New Save"]})}),p.jsxs(ji,{children:[p.jsxs(Li,{children:[p.jsx(Bi,{children:"Save Game"}),p.jsx(Jo,{children:"Enter a name for your save file."})]}),p.jsx(at,{placeholder:"Save name...",value:o,onChange:K=>l(K.target.value),onKeyDown:K=>K.key==="Enter"&&P()}),p.jsx(Hc,{children:p.jsx(Ne,{onClick:P,children:"Save"})})]})]})]}),e.length===0?p.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No saved games"}):p.jsx("div",{className:"space-y-2",children:e.map(K=>p.jsxs("div",{className:"bg-muted rounded-md p-3 space-y-2",children:[p.jsxs("div",{className:"flex items-start justify-between gap-2",children:[p.jsxs("div",{className:"min-w-0 flex-1",children:[p.jsx("div",{className:"font-medium text-sm truncate",children:K.name}),p.jsx("div",{className:"text-xs text-muted-foreground",children:j(K.savedAt)})]}),p.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[p.jsx(Ne,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>n(K),title:"Load",children:p.jsx(nR,{className:"h-3 w-3"})}),i&&p.jsx(Ne,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>_(K),title:"Export/Share",children:p.jsx(sR,{className:"h-3 w-3"})}),p.jsxs(Vu,{children:[p.jsx(Z8,{asChild:!0,children:p.jsx(Ne,{size:"icon",variant:"ghost",className:"h-7 w-7 text-destructive",title:"Delete",children:p.jsx(Js,{className:"h-3 w-3"})})}),p.jsxs(rc,{children:[p.jsxs(sc,{children:[p.jsx(oc,{children:"Delete Save?"}),p.jsxs(ac,{children:['This action cannot be undone. This will permanently delete "',K.name,'".']})]}),p.jsxs(ic,{children:[p.jsx(cc,{children:"Cancel"}),p.jsx(lc,{onClick:()=>r(K.id),children:"Delete"})]})]})]})]})]}),p.jsx("div",{className:"text-xs text-muted-foreground truncate",children:K.pagePreview})]},K.id))}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.length,"/",s," slots used"]}),p.jsx(go,{open:h,onOpenChange:g,children:p.jsxs(ji,{className:"sm:max-w-md",children:[p.jsxs(Li,{children:[p.jsxs(Bi,{children:["Export Save - ",y==null?void 0:y.name]}),p.jsx(Jo,{children:"Share this save across your devices or with others"})]}),p.jsxs("div",{className:"space-y-4",children:[S&&p.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[p.jsx("img",{src:S,alt:"QR Code",className:"w-64 h-64 border rounded"}),p.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Scan with your other device"}),p.jsxs(Ne,{variant:"outline",size:"sm",onClick:L,className:"w-full",children:[p.jsx(Tm,{className:"h-4 w-4 mr-2"}),"Download QR Image"]})]}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("span",{className:"w-full border-t"})}),p.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:p.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium",children:"Share Code"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(at,{value:A,readOnly:!0,className:"font-mono text-xs"}),p.jsx(Ne,{variant:"outline",size:"icon",onClick:D,children:k?p.jsx(ug,{className:"h-4 w-4"}):p.jsx(J4,{className:"h-4 w-4"})})]}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Copy and paste this code on another device"})]}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("span",{className:"w-full border-t"})}),p.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:p.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),p.jsxs(Ne,{variant:"outline",onClick:U,className:"w-full",children:[p.jsx(Tm,{className:"h-4 w-4 mr-2"}),"Download as JSON File"]})]})]})})]})}function LG({choice:e,canChoose:t,requirements:n=[],hasInput:r,hasCombat:s,onClick:i}){const o=!t,l=o&&n.length>0,c=p.jsxs(Ne,{variant:"outline",className:`w-full justify-between text-left h-auto py-4 px-5 font-normal transition-all ${o?"opacity-60":s?"hover:bg-red-50 dark:hover:bg-red-950/20":"hover:bg-accent"}`,disabled:o,onClick:i,children:[p.jsxs("span",{className:"flex-1 flex items-center gap-2",children:[s&&p.jsx(dg,{className:"h-4 w-4 text-red-500"}),e.text]}),o?p.jsx(gv,{className:"h-4 w-4 ml-2 flex-shrink-0 text-muted-foreground"}):p.jsx(Q4,{className:"h-4 w-4 ml-2 flex-shrink-0"})]});return l?p.jsx(Cg,{delayDuration:300,children:p.jsxs(sC,{children:[p.jsx(iC,{asChild:!0,children:p.jsx("div",{children:c})}),p.jsx(Sg,{side:"top",className:"max-w-xs",children:p.jsx("div",{className:"space-y-1",children:n.map((d,h)=>p.jsx("p",{className:"text-sm",children:d},h))})})]})}):c}function BG({open:e,onOpenChange:t,input:n,onSubmit:r}){const[s,i]=N.useState(""),[o,l]=N.useState(!1),c=()=>{let h=!1;if(n.type==="number"){const g=parseFloat(s);h=!isNaN(g)&&g===n.answer}else h=s.trim().toLowerCase()===String(n.answer).toLowerCase();h||(l(!0),setTimeout(()=>l(!1),500)),i(""),r(h)},d=h=>{h.key==="Enter"&&c()};return p.jsx(go,{open:e,onOpenChange:t,children:p.jsxs(ji,{className:"sm:max-w-md",children:[p.jsxs(Li,{children:[p.jsxs(Bi,{className:"flex items-center gap-2",children:[p.jsx(pB,{className:"h-5 w-5"}),"Input Required"]}),p.jsx(Jo,{children:n.prompt})]}),p.jsx("div",{className:"space-y-4 py-4",children:p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{htmlFor:"puzzle-input",children:"Your Answer"}),p.jsx(at,{id:"puzzle-input",type:n.type==="number"?"number":"text",value:s,onChange:h=>i(h.target.value),onKeyDown:d,className:o?"border-destructive animate-shake":"",placeholder:n.type==="number"?"Enter a number...":"Enter your answer...",autoFocus:!0})]})}),p.jsxs(Hc,{children:[p.jsx(Ne,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),p.jsx(Ne,{onClick:c,children:"Submit"})]})]})})}function Wg(e){const t=N.useRef({value:e,previous:e});return N.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var FG=[" ","Enter","ArrowUp","ArrowDown"],zG=[" ","Enter"],kc="Select",[Gg,Xg,VG]=ag(kc),[Vd,Uce]=cs(kc,[VG,Fd]),Kg=Fd(),[HG,xl]=Vd(kc),[UG,$G]=Vd(kc),m_=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:g,disabled:y,required:w,form:S}=e,C=Kg(t),[A,E]=N.useState(null),[k,I]=N.useState(null),[M,P]=N.useState(!1),j=op(d),[_,D]=li({prop:r,defaultProp:s??!1,onChange:i,caller:kc}),[L,U]=li({prop:o,defaultProp:l,onChange:c,caller:kc}),K=N.useRef(null),q=A?S||!!A.closest("form"):!0,[re,z]=N.useState(new Set),H=Array.from(re).map(Y=>Y.props.value).join(";");return p.jsx(eC,{...C,children:p.jsxs(HG,{required:w,scope:t,trigger:A,onTriggerChange:E,valueNode:k,onValueNodeChange:I,valueNodeHasChildren:M,onValueNodeHasChildrenChange:P,contentId:Mi(),value:L,onValueChange:U,open:_,onOpenChange:D,dir:j,triggerPointerDownPosRef:K,disabled:y,children:[p.jsx(Gg.Provider,{scope:t,children:p.jsx(UG,{scope:e.__scopeSelect,onNativeOptionAdd:N.useCallback(Y=>{z(X=>new Set(X).add(Y))},[]),onNativeOptionRemove:N.useCallback(Y=>{z(X=>{const W=new Set(X);return W.delete(Y),W})},[]),children:n})}),q?p.jsxs(F_,{"aria-hidden":!0,required:w,tabIndex:-1,name:h,autoComplete:g,value:L,onChange:Y=>U(Y.target.value),disabled:y,form:S,children:[L===void 0?p.jsx("option",{value:""}):null,Array.from(re)]},H):null]})})};m_.displayName=kc;var g_="SelectTrigger",x_=N.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,i=Kg(n),o=xl(g_,n),l=o.disabled||r,c=dt(t,o.onTriggerChange),d=Xg(n),h=N.useRef("touch"),[g,y,w]=V_(C=>{const A=d().filter(I=>!I.disabled),E=A.find(I=>I.value===o.value),k=H_(A,C,E);k!==void 0&&o.onValueChange(k.value)}),S=C=>{l||(o.onOpenChange(!0),w()),C&&(o.triggerPointerDownPosRef.current={x:Math.round(C.pageX),y:Math.round(C.pageY)})};return p.jsx(yg,{asChild:!0,...i,children:p.jsx(Ye.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":z_(o.value)?"":void 0,...s,ref:c,onClick:ze(s.onClick,C=>{C.currentTarget.focus(),h.current!=="mouse"&&S(C)}),onPointerDown:ze(s.onPointerDown,C=>{h.current=C.pointerType;const A=C.target;A.hasPointerCapture(C.pointerId)&&A.releasePointerCapture(C.pointerId),C.button===0&&C.ctrlKey===!1&&C.pointerType==="mouse"&&(S(C),C.preventDefault())}),onKeyDown:ze(s.onKeyDown,C=>{const A=g.current!=="";!(C.ctrlKey||C.altKey||C.metaKey)&&C.key.length===1&&y(C.key),!(A&&C.key===" ")&&FG.includes(C.key)&&(S(),C.preventDefault())})})})});x_.displayName=g_;var y_="SelectValue",w_=N.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...l}=e,c=xl(y_,n),{onValueNodeHasChildrenChange:d}=c,h=i!==void 0,g=dt(t,c.onValueNodeChange);return ar(()=>{d(h)},[d,h]),p.jsx(Ye.span,{...l,ref:g,style:{pointerEvents:"none"},children:z_(c.value)?p.jsx(p.Fragment,{children:o}):i})});w_.displayName=y_;var WG="SelectIcon",v_=N.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return p.jsx(Ye.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});v_.displayName=WG;var GG="SelectPortal",b_=e=>p.jsx(rp,{asChild:!0,...e});b_.displayName=GG;var Ic="SelectContent",C_=N.forwardRef((e,t)=>{const n=xl(Ic,e.__scopeSelect),[r,s]=N.useState();if(ar(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?zc.createPortal(p.jsx(S_,{scope:e.__scopeSelect,children:p.jsx(Gg.Slot,{scope:e.__scopeSelect,children:p.jsx("div",{children:e.children})})}),i):null}return p.jsx(E_,{...e,ref:t})});C_.displayName=Ic;var yi=10,[S_,yl]=Vd(Ic),XG="SelectContentImpl",KG=Ec("SelectContent.RemoveScroll"),E_=N.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:g,collisionBoundary:y,collisionPadding:w,sticky:S,hideWhenDetached:C,avoidCollisions:A,...E}=e,k=xl(Ic,n),[I,M]=N.useState(null),[P,j]=N.useState(null),_=dt(t,ie=>M(ie)),[D,L]=N.useState(null),[U,K]=N.useState(null),q=Xg(n),[re,z]=N.useState(!1),H=N.useRef(!1);N.useEffect(()=>{if(I)return hC(I)},[I]),fC();const Y=N.useCallback(ie=>{const[de,...pe]=q().map(De=>De.ref.current),[ye]=pe.slice(-1),Se=document.activeElement;for(const De of ie)if(De===Se||(De==null||De.scrollIntoView({block:"nearest"}),De===de&&P&&(P.scrollTop=0),De===ye&&P&&(P.scrollTop=P.scrollHeight),De==null||De.focus(),document.activeElement!==Se))return},[q,P]),X=N.useCallback(()=>Y([D,I]),[Y,D,I]);N.useEffect(()=>{re&&X()},[re,X]);const{onOpenChange:W,triggerPointerDownPosRef:V}=k;N.useEffect(()=>{if(I){let ie={x:0,y:0};const de=ye=>{var Se,De;ie={x:Math.abs(Math.round(ye.pageX)-(((Se=V.current)==null?void 0:Se.x)??0)),y:Math.abs(Math.round(ye.pageY)-(((De=V.current)==null?void 0:De.y)??0))}},pe=ye=>{ie.x<=10&&ie.y<=10?ye.preventDefault():I.contains(ye.target)||W(!1),document.removeEventListener("pointermove",de),V.current=null};return V.current!==null&&(document.addEventListener("pointermove",de),document.addEventListener("pointerup",pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",de),document.removeEventListener("pointerup",pe,{capture:!0})}}},[I,W,V]),N.useEffect(()=>{const ie=()=>W(!1);return window.addEventListener("blur",ie),window.addEventListener("resize",ie),()=>{window.removeEventListener("blur",ie),window.removeEventListener("resize",ie)}},[W]);const[ee,ae]=V_(ie=>{const de=q().filter(Se=>!Se.disabled),pe=de.find(Se=>Se.ref.current===document.activeElement),ye=H_(de,ie,pe);ye&&setTimeout(()=>ye.ref.current.focus())}),se=N.useCallback((ie,de,pe)=>{const ye=!H.current&&!pe;(k.value!==void 0&&k.value===de||ye)&&(L(ie),ye&&(H.current=!0))},[k.value]),G=N.useCallback(()=>I==null?void 0:I.focus(),[I]),Q=N.useCallback((ie,de,pe)=>{const ye=!H.current&&!pe;(k.value!==void 0&&k.value===de||ye)&&K(ie)},[k.value]),te=r==="popper"?Fv:N_,ne=te===Fv?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:g,collisionBoundary:y,collisionPadding:w,sticky:S,hideWhenDetached:C,avoidCollisions:A}:{};return p.jsx(S_,{scope:n,content:I,viewport:P,onViewportChange:j,itemRefCallback:se,selectedItem:D,onItemLeave:G,itemTextRefCallback:Q,focusSelectedItem:X,selectedItemText:U,position:r,isPositioned:re,searchRef:ee,children:p.jsx(Pg,{as:KG,allowPinchZoom:!0,children:p.jsx(_g,{asChild:!0,trapped:k.open,onMountAutoFocus:ie=>{ie.preventDefault()},onUnmountAutoFocus:ze(s,ie=>{var de;(de=k.trigger)==null||de.focus({preventScroll:!0}),ie.preventDefault()}),children:p.jsx(Pd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ie=>ie.preventDefault(),onDismiss:()=>k.onOpenChange(!1),children:p.jsx(te,{role:"listbox",id:k.contentId,"data-state":k.open?"open":"closed",dir:k.dir,onContextMenu:ie=>ie.preventDefault(),...E,...ne,onPlaced:()=>z(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:ze(E.onKeyDown,ie=>{const de=ie.ctrlKey||ie.altKey||ie.metaKey;if(ie.key==="Tab"&&ie.preventDefault(),!de&&ie.key.length===1&&ae(ie.key),["ArrowUp","ArrowDown","Home","End"].includes(ie.key)){let ye=q().filter(Se=>!Se.disabled).map(Se=>Se.ref.current);if(["ArrowUp","End"].includes(ie.key)&&(ye=ye.slice().reverse()),["ArrowUp","ArrowDown"].includes(ie.key)){const Se=ie.target,De=ye.indexOf(Se);ye=ye.slice(De+1)}setTimeout(()=>Y(ye)),ie.preventDefault()}})})})})})})});E_.displayName=XG;var YG="SelectItemAlignedPosition",N_=N.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,i=xl(Ic,n),o=yl(Ic,n),[l,c]=N.useState(null),[d,h]=N.useState(null),g=dt(t,_=>h(_)),y=Xg(n),w=N.useRef(!1),S=N.useRef(!0),{viewport:C,selectedItem:A,selectedItemText:E,focusSelectedItem:k}=o,I=N.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&C&&A&&E){const _=i.trigger.getBoundingClientRect(),D=d.getBoundingClientRect(),L=i.valueNode.getBoundingClientRect(),U=E.getBoundingClientRect();if(i.dir!=="rtl"){const Se=U.left-D.left,De=L.left-Se,xe=_.left-De,Ue=_.width+xe,nt=Math.max(Ue,D.width),et=window.innerWidth-yi,je=Ah(De,[yi,Math.max(yi,et-nt)]);l.style.minWidth=Ue+"px",l.style.left=je+"px"}else{const Se=D.right-U.right,De=window.innerWidth-L.right-Se,xe=window.innerWidth-_.right-De,Ue=_.width+xe,nt=Math.max(Ue,D.width),et=window.innerWidth-yi,je=Ah(De,[yi,Math.max(yi,et-nt)]);l.style.minWidth=Ue+"px",l.style.right=je+"px"}const K=y(),q=window.innerHeight-yi*2,re=C.scrollHeight,z=window.getComputedStyle(d),H=parseInt(z.borderTopWidth,10),Y=parseInt(z.paddingTop,10),X=parseInt(z.borderBottomWidth,10),W=parseInt(z.paddingBottom,10),V=H+Y+re+W+X,ee=Math.min(A.offsetHeight*5,V),ae=window.getComputedStyle(C),se=parseInt(ae.paddingTop,10),G=parseInt(ae.paddingBottom,10),Q=_.top+_.height/2-yi,te=q-Q,ne=A.offsetHeight/2,ie=A.offsetTop+ne,de=H+Y+ie,pe=V-de;if(de<=Q){const Se=K.length>0&&A===K[K.length-1].ref.current;l.style.bottom="0px";const De=d.clientHeight-C.offsetTop-C.offsetHeight,xe=Math.max(te,ne+(Se?G:0)+De+X),Ue=de+xe;l.style.height=Ue+"px"}else{const Se=K.length>0&&A===K[0].ref.current;l.style.top="0px";const xe=Math.max(Q,H+C.offsetTop+(Se?se:0)+ne)+pe;l.style.height=xe+"px",C.scrollTop=de-Q+C.offsetTop}l.style.margin=`${yi}px 0`,l.style.minHeight=ee+"px",l.style.maxHeight=q+"px",r==null||r(),requestAnimationFrame(()=>w.current=!0)}},[y,i.trigger,i.valueNode,l,d,C,A,E,i.dir,r]);ar(()=>I(),[I]);const[M,P]=N.useState();ar(()=>{d&&P(window.getComputedStyle(d).zIndex)},[d]);const j=N.useCallback(_=>{_&&S.current===!0&&(I(),k==null||k(),S.current=!1)},[I,k]);return p.jsx(ZG,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:w,onScrollButtonChange:j,children:p.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:p.jsx(Ye.div,{...s,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});N_.displayName=YG;var qG="SelectPopperPosition",Fv=N.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=yi,...i}=e,o=Kg(n);return p.jsx(tC,{...o,...i,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Fv.displayName=qG;var[ZG,OC]=Vd(Ic,{}),zv="SelectViewport",A_=N.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,i=yl(zv,n),o=OC(zv,n),l=dt(t,i.onViewportChange),c=N.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),p.jsx(Gg.Slot,{scope:n,children:p.jsx(Ye.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ze(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:y}=o;if(y!=null&&y.current&&g){const w=Math.abs(c.current-h.scrollTop);if(w>0){const S=window.innerHeight-yi*2,C=parseFloat(g.style.minHeight),A=parseFloat(g.style.height),E=Math.max(C,A);if(E<S){const k=E+w,I=Math.min(S,k),M=k-I;g.style.height=I+"px",g.style.bottom==="0px"&&(h.scrollTop=M>0?M:0,g.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});A_.displayName=zv;var T_="SelectGroup",[QG,JG]=Vd(T_),eX=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Mi();return p.jsx(QG,{scope:n,id:s,children:p.jsx(Ye.div,{role:"group","aria-labelledby":s,...r,ref:t})})});eX.displayName=T_;var k_="SelectLabel",I_=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=JG(k_,n);return p.jsx(Ye.div,{id:s.id,...r,ref:t})});I_.displayName=k_;var Um="SelectItem",[tX,R_]=Vd(Um),M_=N.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=e,l=xl(Um,n),c=yl(Um,n),d=l.value===r,[h,g]=N.useState(i??""),[y,w]=N.useState(!1),S=dt(t,k=>{var I;return(I=c.itemRefCallback)==null?void 0:I.call(c,k,r,s)}),C=Mi(),A=N.useRef("touch"),E=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(tX,{scope:n,value:r,disabled:s,textId:C,isSelected:d,onItemTextChange:N.useCallback(k=>{g(I=>I||((k==null?void 0:k.textContent)??"").trim())},[]),children:p.jsx(Gg.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:p.jsx(Ye.div,{role:"option","aria-labelledby":C,"data-highlighted":y?"":void 0,"aria-selected":d&&y,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:S,onFocus:ze(o.onFocus,()=>w(!0)),onBlur:ze(o.onBlur,()=>w(!1)),onClick:ze(o.onClick,()=>{A.current!=="mouse"&&E()}),onPointerUp:ze(o.onPointerUp,()=>{A.current==="mouse"&&E()}),onPointerDown:ze(o.onPointerDown,k=>{A.current=k.pointerType}),onPointerMove:ze(o.onPointerMove,k=>{var I;A.current=k.pointerType,s?(I=c.onItemLeave)==null||I.call(c):A.current==="mouse"&&k.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ze(o.onPointerLeave,k=>{var I;k.currentTarget===document.activeElement&&((I=c.onItemLeave)==null||I.call(c))}),onKeyDown:ze(o.onKeyDown,k=>{var M;((M=c.searchRef)==null?void 0:M.current)!==""&&k.key===" "||(zG.includes(k.key)&&E(),k.key===" "&&k.preventDefault())})})})})});M_.displayName=Um;var bf="SelectItemText",__=N.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...i}=e,o=xl(bf,n),l=yl(bf,n),c=R_(bf,n),d=$G(bf,n),[h,g]=N.useState(null),y=dt(t,E=>g(E),c.onItemTextChange,E=>{var k;return(k=l.itemTextRefCallback)==null?void 0:k.call(l,E,c.value,c.disabled)}),w=h==null?void 0:h.textContent,S=N.useMemo(()=>p.jsx("option",{value:c.value,disabled:c.disabled,children:w},c.value),[c.disabled,c.value,w]),{onNativeOptionAdd:C,onNativeOptionRemove:A}=d;return ar(()=>(C(S),()=>A(S)),[C,A,S]),p.jsxs(p.Fragment,{children:[p.jsx(Ye.span,{id:c.textId,...i,ref:y}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?zc.createPortal(i.children,o.valueNode):null]})});__.displayName=bf;var O_="SelectItemIndicator",P_=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return R_(O_,n).isSelected?p.jsx(Ye.span,{"aria-hidden":!0,...r,ref:t}):null});P_.displayName=O_;var Vv="SelectScrollUpButton",D_=N.forwardRef((e,t)=>{const n=yl(Vv,e.__scopeSelect),r=OC(Vv,e.__scopeSelect),[s,i]=N.useState(!1),o=dt(t,r.onScrollButtonChange);return ar(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?p.jsx(L_,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});D_.displayName=Vv;var Hv="SelectScrollDownButton",j_=N.forwardRef((e,t)=>{const n=yl(Hv,e.__scopeSelect),r=OC(Hv,e.__scopeSelect),[s,i]=N.useState(!1),o=dt(t,r.onScrollButtonChange);return ar(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?p.jsx(L_,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});j_.displayName=Hv;var L_=N.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,i=yl("SelectScrollButton",n),o=N.useRef(null),l=Xg(n),c=N.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return N.useEffect(()=>()=>c(),[c]),ar(()=>{var h;const d=l().find(g=>g.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),p.jsx(Ye.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:ze(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ze(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ze(s.onPointerLeave,()=>{c()})})}),nX="SelectSeparator",B_=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return p.jsx(Ye.div,{"aria-hidden":!0,...r,ref:t})});B_.displayName=nX;var Uv="SelectArrow",rX=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Kg(n),i=xl(Uv,n),o=yl(Uv,n);return i.open&&o.position==="popper"?p.jsx(nC,{...s,...r,ref:t}):null});rX.displayName=Uv;var sX="SelectBubbleInput",F_=N.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=N.useRef(null),i=dt(r,s),o=Wg(t);return N.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&h){const g=new Event("change",{bubbles:!0});h.call(l,t),l.dispatchEvent(g)}},[o,t]),p.jsx(Ye.select,{...n,style:{...I4,...n.style},ref:i,defaultValue:t})});F_.displayName=sX;function z_(e){return e===""||e===void 0}function V_(e){const t=sr(e),n=N.useRef(""),r=N.useRef(0),s=N.useCallback(o=>{const l=n.current+o;t(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=N.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function H_(e,t,n){const s=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=iX(e,Math.max(i,0));s.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function iX(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var oX=m_,U_=x_,aX=w_,lX=v_,cX=b_,$_=C_,uX=A_,W_=I_,G_=M_,dX=__,fX=P_,X_=D_,K_=j_,Y_=B_;const Wr=oX,Gr=aX,Tr=N.forwardRef(({className:e,children:t,...n},r)=>p.jsxs(U_,{ref:r,className:Xe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,p.jsx(lX,{asChild:!0,children:p.jsx(Vb,{className:"h-4 w-4 opacity-50"})})]}));Tr.displayName=U_.displayName;const q_=N.forwardRef(({className:e,...t},n)=>p.jsx(X_,{ref:n,className:Xe("flex cursor-default items-center justify-center py-1",e),...t,children:p.jsx(tB,{className:"h-4 w-4"})}));q_.displayName=X_.displayName;const Z_=N.forwardRef(({className:e,...t},n)=>p.jsx(K_,{ref:n,className:Xe("flex cursor-default items-center justify-center py-1",e),...t,children:p.jsx(Vb,{className:"h-4 w-4"})}));Z_.displayName=K_.displayName;const kr=N.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>p.jsx(cX,{children:p.jsxs($_,{ref:s,className:Xe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[p.jsx(q_,{}),p.jsx(uX,{className:Xe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),p.jsx(Z_,{})]})}));kr.displayName=$_.displayName;const hX=N.forwardRef(({className:e,...t},n)=>p.jsx(W_,{ref:n,className:Xe("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));hX.displayName=W_.displayName;const Vt=N.forwardRef(({className:e,children:t,...n},r)=>p.jsxs(G_,{ref:r,className:Xe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(fX,{children:p.jsx(ug,{className:"h-4 w-4"})})}),p.jsx(dX,{children:t})]}));Vt.displayName=G_.displayName;const pX=N.forwardRef(({className:e,...t},n)=>p.jsx(Y_,{ref:n,className:Xe("-mx-1 my-1 h-px bg-muted",e),...t}));pX.displayName=Y_.displayName;const mX=["d4","d6","d8","d10","d12","d20"];function gX(e){const t=parseInt(e.slice(1));return Math.floor(Math.random()*t)+1}function xX({stats:e={}}){const[t,n]=N.useState(!1),[r,s]=N.useState("d6"),[i,o]=N.useState(1),[l,c]=N.useState("none"),[d,h]=N.useState(null),g=Object.keys(e),y=()=>{const C=[];for(let k=0;k<i;k++)C.push(gX(r));const A=C.reduce((k,I)=>k+I,0),E={dice:r,quantity:i,rolls:C,total:A};l!=="none"&&e[l]!==void 0&&(E.statName=l,E.statValue=e[l],E.success=A<=e[l]),h(E)},w=()=>{h(null)},S=C=>{c(C)};return p.jsxs(go,{open:t,onOpenChange:n,children:[p.jsx(Lg,{asChild:!0,children:p.jsx(Ne,{variant:"outline",size:"icon",title:"Dice Roller",children:p.jsx(cy,{className:"h-4 w-4"})})}),p.jsxs(ji,{className:"sm:max-w-md",children:[p.jsx(Li,{children:p.jsxs(Bi,{className:"flex items-center gap-2",children:[p.jsx(cy,{className:"h-5 w-5"}),"Dice Roller"]})}),p.jsxs("div",{className:"space-y-4 py-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{children:"Dice Type"}),p.jsxs(Wr,{value:r,onValueChange:C=>s(C),children:[p.jsx(Tr,{children:p.jsx(Gr,{})}),p.jsx(kr,{children:mX.map(C=>p.jsx(Vt,{value:C,children:C.toUpperCase()},C))})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{children:"Quantity"}),p.jsx(at,{type:"number",min:1,max:10,value:i,onChange:C=>o(Math.max(1,Math.min(10,parseInt(C.target.value)||1)))})]})]}),g.length>0&&p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{children:"Test Against Stat (Optional)"}),p.jsxs(Wr,{value:l,onValueChange:S,children:[p.jsx(Tr,{children:p.jsx(Gr,{placeholder:"None - Just roll"})}),p.jsxs(kr,{children:[p.jsx(Vt,{value:"none",children:"None - Just roll"}),g.map(C=>p.jsxs(Vt,{value:C,children:[C," (",e[C],")"]},C))]})]}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Success if total  stat value"})]}),p.jsxs(Ne,{onClick:y,className:"w-full",size:"lg",children:[p.jsx(cy,{className:"h-4 w-4 mr-2"}),"Roll ",i,r.toUpperCase()]}),d&&p.jsxs("div",{className:"mt-4 p-4 bg-muted rounded-lg text-center space-y-3",children:[p.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:d.rolls.map((C,A)=>p.jsx("div",{className:"w-10 h-10 bg-background border-2 border-primary rounded flex items-center justify-center font-bold text-lg",children:C},A))}),p.jsxs("div",{className:"text-2xl font-bold",children:["Total: ",d.total]}),d.statName&&p.jsxs("div",{className:Xe("text-lg font-semibold px-4 py-2 rounded",d.success?"bg-green-500/20 text-green-700 dark:text-green-400":"bg-red-500/20 text-red-700 dark:text-red-400"),children:[d.total," vs ",d.statName," (",d.statValue,")",p.jsx("span",{className:"block text-xl mt-1",children:d.success?" Success!":" Failure"})]}),p.jsx(Ne,{variant:"outline",size:"sm",onClick:w,children:"Roll Again"})]}),p.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["This is a tool only. Results do not affect the game automatically.",p.jsx("br",{}),"Choose your next action based on the outcome."]})]})]})]})}var Yg="Popover",[Q_,$ce]=cs(Yg,[Fd]),mp=Fd(),[yX,wl]=Q_(Yg),J_=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!1}=e,l=mp(t),c=N.useRef(null),[d,h]=N.useState(!1),[g,y]=li({prop:r,defaultProp:s??!1,onChange:i,caller:Yg});return p.jsx(eC,{...l,children:p.jsx(yX,{scope:t,contentId:Mi(),triggerRef:c,open:g,onOpenChange:y,onOpenToggle:N.useCallback(()=>y(w=>!w),[y]),hasCustomAnchor:d,onCustomAnchorAdd:N.useCallback(()=>h(!0),[]),onCustomAnchorRemove:N.useCallback(()=>h(!1),[]),modal:o,children:n})})};J_.displayName=Yg;var eO="PopoverAnchor",wX=N.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=wl(eO,n),i=mp(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return N.useEffect(()=>(o(),()=>l()),[o,l]),p.jsx(yg,{...i,...r,ref:t})});wX.displayName=eO;var tO="PopoverTrigger",nO=N.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=wl(tO,n),i=mp(n),o=dt(t,s.triggerRef),l=p.jsx(Ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":aO(s.open),...r,ref:o,onClick:ze(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:p.jsx(yg,{asChild:!0,...i,children:l})});nO.displayName=tO;var PC="PopoverPortal",[vX,bX]=Q_(PC,{forceMount:void 0}),rO=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,i=wl(PC,t);return p.jsx(vX,{scope:t,forceMount:n,children:p.jsx(us,{present:n||i.open,children:p.jsx(rp,{asChild:!0,container:s,children:r})})})};rO.displayName=PC;var xd="PopoverContent",sO=N.forwardRef((e,t)=>{const n=bX(xd,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,i=wl(xd,e.__scopePopover);return p.jsx(us,{present:r||i.open,children:i.modal?p.jsx(SX,{...s,ref:t}):p.jsx(EX,{...s,ref:t})})});sO.displayName=xd;var CX=Ec("PopoverContent.RemoveScroll"),SX=N.forwardRef((e,t)=>{const n=wl(xd,e.__scopePopover),r=N.useRef(null),s=dt(t,r),i=N.useRef(!1);return N.useEffect(()=>{const o=r.current;if(o)return hC(o)},[]),p.jsx(Pg,{as:CX,allowPinchZoom:!0,children:p.jsx(iO,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ze(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ze(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:ze(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),EX=N.forwardRef((e,t)=>{const n=wl(xd,e.__scopePopover),r=N.useRef(!1),s=N.useRef(!1);return p.jsx(iO,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),iO=N.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,...g}=e,y=wl(xd,n),w=mp(n);return fC(),p.jsx(_g,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:p.jsx(Pd,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>y.onOpenChange(!1),children:p.jsx(tC,{"data-state":aO(y.open),role:"dialog",id:y.contentId,...w,...g,ref:t,style:{...g.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),oO="PopoverClose",NX=N.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=wl(oO,n);return p.jsx(Ye.button,{type:"button",...r,ref:t,onClick:ze(e.onClick,()=>s.onOpenChange(!1))})});NX.displayName=oO;var AX="PopoverArrow",TX=N.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=mp(n);return p.jsx(nC,{...s,...r,ref:t})});TX.displayName=AX;function aO(e){return e?"open":"closed"}var kX=J_,IX=nO,RX=rO,lO=sO;const MX=kX,_X=IX,cO=N.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},s)=>p.jsx(RX,{children:p.jsx(lO,{ref:s,align:t,sideOffset:n,className:Xe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));cO.displayName=lO.displayName;var qg="Switch",[OX,Wce]=cs(qg),[PX,DX]=OX(qg),uO=N.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:h,...g}=e,[y,w]=N.useState(null),S=dt(t,I=>w(I)),C=N.useRef(!1),A=y?h||!!y.closest("form"):!0,[E,k]=li({prop:s,defaultProp:i??!1,onChange:d,caller:qg});return p.jsxs(PX,{scope:n,checked:E,disabled:l,children:[p.jsx(Ye.button,{type:"button",role:"switch","aria-checked":E,"aria-required":o,"data-state":pO(E),"data-disabled":l?"":void 0,disabled:l,value:c,...g,ref:S,onClick:ze(e.onClick,I=>{k(M=>!M),A&&(C.current=I.isPropagationStopped(),C.current||I.stopPropagation())})}),A&&p.jsx(hO,{control:y,bubbles:!C.current,name:r,value:c,checked:E,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});uO.displayName=qg;var dO="SwitchThumb",fO=N.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=DX(dO,n);return p.jsx(Ye.span,{"data-state":pO(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});fO.displayName=dO;var jX="SwitchBubbleInput",hO=N.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},i)=>{const o=N.useRef(null),l=dt(o,i),c=Wg(n),d=xg(t);return N.useEffect(()=>{const h=o.current;if(!h)return;const g=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(g,"checked").set;if(c!==n&&w){const S=new Event("click",{bubbles:r});w.call(h,n),h.dispatchEvent(S)}},[c,n,r]),p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});hO.displayName=jX;function pO(e){return e?"checked":"unchecked"}var mO=uO,LX=fO;const so=N.forwardRef(({className:e,...t},n)=>p.jsx(mO,{className:Xe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:n,children:p.jsx(LX,{className:Xe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));so.displayName=mO.displayName;const gO=N.createContext(null),$v="gamebook_theme_mode";function Cf({children:e}){const[t,n]=N.useState(()=>{const d=localStorage.getItem($v);return d==="light"||d==="dark"?d:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}),[r,s]=N.useState(null),[i,o]=N.useState(null),l=d=>{n(d),localStorage.setItem($v,d)},c=()=>{l(t==="light"?"dark":"light")};return N.useEffect(()=>{const d=document.documentElement;t==="dark"?d.classList.add("dark"):d.classList.remove("dark")},[t]),p.jsx(gO.Provider,{value:{mode:t,setMode:l,toggleMode:c,backgroundGradient:r,setBackgroundGradient:s,defaultGradient:i,setDefaultGradient:o},children:e})}function DC(){const e=N.useContext(gO);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e}function BX(e){const{setMode:t,setDefaultGradient:n,setBackgroundGradient:r}=DC();N.useEffect(()=>{e!=null&&e.defaultMode&&(localStorage.getItem($v)||t(e.defaultMode)),e!=null&&e.backgroundGradient&&(n(e.backgroundGradient),r(e.backgroundGradient))},[e,t,n,r])}const SA=[{name:"Default",value:null},{name:"Ocean",value:"linear-gradient(135deg, hsl(200 80% 10%), hsl(210 70% 20%), hsl(220 60% 25%))"},{name:"Forest",value:"linear-gradient(135deg, hsl(140 50% 10%), hsl(150 40% 18%), hsl(160 35% 22%))"},{name:"Sunset",value:"linear-gradient(135deg, hsl(20 70% 15%), hsl(35 60% 20%), hsl(50 50% 25%))"},{name:"Mystic",value:"linear-gradient(135deg, hsl(270 60% 12%), hsl(280 50% 18%), hsl(290 40% 22%))"},{name:"Midnight",value:"linear-gradient(135deg, hsl(220 80% 8%), hsl(230 70% 12%), hsl(240 60% 16%))"}];function FX(){const{mode:e,toggleMode:t,backgroundGradient:n,setBackgroundGradient:r,defaultGradient:s}=DC(),i=s?[{name:"Story Default",value:s},...SA]:SA;return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Ne,{variant:"ghost",size:"icon",onClick:t,title:e==="dark"?"Switch to Light Mode":"Switch to Dark Mode",children:e==="dark"?p.jsx(MB,{className:"h-4 w-4"}):p.jsx(bB,{className:"h-4 w-4"})}),p.jsxs(MX,{children:[p.jsx(_X,{asChild:!0,children:p.jsx(Ne,{variant:"ghost",size:"icon",title:"Theme Settings",children:p.jsx(CB,{className:"h-4 w-4"})})}),p.jsx(cO,{className:"w-64",align:"end",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(Fe,{htmlFor:"dark-mode",className:"font-medium",children:"Dark Mode"}),p.jsx(so,{id:"dark-mode",checked:e==="dark",onCheckedChange:o=>t()})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{className:"font-medium",children:"Background"}),p.jsx("div",{className:"grid grid-cols-3 gap-2",children:i.map(o=>p.jsx("button",{onClick:()=>r(o.value),className:`
                      h-10 rounded border-2 transition-all text-[10px] font-medium
                      ${n===o.value?"border-primary ring-2 ring-primary/20":"border-border hover:border-primary/50"}
                    `,style:{background:o.value||"hsl(var(--background))",color:o.value?"white":"hsl(var(--foreground))"},title:o.name,children:o.name.length<=7?o.name:""},o.name))})]})]})})]})]})}function zX({open:e,enemy:t,playerStats:n,onWin:r,onLose:s,onCancel:i}){const[o,l]=N.useState(n),c=(g,y)=>{const w=parseInt(y)||0;l(S=>({...S,[g]:w}))},d=()=>{r(o)},h=()=>{s(o)};return p.jsx(go,{open:e,onOpenChange:g=>!g&&i(),children:p.jsxs(ji,{className:"sm:max-w-[500px]",children:[p.jsxs(Li,{children:[p.jsxs(Bi,{className:"flex items-center gap-2",children:[p.jsx(dg,{className:"w-5 h-5 text-red-500"}),"Combat Encounter"]}),p.jsx(Jo,{children:"Resolve this battle manually, then enter your final stats and outcome."})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg",children:[p.jsxs("h3",{className:"font-bold text-lg mb-2 flex items-center gap-2",children:[p.jsx(oR,{className:"w-5 h-5"}),t.name]}),t.description&&p.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:t.description}),t.stats&&Object.keys(t.stats).length>0&&p.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(t.stats).map(([g,y])=>p.jsxs("div",{className:"text-sm",children:[p.jsxs("span",{className:"font-medium",children:[g,":"]})," ",y]},g))}),(t.hayat||t.attack||t.rank)&&p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[t.hayat&&p.jsxs("div",{children:[p.jsx("span",{className:"font-medium",children:"Health:"})," ",t.hayat]}),t.attack&&p.jsxs("div",{children:[p.jsx("span",{className:"font-medium",children:"Attack:"})," ",t.attack]}),t.rank&&p.jsxs("div",{children:[p.jsx("span",{className:"font-medium",children:"Rank:"})," ",t.rank]})]}),t.note&&p.jsx("p",{className:"text-xs text-muted-foreground mt-2 italic",children:t.note})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[p.jsx(dB,{className:"w-4 h-4 text-rose-500"}),"Your Final Stats After Battle:"]}),p.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(n).map(([g,y])=>p.jsxs("div",{className:"space-y-1",children:[p.jsx(Fe,{htmlFor:`stat-${g}`,className:"text-sm",children:g}),p.jsx(at,{id:`stat-${g}`,type:"number",defaultValue:y,onChange:w=>c(g,w.target.value),className:"h-9"})]},g))})]}),p.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/50 p-3 rounded",children:[p.jsx("strong",{children:"Instructions:"}),' Fight this battle manually (using dice, another system, or your imagination). Enter your final stats above, then click "Victory" if you won or "Defeat" if you lost.']})]}),p.jsxs(Hc,{className:"flex-col sm:flex-row gap-2",children:[p.jsx(Ne,{variant:"outline",onClick:i,className:"w-full sm:w-auto",children:"Cancel"}),p.jsx(Ne,{variant:"destructive",onClick:h,className:"w-full sm:w-auto",children:"I Was Defeated"}),p.jsx(Ne,{variant:"default",onClick:d,className:"w-full sm:w-auto bg-green-600 hover:bg-green-700",children:"I Won!"})]})]})})}function VX({shop:e,currentPageId:t,playerCurrency:n,playerInventory:r,shopInventories:s,getItemDetails:i,onPurchase:o}){const l=String(t),c=s[l]||{},d=y=>n>=y,h=y=>r.includes(y),g=(y,w)=>{if(w!==void 0)return c[y]!==void 0?c[y]:w};return p.jsxs(Tt,{className:"w-full",children:[p.jsxs(Wt,{children:[p.jsxs(Kt,{className:"flex items-center gap-2",children:[p.jsx(Ub,{className:"w-5 h-5"}),"Market"]}),p.jsxs(Fn,{className:"flex items-center gap-2",children:[p.jsx(hN,{className:"w-4 h-4"}),"Your ",e.currency,": ",p.jsx("span",{className:"font-bold",children:n})]})]}),p.jsxs(Dt,{children:[p.jsx("div",{className:"space-y-3",children:e.items.map(y=>{const w=i(y.itemId),S=g(y.itemId,y.quantity),C=S!==void 0&&S<=0,A=d(y.price)&&!h(y.itemId)&&!C;return p.jsx(Cg,{children:p.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent/50 transition-colors",children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs(sC,{children:[p.jsx(iC,{asChild:!0,children:p.jsx("span",{className:"font-medium cursor-help",children:(w==null?void 0:w.name)||y.itemId})}),(w==null?void 0:w.description)&&p.jsx(Sg,{children:p.jsx("p",{className:"max-w-xs",children:w.description})})]}),(w==null?void 0:w.type)&&p.jsx(wn,{variant:"outline",className:"text-xs",children:w.type})]}),p.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-muted-foreground",children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(hN,{className:"w-3 h-3"}),y.price]}),S!==void 0&&p.jsxs("span",{className:"text-xs",children:["Stock: ",S]})]})]}),p.jsx("div",{children:h(y.itemId)?p.jsx(wn,{variant:"secondary",children:"Owned"}):C?p.jsx(wn,{variant:"destructive",children:"Out of Stock"}):p.jsx(Ne,{size:"sm",onClick:()=>o(y.itemId,y.price),disabled:!A,children:"Buy"})})]})},y.itemId)})}),e.items.length===0&&p.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No items available for sale."})]})]})}function HX({isOpen:e,prompt:t,onSubmit:n,onCancel:r}){const[s,i]=N.useState(""),[o,l]=N.useState(""),c=()=>{var g,y,w,S;if((g=t.validation)!=null&&g.required&&!s.trim())return l("This field is required"),!1;if((y=t.validation)!=null&&y.minLength&&s.length<t.validation.minLength)return l(`Minimum ${t.validation.minLength} characters required`),!1;if((w=t.validation)!=null&&w.maxLength&&s.length>t.validation.maxLength)return l(`Maximum ${t.validation.maxLength} characters allowed`),!1;if((S=t.validation)!=null&&S.pattern)try{if(!new RegExp(t.validation.pattern).test(s))return l("Invalid format"),!1}catch{}return!0},d=()=>{c()&&(n(s),i(""),l(""))},h=()=>{i(""),l(""),r()};return p.jsx(go,{open:e,onOpenChange:h,children:p.jsxs(ji,{className:"sm:max-w-md",children:[p.jsx(Li,{children:p.jsx(Bi,{children:t.question})}),p.jsxs("div",{className:"space-y-4 py-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{htmlFor:"input",children:"Your Answer"}),p.jsx(at,{id:"input",type:t.type==="number"?"number":"text",value:s,onChange:g=>{i(g.target.value),l("")},placeholder:t.placeholder,onKeyDown:g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),d())},autoFocus:!0}),o&&p.jsxs("div",{className:"flex items-center gap-2 text-sm text-destructive",children:[p.jsx(Nc,{className:"h-4 w-4"}),o]})]}),t.validation&&p.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[t.validation.required&&p.jsx("p",{children:" Required field"}),t.validation.minLength&&p.jsxs("p",{children:[" Minimum ",t.validation.minLength," characters"]}),t.validation.maxLength&&p.jsxs("p",{children:[" Maximum ",t.validation.maxLength," characters"]})]})]}),p.jsxs(Hc,{children:[p.jsx(Ne,{variant:"outline",onClick:h,children:"Cancel"}),p.jsx(Ne,{onClick:d,children:"Submit"})]})]})})}/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */var ky,EA;function NA(){if(EA)return ky;EA=1;const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:s}=Object;let{freeze:i,seal:o,create:l}=Object,{apply:c,construct:d}=typeof Reflect<"u"&&Reflect;i||(i=function(Ee){return Ee}),o||(o=function(Ee){return Ee}),c||(c=function(Ee,Ke){for(var ot=arguments.length,rt=new Array(ot>2?ot-2:0),Bt=2;Bt<ot;Bt++)rt[Bt-2]=arguments[Bt];return Ee.apply(Ke,rt)}),d||(d=function(Ee){for(var Ke=arguments.length,ot=new Array(Ke>1?Ke-1:0),rt=1;rt<Ke;rt++)ot[rt-1]=arguments[rt];return new Ee(...ot)});const h=D(Array.prototype.forEach),g=D(Array.prototype.lastIndexOf),y=D(Array.prototype.pop),w=D(Array.prototype.push),S=D(Array.prototype.splice),C=D(String.prototype.toLowerCase),A=D(String.prototype.toString),E=D(String.prototype.match),k=D(String.prototype.replace),I=D(String.prototype.indexOf),M=D(String.prototype.trim),P=D(Object.prototype.hasOwnProperty),j=D(RegExp.prototype.test),_=L(TypeError);function D(Ce){return function(Ee){Ee instanceof RegExp&&(Ee.lastIndex=0);for(var Ke=arguments.length,ot=new Array(Ke>1?Ke-1:0),rt=1;rt<Ke;rt++)ot[rt-1]=arguments[rt];return c(Ce,Ee,ot)}}function L(Ce){return function(){for(var Ee=arguments.length,Ke=new Array(Ee),ot=0;ot<Ee;ot++)Ke[ot]=arguments[ot];return d(Ce,Ke)}}function U(Ce,Ee){let Ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:C;t&&t(Ce,null);let ot=Ee.length;for(;ot--;){let rt=Ee[ot];if(typeof rt=="string"){const Bt=Ke(rt);Bt!==rt&&(n(Ee)||(Ee[ot]=Bt),rt=Bt)}Ce[rt]=!0}return Ce}function K(Ce){for(let Ee=0;Ee<Ce.length;Ee++)P(Ce,Ee)||(Ce[Ee]=null);return Ce}function q(Ce){const Ee=l(null);for(const[Ke,ot]of e(Ce))P(Ce,Ke)&&(Array.isArray(ot)?Ee[Ke]=K(ot):ot&&typeof ot=="object"&&ot.constructor===Object?Ee[Ke]=q(ot):Ee[Ke]=ot);return Ee}function re(Ce,Ee){for(;Ce!==null;){const ot=s(Ce,Ee);if(ot){if(ot.get)return D(ot.get);if(typeof ot.value=="function")return D(ot.value)}Ce=r(Ce)}function Ke(){return null}return Ke}const z=i(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),H=i(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Y=i(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),X=i(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),W=i(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),V=i(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ee=i(["#text"]),ae=i(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),se=i(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),G=i(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Q=i(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),te=o(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ne=o(/<%[\w\W]*|[\w\W]*%>/gm),ie=o(/\$\{[\w\W]*/gm),de=o(/^data-[\-\w.\u00B7-\uFFFF]+$/),pe=o(/^aria-[\-\w]+$/),ye=o(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Se=o(/^(?:\w+script|data):/i),De=o(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),xe=o(/^html$/i),Ue=o(/^[a-z][.\w]*(-[.\w]+)+$/i);var nt=Object.freeze({__proto__:null,ARIA_ATTR:pe,ATTR_WHITESPACE:De,CUSTOM_ELEMENT:Ue,DATA_ATTR:de,DOCTYPE_NAME:xe,ERB_EXPR:ne,IS_ALLOWED_URI:ye,IS_SCRIPT_OR_DATA:Se,MUSTACHE_EXPR:te,TMPLIT_EXPR:ie});const et={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},je=function(){return typeof window>"u"?null:window},be=function(Ee,Ke){if(typeof Ee!="object"||typeof Ee.createPolicy!="function")return null;let ot=null;const rt="data-tt-policy-suffix";Ke&&Ke.hasAttribute(rt)&&(ot=Ke.getAttribute(rt));const Bt="dompurify"+(ot?"#"+ot:"");try{return Ee.createPolicy(Bt,{createHTML(vn){return vn},createScriptURL(vn){return vn}})}catch{return console.warn("TrustedTypes policy "+Bt+" could not be created."),null}},$e=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function qt(){let Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:je();const Ee=tt=>qt(tt);if(Ee.version="3.3.1",Ee.removed=[],!Ce||!Ce.document||Ce.document.nodeType!==et.document||!Ce.Element)return Ee.isSupported=!1,Ee;let{document:Ke}=Ce;const ot=Ke,rt=ot.currentScript,{DocumentFragment:Bt,HTMLTemplateElement:vn,Node:Zt,Element:Dr,NodeFilter:Gt,NamedNodeMap:ur=Ce.NamedNodeMap||Ce.MozNamedAttrMap,HTMLFormElement:Ot,DOMParser:Ie,trustedTypes:_t}=Ce,ut=Dr.prototype,Nt=re(ut,"cloneNode"),qr=re(ut,"remove"),Vs=re(ut,"nextSibling"),Es=re(ut,"childNodes"),gt=re(ut,"parentNode");if(typeof vn=="function"){const tt=Ke.createElement("template");tt.content&&tt.content.ownerDocument&&(Ke=tt.content.ownerDocument)}let Ut,cn="";const{implementation:Vi,createNodeIterator:Qe,createDocumentFragment:It,getElementsByTagName:ft}=Ke,{importNode:Rn}=ot;let Pt=$e();Ee.isSupported=typeof e=="function"&&typeof gt=="function"&&Vi&&Vi.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:un,ERB_EXPR:Zr,TMPLIT_EXPR:dn,DATA_ATTR:jr,ARIA_ATTR:dr,IS_SCRIPT_OR_DATA:ui,ATTR_WHITESPACE:vr,CUSTOM_ELEMENT:Ve}=nt;let{IS_ALLOWED_URI:di}=nt,bn=null;const Xn=U({},[...z,...H,...Y,...W,...ee]);let sn=null;const So=U({},[...ae,...se,...G,...Q]);let Qt=Object.seal(l(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),fr=null,Sl=null;const Hi=Object.seal(l(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Qr=!0,Vn=!0,$t=!1,El=!0,br=!1,Ui=!0,we=!1,Nl=!1,Jt=!1,Lr=!1,ia=!1,At=!1,Rt=!0,xt=!1;const $d="user-content-";let Al=!0,Eo=!1,on={},er=null;const Wd=U({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Cn=null;const fi=U({},["audio","video","img","source","image","track"]);let Gd=null;const No=U({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ht="http://www.w3.org/1998/Math/MathML",Hn="http://www.w3.org/2000/svg",fe="http://www.w3.org/1999/xhtml";let Z=fe,qe=!1,Mn=null;const ds=U({},[Ht,Hn,fe],A);let Gc=U({},["mi","mo","mn","ms","mtext"]),oa=U({},["annotation-xml"]);const fs=U({},["title","style","font","a","script"]);let Je=null;const fn=["application/xhtml+xml","text/html"],Sp="text/html";let Un=null,$i=null;const Xc=Ke.createElement("form"),Kc=function(ce){return ce instanceof RegExp||ce instanceof Function},Xd=function(){let ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!($i&&$i===ce)){if((!ce||typeof ce!="object")&&(ce={}),ce=q(ce),Je=fn.indexOf(ce.PARSER_MEDIA_TYPE)===-1?Sp:ce.PARSER_MEDIA_TYPE,Un=Je==="application/xhtml+xml"?A:C,bn=P(ce,"ALLOWED_TAGS")?U({},ce.ALLOWED_TAGS,Un):Xn,sn=P(ce,"ALLOWED_ATTR")?U({},ce.ALLOWED_ATTR,Un):So,Mn=P(ce,"ALLOWED_NAMESPACES")?U({},ce.ALLOWED_NAMESPACES,A):ds,Gd=P(ce,"ADD_URI_SAFE_ATTR")?U(q(No),ce.ADD_URI_SAFE_ATTR,Un):No,Cn=P(ce,"ADD_DATA_URI_TAGS")?U(q(fi),ce.ADD_DATA_URI_TAGS,Un):fi,er=P(ce,"FORBID_CONTENTS")?U({},ce.FORBID_CONTENTS,Un):Wd,fr=P(ce,"FORBID_TAGS")?U({},ce.FORBID_TAGS,Un):q({}),Sl=P(ce,"FORBID_ATTR")?U({},ce.FORBID_ATTR,Un):q({}),on=P(ce,"USE_PROFILES")?ce.USE_PROFILES:!1,Qr=ce.ALLOW_ARIA_ATTR!==!1,Vn=ce.ALLOW_DATA_ATTR!==!1,$t=ce.ALLOW_UNKNOWN_PROTOCOLS||!1,El=ce.ALLOW_SELF_CLOSE_IN_ATTR!==!1,br=ce.SAFE_FOR_TEMPLATES||!1,Ui=ce.SAFE_FOR_XML!==!1,we=ce.WHOLE_DOCUMENT||!1,Lr=ce.RETURN_DOM||!1,ia=ce.RETURN_DOM_FRAGMENT||!1,At=ce.RETURN_TRUSTED_TYPE||!1,Jt=ce.FORCE_BODY||!1,Rt=ce.SANITIZE_DOM!==!1,xt=ce.SANITIZE_NAMED_PROPS||!1,Al=ce.KEEP_CONTENT!==!1,Eo=ce.IN_PLACE||!1,di=ce.ALLOWED_URI_REGEXP||ye,Z=ce.NAMESPACE||fe,Gc=ce.MATHML_TEXT_INTEGRATION_POINTS||Gc,oa=ce.HTML_INTEGRATION_POINTS||oa,Qt=ce.CUSTOM_ELEMENT_HANDLING||{},ce.CUSTOM_ELEMENT_HANDLING&&Kc(ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Qt.tagNameCheck=ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ce.CUSTOM_ELEMENT_HANDLING&&Kc(ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Qt.attributeNameCheck=ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ce.CUSTOM_ELEMENT_HANDLING&&typeof ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Qt.allowCustomizedBuiltInElements=ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),br&&(Vn=!1),ia&&(Lr=!0),on&&(bn=U({},ee),sn=[],on.html===!0&&(U(bn,z),U(sn,ae)),on.svg===!0&&(U(bn,H),U(sn,se),U(sn,Q)),on.svgFilters===!0&&(U(bn,Y),U(sn,se),U(sn,Q)),on.mathMl===!0&&(U(bn,W),U(sn,G),U(sn,Q))),ce.ADD_TAGS&&(typeof ce.ADD_TAGS=="function"?Hi.tagCheck=ce.ADD_TAGS:(bn===Xn&&(bn=q(bn)),U(bn,ce.ADD_TAGS,Un))),ce.ADD_ATTR&&(typeof ce.ADD_ATTR=="function"?Hi.attributeCheck=ce.ADD_ATTR:(sn===So&&(sn=q(sn)),U(sn,ce.ADD_ATTR,Un))),ce.ADD_URI_SAFE_ATTR&&U(Gd,ce.ADD_URI_SAFE_ATTR,Un),ce.FORBID_CONTENTS&&(er===Wd&&(er=q(er)),U(er,ce.FORBID_CONTENTS,Un)),ce.ADD_FORBID_CONTENTS&&(er===Wd&&(er=q(er)),U(er,ce.ADD_FORBID_CONTENTS,Un)),Al&&(bn["#text"]=!0),we&&U(bn,["html","head","body"]),bn.table&&(U(bn,["tbody"]),delete fr.tbody),ce.TRUSTED_TYPES_POLICY){if(typeof ce.TRUSTED_TYPES_POLICY.createHTML!="function")throw _('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ce.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw _('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ut=ce.TRUSTED_TYPES_POLICY,cn=Ut.createHTML("")}else Ut===void 0&&(Ut=be(_t,rt)),Ut!==null&&typeof cn=="string"&&(cn=Ut.createHTML(""));i&&i(ce),$i=ce}},$n=U({},[...H,...Y,...X]),aa=U({},[...W,...V]),Wi=function(ce){let Re=gt(ce);(!Re||!Re.tagName)&&(Re={namespaceURI:Z,tagName:"template"});const Le=C(ce.tagName),en=C(Re.tagName);return Mn[ce.namespaceURI]?ce.namespaceURI===Hn?Re.namespaceURI===fe?Le==="svg":Re.namespaceURI===Ht?Le==="svg"&&(en==="annotation-xml"||Gc[en]):!!$n[Le]:ce.namespaceURI===Ht?Re.namespaceURI===fe?Le==="math":Re.namespaceURI===Hn?Le==="math"&&oa[en]:!!aa[Le]:ce.namespaceURI===fe?Re.namespaceURI===Hn&&!oa[en]||Re.namespaceURI===Ht&&!Gc[en]?!1:!aa[Le]&&(fs[Le]||!$n[Le]):!!(Je==="application/xhtml+xml"&&Mn[ce.namespaceURI]):!1},Ze=function(ce){w(Ee.removed,{element:ce});try{gt(ce).removeChild(ce)}catch{qr(ce)}},Ao=function(ce,Re){try{w(Ee.removed,{attribute:Re.getAttributeNode(ce),from:Re})}catch{w(Ee.removed,{attribute:null,from:Re})}if(Re.removeAttribute(ce),ce==="is")if(Lr||ia)try{Ze(Re)}catch{}else try{Re.setAttribute(ce,"")}catch{}},pt=function(ce){let Re=null,Le=null;if(Jt)ce="<remove></remove>"+ce;else{const En=E(ce,/^[\r\n\t ]+/);Le=En&&En[0]}Je==="application/xhtml+xml"&&Z===fe&&(ce='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ce+"</body></html>");const en=Ut?Ut.createHTML(ce):ce;if(Z===fe)try{Re=new Ie().parseFromString(en,Je)}catch{}if(!Re||!Re.documentElement){Re=Vi.createDocument(Z,"template",null);try{Re.documentElement.innerHTML=qe?cn:en}catch{}}const tr=Re.body||Re.documentElement;return ce&&Le&&tr.insertBefore(Ke.createTextNode(Le),tr.childNodes[0]||null),Z===fe?ft.call(Re,we?"html":"body")[0]:we?Re.documentElement:tr},Kn=function(ce){return Qe.call(ce.ownerDocument||ce,ce,Gt.SHOW_ELEMENT|Gt.SHOW_COMMENT|Gt.SHOW_TEXT|Gt.SHOW_PROCESSING_INSTRUCTION|Gt.SHOW_CDATA_SECTION,null)},Kd=function(ce){return ce instanceof Ot&&(typeof ce.nodeName!="string"||typeof ce.textContent!="string"||typeof ce.removeChild!="function"||!(ce.attributes instanceof ur)||typeof ce.removeAttribute!="function"||typeof ce.setAttribute!="function"||typeof ce.namespaceURI!="string"||typeof ce.insertBefore!="function"||typeof ce.hasChildNodes!="function")},Yc=function(ce){return typeof Zt=="function"&&ce instanceof Zt};function Hs(tt,ce,Re){h(tt,Le=>{Le.call(Ee,ce,Re,$i)})}const Gi=function(ce){let Re=null;if(Hs(Pt.beforeSanitizeElements,ce,null),Kd(ce))return Ze(ce),!0;const Le=Un(ce.nodeName);if(Hs(Pt.uponSanitizeElement,ce,{tagName:Le,allowedTags:bn}),Ui&&ce.hasChildNodes()&&!Yc(ce.firstElementChild)&&j(/<[/\w!]/g,ce.innerHTML)&&j(/<[/\w!]/g,ce.textContent)||ce.nodeType===et.progressingInstruction||Ui&&ce.nodeType===et.comment&&j(/<[/\w]/g,ce.data))return Ze(ce),!0;if(!(Hi.tagCheck instanceof Function&&Hi.tagCheck(Le))&&(!bn[Le]||fr[Le])){if(!fr[Le]&&la(Le)&&(Qt.tagNameCheck instanceof RegExp&&j(Qt.tagNameCheck,Le)||Qt.tagNameCheck instanceof Function&&Qt.tagNameCheck(Le)))return!1;if(Al&&!er[Le]){const en=gt(ce)||ce.parentNode,tr=Es(ce)||ce.childNodes;if(tr&&en){const En=tr.length;for(let Br=En-1;Br>=0;--Br){const hi=Nt(tr[Br],!0);hi.__removalCount=(ce.__removalCount||0)+1,en.insertBefore(hi,Vs(ce))}}}return Ze(ce),!0}return ce instanceof Dr&&!Wi(ce)||(Le==="noscript"||Le==="noembed"||Le==="noframes")&&j(/<\/no(script|embed|frames)/i,ce.innerHTML)?(Ze(ce),!0):(br&&ce.nodeType===et.text&&(Re=ce.textContent,h([un,Zr,dn],en=>{Re=k(Re,en," ")}),ce.textContent!==Re&&(w(Ee.removed,{element:ce.cloneNode()}),ce.textContent=Re)),Hs(Pt.afterSanitizeElements,ce,null),!1)},Ep=function(ce,Re,Le){if(Rt&&(Re==="id"||Re==="name")&&(Le in Ke||Le in Xc))return!1;if(!(Vn&&!Sl[Re]&&j(jr,Re))){if(!(Qr&&j(dr,Re))){if(!(Hi.attributeCheck instanceof Function&&Hi.attributeCheck(Re,ce))){if(!sn[Re]||Sl[Re]){if(!(la(ce)&&(Qt.tagNameCheck instanceof RegExp&&j(Qt.tagNameCheck,ce)||Qt.tagNameCheck instanceof Function&&Qt.tagNameCheck(ce))&&(Qt.attributeNameCheck instanceof RegExp&&j(Qt.attributeNameCheck,Re)||Qt.attributeNameCheck instanceof Function&&Qt.attributeNameCheck(Re,ce))||Re==="is"&&Qt.allowCustomizedBuiltInElements&&(Qt.tagNameCheck instanceof RegExp&&j(Qt.tagNameCheck,Le)||Qt.tagNameCheck instanceof Function&&Qt.tagNameCheck(Le))))return!1}else if(!Gd[Re]){if(!j(di,k(Le,vr,""))){if(!((Re==="src"||Re==="xlink:href"||Re==="href")&&ce!=="script"&&I(Le,"data:")===0&&Cn[ce])){if(!($t&&!j(ui,k(Le,vr,"")))){if(Le)return!1}}}}}}}return!0},la=function(ce){return ce!=="annotation-xml"&&E(ce,Ve)},ca=function(ce){Hs(Pt.beforeSanitizeAttributes,ce,null);const{attributes:Re}=ce;if(!Re||Kd(ce))return;const Le={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:sn,forceKeepAttr:void 0};let en=Re.length;for(;en--;){const tr=Re[en],{name:En,namespaceURI:Br,value:hi}=tr,ua=Un(En),Ft=hi;let Yn=En==="value"?Ft:M(Ft);if(Le.attrName=ua,Le.attrValue=Yn,Le.keepAttr=!0,Le.forceKeepAttr=void 0,Hs(Pt.uponSanitizeAttribute,ce,Le),Yn=Le.attrValue,xt&&(ua==="id"||ua==="name")&&(Ao(En,ce),Yn=$d+Yn),Ui&&j(/((--!?|])>)|<\/(style|title|textarea)/i,Yn)){Ao(En,ce);continue}if(ua==="attributename"&&E(Yn,"href")){Ao(En,ce);continue}if(Le.forceKeepAttr)continue;if(!Le.keepAttr){Ao(En,ce);continue}if(!El&&j(/\/>/i,Yn)){Ao(En,ce);continue}br&&h([un,Zr,dn],pi=>{Yn=k(Yn,pi," ")});const kl=Un(ce.nodeName);if(!Ep(kl,ua,Yn)){Ao(En,ce);continue}if(Ut&&typeof _t=="object"&&typeof _t.getAttributeType=="function"&&!Br)switch(_t.getAttributeType(kl,ua)){case"TrustedHTML":{Yn=Ut.createHTML(Yn);break}case"TrustedScriptURL":{Yn=Ut.createScriptURL(Yn);break}}if(Yn!==Ft)try{Br?ce.setAttributeNS(Br,En,Yn):ce.setAttribute(En,Yn),Kd(ce)?Ze(ce):y(Ee.removed)}catch{Ao(En,ce)}}Hs(Pt.afterSanitizeAttributes,ce,null)},Tl=function tt(ce){let Re=null;const Le=Kn(ce);for(Hs(Pt.beforeSanitizeShadowDOM,ce,null);Re=Le.nextNode();)Hs(Pt.uponSanitizeShadowNode,Re,null),Gi(Re),ca(Re),Re.content instanceof Bt&&tt(Re.content);Hs(Pt.afterSanitizeShadowDOM,ce,null)};return Ee.sanitize=function(tt){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Re=null,Le=null,en=null,tr=null;if(qe=!tt,qe&&(tt="<!-->"),typeof tt!="string"&&!Yc(tt))if(typeof tt.toString=="function"){if(tt=tt.toString(),typeof tt!="string")throw _("dirty is not a string, aborting")}else throw _("toString is not a function");if(!Ee.isSupported)return tt;if(Nl||Xd(ce),Ee.removed=[],typeof tt=="string"&&(Eo=!1),Eo){if(tt.nodeName){const hi=Un(tt.nodeName);if(!bn[hi]||fr[hi])throw _("root node is forbidden and cannot be sanitized in-place")}}else if(tt instanceof Zt)Re=pt("<!---->"),Le=Re.ownerDocument.importNode(tt,!0),Le.nodeType===et.element&&Le.nodeName==="BODY"||Le.nodeName==="HTML"?Re=Le:Re.appendChild(Le);else{if(!Lr&&!br&&!we&&tt.indexOf("<")===-1)return Ut&&At?Ut.createHTML(tt):tt;if(Re=pt(tt),!Re)return Lr?null:At?cn:""}Re&&Jt&&Ze(Re.firstChild);const En=Kn(Eo?tt:Re);for(;en=En.nextNode();)Gi(en),ca(en),en.content instanceof Bt&&Tl(en.content);if(Eo)return tt;if(Lr){if(ia)for(tr=It.call(Re.ownerDocument);Re.firstChild;)tr.appendChild(Re.firstChild);else tr=Re;return(sn.shadowroot||sn.shadowrootmode)&&(tr=Rn.call(ot,tr,!0)),tr}let Br=we?Re.outerHTML:Re.innerHTML;return we&&bn["!doctype"]&&Re.ownerDocument&&Re.ownerDocument.doctype&&Re.ownerDocument.doctype.name&&j(xe,Re.ownerDocument.doctype.name)&&(Br="<!DOCTYPE "+Re.ownerDocument.doctype.name+`>
`+Br),br&&h([un,Zr,dn],hi=>{Br=k(Br,hi," ")}),Ut&&At?Ut.createHTML(Br):Br},Ee.setConfig=function(){let tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Xd(tt),Nl=!0},Ee.clearConfig=function(){$i=null,Nl=!1},Ee.isValidAttribute=function(tt,ce,Re){$i||Xd({});const Le=Un(tt),en=Un(ce);return Ep(Le,en,Re)},Ee.addHook=function(tt,ce){typeof ce=="function"&&w(Pt[tt],ce)},Ee.removeHook=function(tt,ce){if(ce!==void 0){const Re=g(Pt[tt],ce);return Re===-1?void 0:S(Pt[tt],Re,1)[0]}return y(Pt[tt])},Ee.removeHooks=function(tt){Pt[tt]=[]},Ee.removeAllHooks=function(){Pt=$e()},Ee}var Te=qt();return ky=Te,ky}var UX=self.DOMPurify||(self.DOMPurify=NA().default||NA());const $X=Zh(UX);function WX(e,t){return e.replace(/\{([^}]+)\}/g,(n,r)=>{const s=t[r];return s!==void 0?String(s):n})}function GX(e,t){if(!e)return null;let n=e;if(t&&(n=WX(e,t)),/<[^>]+>/.test(n)){const i=$X.sanitize(n,{ALLOWED_TAGS:["p","br","strong","em","u","s","code","pre","h1","h2","h3","h4","h5","h6","ul","ol","li","blockquote","hr","a","span","div"],ALLOWED_ATTR:["class","href","target","rel"]});return p.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert",dangerouslySetInnerHTML:{__html:i}})}return n.split(/\n\n+/).map((i,o)=>{const l=i.split(/\n/),c=l.map((d,h)=>{const g=XX(d);return p.jsxs(oe.Fragment,{children:[g,h<l.length-1&&p.jsx("br",{})]},h)});return p.jsx("p",{className:"mb-4 last:mb-0",children:c},o)})}function XX(e){const t=[];let n=0,r=0;const s=/\*\*(.+?)\*\*|_(.+?)_|\*([^*]+?)\*/g;let i;for(;(i=s.exec(e))!==null;)i.index>n&&t.push(e.slice(n,i.index)),i[1]!==void 0?t.push(p.jsx("strong",{className:"font-bold",children:i[1]},r++)):i[2]!==void 0?t.push(p.jsx("em",{className:"italic",children:i[2]},r++)):i[3]!==void 0&&t.push(p.jsx("em",{className:"italic",children:i[3]},r++)),n=i.index+i[0].length;return n<e.length&&t.push(e.slice(n)),t.length>0?t:e}function xO({gamebookData:e,gameState:t,currentPage:n,canChoose:r,getChoiceRequirements:s,makeChoice:i,jumpToPage:o,restart:l,getPageById:c,getSaveSlots:d,saveGame:h,loadGame:g,deleteSave:y,exitStory:w,maxSaveSlots:S,canSave:C,onUpdateStat:A,onConsumeItem:E,onUpdateVariable:k,onPurchaseItem:I,getItemDetails:M,getEnemyDetails:P,onUpdateStats:j,onExportSave:_}){var $e,qt,Te;const[D,L]=N.useState(!1),[U,K]=N.useState(!1),[q,re]=N.useState(null),[z,H]=N.useState(!1),[Y,X]=N.useState(null),[W,V]=N.useState(null),[ee,ae]=N.useState(!1),[se,G]=N.useState(null),{backgroundGradient:Q}=DC();if(BX(e.theme),!n)return p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsx("p",{className:"text-muted-foreground",children:"Page not found"})});const te=n.choices.length===0||!!n.ending,ie=((($e=n.ending)==null?void 0:$e.type)||(n.choices.length===0?"soft":void 0))==="hard",de=Ce=>{if(Ce.prompt){G(Ce),ae(!0);return}if(Ce.combat&&P){const Ee=P(Ce.combat.enemyId);if(Ee){V(Ee),X(Ce),H(!0);return}}Ce.input?(re(Ce),K(!0)):i(Ce)},pe=Ce=>{if(se&&se.prompt&&k){const Ee=se.prompt.variableName,Ke=se.prompt.type==="number"?Number(Ce):Ce;k(Ee,Ke),i(se),G(null),ae(!1)}},ye=Ce=>{q&&(i(q,Ce),re(null),K(!1))},Se=Ce=>{if(Y&&Y.combat&&j){j(Ce);const Ee=Y.combat.winPageId,Ke={text:Y.text,...typeof Ee=="number"?{nextPageId:Ee}:{to:String(Ee)},effects:Y.combat.winEffects};i(Ke),H(!1),X(null),V(null)}},De=Ce=>{if(Y&&Y.combat&&j){j(Ce);const Ee=Y.combat.losePageId,Ke={text:Y.text,...typeof Ee=="number"?{nextPageId:Ee}:{to:String(Ee)},effects:Y.combat.loseEffects};i(Ke),H(!1),X(null),V(null)}},xe=()=>{H(!1),X(null),V(null)},Ue=(Ce,Ee)=>{n!=null&&n.shop&&I&&I(n.id,Ce,Ee,n.shop.currency)},nt=((qt=e.meta)==null?void 0:qt.title)||e.title||"Untitled Story",je=(()=>{if(n.section&&e.sections){const Ce=e.sections.find(Ee=>Ee.id===n.section||String(Ee.id)===String(n.section));if(Ce)return Ce.name||Ce.title}})(),be=Q?{background:Q}:void 0;return p.jsxs("div",{className:"min-h-screen bg-background",style:be,children:[p.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b",children:p.jsxs("div",{className:"container max-w-4xl mx-auto px-4 h-14 flex items-center justify-between",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h1",{className:"font-serif font-semibold text-lg truncate",children:n.title||nt}),je&&p.jsx("p",{className:"text-xs text-muted-foreground truncate",children:je})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(FX,{}),p.jsx(xX,{stats:t.stats}),p.jsx(Ne,{variant:"ghost",size:"icon",onClick:l,title:"Restart",children:p.jsx(yv,{className:"h-4 w-4"})}),p.jsx(Ne,{variant:"ghost",size:"icon",onClick:w,title:"Exit",children:p.jsx(xB,{className:"h-4 w-4"})}),p.jsxs(sW,{open:D,onOpenChange:L,children:[p.jsx(iW,{asChild:!0,children:p.jsx(Ne,{variant:"ghost",size:"icon",children:p.jsx(yB,{className:"h-5 w-5"})})}),p.jsx(d8,{className:"w-80 overflow-y-auto",children:p.jsxs("div",{className:"space-y-6 pt-6",children:[C()&&p.jsx(jG,{saveSlots:d(),onSave:h,onLoad:Ce=>{g(Ce),L(!1)},onDelete:y,maxSlots:S,onExportSave:_}),p.jsx(KW,{inventory:t.inventory,stats:t.stats,gamebookData:e,onUpdateStat:A,onConsumeItem:E}),p.jsx(SW,{history:t.history,currentPageId:t.currentPageId,getPageById:c,onJumpToPage:Ce=>{o(Ce),L(!1)}})]})})]})]})]})}),p.jsxs("main",{className:"container max-w-3xl mx-auto px-4 py-8",children:[p.jsx("article",{className:"prose prose-lg dark:prose-invert max-w-none",children:p.jsxs("div",{className:"bg-card/90 backdrop-blur rounded-lg p-6 md:p-8 shadow-sm border",children:[t.playerName&&t.history.length===1&&p.jsxs("p",{className:"text-muted-foreground text-sm mb-4",children:["Welcome, ",p.jsx("span",{className:"font-medium text-foreground",children:t.playerName})]}),n.image&&p.jsx("div",{className:"mb-6 -mx-2 md:-mx-4",children:p.jsx("img",{src:n.image,alt:"",className:"w-full rounded-lg object-cover max-h-64 md:max-h-80",loading:"lazy"})}),p.jsx("div",{className:"font-serif text-foreground leading-relaxed text-lg",children:GX(n.text,t.variables)}),n.choices.some(Ce=>Ce.note)&&p.jsx("div",{className:"mt-4 p-3 bg-muted/50 rounded text-sm text-muted-foreground italic",children:(Te=n.choices.find(Ce=>Ce.note))==null?void 0:Te.note}),te&&p.jsxs("div",{className:"mt-8 pt-6 border-t text-center",children:[ie?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"flex items-center justify-center gap-2 mb-2",children:p.jsx(OB,{className:"h-6 w-6 text-yellow-500"})}),p.jsx("p",{className:"text-muted-foreground italic font-serif text-xl",children:" The End "}),p.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Congratulations! You've reached a true ending."})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"flex items-center justify-center gap-2 mb-2",children:p.jsx(aR,{className:"h-5 w-5 text-muted-foreground"})}),p.jsx("p",{className:"text-muted-foreground italic font-serif text-xl",children:" The End "}),p.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"This journey has ended. Try again?"})]}),p.jsxs(Ne,{onClick:l,className:"mt-4",children:[p.jsx(yv,{className:"h-4 w-4 mr-2"}),"Start Over"]})]}),!te&&n.choices.length>0&&p.jsx("div",{className:"mt-8 pt-6 border-t space-y-3",children:n.choices.map((Ce,Ee)=>p.jsx(LG,{choice:Ce,canChoose:r(Ce),requirements:s(Ce),hasInput:!!Ce.input,hasCombat:!!Ce.combat,onClick:()=>de(Ce)},Ee))}),n.shop&&M&&p.jsx("div",{className:"mt-8 pt-6 border-t",children:p.jsx(VX,{shop:n.shop,currentPageId:n.id,playerCurrency:t.variables[n.shop.currency]||0,playerInventory:t.inventory,shopInventories:t.shopInventories,getItemDetails:M,onPurchase:Ue})})]})}),p.jsxs("div",{className:"mt-6 flex items-center justify-center gap-4 text-sm text-muted-foreground",children:[p.jsxs("span",{children:["Page ",t.history.length," of your journey"]}),t.inventory.length>0&&p.jsxs("span",{children:[" ",t.inventory.length," items"]})]})]}),(q==null?void 0:q.input)&&p.jsx(BG,{open:U,onOpenChange:Ce=>{K(Ce),Ce||re(null)},input:q.input,onSubmit:ye}),(se==null?void 0:se.prompt)&&p.jsx(HX,{isOpen:ee,prompt:se.prompt,onSubmit:pe,onCancel:()=>{ae(!1),G(null)}}),W&&p.jsx(zX,{open:z,enemy:W,playerStats:t.stats,onWin:Se,onLose:De,onCancel:xe})]})}var yO=["PageUp","PageDown"],wO=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],vO={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Hd="Slider",[Wv,KX,YX]=ag(Hd),[bO,Gce]=cs(Hd,[YX]),[qX,Zg]=bO(Hd),CO=N.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[r],value:h,onValueChange:g=()=>{},onValueCommit:y=()=>{},inverted:w=!1,form:S,...C}=e,A=N.useRef(new Set),E=N.useRef(0),I=o==="horizontal"?ZX:QX,[M=[],P]=li({prop:h,defaultProp:d,onChange:K=>{var re;(re=[...A.current][E.current])==null||re.focus(),g(K)}}),j=N.useRef(M);function _(K){const q=rK(M,K);U(K,q)}function D(K){U(K,E.current)}function L(){const K=j.current[E.current];M[E.current]!==K&&y(M)}function U(K,q,{commit:re}={commit:!1}){const z=aK(i),H=lK(Math.round((K-r)/i)*i+r,z),Y=Ah(H,[r,s]);P((X=[])=>{const W=tK(X,Y,q);if(oK(W,c*i)){E.current=W.indexOf(Y);const V=String(W)!==String(X);return V&&re&&y(W),V?W:X}else return X})}return p.jsx(qX,{scope:e.__scopeSlider,name:n,disabled:l,min:r,max:s,valueIndexToChangeRef:E,thumbs:A.current,values:M,orientation:o,form:S,children:p.jsx(Wv.Provider,{scope:e.__scopeSlider,children:p.jsx(Wv.Slot,{scope:e.__scopeSlider,children:p.jsx(I,{"aria-disabled":l,"data-disabled":l?"":void 0,...C,ref:t,onPointerDown:ze(C.onPointerDown,()=>{l||(j.current=M)}),min:r,max:s,inverted:w,onSlideStart:l?void 0:_,onSlideMove:l?void 0:D,onSlideEnd:l?void 0:L,onHomeKeyDown:()=>!l&&U(r,0,{commit:!0}),onEndKeyDown:()=>!l&&U(s,M.length-1,{commit:!0}),onStepKeyDown:({event:K,direction:q})=>{if(!l){const H=yO.includes(K.key)||K.shiftKey&&wO.includes(K.key)?10:1,Y=E.current,X=M[Y],W=i*H*q;U(X+W,Y,{commit:!0})}}})})})})});CO.displayName=Hd;var[SO,EO]=bO(Hd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ZX=N.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...h}=e,[g,y]=N.useState(null),w=dt(t,I=>y(I)),S=N.useRef(void 0),C=op(s),A=C==="ltr",E=A&&!i||!A&&i;function k(I){const M=S.current||g.getBoundingClientRect(),P=[0,M.width],_=jC(P,E?[n,r]:[r,n]);return S.current=M,_(I-M.left)}return p.jsx(SO,{scope:e.__scopeSlider,startEdge:E?"left":"right",endEdge:E?"right":"left",direction:E?1:-1,size:"width",children:p.jsx(NO,{dir:C,"data-orientation":"horizontal",...h,ref:w,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:I=>{const M=k(I.clientX);o==null||o(M)},onSlideMove:I=>{const M=k(I.clientX);l==null||l(M)},onSlideEnd:()=>{S.current=void 0,c==null||c()},onStepKeyDown:I=>{const P=vO[E?"from-left":"from-right"].includes(I.key);d==null||d({event:I,direction:P?-1:1})}})})}),QX=N.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=e,h=N.useRef(null),g=dt(t,h),y=N.useRef(void 0),w=!s;function S(C){const A=y.current||h.current.getBoundingClientRect(),E=[0,A.height],I=jC(E,w?[r,n]:[n,r]);return y.current=A,I(C-A.top)}return p.jsx(SO,{scope:e.__scopeSlider,startEdge:w?"bottom":"top",endEdge:w?"top":"bottom",size:"height",direction:w?1:-1,children:p.jsx(NO,{"data-orientation":"vertical",...d,ref:g,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:C=>{const A=S(C.clientY);i==null||i(A)},onSlideMove:C=>{const A=S(C.clientY);o==null||o(A)},onSlideEnd:()=>{y.current=void 0,l==null||l()},onStepKeyDown:C=>{const E=vO[w?"from-bottom":"from-top"].includes(C.key);c==null||c({event:C,direction:E?-1:1})}})})}),NO=N.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...d}=e,h=Zg(Hd,n);return p.jsx(Ye.span,{...d,ref:t,onKeyDown:ze(e.onKeyDown,g=>{g.key==="Home"?(o(g),g.preventDefault()):g.key==="End"?(l(g),g.preventDefault()):yO.concat(wO).includes(g.key)&&(c(g),g.preventDefault())}),onPointerDown:ze(e.onPointerDown,g=>{const y=g.target;y.setPointerCapture(g.pointerId),g.preventDefault(),h.thumbs.has(y)?y.focus():r(g)}),onPointerMove:ze(e.onPointerMove,g=>{g.target.hasPointerCapture(g.pointerId)&&s(g)}),onPointerUp:ze(e.onPointerUp,g=>{const y=g.target;y.hasPointerCapture(g.pointerId)&&(y.releasePointerCapture(g.pointerId),i(g))})})}),AO="SliderTrack",TO=N.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=Zg(AO,n);return p.jsx(Ye.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});TO.displayName=AO;var Gv="SliderRange",kO=N.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=Zg(Gv,n),i=EO(Gv,n),o=N.useRef(null),l=dt(t,o),c=s.values.length,d=s.values.map(y=>MO(y,s.min,s.max)),h=c>1?Math.min(...d):0,g=100-Math.max(...d);return p.jsx(Ye.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:l,style:{...e.style,[i.startEdge]:h+"%",[i.endEdge]:g+"%"}})});kO.displayName=Gv;var Xv="SliderThumb",IO=N.forwardRef((e,t)=>{const n=KX(e.__scopeSlider),[r,s]=N.useState(null),i=dt(t,l=>s(l)),o=N.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return p.jsx(JX,{...e,ref:i,index:o})}),JX=N.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...i}=e,o=Zg(Xv,n),l=EO(Xv,n),[c,d]=N.useState(null),h=dt(t,k=>d(k)),g=c?o.form||!!c.closest("form"):!0,y=xg(c),w=o.values[r],S=w===void 0?0:MO(w,o.min,o.max),C=nK(r,o.values.length),A=y==null?void 0:y[l.size],E=A?sK(A,S,l.direction):0;return N.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),p.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${S}% + ${E}px)`},children:[p.jsx(Wv.ItemSlot,{scope:e.__scopeSlider,children:p.jsx(Ye.span,{role:"slider","aria-label":e["aria-label"]||C,"aria-valuemin":o.min,"aria-valuenow":w,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:h,style:w===void 0?{display:"none"}:e.style,onFocus:ze(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),g&&p.jsx(RO,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:w},r)]})});IO.displayName=Xv;var eK="RadioBubbleInput",RO=N.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const s=N.useRef(null),i=dt(s,r),o=Wg(t);return N.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&h){const g=new Event("input",{bubbles:!0});h.call(l,t),l.dispatchEvent(g)}},[o,t]),p.jsx(Ye.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});RO.displayName=eK;function tK(e=[],t,n){const r=[...e];return r[n]=t,r.sort((s,i)=>s-i)}function MO(e,t,n){const i=100/(n-t)*(e-t);return Ah(i,[0,100])}function nK(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function rK(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),r=Math.min(...n);return n.indexOf(r)}function sK(e,t,n){const r=e/2,i=jC([0,50],[0,r]);return(r-i(t)*n)*n}function iK(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function oK(e,t){if(t>0){const n=iK(e);return Math.min(...n)>=t}return!0}function jC(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function aK(e){return(String(e).split(".")[1]||"").length}function lK(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var _O=CO,cK=TO,uK=kO,dK=IO;const OO=N.forwardRef(({className:e,...t},n)=>p.jsxs(_O,{ref:n,className:Xe("relative flex w-full touch-none select-none items-center",e),...t,children:[p.jsx(cK,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:p.jsx(uK,{className:"absolute h-full bg-primary"})}),p.jsx(dK,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));OO.displayName=_O.displayName;function fK({gamebookData:e,onComplete:t}){var H,Y;const n=e.presets,r=e.player,s=e.items||[],i=(r==null?void 0:r.creationMode)||"both",o=(r==null?void 0:r.allowCustomName)!==!1,l=r==null?void 0:r.totalStatPoints,c=(r==null?void 0:r.useStats)||[],d=(n==null?void 0:n.profiles)||[],h=(n==null?void 0:n.stats)||{},g=c.filter(X=>h[X]),[y,w]=N.useState(""),[S,C]=N.useState(i==="profiles"?"profiles":"sliders"),[A,E]=N.useState((r==null?void 0:r.defaultProfile)||(d.length>0?d[0].id:null)),[k,I]=N.useState(()=>{const X={};for(const W of g){const V=h[W];X[W]=(V==null?void 0:V.default)||0}return X}),M=N.useMemo(()=>{if(!l)return 0;let X=0;for(const W of g)X+=k[W]||0;return X},[k,g,l]),P=l?l-M:null,j=(X,W)=>{const V=h[X];if(V){if(W=Math.max(V.min,Math.min(V.max,W)),l){const ee=k[X],ae=W-ee;if(ae>0&&P!==null&&P<ae)return}I(ee=>({...ee,[X]:W}))}},_=d.find(X=>X.id===A),D=()=>{let X={},W=[],V={};S==="profiles"&&_?(X={..._.stats},W=[..._.inventory],V={..._.variables}):(X={...k},W=(r==null?void 0:r.startingItems)||[],V=(r==null?void 0:r.startingVariables)||{}),t(o&&y?y:"Adventurer",X,W,V)},L=N.useMemo(()=>S==="profiles"?_!==null:P!==null&&P!==0?!1:g.length>0,[S,_,P,g]),U=((H=e.meta)==null?void 0:H.title)||e.title||"New Adventure",K=(Y=e.meta)==null?void 0:Y.author,q={warrior:oR,fighter:dg,mage:gN,wizard:gN,rogue:Ja};return p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:p.jsxs("div",{className:"w-full max-w-2xl space-y-6",children:[p.jsxs("div",{className:"text-center space-y-2",children:[p.jsx("h1",{className:"text-3xl font-serif font-bold text-foreground",children:U}),K&&p.jsxs("p",{className:"text-muted-foreground",children:["by ",K]})]}),p.jsxs(Tt,{children:[p.jsxs(Wt,{children:[p.jsxs(Kt,{className:"flex items-center gap-2",children:[p.jsx(Ja,{className:"h-5 w-5"}),"Create Your Character"]}),p.jsxs(Fn,{children:[i==="sliders"&&"Customize your character stats",i==="profiles"&&"Choose a character profile",i==="both"&&"Choose a profile or customize your stats"]})]}),p.jsxs(Dt,{className:"space-y-6",children:[o&&p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{htmlFor:"playerName",children:"Character Name"}),p.jsx(at,{id:"playerName",placeholder:"Enter your character's name...",value:y,onChange:X=>w(X.target.value)})]}),i==="both"?p.jsxs(Mg,{value:S,onValueChange:X=>C(X),children:[p.jsxs(lp,{className:"grid w-full grid-cols-2",children:[p.jsxs(fo,{value:"sliders",children:[p.jsx(IB,{className:"h-4 w-4 mr-2"}),"Custom Stats"]}),p.jsxs(fo,{value:"profiles",children:[p.jsx(lR,{className:"h-4 w-4 mr-2"}),"Profiles"]})]}),p.jsx(ho,{value:"sliders",className:"space-y-4 mt-4",children:re()}),p.jsx(ho,{value:"profiles",className:"space-y-4 mt-4",children:z()})]}):i==="profiles"?z():re(),p.jsx(Ne,{className:"w-full",size:"lg",onClick:D,disabled:!L,children:"Begin Adventure"})]})]})]})});function re(){return g.length===0?p.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No stats available for customization"}):p.jsxs("div",{className:"space-y-4",children:[l&&p.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[p.jsx("span",{className:"text-sm font-medium",children:"Stat Points"}),p.jsxs("span",{className:`text-lg font-bold ${P===0?"text-green-600 dark:text-green-400":P<0?"text-destructive":"text-foreground"}`,children:[P," / ",l]})]}),p.jsx("div",{className:"space-y-4",children:g.map(X=>{const W=h[X],V=k[X];return p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("span",{className:"font-medium",children:W.name||X}),W.description&&p.jsx("p",{className:"text-xs text-muted-foreground",children:W.description})]}),p.jsx(wn,{variant:"secondary",children:V})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx(OO,{value:[V],min:W.min,max:W.max,step:1,onValueChange:([ee])=>j(X,ee)}),p.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[p.jsxs("span",{children:["Min: ",W.min]}),p.jsxs("span",{children:["Max: ",W.max]})]})]})]},X)})}),l&&P!==0&&p.jsx("div",{className:`text-sm text-center ${P<0?"text-destructive":"text-muted-foreground"}`,children:P<0?"You have exceeded the stat point limit!":`You must spend all ${P} remaining points`})]})}function z(){return d.length===0?p.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No character profiles available"}):p.jsx("div",{className:"space-y-3",children:d.map(X=>{const W=X.id===A,V=q[X.id.toLowerCase()]||Ja;return p.jsx("button",{onClick:()=>E(X.id),className:`w-full text-left p-4 rounded-lg border-2 transition-all ${W?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:`p-2 rounded-lg ${W?"bg-primary text-primary-foreground":"bg-muted"}`,children:p.jsx(V,{className:"h-5 w-5"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h3",{className:"font-semibold",children:X.name}),X.description&&p.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:X.description}),p.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:Object.entries(X.stats).map(([ee,ae])=>{const se=h[ee];return p.jsxs(wn,{variant:"outline",className:"text-xs",children:[(se==null?void 0:se.name)||ee,": ",ae]},ee)})}),X.inventory.length>0&&p.jsxs("div",{className:"mt-2",children:[p.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Starting Items:"}),p.jsx("div",{className:"flex flex-wrap gap-1",children:X.inventory.map(ee=>{const ae=s.find(se=>se.id===ee);return p.jsx(wn,{variant:"secondary",className:"text-xs",children:(ae==null?void 0:ae.name)||ee},ee)})})]})]})]})},X.id)})})}}const hK=()=>{const[e,t]=N.useState(!0),{gamebookData:n,gameState:r,isPlaying:s,loadStory:i,getCurrentPage:o,getPageById:l,canChoose:c,getChoiceRequirements:d,makeChoice:h,jumpToPage:g,restart:y,getSaveSlots:w,saveGame:S,loadGame:C,deleteSave:A,exitStory:E,maxSaveSlots:k,canSave:I,updateStat:M,updateStats:P,updateVariable:j,consumeItem:_,purchaseItem:D,getItemDetails:L,getEnemyDetails:U,completeCharacterSetup:K,exportSaveAsCode:q,loadGameState:re}=fM();return!s||!n?p.jsx(Cf,{children:p.jsx(AU,{onLoadStory:i})}):!r.isCharacterSetupComplete&&r.history.length===0&&e?p.jsx(Cf,{children:p.jsx(rW,{gamebookData:n,onStartNew:()=>t(!1),onLoadSave:z=>{re(z),t(!1)}})}):r.isCharacterSetupComplete?p.jsx(Cf,{children:p.jsx(xO,{gamebookData:n,gameState:r,currentPage:o(),canChoose:c,getChoiceRequirements:d,makeChoice:h,jumpToPage:g,restart:y,getPageById:l,getSaveSlots:w,saveGame:S,loadGame:C,deleteSave:A,exitStory:E,maxSaveSlots:k,canSave:I,onUpdateStat:M,onUpdateStats:P,onUpdateVariable:j,onConsumeItem:_,onPurchaseItem:D,getItemDetails:L,getEnemyDetails:U,onExportSave:z=>{const H={currentPageId:z.currentPageId,inventory:z.inventory,stats:z.stats,history:z.history,variables:z.variables||{},playerName:z.playerName,visitedPages:new Set(z.visitedPages||[]),isCharacterSetupComplete:!0,bookmarks:{}};return q(H)}})}):p.jsx(Cf,{children:p.jsx(fK,{gamebookData:n,onComplete:K})})},Er=[];for(let e=0;e<256;++e)Er.push((e+256).toString(16).slice(1));function pK(e,t=0){return(Er[e[t+0]]+Er[e[t+1]]+Er[e[t+2]]+Er[e[t+3]]+"-"+Er[e[t+4]]+Er[e[t+5]]+"-"+Er[e[t+6]]+Er[e[t+7]]+"-"+Er[e[t+8]]+Er[e[t+9]]+"-"+Er[e[t+10]]+Er[e[t+11]]+Er[e[t+12]]+Er[e[t+13]]+Er[e[t+14]]+Er[e[t+15]]).toLowerCase()}let Iy;const mK=new Uint8Array(16);function gK(){if(!Iy){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Iy=crypto.getRandomValues.bind(crypto)}return Iy(mK)}const xK=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),AA={randomUUID:xK};function yK(e,t,n){var s;e=e||{};const r=e.random??((s=e.rng)==null?void 0:s.call(e))??gK();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,pK(r)}function PO(e,t,n){return AA.randomUUID&&!t&&!e?AA.randomUUID():yK(e)}const i0="gamebook_builder_project",wK=10*60*1e3,vK=()=>{const[e,t]=N.useState({mode:"editor",gamebookData:bK(),selectedPageId:null,selectedSection:"meta",isDirty:!1,lastSaved:null,errors:[]}),n=N.useRef(null);N.useEffect(()=>(e.isDirty&&(n.current=setTimeout(()=>{r()},wK)),()=>{n.current&&clearTimeout(n.current)}),[e.isDirty]);const r=N.useCallback(()=>{try{localStorage.setItem(i0,JSON.stringify({gamebookData:e.gamebookData,selectedPageId:e.selectedPageId,selectedSection:e.selectedSection,timestamp:new Date().toISOString()})),t(X=>({...X,isDirty:!1,lastSaved:new Date}))}catch(X){console.error("Failed to save to localStorage:",X)}},[e.gamebookData,e.selectedPageId,e.selectedSection]),s=N.useCallback(()=>{try{const X=localStorage.getItem(i0);if(X){const W=JSON.parse(X);return t(V=>({...V,gamebookData:W.gamebookData,selectedPageId:W.selectedPageId,selectedSection:W.selectedSection,lastSaved:new Date(W.timestamp),isDirty:!1})),!0}}catch(X){console.error("Failed to load from localStorage:",X)}return!1},[]),i=N.useCallback(()=>localStorage.getItem(i0)!==null,[]),o=N.useCallback(()=>{localStorage.removeItem(i0)},[]),l=N.useCallback(X=>{t(W=>({...W,mode:X}))},[]),c=N.useCallback(X=>{t(W=>({...W,selectedSection:X}))},[]),d=N.useCallback(X=>{t(W=>({...W,selectedPageId:X}))},[]),h=N.useCallback(X=>{t(W=>({...W,gamebookData:{...W.gamebookData,meta:{...W.gamebookData.meta,...X}},isDirty:!0}))},[]),g=N.useCallback(X=>{t(W=>({...W,gamebookData:{...W.gamebookData,initialStats:X},isDirty:!0}))},[]),y=N.useCallback(X=>{t(W=>({...W,gamebookData:{...W.gamebookData,initialInventory:X},isDirty:!0}))},[]),w=N.useCallback(X=>{t(W=>({...W,gamebookData:{...W.gamebookData,player:X},isDirty:!0}))},[]),S=N.useCallback(X=>{const W=e.gamebookData.pages||[];let V;if(X!==void 0)V=X;else{const ae=W.map(G=>typeof G.id=="number"?G.id:parseInt(String(G.id),10)).filter(G=>!isNaN(G));V=(ae.length>0?Math.max(...ae):0)+1}const ee={id:V,text:"",choices:[]};return t(ae=>({...ae,gamebookData:{...ae.gamebookData,pages:[...W,ee]},selectedPageId:V,isDirty:!0})),V},[e.gamebookData.pages]),C=N.useCallback((X,W)=>{t(V=>{const ee=V.gamebookData.pages||[],ae=ee.findIndex(G=>G.id===X);if(ae===-1)return V;const se=[...ee];return se[ae]={...se[ae],...W},{...V,gamebookData:{...V.gamebookData,pages:se},isDirty:!0}})},[]),A=N.useCallback(X=>{t(W=>{const ee=(W.gamebookData.pages||[]).filter(ae=>ae.id!==X);return{...W,gamebookData:{...W.gamebookData,pages:ee},selectedPageId:W.selectedPageId===X?null:W.selectedPageId,isDirty:!0}})},[]),E=N.useCallback(X=>{const V=(e.gamebookData.pages||[]).find(se=>se.id===X);if(!V)return null;const ee=Date.now(),ae={...JSON.parse(JSON.stringify(V)),id:ee};return t(se=>({...se,gamebookData:{...se.gamebookData,pages:[...se.gamebookData.pages||[],ae]},selectedPageId:ee,isDirty:!0})),ee},[e.gamebookData.pages]),k=N.useCallback((X,W)=>{t(V=>{const ee=V.gamebookData.pages||[],ae=ee.findIndex(G=>G.id===X);if(ae===-1)return V;const se=[...ee];return se[ae]={...se[ae],choices:[...se[ae].choices||[],W]},{...V,gamebookData:{...V.gamebookData,pages:se},isDirty:!0}})},[]),I=N.useCallback((X,W,V)=>{t(ee=>{const ae=ee.gamebookData.pages||[],se=ae.findIndex(te=>te.id===X);if(se===-1||!ae[se].choices)return ee;const G=[...ae],Q=[...G[se].choices||[]];return Q[W]={...Q[W],...V},G[se]={...G[se],choices:Q},{...ee,gamebookData:{...ee.gamebookData,pages:G},isDirty:!0}})},[]),M=N.useCallback((X,W)=>{t(V=>{const ee=V.gamebookData.pages||[],ae=ee.findIndex(G=>G.id===X);if(ae===-1||!ee[ae].choices)return V;const se=[...ee];return se[ae]={...se[ae],choices:(se[ae].choices||[]).filter((G,Q)=>Q!==W)},{...V,gamebookData:{...V.gamebookData,pages:se},isDirty:!0}})},[]),P=N.useCallback((X,W)=>{t(V=>({...V,gamebookData:{...V.gamebookData,items:[...V.gamebookData.items||[],{...W,id:X}]},isDirty:!0}))},[]),j=N.useCallback((X,W)=>{t(V=>{const ee=V.gamebookData.items||[],ae=ee.findIndex(G=>G.id===X);if(ae===-1)return V;const se=[...ee];return se[ae]={...se[ae],...W},{...V,gamebookData:{...V.gamebookData,items:se},isDirty:!0}})},[]),_=N.useCallback(X=>{t(W=>({...W,gamebookData:{...W.gamebookData,items:(W.gamebookData.items||[]).filter(V=>V.id!==X)},isDirty:!0}))},[]),D=N.useCallback((X,W)=>{t(V=>({...V,gamebookData:{...V.gamebookData,enemies:[...V.gamebookData.enemies||[],{...W,id:X}]},isDirty:!0}))},[]),L=N.useCallback((X,W)=>{t(V=>{const ee=V.gamebookData.enemies||[],ae=ee.findIndex(G=>G.id===X);if(ae===-1)return V;const se=[...ee];return se[ae]={...se[ae],...W},{...V,gamebookData:{...V.gamebookData,enemies:se},isDirty:!0}})},[]),U=N.useCallback(X=>{t(W=>({...W,gamebookData:{...W.gamebookData,enemies:(W.gamebookData.enemies||[]).filter(V=>V.id!==X)},isDirty:!0}))},[]),K=N.useCallback(X=>{var V,ee;const W=((ee=(V=X.pages)==null?void 0:V[0])==null?void 0:ee.id)||null;t(ae=>({...ae,gamebookData:X,selectedPageId:W,isDirty:!1,errors:[]}))},[]),q=N.useCallback(()=>{var se,G;const X=[],{gamebookData:W}=e,V=W.pages||[],ee=W.items||[],ae=W.enemies||[];return!((se=W.meta)!=null&&se.title)&&!W.title&&X.push({id:"meta-title",type:"error",section:"meta",field:"title",message:"Story title is required"}),(G=W.meta)!=null&&G.storyId||X.push({id:"meta-storyid",type:"warning",section:"meta",field:"storyId",message:"Story ID is recommended for save isolation"}),V.length===0&&X.push({id:"pages-missing",type:"error",section:"pages",message:"Story must have at least one page"}),V.forEach(Q=>{var ne,ie;const te=String(Q.id);(!Q.text||Q.text.trim()==="")&&X.push({id:`page-${te}-text`,type:"warning",section:"pages",pageId:te,field:"text",message:`Page "${te}" has no text`}),(ne=Q.choices)==null||ne.forEach((de,pe)=>{var Se,De;(!de.text||de.text.trim()==="")&&X.push({id:`page-${te}-choice-${pe}-text`,type:"error",section:"pages",pageId:te,field:`choices[${pe}].text`,message:`Choice ${pe+1} has no text`});const ye=de.nextPageId||de.to;ye&&!V.find(xe=>xe.id===ye)&&X.push({id:`page-${te}-choice-${pe}-nextpage`,type:"error",section:"pages",pageId:te,field:`choices[${pe}].nextPageId`,message:`Choice ${pe+1} links to non-existent page "${ye}"`}),de.combat&&(de.combat.enemyId?ae.find(xe=>xe.id===de.combat.enemyId)||X.push({id:`page-${te}-choice-${pe}-combat-enemy-missing`,type:"error",section:"pages",pageId:te,field:`choices[${pe}].combat.enemyId`,message:`Combat enemy "${de.combat.enemyId}" does not exist`}):X.push({id:`page-${te}-choice-${pe}-combat-enemy`,type:"error",section:"pages",pageId:te,field:`choices[${pe}].combat.enemyId`,message:`Combat choice ${pe+1} has no enemy specified`}),de.combat.winPageId||X.push({id:`page-${te}-choice-${pe}-combat-win`,type:"error",section:"pages",pageId:te,field:`choices[${pe}].combat.winPageId`,message:`Combat choice ${pe+1} has no win page`}),de.combat.losePageId||X.push({id:`page-${te}-choice-${pe}-combat-lose`,type:"error",section:"pages",pageId:te,field:`choices[${pe}].combat.losePageId`,message:`Combat choice ${pe+1} has no lose page`})),(Se=de.effects)!=null&&Se.itemsAdd&&de.effects.itemsAdd.forEach(xe=>{ee.find(Ue=>Ue.id===xe)||X.push({id:`page-${te}-choice-${pe}-effect-item-add`,type:"error",section:"pages",pageId:te,field:`choices[${pe}].effects.itemsAdd`,message:`Effect references non-existent item "${xe}"`})}),(De=de.effects)!=null&&De.itemsRemove&&de.effects.itemsRemove.forEach(xe=>{ee.find(Ue=>Ue.id===xe)||X.push({id:`page-${te}-choice-${pe}-effect-item-remove`,type:"error",section:"pages",pageId:te,field:`choices[${pe}].effects.itemsRemove`,message:`Effect references non-existent item "${xe}"`})})}),Q.shop&&((ie=Q.shop.items)==null||ie.forEach((de,pe)=>{ee.find(ye=>ye.id===de.itemId)||X.push({id:`page-${te}-shop-${pe}`,type:"error",section:"pages",pageId:te,field:`shop.items[${pe}]`,message:`Shop item "${de.itemId}" does not exist`})}))}),t(Q=>({...Q,errors:X})),X},[e.gamebookData]),re=N.useCallback(()=>{const X=q(),W=X.some(V=>V.type==="error");return{data:e.gamebookData,errors:X,hasErrors:W}},[e.gamebookData,q]),z=N.useCallback(X=>{t(W=>({...W,previewState:X}))},[]),H=N.useCallback(X=>{t(W=>({...W,gamebookData:{...W.gamebookData,presets:X},isDirty:!0}))},[]),Y=N.useCallback(X=>{t(W=>({...W,gamebookData:{...W.gamebookData,sections:X},isDirty:!0}))},[]);return{state:e,setMode:l,setSelectedSection:c,setSelectedPageId:d,updateMeta:h,updateInitialStats:g,updateInitialInventory:y,updatePlayer:w,updatePresets:H,updateSections:Y,addPage:S,updatePage:C,deletePage:A,duplicatePage:E,addChoice:k,updateChoice:I,deleteChoice:M,addItem:P,updateItem:j,deleteItem:_,addEnemy:D,updateEnemy:L,deleteEnemy:U,loadStory:K,validateStory:q,exportAsJSON:re,saveToLocalStorage:r,loadFromLocalStorage:s,hasUnsavedWork:i,clearLocalStorage:o,setPreviewState:z}};function bK(){return{meta:{title:"Untitled Story",author:"",version:"1.0",storyId:PO()},presets:{stats:{health:{name:"Health",min:1,max:100,default:50,description:"Your life force"},strength:{name:"Strength",min:1,max:20,default:10,description:"Physical power"},magic:{name:"Magic",min:1,max:20,default:10,description:"Magical ability"}},variables:{},profiles:[]},player:{creationMode:"both",allowCustomName:!0,useStats:["health","strength","magic"],startingItems:[]},sections:[],pages:[{id:1,text:"<p>Your adventure begins here...</p>",choices:[]}],items:[],enemies:[]}}const Qg=N.createContext(null);Qg.displayName="PanelGroupContext";const Ln={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},LC=10,uc=N.useLayoutEffect,TA=W1.useId,CK=typeof TA=="function"?TA:()=>null;let SK=0;function BC(e=null){const t=CK(),n=N.useRef(e||t||null);return n.current===null&&(n.current=""+SK++),e??n.current}function DO({children:e,className:t="",collapsedSize:n,collapsible:r,defaultSize:s,forwardedRef:i,id:o,maxSize:l,minSize:c,onCollapse:d,onExpand:h,onResize:g,order:y,style:w,tagName:S="div",...C}){const A=N.useContext(Qg);if(A===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:E,expandPanel:k,getPanelSize:I,getPanelStyle:M,groupId:P,isPanelCollapsed:j,reevaluatePanelConstraints:_,registerPanel:D,resizePanel:L,unregisterPanel:U}=A,K=BC(o),q=N.useRef({callbacks:{onCollapse:d,onExpand:h,onResize:g},constraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:l,minSize:c},id:K,idIsFromProps:o!==void 0,order:y});N.useRef({didLogMissingDefaultSizeWarning:!1}),uc(()=>{const{callbacks:z,constraints:H}=q.current,Y={...H};q.current.id=K,q.current.idIsFromProps=o!==void 0,q.current.order=y,z.onCollapse=d,z.onExpand=h,z.onResize=g,H.collapsedSize=n,H.collapsible=r,H.defaultSize=s,H.maxSize=l,H.minSize=c,(Y.collapsedSize!==H.collapsedSize||Y.collapsible!==H.collapsible||Y.maxSize!==H.maxSize||Y.minSize!==H.minSize)&&_(q.current,Y)}),uc(()=>{const z=q.current;return D(z),()=>{U(z)}},[y,K,D,U]),N.useImperativeHandle(i,()=>({collapse:()=>{E(q.current)},expand:z=>{k(q.current,z)},getId(){return K},getSize(){return I(q.current)},isCollapsed(){return j(q.current)},isExpanded(){return!j(q.current)},resize:z=>{L(q.current,z)}}),[E,k,I,j,K,L]);const re=M(q.current,s);return N.createElement(S,{...C,children:e,className:t,id:K,style:{...re,...w},[Ln.groupId]:P,[Ln.panel]:"",[Ln.panelCollapsible]:r||void 0,[Ln.panelId]:K,[Ln.panelSize]:parseFloat(""+re.flexGrow).toFixed(1)})}const jO=N.forwardRef((e,t)=>N.createElement(DO,{...e,forwardedRef:t}));DO.displayName="Panel";jO.displayName="forwardRef(Panel)";let Kv=null,X0=-1,Ia=null;function EK(e,t){if(t){const n=(t&VO)!==0,r=(t&HO)!==0,s=(t&UO)!==0,i=(t&$O)!==0;if(n)return s?"se-resize":i?"ne-resize":"e-resize";if(r)return s?"sw-resize":i?"nw-resize":"w-resize";if(s)return"s-resize";if(i)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function NK(){Ia!==null&&(document.head.removeChild(Ia),Kv=null,Ia=null,X0=-1)}function Ry(e,t){var n,r;const s=EK(e,t);if(Kv!==s){if(Kv=s,Ia===null&&(Ia=document.createElement("style"),document.head.appendChild(Ia)),X0>=0){var i;(i=Ia.sheet)===null||i===void 0||i.removeRule(X0)}X0=(n=(r=Ia.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${s} !important;}`))!==null&&n!==void 0?n:-1}}function LO(e){return e.type==="keydown"}function BO(e){return e.type.startsWith("pointer")}function FO(e){return e.type.startsWith("mouse")}function Jg(e){if(BO(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(FO(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function AK(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function TK(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function kK(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:RA(e),b:RA(t)};let r;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),r=e;bt(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:IA(kA(n.a)),b:IA(kA(n.b))};if(s.a===s.b){const i=r.childNodes,o={a:n.a.at(-1),b:n.b.at(-1)};let l=i.length;for(;l--;){const c=i[l];if(c===o.a)return 1;if(c===o.b)return-1}}return Math.sign(s.a-s.b)}const IK=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function RK(e){var t;const n=getComputedStyle((t=zO(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function MK(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||RK(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||IK.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function kA(e){let t=e.length;for(;t--;){const n=e[t];if(bt(n,"Missing node"),MK(n))return n}return null}function IA(e){return e&&Number(getComputedStyle(e).zIndex)||0}function RA(e){const t=[];for(;e;)t.push(e),e=zO(e);return t}function zO(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const VO=1,HO=2,UO=4,$O=8,_K=AK()==="coarse";let _i=[],Hu=!1,jl=new Map,ex=new Map;const kh=new Set;function OK(e,t,n,r,s){var i;const{ownerDocument:o}=t,l={direction:n,element:t,hitAreaMargins:r,setResizeHandlerState:s},c=(i=jl.get(o))!==null&&i!==void 0?i:0;return jl.set(o,c+1),kh.add(l),$m(),function(){var h;ex.delete(e),kh.delete(l);const g=(h=jl.get(o))!==null&&h!==void 0?h:1;if(jl.set(o,g-1),$m(),g===1&&jl.delete(o),_i.includes(l)){const y=_i.indexOf(l);y>=0&&_i.splice(y,1),zC(),s("up",!0,null)}}}function PK(e){const{target:t}=e,{x:n,y:r}=Jg(e);Hu=!0,FC({target:t,x:n,y:r}),$m(),_i.length>0&&(Wm("down",e),e.preventDefault(),WO(t)||e.stopImmediatePropagation())}function My(e){const{x:t,y:n}=Jg(e);if(Hu&&e.buttons===0&&(Hu=!1,Wm("up",e)),!Hu){const{target:r}=e;FC({target:r,x:t,y:n})}Wm("move",e),zC(),_i.length>0&&e.preventDefault()}function _y(e){const{target:t}=e,{x:n,y:r}=Jg(e);ex.clear(),Hu=!1,_i.length>0&&(e.preventDefault(),WO(t)||e.stopImmediatePropagation()),Wm("up",e),FC({target:t,x:n,y:r}),zC(),$m()}function WO(e){let t=e;for(;t;){if(t.hasAttribute(Ln.resizeHandle))return!0;t=t.parentElement}return!1}function FC({target:e,x:t,y:n}){_i.splice(0);let r=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(r=e),kh.forEach(s=>{const{element:i,hitAreaMargins:o}=s,l=i.getBoundingClientRect(),{bottom:c,left:d,right:h,top:g}=l,y=_K?o.coarse:o.fine;if(t>=d-y&&t<=h+y&&n>=g-y&&n<=c+y){if(r!==null&&document.contains(r)&&i!==r&&!i.contains(r)&&!r.contains(i)&&kK(r,i)>0){let S=r,C=!1;for(;S&&!S.contains(i);){if(TK(S.getBoundingClientRect(),l)){C=!0;break}S=S.parentElement}if(C)return}_i.push(s)}})}function Oy(e,t){ex.set(e,t)}function zC(){let e=!1,t=!1;_i.forEach(r=>{const{direction:s}=r;s==="horizontal"?e=!0:t=!0});let n=0;ex.forEach(r=>{n|=r}),e&&t?Ry("intersection",n):e?Ry("horizontal",n):t?Ry("vertical",n):NK()}let Py=new AbortController;function $m(){Py.abort(),Py=new AbortController;const e={capture:!0,signal:Py.signal};kh.size&&(Hu?(_i.length>0&&jl.forEach((t,n)=>{const{body:r}=n;t>0&&(r.addEventListener("contextmenu",_y,e),r.addEventListener("pointerleave",My,e),r.addEventListener("pointermove",My,e))}),window.addEventListener("pointerup",_y,e),window.addEventListener("pointercancel",_y,e)):jl.forEach((t,n)=>{const{body:r}=n;t>0&&(r.addEventListener("pointerdown",PK,e),r.addEventListener("pointermove",My,e))}))}function Wm(e,t){kh.forEach(n=>{const{setResizeHandlerState:r}=n,s=_i.includes(n);r(e,s,t)})}function DK(){const[e,t]=N.useState(0);return N.useCallback(()=>t(n=>n+1),[])}function bt(e,t){if(!e)throw console.error(t),Error(t)}function Rc(e,t,n=LC){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function Fo(e,t,n=LC){return Rc(e,t,n)===0}function ks(e,t,n){return Rc(e,t,n)===0}function jK(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){const s=e[r],i=t[r];if(!ks(s,i,n))return!1}return!0}function ku({panelConstraints:e,panelIndex:t,size:n}){const r=e[t];bt(r!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:s=0,collapsible:i,maxSize:o=100,minSize:l=0}=r;if(Rc(n,l)<0)if(i){const c=(s+l)/2;Rc(n,c)<0?n=s:n=l}else n=l;return n=Math.min(o,n),n=parseFloat(n.toFixed(LC)),n}function Sf({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:i}){if(ks(e,0))return t;const o=[...t],[l,c]=r;bt(l!=null,"Invalid first pivot index"),bt(c!=null,"Invalid second pivot index");let d=0;if(i==="keyboard"){{const g=e<0?c:l,y=n[g];bt(y,`Panel constraints not found for index ${g}`);const{collapsedSize:w=0,collapsible:S,minSize:C=0}=y;if(S){const A=t[g];if(bt(A!=null,`Previous layout not found for panel index ${g}`),ks(A,w)){const E=C-A;Rc(E,Math.abs(e))>0&&(e=e<0?0-E:E)}}}{const g=e<0?l:c,y=n[g];bt(y,`No panel constraints found for index ${g}`);const{collapsedSize:w=0,collapsible:S,minSize:C=0}=y;if(S){const A=t[g];if(bt(A!=null,`Previous layout not found for panel index ${g}`),ks(A,C)){const E=A-w;Rc(E,Math.abs(e))>0&&(e=e<0?0-E:E)}}}}{const g=e<0?1:-1;let y=e<0?c:l,w=0;for(;;){const C=t[y];bt(C!=null,`Previous layout not found for panel index ${y}`);const E=ku({panelConstraints:n,panelIndex:y,size:100})-C;if(w+=E,y+=g,y<0||y>=n.length)break}const S=Math.min(Math.abs(e),Math.abs(w));e=e<0?0-S:S}{let y=e<0?l:c;for(;y>=0&&y<n.length;){const w=Math.abs(e)-Math.abs(d),S=t[y];bt(S!=null,`Previous layout not found for panel index ${y}`);const C=S-w,A=ku({panelConstraints:n,panelIndex:y,size:C});if(!ks(S,A)&&(d+=S-A,o[y]=A,d.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?y--:y++}}if(jK(s,o))return s;{const g=e<0?c:l,y=t[g];bt(y!=null,`Previous layout not found for panel index ${g}`);const w=y+d,S=ku({panelConstraints:n,panelIndex:g,size:w});if(o[g]=S,!ks(S,w)){let C=w-S,E=e<0?c:l;for(;E>=0&&E<n.length;){const k=o[E];bt(k!=null,`Previous layout not found for panel index ${E}`);const I=k+C,M=ku({panelConstraints:n,panelIndex:E,size:I});if(ks(k,M)||(C-=M-k,o[E]=M),ks(C,0))break;e>0?E--:E++}}}const h=o.reduce((g,y)=>y+g,0);return ks(h,100)?o:s}function LK({layout:e,panelsArray:t,pivotIndices:n}){let r=0,s=100,i=0,o=0;const l=n[0];bt(l!=null,"No pivot index found"),t.forEach((g,y)=>{const{constraints:w}=g,{maxSize:S=100,minSize:C=0}=w;y===l?(r=C,s=S):(i+=C,o+=S)});const c=Math.min(s,100-i),d=Math.max(r,100-o),h=e[l];return{valueMax:c,valueMin:d,valueNow:h}}function Ih(e,t=document){return Array.from(t.querySelectorAll(`[${Ln.resizeHandleId}][data-panel-group-id="${e}"]`))}function GO(e,t,n=document){const s=Ih(e,n).findIndex(i=>i.getAttribute(Ln.resizeHandleId)===t);return s??null}function XO(e,t,n){const r=GO(e,t,n);return r!=null?[r,r+1]:[-1,-1]}function KO(e,t=document){var n;if(t instanceof HTMLElement&&(t==null||(n=t.dataset)===null||n===void 0?void 0:n.panelGroupId)==e)return t;const r=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return r||null}function tx(e,t=document){const n=t.querySelector(`[${Ln.resizeHandleId}="${e}"]`);return n||null}function BK(e,t,n,r=document){var s,i,o,l;const c=tx(t,r),d=Ih(e,r),h=c?d.indexOf(c):-1,g=(s=(i=n[h])===null||i===void 0?void 0:i.id)!==null&&s!==void 0?s:null,y=(o=(l=n[h+1])===null||l===void 0?void 0:l.id)!==null&&o!==void 0?o:null;return[g,y]}function FK({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:r,panelDataArray:s,panelGroupElement:i,setLayout:o}){N.useRef({didWarnAboutMissingResizeHandle:!1}),uc(()=>{if(!i)return;const l=Ih(n,i);for(let c=0;c<s.length-1;c++){const{valueMax:d,valueMin:h,valueNow:g}=LK({layout:r,panelsArray:s,pivotIndices:[c,c+1]}),y=l[c];if(y!=null){const w=s[c];bt(w,`No panel data found for index "${c}"`),y.setAttribute("aria-controls",w.id),y.setAttribute("aria-valuemax",""+Math.round(d)),y.setAttribute("aria-valuemin",""+Math.round(h)),y.setAttribute("aria-valuenow",g!=null?""+Math.round(g):"")}}return()=>{l.forEach((c,d)=>{c.removeAttribute("aria-controls"),c.removeAttribute("aria-valuemax"),c.removeAttribute("aria-valuemin"),c.removeAttribute("aria-valuenow")})}},[n,r,s,i]),N.useEffect(()=>{if(!i)return;const l=t.current;bt(l,"Eager values not found");const{panelDataArray:c}=l,d=KO(n,i);bt(d!=null,`No group found for id "${n}"`);const h=Ih(n,i);bt(h,`No resize handles found for group id "${n}"`);const g=h.map(y=>{const w=y.getAttribute(Ln.resizeHandleId);bt(w,"Resize handle element has no handle id attribute");const[S,C]=BK(n,w,c,i);if(S==null||C==null)return()=>{};const A=E=>{if(!E.defaultPrevented)switch(E.key){case"Enter":{E.preventDefault();const k=c.findIndex(I=>I.id===S);if(k>=0){const I=c[k];bt(I,`No panel data found for index ${k}`);const M=r[k],{collapsedSize:P=0,collapsible:j,minSize:_=0}=I.constraints;if(M!=null&&j){const D=Sf({delta:ks(M,P)?_-P:P-M,initialLayout:r,panelConstraints:c.map(L=>L.constraints),pivotIndices:XO(n,w,i),prevLayout:r,trigger:"keyboard"});r!==D&&o(D)}}break}}};return y.addEventListener("keydown",A),()=>{y.removeEventListener("keydown",A)}});return()=>{g.forEach(y=>y())}},[i,e,t,n,r,s,o])}function MA(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function YO(e,t){const n=e==="horizontal",{x:r,y:s}=Jg(t);return n?r:s}function zK(e,t,n,r,s){const i=n==="horizontal",o=tx(t,s);bt(o,`No resize handle element found for id "${t}"`);const l=o.getAttribute(Ln.groupId);bt(l,"Resize handle element has no group id attribute");let{initialCursorPosition:c}=r;const d=YO(n,e),h=KO(l,s);bt(h,`No group element found for id "${l}"`);const g=h.getBoundingClientRect(),y=i?g.width:g.height;return(d-c)/y*100}function VK(e,t,n,r,s,i){if(LO(e)){const o=n==="horizontal";let l=0;e.shiftKey?l=100:s!=null?l=s:l=10;let c=0;switch(e.key){case"ArrowDown":c=o?0:l;break;case"ArrowLeft":c=o?-l:0;break;case"ArrowRight":c=o?l:0;break;case"ArrowUp":c=o?0:-l;break;case"End":c=100;break;case"Home":c=-100;break}return c}else return r==null?0:zK(e,t,n,r,i)}function HK({panelDataArray:e}){const t=Array(e.length),n=e.map(i=>i.constraints);let r=0,s=100;for(let i=0;i<e.length;i++){const o=n[i];bt(o,`Panel constraints not found for index ${i}`);const{defaultSize:l}=o;l!=null&&(r++,t[i]=l,s-=l)}for(let i=0;i<e.length;i++){const o=n[i];bt(o,`Panel constraints not found for index ${i}`);const{defaultSize:l}=o;if(l!=null)continue;const c=e.length-r,d=s/c;r++,t[i]=d,s-=d}return t}function su(e,t,n){t.forEach((r,s)=>{const i=e[s];bt(i,`Panel data not found for index ${s}`);const{callbacks:o,constraints:l,id:c}=i,{collapsedSize:d=0,collapsible:h}=l,g=n[c];if(g==null||r!==g){n[c]=r;const{onCollapse:y,onExpand:w,onResize:S}=o;S&&S(r,g),h&&(y||w)&&(w&&(g==null||Fo(g,d))&&!Fo(r,d)&&w(),y&&(g==null||!Fo(g,d))&&Fo(r,d)&&y())}})}function o0(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function UK({defaultSize:e,dragState:t,layout:n,panelData:r,panelIndex:s,precision:i=3}){const o=n[s];let l;return o==null?l=e!=null?e.toPrecision(i):"1":r.length===1?l="1":l=o.toPrecision(i),{flexBasis:0,flexGrow:l,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function $K(e,t=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...s)},t)}}function _A(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function qO(e){return`react-resizable-panels:${e}`}function ZO(e){return e.map(t=>{const{constraints:n,id:r,idIsFromProps:s,order:i}=t;return s?r:i?`${i}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function QO(e,t){try{const n=qO(e),r=t.getItem(n);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function WK(e,t,n){var r,s;const i=(r=QO(e,n))!==null&&r!==void 0?r:{},o=ZO(t);return(s=i[o])!==null&&s!==void 0?s:null}function GK(e,t,n,r,s){var i;const o=qO(e),l=ZO(t),c=(i=QO(e,s))!==null&&i!==void 0?i:{};c[l]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{s.setItem(o,JSON.stringify(c))}catch(d){console.error(d)}}function OA({layout:e,panelConstraints:t}){const n=[...e],r=n.reduce((i,o)=>i+o,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(i=>`${i}%`).join(", ")}`);if(!ks(r,100)&&n.length>0)for(let i=0;i<t.length;i++){const o=n[i];bt(o!=null,`No layout data found for index ${i}`);const l=100/r*o;n[i]=l}let s=0;for(let i=0;i<t.length;i++){const o=n[i];bt(o!=null,`No layout data found for index ${i}`);const l=ku({panelConstraints:t,panelIndex:i,size:o});o!=l&&(s+=o-l,n[i]=l)}if(!ks(s,0))for(let i=0;i<t.length;i++){const o=n[i];bt(o!=null,`No layout data found for index ${i}`);const l=o+s,c=ku({panelConstraints:t,panelIndex:i,size:l});if(o!==c&&(s-=c-o,n[i]=c,ks(s,0)))break}return n}const XK=100,Ef={getItem:e=>(_A(Ef),Ef.getItem(e)),setItem:(e,t)=>{_A(Ef),Ef.setItem(e,t)}},PA={};function JO({autoSaveId:e=null,children:t,className:n="",direction:r,forwardedRef:s,id:i=null,onLayout:o=null,keyboardResizeBy:l=null,storage:c=Ef,style:d,tagName:h="div",...g}){const y=BC(i),w=N.useRef(null),[S,C]=N.useState(null),[A,E]=N.useState([]),k=DK(),I=N.useRef({}),M=N.useRef(new Map),P=N.useRef(0),j=N.useRef({autoSaveId:e,direction:r,dragState:S,id:y,keyboardResizeBy:l,onLayout:o,storage:c}),_=N.useRef({layout:A,panelDataArray:[],panelDataArrayChanged:!1});N.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),N.useImperativeHandle(s,()=>({getId:()=>j.current.id,getLayout:()=>{const{layout:G}=_.current;return G},setLayout:G=>{const{onLayout:Q}=j.current,{layout:te,panelDataArray:ne}=_.current,ie=OA({layout:G,panelConstraints:ne.map(de=>de.constraints)});MA(te,ie)||(E(ie),_.current.layout=ie,Q&&Q(ie),su(ne,ie,I.current))}}),[]),uc(()=>{j.current.autoSaveId=e,j.current.direction=r,j.current.dragState=S,j.current.id=y,j.current.onLayout=o,j.current.storage=c}),FK({committedValuesRef:j,eagerValuesRef:_,groupId:y,layout:A,panelDataArray:_.current.panelDataArray,setLayout:E,panelGroupElement:w.current}),N.useEffect(()=>{const{panelDataArray:G}=_.current;if(e){if(A.length===0||A.length!==G.length)return;let Q=PA[e];Q==null&&(Q=$K(GK,XK),PA[e]=Q);const te=[...G],ne=new Map(M.current);Q(e,te,ne,A,c)}},[e,A,c]),N.useEffect(()=>{});const D=N.useCallback(G=>{const{onLayout:Q}=j.current,{layout:te,panelDataArray:ne}=_.current;if(G.constraints.collapsible){const ie=ne.map(Se=>Se.constraints),{collapsedSize:de=0,panelSize:pe,pivotIndices:ye}=Ml(ne,G,te);if(bt(pe!=null,`Panel size not found for panel "${G.id}"`),!Fo(pe,de)){M.current.set(G.id,pe);const De=du(ne,G)===ne.length-1?pe-de:de-pe,xe=Sf({delta:De,initialLayout:te,panelConstraints:ie,pivotIndices:ye,prevLayout:te,trigger:"imperative-api"});o0(te,xe)||(E(xe),_.current.layout=xe,Q&&Q(xe),su(ne,xe,I.current))}}},[]),L=N.useCallback((G,Q)=>{const{onLayout:te}=j.current,{layout:ne,panelDataArray:ie}=_.current;if(G.constraints.collapsible){const de=ie.map(Ue=>Ue.constraints),{collapsedSize:pe=0,panelSize:ye=0,minSize:Se=0,pivotIndices:De}=Ml(ie,G,ne),xe=Q??Se;if(Fo(ye,pe)){const Ue=M.current.get(G.id),nt=Ue!=null&&Ue>=xe?Ue:xe,je=du(ie,G)===ie.length-1?ye-nt:nt-ye,be=Sf({delta:je,initialLayout:ne,panelConstraints:de,pivotIndices:De,prevLayout:ne,trigger:"imperative-api"});o0(ne,be)||(E(be),_.current.layout=be,te&&te(be),su(ie,be,I.current))}}},[]),U=N.useCallback(G=>{const{layout:Q,panelDataArray:te}=_.current,{panelSize:ne}=Ml(te,G,Q);return bt(ne!=null,`Panel size not found for panel "${G.id}"`),ne},[]),K=N.useCallback((G,Q)=>{const{panelDataArray:te}=_.current,ne=du(te,G);return UK({defaultSize:Q,dragState:S,layout:A,panelData:te,panelIndex:ne})},[S,A]),q=N.useCallback(G=>{const{layout:Q,panelDataArray:te}=_.current,{collapsedSize:ne=0,collapsible:ie,panelSize:de}=Ml(te,G,Q);return bt(de!=null,`Panel size not found for panel "${G.id}"`),ie===!0&&Fo(de,ne)},[]),re=N.useCallback(G=>{const{layout:Q,panelDataArray:te}=_.current,{collapsedSize:ne=0,collapsible:ie,panelSize:de}=Ml(te,G,Q);return bt(de!=null,`Panel size not found for panel "${G.id}"`),!ie||Rc(de,ne)>0},[]),z=N.useCallback(G=>{const{panelDataArray:Q}=_.current;Q.push(G),Q.sort((te,ne)=>{const ie=te.order,de=ne.order;return ie==null&&de==null?0:ie==null?-1:de==null?1:ie-de}),_.current.panelDataArrayChanged=!0,k()},[k]);uc(()=>{if(_.current.panelDataArrayChanged){_.current.panelDataArrayChanged=!1;const{autoSaveId:G,onLayout:Q,storage:te}=j.current,{layout:ne,panelDataArray:ie}=_.current;let de=null;if(G){const ye=WK(G,ie,te);ye&&(M.current=new Map(Object.entries(ye.expandToSizes)),de=ye.layout)}de==null&&(de=HK({panelDataArray:ie}));const pe=OA({layout:de,panelConstraints:ie.map(ye=>ye.constraints)});MA(ne,pe)||(E(pe),_.current.layout=pe,Q&&Q(pe),su(ie,pe,I.current))}}),uc(()=>{const G=_.current;return()=>{G.layout=[]}},[]);const H=N.useCallback(G=>{let Q=!1;const te=w.current;return te&&window.getComputedStyle(te,null).getPropertyValue("direction")==="rtl"&&(Q=!0),function(ie){ie.preventDefault();const de=w.current;if(!de)return()=>null;const{direction:pe,dragState:ye,id:Se,keyboardResizeBy:De,onLayout:xe}=j.current,{layout:Ue,panelDataArray:nt}=_.current,{initialLayout:et}=ye??{},je=XO(Se,G,de);let be=VK(ie,G,pe,ye,De,de);const $e=pe==="horizontal";$e&&Q&&(be=-be);const qt=nt.map(Ee=>Ee.constraints),Te=Sf({delta:be,initialLayout:et??Ue,panelConstraints:qt,pivotIndices:je,prevLayout:Ue,trigger:LO(ie)?"keyboard":"mouse-or-touch"}),Ce=!o0(Ue,Te);(BO(ie)||FO(ie))&&P.current!=be&&(P.current=be,!Ce&&be!==0?$e?Oy(G,be<0?VO:HO):Oy(G,be<0?UO:$O):Oy(G,0)),Ce&&(E(Te),_.current.layout=Te,xe&&xe(Te),su(nt,Te,I.current))}},[]),Y=N.useCallback((G,Q)=>{const{onLayout:te}=j.current,{layout:ne,panelDataArray:ie}=_.current,de=ie.map(Ue=>Ue.constraints),{panelSize:pe,pivotIndices:ye}=Ml(ie,G,ne);bt(pe!=null,`Panel size not found for panel "${G.id}"`);const De=du(ie,G)===ie.length-1?pe-Q:Q-pe,xe=Sf({delta:De,initialLayout:ne,panelConstraints:de,pivotIndices:ye,prevLayout:ne,trigger:"imperative-api"});o0(ne,xe)||(E(xe),_.current.layout=xe,te&&te(xe),su(ie,xe,I.current))},[]),X=N.useCallback((G,Q)=>{const{layout:te,panelDataArray:ne}=_.current,{collapsedSize:ie=0,collapsible:de}=Q,{collapsedSize:pe=0,collapsible:ye,maxSize:Se=100,minSize:De=0}=G.constraints,{panelSize:xe}=Ml(ne,G,te);xe!=null&&(de&&ye&&Fo(xe,ie)?Fo(ie,pe)||Y(G,pe):xe<De?Y(G,De):xe>Se&&Y(G,Se))},[Y]),W=N.useCallback((G,Q)=>{const{direction:te}=j.current,{layout:ne}=_.current;if(!w.current)return;const ie=tx(G,w.current);bt(ie,`Drag handle element not found for id "${G}"`);const de=YO(te,Q);C({dragHandleId:G,dragHandleRect:ie.getBoundingClientRect(),initialCursorPosition:de,initialLayout:ne})},[]),V=N.useCallback(()=>{C(null)},[]),ee=N.useCallback(G=>{const{panelDataArray:Q}=_.current,te=du(Q,G);te>=0&&(Q.splice(te,1),delete I.current[G.id],_.current.panelDataArrayChanged=!0,k())},[k]),ae=N.useMemo(()=>({collapsePanel:D,direction:r,dragState:S,expandPanel:L,getPanelSize:U,getPanelStyle:K,groupId:y,isPanelCollapsed:q,isPanelExpanded:re,reevaluatePanelConstraints:X,registerPanel:z,registerResizeHandle:H,resizePanel:Y,startDragging:W,stopDragging:V,unregisterPanel:ee,panelGroupElement:w.current}),[D,S,r,L,U,K,y,q,re,X,z,H,Y,W,V,ee]),se={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return N.createElement(Qg.Provider,{value:ae},N.createElement(h,{...g,children:t,className:n,id:i,ref:w,style:{...se,...d},[Ln.group]:"",[Ln.groupDirection]:r,[Ln.groupId]:y}))}const eP=N.forwardRef((e,t)=>N.createElement(JO,{...e,forwardedRef:t}));JO.displayName="PanelGroup";eP.displayName="forwardRef(PanelGroup)";function du(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function Ml(e,t,n){const r=du(e,t),i=r===e.length-1?[r-1,r]:[r,r+1],o=n[r];return{...t.constraints,panelSize:o,pivotIndices:i}}function KK({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:r}){N.useEffect(()=>{if(e||n==null||r==null)return;const s=tx(t,r);if(s==null)return;const i=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const l=s.getAttribute(Ln.groupId);bt(l,`No group element found for id "${l}"`);const c=Ih(l,r),d=GO(l,t,r);bt(d!==null,`No resize element found for id "${t}"`);const h=o.shiftKey?d>0?d-1:c.length-1:d+1<c.length?d+1:0;c[h].focus();break}}};return s.addEventListener("keydown",i),()=>{s.removeEventListener("keydown",i)}},[r,e,t,n])}function tP({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:r,id:s,onBlur:i,onClick:o,onDragging:l,onFocus:c,onPointerDown:d,onPointerUp:h,style:g={},tabIndex:y=0,tagName:w="div",...S}){var C,A;const E=N.useRef(null),k=N.useRef({onClick:o,onDragging:l,onPointerDown:d,onPointerUp:h});N.useEffect(()=>{k.current.onClick=o,k.current.onDragging=l,k.current.onPointerDown=d,k.current.onPointerUp=h});const I=N.useContext(Qg);if(I===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:M,groupId:P,registerResizeHandle:j,startDragging:_,stopDragging:D,panelGroupElement:L}=I,U=BC(s),[K,q]=N.useState("inactive"),[re,z]=N.useState(!1),[H,Y]=N.useState(null),X=N.useRef({state:K});uc(()=>{X.current.state=K}),N.useEffect(()=>{if(n)Y(null);else{const ae=j(U);Y(()=>ae)}},[n,U,j]);const W=(C=r==null?void 0:r.coarse)!==null&&C!==void 0?C:15,V=(A=r==null?void 0:r.fine)!==null&&A!==void 0?A:5;N.useEffect(()=>{if(n||H==null)return;const ae=E.current;bt(ae,"Element ref not attached");let se=!1;return OK(U,ae,M,{coarse:W,fine:V},(Q,te,ne)=>{if(!te){q("inactive");return}switch(Q){case"down":{q("drag"),se=!1,bt(ne,'Expected event to be defined for "down" action'),_(U,ne);const{onDragging:ie,onPointerDown:de}=k.current;ie==null||ie(!0),de==null||de();break}case"move":{const{state:ie}=X.current;se=!0,ie!=="drag"&&q("hover"),bt(ne,'Expected event to be defined for "move" action'),H(ne);break}case"up":{q("hover"),D();const{onClick:ie,onDragging:de,onPointerUp:pe}=k.current;de==null||de(!1),pe==null||pe(),se||ie==null||ie();break}}})},[W,M,n,V,j,U,H,_,D]),KK({disabled:n,handleId:U,resizeHandler:H,panelGroupElement:L});const ee={touchAction:"none",userSelect:"none"};return N.createElement(w,{...S,children:e,className:t,id:s,onBlur:()=>{z(!1),i==null||i()},onFocus:()=>{z(!0),c==null||c()},ref:E,role:"separator",style:{...ee,...g},tabIndex:y,[Ln.groupDirection]:M,[Ln.groupId]:P,[Ln.resizeHandle]:"",[Ln.resizeHandleActive]:K==="drag"?"pointer":re?"keyboard":void 0,[Ln.resizeHandleEnabled]:!n,[Ln.resizeHandleId]:U,[Ln.resizeHandleState]:K})}tP.displayName="PanelResizeHandle";const YK=({className:e,...t})=>p.jsx(eP,{className:Xe("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",e),...t}),DA=jO,qK=({withHandle:e,className:t,...n})=>p.jsx(tP,{className:Xe("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...n,children:e&&p.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:p.jsx(mv,{className:"h-2.5 w-2.5"})})}),ZK=[{id:"meta",label:"Story Info",icon:tR},{id:"preset",label:"Presets",icon:iR},{id:"player",label:"Player Setup",icon:Ja},{id:"sections",label:"Sections",icon:oB},{id:"pages",label:"Pages",icon:eR},{id:"items",label:"Items",icon:xv},{id:"enemies",label:"Enemies",icon:dg}],QK=({selectedSection:e,onSelectSection:t,gamebookData:n,selectedPageId:r,onSelectPage:s,onAddPage:i,errors:o})=>{const[l,c]=N.useState(""),d=y=>o.filter(w=>w.pageId===String(y)),h=n.pages||[],g=h.filter(y=>{var S;return l?String(y.id).toLowerCase().includes(l.toLowerCase())||((S=y.text)==null?void 0:S.toLowerCase().includes(l.toLowerCase())):!0});return p.jsxs("div",{className:"w-64 border-r bg-card flex flex-col",children:[p.jsxs("div",{className:"p-3 border-b",children:[p.jsx("h2",{className:"font-semibold text-sm text-muted-foreground mb-3",children:"SECTIONS"}),p.jsx("div",{className:"space-y-1",children:ZK.map(y=>{const w=y.icon,C=o.filter(A=>A.section===y.id).length>0;return p.jsxs(Ne,{variant:e===y.id?"secondary":"ghost",className:Xe("w-full justify-start text-sm",C&&"text-destructive"),onClick:()=>t(y.id),children:[p.jsx(w,{className:"h-4 w-4 mr-2"}),y.label,C&&p.jsx(Nc,{className:"h-3 w-3 ml-auto"})]},y.id)})})]}),e==="pages"&&p.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[p.jsx("div",{className:"p-3 border-b space-y-2",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"relative flex-1",children:[p.jsx(kB,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),p.jsx(at,{placeholder:"Search pages...",value:l,onChange:y=>c(y.target.value),className:"pl-8 h-8"})]}),i&&p.jsx(Ne,{size:"sm",variant:"default",className:"h-8 w-8 p-0",onClick:()=>i(),title:"Add new page",children:p.jsx(Os,{className:"h-4 w-4"})})]})}),p.jsx(nc,{className:"flex-1",children:p.jsx("div",{className:"p-2 space-y-1",children:g.map(y=>{var E;const w=String(y.id),C=d(y.id).length>0,A=((E=h[0])==null?void 0:E.id)===y.id;return p.jsxs("div",{className:Xe("px-2 py-1.5 rounded cursor-pointer text-sm transition-colors",r===y.id?"bg-secondary":"hover:bg-muted/50",C&&"border border-destructive"),onClick:()=>s(y.id),children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"font-mono text-xs truncate flex-1",children:w}),A&&p.jsx("span",{className:"text-[10px] bg-primary/20 text-primary px-1 rounded",children:"START"}),C&&p.jsx(Nc,{className:"h-3 w-3 text-destructive flex-shrink-0"})]}),y.text&&p.jsxs("p",{className:"text-xs text-muted-foreground truncate mt-0.5",children:[y.text.replace(/<[^>]+>/g,"").substring(0,50),"..."]})]},w)})})})]}),e==="items"&&p.jsx(nc,{className:"flex-1",children:p.jsx("div",{className:"p-2 space-y-1",children:(n.items||[]).map(y=>p.jsxs("div",{className:"px-2 py-1.5 rounded hover:bg-muted/50 cursor-pointer text-sm",children:[p.jsx("span",{className:"font-mono text-xs",children:y.id}),p.jsx("p",{className:"text-xs text-muted-foreground truncate",children:y.name})]},y.id))})}),e==="enemies"&&p.jsx(nc,{className:"flex-1",children:p.jsx("div",{className:"p-2 space-y-1",children:(n.enemies||[]).map(y=>p.jsxs("div",{className:"px-2 py-1.5 rounded hover:bg-muted/50 cursor-pointer text-sm",children:[p.jsx("span",{className:"font-mono text-xs",children:y.id}),p.jsx("p",{className:"text-xs text-muted-foreground truncate",children:y.name})]},y.id))})})]})},JK=({meta:e,onUpdate:t,errors:n})=>{const r=i=>n.find(o=>o.field===i),s=()=>{t({storyId:PO()})};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Story Information"}),p.jsx("p",{className:"text-muted-foreground",children:"Basic metadata about your story"})]}),p.jsxs(Tt,{children:[p.jsxs(Wt,{children:[p.jsx(Kt,{children:"Metadata"}),p.jsx(Fn,{children:"Information that identifies your story"})]}),p.jsxs(Dt,{className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs(Fe,{htmlFor:"title",children:["Title ",p.jsx("span",{className:"text-destructive",children:"*"})]}),p.jsx(at,{id:"title",value:(e==null?void 0:e.title)||"",onChange:i=>t({title:i.target.value}),placeholder:"Enter story title",className:r("title")?"border-destructive":""}),r("title")&&p.jsx("p",{className:"text-sm text-destructive",children:r("title").message})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{htmlFor:"author",children:"Author"}),p.jsx(at,{id:"author",value:(e==null?void 0:e.author)||"",onChange:i=>t({author:i.target.value}),placeholder:"Enter author name"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{htmlFor:"version",children:"Version"}),p.jsx(at,{id:"version",value:(e==null?void 0:e.version)||"",onChange:i=>t({version:i.target.value}),placeholder:"1.0"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs(Fe,{htmlFor:"storyId",children:["Story ID",r("storyId")&&p.jsx("span",{className:"text-yellow-600 ml-2",children:"(Recommended)"})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(at,{id:"storyId",value:(e==null?void 0:e.storyId)||"",onChange:i=>t({storyId:i.target.value}),placeholder:"UUID for save isolation",className:r("storyId")?"border-yellow-600":"",readOnly:!0}),p.jsx(Ne,{type:"button",variant:"outline",onClick:s,className:"flex-shrink-0",children:p.jsx(TB,{className:"h-4 w-4"})})]}),r("storyId")&&p.jsx("p",{className:"text-sm text-yellow-600",children:r("storyId").message}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Story ID ensures saves from different stories don't conflict"})]})]})]})]})};var nx="Checkbox",[eY,Xce]=cs(nx),[tY,VC]=eY(nx);function nY(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:l,onCheckedChange:c,required:d,value:h="on",internal_do_not_use_render:g}=e,[y,w]=li({prop:n,defaultProp:s??!1,onChange:c,caller:nx}),[S,C]=N.useState(null),[A,E]=N.useState(null),k=N.useRef(!1),I=S?!!o||!!S.closest("form"):!0,M={checked:y,disabled:i,setChecked:w,control:S,setControl:C,name:l,form:o,value:h,hasConsumerStoppedPropagationRef:k,required:d,defaultChecked:el(s)?!1:s,isFormControl:I,bubbleInput:A,setBubbleInput:E};return p.jsx(tY,{scope:t,...M,children:rY(g)?g(M):r})}var nP="CheckboxTrigger",rP=N.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:i,value:o,disabled:l,checked:c,required:d,setControl:h,setChecked:g,hasConsumerStoppedPropagationRef:y,isFormControl:w,bubbleInput:S}=VC(nP,e),C=dt(s,h),A=N.useRef(c);return N.useEffect(()=>{const E=i==null?void 0:i.form;if(E){const k=()=>g(A.current);return E.addEventListener("reset",k),()=>E.removeEventListener("reset",k)}},[i,g]),p.jsx(Ye.button,{type:"button",role:"checkbox","aria-checked":el(c)?"mixed":c,"aria-required":d,"data-state":lP(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:C,onKeyDown:ze(t,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:ze(n,E=>{g(k=>el(k)?!0:!k),S&&w&&(y.current=E.isPropagationStopped(),y.current||E.stopPropagation())})})});rP.displayName=nP;var HC=N.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:d,form:h,...g}=e;return p.jsx(nY,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:l,required:o,onCheckedChange:d,name:r,form:h,value:c,internal_do_not_use_render:({isFormControl:y})=>p.jsxs(p.Fragment,{children:[p.jsx(rP,{...g,ref:t,__scopeCheckbox:n}),y&&p.jsx(aP,{__scopeCheckbox:n})]})})});HC.displayName=nx;var sP="CheckboxIndicator",iP=N.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,i=VC(sP,n);return p.jsx(us,{present:r||el(i.checked)||i.checked===!0,children:p.jsx(Ye.span,{"data-state":lP(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});iP.displayName=sP;var oP="CheckboxBubbleInput",aP=N.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:l,disabled:c,name:d,value:h,form:g,bubbleInput:y,setBubbleInput:w}=VC(oP,e),S=dt(n,w),C=Wg(i),A=xg(r);N.useEffect(()=>{const k=y;if(!k)return;const I=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(I,"checked").set,j=!s.current;if(C!==i&&P){const _=new Event("click",{bubbles:j});k.indeterminate=el(i),P.call(k,el(i)?!1:i),k.dispatchEvent(_)}},[y,C,i,s]);const E=N.useRef(el(i)?!1:i);return p.jsx(Ye.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??E.current,required:l,disabled:c,name:d,value:h,form:g,...t,tabIndex:-1,ref:S,style:{...t.style,...A,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});aP.displayName=oP;function rY(e){return typeof e=="function"}function el(e){return e==="indeterminate"}function lP(e){return el(e)?"indeterminate":e?"checked":"unchecked"}const Yv=N.forwardRef(({className:e,...t},n)=>p.jsx(HC,{ref:n,className:Xe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:p.jsx(iP,{className:Xe("flex items-center justify-center text-current"),children:p.jsx(ug,{className:"h-4 w-4"})})}));Yv.displayName=HC.displayName;const sY=({player:e,presets:t,items:n,onUpdate:r,errors:s})=>{var g;const i=e||{},o=Object.keys(t.stats||{}),l=t.profiles||[],c=y=>{r({...i,...y})},d=y=>{const w=i.useStats||[];w.includes(y)?c({useStats:w.filter(S=>S!==y)}):c({useStats:[...w,y]})},h=y=>{const w=i.startingItems||[];w.includes(y)?c({startingItems:w.filter(S=>S!==y)}):c({startingItems:[...w,y]})};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Player Setup"}),p.jsx("p",{className:"text-muted-foreground",children:"Configure how players create their characters and what they start with."})]}),p.jsxs(Tt,{children:[p.jsxs(Wt,{children:[p.jsx(Kt,{children:"Character Creation"}),p.jsx(Fn,{children:"Choose how players will create their characters at the start of the story."})]}),p.jsxs(Dt,{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(Fe,{htmlFor:"creation-mode",className:"mb-2 block",children:"Creation Mode"}),p.jsxs(Wr,{value:i.creationMode||"both",onValueChange:y=>c({creationMode:y}),children:[p.jsx(Tr,{id:"creation-mode",children:p.jsx(Gr,{})}),p.jsxs(kr,{children:[p.jsx(Vt,{value:"sliders",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(mN,{className:"h-4 w-4"}),p.jsx("span",{children:"Sliders Only - Players assign stats manually"})]})}),p.jsx(Vt,{value:"profiles",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Ja,{className:"h-4 w-4"}),p.jsx("span",{children:"Profiles Only - Players choose from presets"})]})}),p.jsx(Vt,{value:"both",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Ja,{className:"h-4 w-4"}),p.jsx(mN,{className:"h-4 w-4"}),p.jsx("span",{children:"Both - Players can choose or customize"})]})})]})]})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(so,{id:"allow-name",checked:i.allowCustomName!==!1,onCheckedChange:y=>c({allowCustomName:y})}),p.jsx(Fe,{htmlFor:"allow-name",className:"cursor-pointer",children:"Allow players to name their character"})]}),i.creationMode==="sliders"||i.creationMode==="both"?p.jsxs("div",{children:[p.jsx(Fe,{htmlFor:"stat-points",className:"mb-2 block",children:"Total Stat Points (Optional)"}),p.jsx(at,{id:"stat-points",type:"number",value:i.totalStatPoints||"",onChange:y=>c({totalStatPoints:parseInt(y.target.value)||void 0}),placeholder:"Leave empty for no limit"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"If set, players must distribute this many points across all stats."})]}):null,l.length===0&&(i.creationMode==="profiles"||i.creationMode==="both")&&p.jsxs("div",{className:"flex items-start gap-2 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:[p.jsx(pN,{className:"h-5 w-5 text-yellow-500 mt-0.5 flex-shrink-0"}),p.jsxs("div",{className:"text-sm",children:[p.jsx("p",{className:"font-medium text-yellow-700 dark:text-yellow-400",children:"No profiles defined"}),p.jsx("p",{className:"text-muted-foreground",children:"Go to the Presets tab and create character profiles for players to choose from."})]})]})]})]}),p.jsxs(Tt,{children:[p.jsxs(Wt,{children:[p.jsx(Kt,{children:"Stats to Use"}),p.jsx(Fn,{children:"Select which stats from presets will be available for characters."})]}),p.jsx(Dt,{className:"space-y-3",children:o.length>0?p.jsx(p.Fragment,{children:o.map(y=>{var C;const w=(C=t.stats)==null?void 0:C[y];if(!w)return null;const S=(i.useStats||[]).includes(y);return p.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[p.jsx(Yv,{id:`stat-${y}`,checked:S,onCheckedChange:()=>d(y),className:"mt-1"}),p.jsxs("div",{className:"flex-1",children:[p.jsx(Fe,{htmlFor:`stat-${y}`,className:"cursor-pointer font-semibold",children:w.name}),p.jsx("p",{className:"text-xs text-muted-foreground",children:w.description||`Range: ${w.min}-${w.max}, Default: ${w.default}`}),p.jsxs("div",{className:"flex gap-2 mt-1",children:[p.jsxs(wn,{variant:"outline",className:"text-xs",children:["Min: ",w.min]}),p.jsxs(wn,{variant:"outline",className:"text-xs",children:["Max: ",w.max]}),p.jsxs(wn,{variant:"secondary",className:"text-xs",children:["Default: ",w.default]})]})]})]},y)})}):p.jsxs("div",{className:"flex items-start gap-2 p-3 bg-muted rounded-lg",children:[p.jsx(pN,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0"}),p.jsxs("div",{className:"text-sm text-muted-foreground",children:[p.jsx("p",{className:"font-medium",children:"No stats defined"}),p.jsx("p",{children:"Go to the Presets tab and create stats for your characters."})]})]})})]}),p.jsxs(Tt,{children:[p.jsxs(Wt,{children:[p.jsx(Kt,{children:"Starting Items (Default)"}),p.jsx(Fn,{children:"Items all players start with (unless using a profile with different items)."})]}),p.jsx(Dt,{className:"space-y-3",children:n.length>0?p.jsx(p.Fragment,{children:n.map(y=>{const w=(i.startingItems||[]).includes(y.id);return p.jsxs("div",{className:"flex items-center space-x-3 p-2 border rounded",children:[p.jsx(Yv,{id:`item-${y.id}`,checked:w,onCheckedChange:()=>h(y.id)}),p.jsxs(Fe,{htmlFor:`item-${y.id}`,className:"flex-1 cursor-pointer",children:[y.name,p.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(",y.id,")"]})]})]},y.id)})}):p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No items available. Create items in the Items tab."})})]}),l.length>0&&p.jsxs(Tt,{children:[p.jsxs(Wt,{children:[p.jsx(Kt,{children:"Default Profile (Optional)"}),p.jsx(Fn,{children:"Profile to use if character creation is skipped or disabled."})]}),p.jsx(Dt,{children:p.jsxs(Wr,{value:i.defaultProfile||"_none",onValueChange:y=>c({defaultProfile:y==="_none"?void 0:y}),children:[p.jsx(Tr,{children:p.jsx(Gr,{placeholder:"No default profile"})}),p.jsxs(kr,{children:[p.jsx(Vt,{value:"_none",children:"No default profile"}),l.map(y=>p.jsx(Vt,{value:y.id,children:y.name},y.id))]})]})})]}),p.jsxs(Tt,{className:"bg-muted/30",children:[p.jsx(Wt,{children:p.jsx(Kt,{className:"text-base",children:"Configuration Summary"})}),p.jsxs(Dt,{className:"space-y-2 text-sm",children:[p.jsxs("div",{children:[p.jsx("strong",{children:"Creation Mode:"})," ",i.creationMode==="sliders"?"Sliders (Manual)":i.creationMode==="profiles"?"Profiles (Presets)":"Both (Player Choice)"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Custom Names:"})," ",i.allowCustomName!==!1?"Allowed":"Disabled"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Stats Available:"})," ",(i.useStats||[]).length," selected"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Starting Items:"})," ",(i.startingItems||[]).length," items"]}),i.defaultProfile&&p.jsxs("div",{children:[p.jsx("strong",{children:"Default Profile:"})," ",((g=l.find(y=>y.id===i.defaultProfile))==null?void 0:g.name)||"Unknown"]})]})]}),s.length>0&&p.jsxs(Tt,{className:"border-destructive",children:[p.jsx(Wt,{children:p.jsx(Kt,{className:"text-destructive",children:"Errors"})}),p.jsx(Dt,{children:p.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm",children:s.map((y,w)=>p.jsx("li",{className:"text-destructive",children:y.message},w))})})]})]})};var cP={exports:{}},uP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yd=N;function iY(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var oY=typeof Object.is=="function"?Object.is:iY,aY=yd.useState,lY=yd.useEffect,cY=yd.useLayoutEffect,uY=yd.useDebugValue;function dY(e,t){var n=t(),r=aY({inst:{value:n,getSnapshot:t}}),s=r[0].inst,i=r[1];return cY(function(){s.value=n,s.getSnapshot=t,Dy(s)&&i({inst:s})},[e,n,t]),lY(function(){return Dy(s)&&i({inst:s}),e(function(){Dy(s)&&i({inst:s})})},[e]),uY(n),n}function Dy(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oY(e,n)}catch{return!0}}function fY(e,t){return t()}var hY=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?fY:dY;uP.useSyncExternalStore=yd.useSyncExternalStore!==void 0?yd.useSyncExternalStore:hY;cP.exports=uP;var UC=cP.exports;function Ar(e){this.content=e}Ar.prototype={constructor:Ar,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,s=r.find(e),i=r.content.slice();return s==-1?i.push(n||e,t):(i[s+1]=t,n&&(i[s]=n)),new Ar(i)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new Ar(n)},addToStart:function(e,t){return new Ar([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Ar(n)},addBefore:function(e,t,n){var r=this.remove(t),s=r.content.slice(),i=r.find(e);return s.splice(i==-1?s.length:i,0,t,n),new Ar(s)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Ar.from(e),e.size?new Ar(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Ar.from(e),e.size?new Ar(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Ar.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};Ar.from=function(e){if(e instanceof Ar)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Ar(t)};function dP(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let s=e.child(r),i=t.child(r);if(s==i){n+=s.nodeSize;continue}if(!s.sameMarkup(i))return n;if(s.isText&&s.text!=i.text){for(let o=0;s.text[o]==i.text[o];o++)n++;return n}if(s.content.size||i.content.size){let o=dP(s.content,i.content,n+1);if(o!=null)return o}n+=s.nodeSize}}function fP(e,t,n,r){for(let s=e.childCount,i=t.childCount;;){if(s==0||i==0)return s==i?null:{a:n,b:r};let o=e.child(--s),l=t.child(--i),c=o.nodeSize;if(o==l){n-=c,r-=c;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let d=0,h=Math.min(o.text.length,l.text.length);for(;d<h&&o.text[o.text.length-d-1]==l.text[l.text.length-d-1];)d++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let d=fP(o.content,l.content,n-1,r-1);if(d)return d}n-=c,r-=c}}class Ae{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,s=0,i){for(let o=0,l=0;l<n;o++){let c=this.content[o],d=l+c.nodeSize;if(d>t&&r(c,s+l,i||null,o)!==!1&&c.content.size){let h=l+1;c.nodesBetween(Math.max(0,t-h),Math.min(c.content.size,n-h),r,s+h)}l=d}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,s){let i="",o=!0;return this.nodesBetween(t,n,(l,c)=>{let d=l.isText?l.text.slice(Math.max(t,c)-c,n-c):l.isLeaf?s?typeof s=="function"?s(l):s:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&d||l.isTextblock)&&r&&(o?o=!1:i+=r),i+=d},0),i}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,s=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),i=1);i<t.content.length;i++)s.push(t.content[i]);return new Ae(s,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],s=0;if(n>t)for(let i=0,o=0;o<n;i++){let l=this.content[i],c=o+l.nodeSize;c>t&&((o<t||c>n)&&(l.isText?l=l.cut(Math.max(0,t-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,t-o-1),Math.min(l.content.size,n-o-1))),r.push(l),s+=l.nodeSize),o=c}return new Ae(r,s)}cutByIndex(t,n){return t==n?Ae.empty:t==0&&n==this.content.length?this:new Ae(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let s=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return s[t]=n,new Ae(s,i)}addToStart(t){return new Ae([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new Ae(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];t(s,r,n),r+=s.nodeSize}}findDiffStart(t,n=0){return dP(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return fP(this,t,n,r)}findIndex(t){if(t==0)return a0(0,t);if(t==this.size)return a0(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let s=this.child(n),i=r+s.nodeSize;if(i>=t)return i==t?a0(n+1,i):a0(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return Ae.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ae(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return Ae.empty;let n,r=0;for(let s=0;s<t.length;s++){let i=t[s];r+=i.nodeSize,s&&i.isText&&t[s-1].sameMarkup(i)?(n||(n=t.slice(0,s)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new Ae(n||t,r)}static from(t){if(!t)return Ae.empty;if(t instanceof Ae)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new Ae([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ae.empty=new Ae([],0);const jy={index:0,offset:0};function a0(e,t){return jy.index=e,jy.offset=t,jy}function Gm(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!Gm(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!Gm(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let rn=class qv{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let s=0;s<t.length;s++){let i=t[s];if(this.eq(i))return t;if(this.type.excludes(i.type))n||(n=t.slice(0,s));else{if(i.type.excludes(this.type))return t;!r&&i.type.rank>this.type.rank&&(n||(n=t.slice(0,s)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Gm(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return qv.none;if(t instanceof qv)return[t];let n=t.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};rn.none=[];class Xm extends Error{}class He{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=pP(this.content,t+this.openStart,n);return r&&new He(r,this.openStart,this.openEnd)}removeBetween(t,n){return new He(hP(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return He.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new He(Ae.fromJSON(t,n.content),r,s)}static maxOpen(t,n=!0){let r=0,s=0;for(let i=t.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=t.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)s++;return new He(t,r,s)}}He.empty=new He(Ae.empty,0,0);function hP(e,t,n){let{index:r,offset:s}=e.findIndex(t),i=e.maybeChild(r),{index:o,offset:l}=e.findIndex(n);if(s==t||i.isText){if(l!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,i.copy(hP(i.content,t-s-1,n-s-1)))}function pP(e,t,n,r){let{index:s,offset:i}=e.findIndex(t),o=e.maybeChild(s);if(i==t||o.isText)return r&&!r.canReplace(s,s,n)?null:e.cut(0,t).append(n).append(e.cut(t));let l=pP(o.content,t-i-1,n,o);return l&&e.replaceChild(s,o.copy(l))}function pY(e,t,n){if(n.openStart>e.depth)throw new Xm("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Xm("Inconsistent open depths");return mP(e,t,n,0)}function mP(e,t,n,r){let s=e.index(r),i=e.node(r);if(s==t.index(r)&&r<e.depth-n.openStart){let o=mP(e,t,n,r+1);return i.copy(i.content.replaceChild(s,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let o=e.parent,l=o.content;return fc(o,l.cut(0,e.parentOffset).append(n.content).append(l.cut(t.parentOffset)))}else{let{start:o,end:l}=mY(n,e);return fc(i,xP(e,o,l,t,r))}else return fc(i,Km(e,t,r))}function gP(e,t){if(!t.type.compatibleContent(e.type))throw new Xm("Cannot join "+t.type.name+" onto "+e.type.name)}function Zv(e,t,n){let r=e.node(n);return gP(r,t.node(n)),r}function dc(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function $f(e,t,n,r){let s=(t||e).node(n),i=0,o=t?t.index(n):s.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(dc(e.nodeAfter,r),i++));for(let l=i;l<o;l++)dc(s.child(l),r);t&&t.depth==n&&t.textOffset&&dc(t.nodeBefore,r)}function fc(e,t){return e.type.checkContent(t),e.copy(t)}function xP(e,t,n,r,s){let i=e.depth>s&&Zv(e,t,s+1),o=r.depth>s&&Zv(n,r,s+1),l=[];return $f(null,e,s,l),i&&o&&t.index(s)==n.index(s)?(gP(i,o),dc(fc(i,xP(e,t,n,r,s+1)),l)):(i&&dc(fc(i,Km(e,t,s+1)),l),$f(t,n,s,l),o&&dc(fc(o,Km(n,r,s+1)),l)),$f(r,null,s,l),new Ae(l)}function Km(e,t,n){let r=[];if($f(null,e,n,r),e.depth>n){let s=Zv(e,t,n+1);dc(fc(s,Km(e,t,n+1)),r)}return $f(t,null,n,r),new Ae(r)}function mY(e,t){let n=t.depth-e.openStart,s=t.node(n).copy(e.content);for(let i=n-1;i>=0;i--)s=t.node(i).copy(Ae.from(s));return{start:s.resolveNoCache(e.openStart+n),end:s.resolveNoCache(s.content.size-e.openEnd-n)}}class Rh{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=t.child(n);return r?t.child(n).cut(r):s}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let i=0;i<t;i++)s+=r.child(i).nodeSize;return s}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return rn.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),s=t.maybeChild(n);if(!r){let l=r;r=s,s=l}let i=r.marks;for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!s||!i[o].isInSet(s.marks))&&(i=i[o--].removeFromSet(i));return i}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=t.parent.maybeChild(t.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!s||!r[i].isInSet(s.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new Ym(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,i=n;for(let o=t;;){let{index:l,offset:c}=o.content.findIndex(i),d=i-c;if(r.push(o,l,s+c),!d||(o=o.child(l),o.isText))break;i=d-1,s+=c+1}return new Rh(n,r,i)}static resolveCached(t,n){let r=jA.get(t);if(r)for(let i=0;i<r.elts.length;i++){let o=r.elts[i];if(o.pos==n)return o}else jA.set(t,r=new gY);let s=r.elts[r.i]=Rh.resolve(t,n);return r.i=(r.i+1)%xY,s}}class gY{constructor(){this.elts=[],this.i=0}}const xY=12,jA=new WeakMap;class Ym{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const yY=Object.create(null);let tl=class Qv{constructor(t,n,r,s=rn.none){this.type=t,this.attrs=n,this.marks=s,this.content=r||Ae.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,s=0){this.content.nodesBetween(t,n,r,s,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,s){return this.content.textBetween(t,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&Gm(this.attrs,n||t.defaultAttrs||yY)&&rn.sameSet(this.marks,r||rn.none)}copy(t=null){return t==this.content?this:new Qv(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new Qv(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return He.empty;let s=this.resolve(t),i=this.resolve(n),o=r?0:s.sharedDepth(n),l=s.start(o),d=s.node(o).content.cut(s.pos-l,i.pos-l);return new He(d,s.depth-o,i.depth-o)}replace(t,n,r){return pY(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(s==t||n.isText)return n;t-=s+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(t){return Rh.resolveCached(this,t)}resolveNoCache(t){return Rh.resolve(this,t)}rangeHasMark(t,n,r){let s=!1;return n>t&&this.nodesBetween(t,n,i=>(r.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),yP(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=Ae.empty,s=0,i=r.childCount){let o=this.contentMatchAt(t).matchFragment(r,s,i),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let c=s;c<i;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(t,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(t).matchType(r),o=i&&i.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=rn.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!rn.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let s=Ae.fromJSON(t,n.content),i=t.nodeType(n.type).create(n.attrs,s,r);return i.type.checkAttrs(i.attrs),i}};tl.prototype.text=void 0;class qm extends tl{constructor(t,n,r,s){if(super(t,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):yP(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new qm(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new qm(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function yP(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class Mc{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new wY(t,n);if(r.next==null)return Mc.empty;let s=wP(r);r.next&&r.err("Unexpected trailing text");let i=AY(NY(s));return TY(i,r),i}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let s=this;for(let i=n;s&&i<r;i++)s=s.matchType(t.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let s=[this];function i(o,l){let c=o.matchFragment(t,r);if(c&&(!n||c.validEnd))return Ae.from(l.map(d=>d.createAndFill()));for(let d=0;d<o.next.length;d++){let{type:h,next:g}=o.next[d];if(!(h.isText||h.hasRequiredAttrs())&&s.indexOf(g)==-1){s.push(g);let y=i(g,l.concat(h));if(y)return y}}return null}return i(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),i=s.match;if(i.matchType(t)){let o=[];for(let l=s;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<i.next.length;o++){let{type:l,next:c}=i.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!s.type||c.validEnd)&&(r.push({match:l.contentMatch,type:l,via:s}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let s=0;s<r.next.length;s++)t.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),t.map((r,s)=>{let i=s+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)i+=(o?", ":"")+r.next[o].type.name+"->"+t.indexOf(r.next[o].next);return i}).join(`
`)}}Mc.empty=new Mc(!0);class wY{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function wP(e){let t=[];do t.push(vY(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function vY(e){let t=[];do t.push(bY(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function bY(e){let t=EY(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=CY(e,t);else break;return t}function LA(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function CY(e,t){let n=LA(e),r=n;return e.eat(",")&&(e.next!="}"?r=LA(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function SY(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let s=[];for(let i in n){let o=n[i];o.isInGroup(t)&&s.push(o)}return s.length==0&&e.err("No node type or group '"+t+"' found"),s}function EY(e){if(e.eat("(")){let t=wP(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=SY(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function NY(e){let t=[[]];return s(i(e,0),n()),t;function n(){return t.push([])-1}function r(o,l,c){let d={term:c,to:l};return t[o].push(d),d}function s(o,l){o.forEach(c=>c.to=l)}function i(o,l){if(o.type=="choice")return o.exprs.reduce((c,d)=>c.concat(i(d,l)),[]);if(o.type=="seq")for(let c=0;;c++){let d=i(o.exprs[c],l);if(c==o.exprs.length-1)return d;s(d,l=n())}else if(o.type=="star"){let c=n();return r(l,c),s(i(o.expr,c),c),[r(c)]}else if(o.type=="plus"){let c=n();return s(i(o.expr,l),c),s(i(o.expr,c),c),[r(c)]}else{if(o.type=="opt")return[r(l)].concat(i(o.expr,l));if(o.type=="range"){let c=l;for(let d=0;d<o.min;d++){let h=n();s(i(o.expr,c),h),c=h}if(o.max==-1)s(i(o.expr,c),c);else for(let d=o.min;d<o.max;d++){let h=n();r(c,h),s(i(o.expr,c),h),c=h}return[r(c)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function vP(e,t){return t-e}function BA(e,t){let n=[];return r(t),n.sort(vP);function r(s){let i=e[s];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(s);for(let o=0;o<i.length;o++){let{term:l,to:c}=i[o];!l&&n.indexOf(c)==-1&&r(c)}}}function AY(e){let t=Object.create(null);return n(BA(e,0));function n(r){let s=[];r.forEach(o=>{e[o].forEach(({term:l,to:c})=>{if(!l)return;let d;for(let h=0;h<s.length;h++)s[h][0]==l&&(d=s[h][1]);BA(e,c).forEach(h=>{d||s.push([l,d=[]]),d.indexOf(h)==-1&&d.push(h)})})});let i=t[r.join(",")]=new Mc(r.indexOf(e.length-1)>-1);for(let o=0;o<s.length;o++){let l=s[o][1].sort(vP);i.next.push({type:s[o][0],next:t[l.join(",")]||n(l)})}return i}}function TY(e,t){for(let n=0,r=[e];n<r.length;n++){let s=r[n],i=!s.validEnd,o=[];for(let l=0;l<s.next.length;l++){let{type:c,next:d}=s.next[l];o.push(c.name),i&&!(c.isText||c.hasRequiredAttrs())&&(i=!1),r.indexOf(d)==-1&&r.push(d)}i&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function bP(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function CP(e,t){let n=Object.create(null);for(let r in e){let s=t&&t[r];if(s===void 0){let i=e[r];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function SP(e,t,n,r){for(let s in t)if(!(s in e))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in e){let i=e[s];i.validate&&i.validate(t[s])}}function EP(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new IY(e,r,t[r]);return n}let FA=class NP{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=EP(t,r.attrs),this.defaultAttrs=bP(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Mc.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:CP(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new tl(this,this.computeAttrs(t),Ae.from(n),rn.setFrom(r))}createChecked(t=null,n,r){return n=Ae.from(n),this.checkContent(n),new tl(this,this.computeAttrs(t),n,rn.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=Ae.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let s=this.contentMatch.matchFragment(n),i=s&&s.fillBefore(Ae.empty,!0);return i?new tl(this,t,n.append(i),rn.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){SP(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:rn.none:t}static compile(t,n){let r=Object.create(null);t.forEach((i,o)=>r[i]=new NP(i,n,o));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function kY(e,t,n){let r=n.split("|");return s=>{let i=s===null?"null":typeof s;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${i}`)}}class IY{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?kY(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class rx{constructor(t,n,r,s){this.name=t,this.rank=n,this.schema=r,this.spec=s,this.attrs=EP(t,s.attrs),this.excluded=null;let i=bP(this.attrs);this.instance=i?new rn(this,i):null}create(t=null){return!t&&this.instance?this.instance:new rn(this,CP(this.attrs,t))}static compile(t,n){let r=Object.create(null),s=0;return t.forEach((i,o)=>r[i]=new rx(i,s++,n,o)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){SP(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class AP{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in t)n[s]=t[s];n.nodes=Ar.from(t.nodes),n.marks=Ar.from(t.marks||{}),this.nodes=FA.compile(this.spec.nodes,this),this.marks=rx.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],o=i.spec.content||"",l=i.spec.marks;if(i.contentMatch=r[o]||(r[o]=Mc.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=l=="_"?null:l?zA(this,l.split(" ")):l==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:zA(this,o.split(" "))}this.nodeFromJSON=s=>tl.fromJSON(this,s),this.markFromJSON=s=>rn.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,s){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof FA){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,s)}text(t,n){let r=this.nodes.text;return new qm(r,r.defaultAttrs,t,rn.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function zA(e,t){let n=[];for(let r=0;r<t.length;r++){let s=t[r],i=e.marks[s],o=i;if(i)n.push(i);else for(let l in e.marks){let c=e.marks[l];(s=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(s)>-1)&&n.push(o=c)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function RY(e){return e.tag!=null}function MY(e){return e.style!=null}class nl{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(RY(s))this.tags.push(s);else if(MY(s)){let i=/[^=]*/.exec(s.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let i=t.nodes[s.node];return i.contentMatch.matchType(i)})}parse(t,n={}){let r=new HA(this,n,!1);return r.addAll(t,rn.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new HA(this,n,!0);return r.addAll(t,rn.none,n.from,n.to),He.maxOpen(r.finish())}matchTag(t,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(PY(t,i.tag)&&(i.namespace===void 0||t.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let o=i.getAttrs(t);if(o===!1)continue;i.attrs=o||void 0}return i}}}matchStyle(t,n,r,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let o=this.styles[i],l=o.style;if(!(l.indexOf(t)!=0||o.context&&!r.matchesContext(o.context)||l.length>t.length&&(l.charCodeAt(t.length)!=61||l.slice(t.length+1)!=n))){if(o.getAttrs){let c=o.getAttrs(n);if(c===!1)continue;o.attrs=c||void 0}return o}}}static schemaRules(t){let n=[];function r(s){let i=s.priority==null?50:s.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<i)break}n.splice(o,0,s)}for(let s in t.marks){let i=t.marks[s].spec.parseDOM;i&&i.forEach(o=>{r(o=UA(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in t.nodes){let i=t.nodes[s].spec.parseDOM;i&&i.forEach(o=>{r(o=UA(o)),o.node||o.ignore||o.mark||(o.node=s)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new nl(t,nl.schemaRules(t)))}}const TP={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},_Y={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},kP={ol:!0,ul:!0},Mh=1,Jv=2,Wf=4;function VA(e,t,n){return t!=null?(t?Mh:0)|(t==="full"?Jv:0):e&&e.whitespace=="pre"?Mh|Jv:n&~Wf}class l0{constructor(t,n,r,s,i,o){this.type=t,this.attrs=n,this.marks=r,this.solid=s,this.options=o,this.content=[],this.activeMarks=rn.none,this.match=i||(o&Wf?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Ae.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(t.type))?(this.match=r,s):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&Mh)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let n=Ae.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(Ae.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!TP.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class HA{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=n.topNode,i,o=VA(null,n.preserveWhitespace,0)|(r?Wf:0);s?i=new l0(s.type,s.attrs,rn.none,!0,n.topMatch||s.type.contentMatch,o):r?i=new l0(null,null,rn.none,!0,null,o):i=new l0(t.schema.topNodeType,null,rn.none,!0,null,o),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,s=this.top,i=s.options&Jv?"full":this.localPreserveWS||(s.options&Mh)>0,{schema:o}=this.parser;if(i==="full"||s.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(i)if(i==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let l=r.split(/\r?\n|\r/);for(let c=0;c<l.length;c++)c&&this.insertNode(o.linebreakReplacement.create(),n,!0),l[c]&&this.insertNode(o.text(l[c]),n,!/\S/.test(l[c]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let l=s.content[s.content.length-1],c=t.previousSibling;(!l||c&&c.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let s=this.localPreserveWS,i=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let o=t.nodeName.toLowerCase(),l;kP.hasOwnProperty(o)&&this.parser.normalizeLists&&OY(t);let c=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(l=this.parser.matchTag(t,this,r));e:if(c?c.ignore:_Y.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,n);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(t=c.skip);let d,h=this.needsBlock;if(TP.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),d=!0,i.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let g=c&&c.skip?n:this.readStyles(t,n);g&&this.addAll(t,g),d&&this.sync(i),this.needsBlock=h}else{let d=this.readStyles(t,n);d&&this.addElementByRule(t,c,d,c.consuming===!1?l:void 0)}this.localPreserveWS=s}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let i=this.parser.matchedStyles[s],o=r.getPropertyValue(i);if(o)for(let l=void 0;;){let c=this.parser.matchStyle(i,o,this,l);if(!c)break;if(c.ignore)return null;if(c.clearMark?n=n.filter(d=>!c.clearMark(d)):n=n.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)l=c;else break}}return n}addElementByRule(t,n,r,s){let i,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let c=this.enter(o,n.attrs||null,r,n.preserveWhitespace);c&&(i=!0,r=c)}else{let c=this.parser.schema.marks[n.mark];r=r.concat(c.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(t);else if(s)this.addElement(t,r,s);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=t;typeof n.contentElement=="string"?c=t.querySelector(n.contentElement):typeof n.contentElement=="function"?c=n.contentElement(t):n.contentElement&&(c=n.contentElement),this.findAround(t,c,!0),this.addAll(c,r),this.findAround(t,c,!1)}i&&this.sync(l)&&this.open--}addAll(t,n,r,s){let i=r||0;for(let o=r?t.childNodes[r]:t.firstChild,l=s==null?null:t.childNodes[s];o!=l;o=o.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(o,n);this.findAtPoint(t,i)}findPlace(t,n,r){let s,i;for(let o=this.open,l=0;o>=0;o--){let c=this.nodes[o],d=c.findWrapping(t);if(d&&(!s||s.length>d.length+l)&&(s=d,i=c,!d.length))break;if(c.solid){if(r)break;l+=2}}if(!s)return null;this.sync(i);for(let o=0;o<s.length;o++)n=this.enterInner(s[o],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let s=this.findPlace(t,n,r);if(s){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(t.type));let o=rn.none;for(let l of s.concat(t.marks))(i.type?i.type.allowsMarkType(l.type):$A(l.type,t.type))&&(o=l.addToSet(o));return i.content.push(t.mark(o)),!0}return!1}enter(t,n,r,s){let i=this.findPlace(t.create(n),r,!1);return i&&(i=this.enterInner(t,n,r,!0,s)),i}enterInner(t,n,r,s=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let l=VA(t,i,o.options);o.options&Wf&&o.content.length==0&&(l|=Wf);let c=rn.none;return r=r.filter(d=>(o.type?o.type.allowsMarkType(d.type):$A(d.type,t))?(c=d.addToSet(c),!1):!0),this.nodes.push(new l0(t,n,c,s,null,l)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Mh)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)t+=r[s].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&t.nodeType==1&&t.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(s?0:1),o=(l,c)=>{for(;l>=0;l--){let d=n[l];if(d==""){if(l==n.length-1||l==0)continue;for(;c>=i;c--)if(o(l-1,c))return!0;return!1}else{let h=c>0||c==0&&s?this.nodes[c].type:r&&c>=i?r.node(c-i).type:null;if(!h||h.name!=d&&!h.isInGroup(d))return!1;c--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function OY(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&kP.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function PY(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function UA(e){let t={};for(let n in e)t[n]=e[n];return t}function $A(e,t){let n=t.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(e))continue;let i=[],o=l=>{i.push(l);for(let c=0;c<l.edgeCount;c++){let{type:d,next:h}=l.edge(c);if(d==t||i.indexOf(h)<0&&o(h))return!0}};if(o(s.contentMatch))return!0}}class Uc{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=Ly(n).createDocumentFragment());let s=r,i=[];return t.forEach(o=>{if(i.length||o.marks.length){let l=0,c=0;for(;l<i.length&&c<o.marks.length;){let d=o.marks[c];if(!this.marks[d.type.name]){c++;continue}if(!d.eq(i[l][0])||d.type.spec.spanning===!1)break;l++,c++}for(;l<i.length;)s=i.pop()[1];for(;c<o.marks.length;){let d=o.marks[c++],h=this.serializeMark(d,o.isInline,n);h&&(i.push([d,s]),s.appendChild(h.dom),s=h.contentDOM||h.dom)}}s.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:s}=K0(Ly(n),this.nodes[t.type.name](t),null,t.attrs);if(s){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,s)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let s=t.marks.length-1;s>=0;s--){let i=this.serializeMark(t.marks[s],t.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(t,n,r={}){let s=this.marks[t.type.name];return s&&K0(Ly(r),s(t,n),null,t.attrs)}static renderSpec(t,n,r=null,s){return K0(t,n,r,s)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new Uc(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=WA(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return WA(t.marks)}}function WA(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function Ly(e){return e.document||window.document}const GA=new WeakMap;function DY(e){let t=GA.get(e);return t===void 0&&GA.set(e,t=jY(e)),t}function jY(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(e),t}function K0(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let s=t[0],i;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=DY(r))&&i.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(n=s.slice(0,o),s=s.slice(o+1));let l,c=n?e.createElementNS(n,s):e.createElement(s),d=t[1],h=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){h=2;for(let g in d)if(d[g]!=null){let y=g.indexOf(" ");y>0?c.setAttributeNS(g.slice(0,y),g.slice(y+1),d[g]):g=="style"&&c.style?c.style.cssText=d[g]:c.setAttribute(g,d[g])}}for(let g=h;g<t.length;g++){let y=t[g];if(y===0){if(g<t.length-1||g>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:w,contentDOM:S}=K0(e,y,n,r);if(c.appendChild(w),S){if(l)throw new RangeError("Multiple content holes");l=S}}}return{dom:c,contentDOM:l}}const IP=65535,RP=Math.pow(2,16);function LY(e,t){return e+t*RP}function XA(e){return e&IP}function BY(e){return(e-(e&IP))/RP}const MP=1,_P=2,Y0=4,OP=8;class e2{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&OP)>0}get deletedBefore(){return(this.delInfo&(MP|Y0))>0}get deletedAfter(){return(this.delInfo&(_P|Y0))>0}get deletedAcross(){return(this.delInfo&Y0)>0}}class Rs{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&Rs.empty)return Rs.empty}recover(t){let n=0,r=XA(t);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+BY(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let s=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?s:0);if(c>t)break;let d=this.ranges[l+i],h=this.ranges[l+o],g=c+d;if(t<=g){let y=d?t==c?-1:t==g?1:n:n,w=c+s+(y<0?0:h);if(r)return w;let S=t==(n<0?c:g)?null:LY(l/3,t-c),C=t==c?_P:t==g?MP:Y0;return(n<0?t!=c:t!=g)&&(C|=OP),new e2(w,C,S)}s+=h-d}return r?t+s:new e2(t+s,0,null)}touches(t,n){let r=0,s=XA(n),i=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?r:0);if(c>t)break;let d=this.ranges[l+i],h=c+d;if(t<=h&&l==s*3)return!0;r+=this.ranges[l+o]-d}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let o=this.ranges[s],l=o-(this.inverted?i:0),c=o+(this.inverted?0:i),d=this.ranges[s+n],h=this.ranges[s+r];t(l,l+d,c,c+h),i+=h-d}}invert(){return new Rs(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?Rs.empty:new Rs(t<0?[0,-t,0]:[0,0,t])}}Rs.empty=new Rs([]);class _h{constructor(t,n,r=0,s=t?t.length:0){this.mirror=n,this.from=r,this.to=s,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new _h(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let s=t.getMirror(n);this.appendMap(t._maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let s=t.getMirror(n);this.appendMap(t._maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let t=new _h;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let s=0;for(let i=this.from;i<this.to;i++){let o=this._maps[i],l=o.mapResult(t,n);if(l.recover!=null){let c=this.getMirror(i);if(c!=null&&c>i&&c<this.to){i=c,t=this._maps[c].recover(l.recover);continue}}s|=l.delInfo,t=l.pos}return r?t:new e2(t,s,null)}}const By=Object.create(null);class Yr{getMap(){return Rs.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=By[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in By)throw new RangeError("Duplicate use of step JSON ID "+t);return By[t]=n,n.prototype.jsonID=t,n}}class Zn{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new Zn(t,null)}static fail(t){return new Zn(null,t)}static fromReplace(t,n,r,s){try{return Zn.ok(t.replace(n,r,s))}catch(i){if(i instanceof Xm)return Zn.fail(i.message);throw i}}}function $C(e,t,n){let r=[];for(let s=0;s<e.childCount;s++){let i=e.child(s);i.content.size&&(i=i.copy($C(i.content,t,i))),i.isInline&&(i=t(i,n,s)),r.push(i)}return Ae.fromArray(r)}class Ha extends Yr{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),s=r.node(r.sharedDepth(this.to)),i=new He($C(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),n.openStart,n.openEnd);return Zn.fromReplace(t,this.from,this.to,i)}invert(){return new ki(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ha(n.pos,r.pos,this.mark)}merge(t){return t instanceof Ha&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Ha(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ha(n.from,n.to,t.markFromJSON(n.mark))}}Yr.jsonID("addMark",Ha);class ki extends Yr{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new He($C(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),t),n.openStart,n.openEnd);return Zn.fromReplace(t,this.from,this.to,r)}invert(){return new Ha(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ki(n.pos,r.pos,this.mark)}merge(t){return t instanceof ki&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new ki(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ki(n.from,n.to,t.markFromJSON(n.mark))}}Yr.jsonID("removeMark",ki);class Ua extends Yr{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Zn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Zn.fromReplace(t,this.pos,this.pos+1,new He(Ae.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new Ua(this.pos,n.marks[s]);return new Ua(this.pos,this.mark)}}return new _c(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Ua(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ua(n.pos,t.markFromJSON(n.mark))}}Yr.jsonID("addNodeMark",Ua);class _c extends Yr{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Zn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Zn.fromReplace(t,this.pos,this.pos+1,new He(Ae.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ua(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new _c(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new _c(n.pos,t.markFromJSON(n.mark))}}Yr.jsonID("removeNodeMark",_c);class pr extends Yr{constructor(t,n,r,s=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=s}apply(t){return this.structure&&t2(t,this.from,this.to)?Zn.fail("Structure replace would overwrite content"):Zn.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new Rs([this.from,this.to-this.from,this.slice.size])}invert(t){return new pr(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new pr(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof pr)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?He.empty:new He(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new pr(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?He.empty:new He(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new pr(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new pr(n.from,n.to,He.fromJSON(t,n.slice),!!n.structure)}}Yr.jsonID("replace",pr);class xr extends Yr{constructor(t,n,r,s,i,o,l=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=i,this.insert=o,this.structure=l}apply(t){if(this.structure&&(t2(t,this.from,this.gapFrom)||t2(t,this.gapTo,this.to)))return Zn.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Zn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Zn.fromReplace(t,this.from,this.to,r):Zn.fail("Content does not fit in gap")}getMap(){return new Rs([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new xr(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||i>r.pos?null:new xr(n.pos,r.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new xr(n.from,n.to,n.gapFrom,n.gapTo,He.fromJSON(t,n.slice),n.insert,!!n.structure)}}Yr.jsonID("replaceAround",xr);function t2(e,t,n){let r=e.resolve(t),s=n-t,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let o=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function FY(e,t,n,r){let s=[],i=[],o,l;e.doc.nodesBetween(t,n,(c,d,h)=>{if(!c.isInline)return;let g=c.marks;if(!r.isInSet(g)&&h.type.allowsMarkType(r.type)){let y=Math.max(d,t),w=Math.min(d+c.nodeSize,n),S=r.addToSet(g);for(let C=0;C<g.length;C++)g[C].isInSet(S)||(o&&o.to==y&&o.mark.eq(g[C])?o.to=w:s.push(o=new ki(y,w,g[C])));l&&l.to==y?l.to=w:i.push(l=new Ha(y,w,r))}}),s.forEach(c=>e.step(c)),i.forEach(c=>e.step(c))}function zY(e,t,n,r){let s=[],i=0;e.doc.nodesBetween(t,n,(o,l)=>{if(!o.isInline)return;i++;let c=null;if(r instanceof rx){let d=o.marks,h;for(;h=r.isInSet(d);)(c||(c=[])).push(h),d=h.removeFromSet(d)}else r?r.isInSet(o.marks)&&(c=[r]):c=o.marks;if(c&&c.length){let d=Math.min(l+o.nodeSize,n);for(let h=0;h<c.length;h++){let g=c[h],y;for(let w=0;w<s.length;w++){let S=s[w];S.step==i-1&&g.eq(s[w].style)&&(y=S)}y?(y.to=d,y.step=i):s.push({style:g,from:Math.max(l,t),to:d,step:i})}}}),s.forEach(o=>e.step(new ki(o.from,o.to,o.style)))}function WC(e,t,n,r=n.contentMatch,s=!0){let i=e.doc.nodeAt(t),o=[],l=t+1;for(let c=0;c<i.childCount;c++){let d=i.child(c),h=l+d.nodeSize,g=r.matchType(d.type);if(!g)o.push(new pr(l,h,He.empty));else{r=g;for(let y=0;y<d.marks.length;y++)n.allowsMarkType(d.marks[y].type)||e.step(new ki(l,h,d.marks[y]));if(s&&d.isText&&n.whitespace!="pre"){let y,w=/\r?\n|\r/g,S;for(;y=w.exec(d.text);)S||(S=new He(Ae.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),o.push(new pr(l+y.index,l+y.index+y[0].length,S))}}l=h}if(!r.validEnd){let c=r.fillBefore(Ae.empty,!0);e.replace(l,l,new He(c,0,0))}for(let c=o.length-1;c>=0;c--)e.step(o[c])}function VY(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Ud(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth,s=0,i=0;;--r){let o=e.$from.node(r),l=e.$from.index(r)+s,c=e.$to.indexAfter(r)-i;if(r<e.depth&&o.canReplace(l,c,n))return r;if(r==0||o.type.spec.isolating||!VY(o,l,c))break;l&&(s=1),c<o.childCount&&(i=1)}return null}function HY(e,t,n){let{$from:r,$to:s,depth:i}=t,o=r.before(i+1),l=s.after(i+1),c=o,d=l,h=Ae.empty,g=0;for(let S=i,C=!1;S>n;S--)C||r.index(S)>0?(C=!0,h=Ae.from(r.node(S).copy(h)),g++):c--;let y=Ae.empty,w=0;for(let S=i,C=!1;S>n;S--)C||s.after(S+1)<s.end(S)?(C=!0,y=Ae.from(s.node(S).copy(y)),w++):d++;e.step(new xr(c,d,o,l,new He(h.append(y),g,w),h.size-g,!0))}function GC(e,t,n=null,r=e){let s=UY(e,t),i=s&&$Y(r,t);return i?s.map(KA).concat({type:t,attrs:n}).concat(i.map(KA)):null}function KA(e){return{type:e,attrs:null}}function UY(e,t){let{parent:n,startIndex:r,endIndex:s}=e,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;let o=i.length?i[0]:t;return n.canReplaceWith(r,s,o)?i:null}function $Y(e,t){let{parent:n,startIndex:r,endIndex:s}=e,i=n.child(r),o=t.contentMatch.findWrapping(i.type);if(!o)return null;let c=(o.length?o[o.length-1]:t).contentMatch;for(let d=r;c&&d<s;d++)c=c.matchType(n.child(d).type);return!c||!c.validEnd?null:o}function WY(e,t,n){let r=Ae.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Ae.from(n[o].type.create(n[o].attrs,r))}let s=t.start,i=t.end;e.step(new xr(s,i,s,i,new He(r,0,0),n.length,!0))}function GY(e,t,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=e.steps.length;e.doc.nodesBetween(t,n,(o,l)=>{let c=typeof s=="function"?s(o):s;if(o.isTextblock&&!o.hasMarkup(r,c)&&XY(e.doc,e.mapping.slice(i).map(l),r)){let d=null;if(r.schema.linebreakReplacement){let w=r.whitespace=="pre",S=!!r.contentMatch.matchType(r.schema.linebreakReplacement);w&&!S?d=!1:!w&&S&&(d=!0)}d===!1&&DP(e,o,l,i),WC(e,e.mapping.slice(i).map(l,1),r,void 0,d===null);let h=e.mapping.slice(i),g=h.map(l,1),y=h.map(l+o.nodeSize,1);return e.step(new xr(g,y,g+1,y-1,new He(Ae.from(r.create(c,null,o.marks)),0,0),1,!0)),d===!0&&PP(e,o,l,i),!1}})}function PP(e,t,n,r){t.forEach((s,i)=>{if(s.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(s.text);){let c=e.mapping.slice(r).map(n+1+i+o.index);e.replaceWith(c,c+1,t.type.schema.linebreakReplacement.create())}}})}function DP(e,t,n,r){t.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let o=e.mapping.slice(r).map(n+1+i);e.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function XY(e,t,n){let r=e.resolve(t),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function KY(e,t,n,r,s){let i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let o=n.create(r,null,s||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,o);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new xr(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new He(Ae.from(o),0,0),1,!0))}function Uu(e,t,n=1,r){let s=e.resolve(t),i=s.depth-n,o=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let d=s.depth-1,h=n-2;d>i;d--,h--){let g=s.node(d),y=s.index(d);if(g.type.spec.isolating)return!1;let w=g.content.cutByIndex(y,g.childCount),S=r&&r[h+1];S&&(w=w.replaceChild(0,S.type.create(S.attrs)));let C=r&&r[h]||g;if(!g.canReplace(y+1,g.childCount)||!C.type.validContent(w))return!1}let l=s.indexAfter(i),c=r&&r[0];return s.node(i).canReplaceWith(l,l,c?c.type:s.node(i+1).type)}function YY(e,t,n=1,r){let s=e.doc.resolve(t),i=Ae.empty,o=Ae.empty;for(let l=s.depth,c=s.depth-n,d=n-1;l>c;l--,d--){i=Ae.from(s.node(l).copy(i));let h=r&&r[d];o=Ae.from(h?h.type.create(h.attrs,o):s.node(l).copy(o))}e.step(new pr(t,t,new He(i.append(o),n,n),!0))}function vl(e,t){let n=e.resolve(t),r=n.index();return jP(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function qY(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let s=0;s<t.childCount;s++){let i=t.child(s),o=i.type==r?e.type.schema.nodes.text:i.type;if(n=n.matchType(o),!n||!e.type.allowsMarks(i.marks))return!1}return n.validEnd}function jP(e,t){return!!(e&&t&&!e.isLeaf&&qY(e,t))}function sx(e,t,n=-1){let r=e.resolve(t);for(let s=r.depth;;s--){let i,o,l=r.index(s);if(s==r.depth?(i=r.nodeBefore,o=r.nodeAfter):n>0?(i=r.node(s+1),l++,o=r.node(s).maybeChild(l)):(i=r.node(s).maybeChild(l-1),o=r.node(s+1)),i&&!i.isTextblock&&jP(i,o)&&r.node(s).canReplace(l,l+1))return t;if(s==0)break;t=n<0?r.before(s):r.after(s)}}function ZY(e,t,n){let r=null,{linebreakReplacement:s}=e.doc.type.schema,i=e.doc.resolve(t-n),o=i.node().type;if(s&&o.inlineContent){let h=o.whitespace=="pre",g=!!o.contentMatch.matchType(s);h&&!g?r=!1:!h&&g&&(r=!0)}let l=e.steps.length;if(r===!1){let h=e.doc.resolve(t+n);DP(e,h.node(),h.before(),l)}o.inlineContent&&WC(e,t+n-1,o,i.node().contentMatchAt(i.index()),r==null);let c=e.mapping.slice(l),d=c.map(t-n);if(e.step(new pr(d,c.map(t+n,-1),He.empty,!0)),r===!0){let h=e.doc.resolve(d);PP(e,h.node(),h.before(),e.steps.length)}return e}function QY(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let i=r.index(s);if(r.node(s).canReplaceWith(i,i,n))return r.before(s+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let i=r.indexAfter(s);if(r.node(s).canReplaceWith(i,i,n))return r.after(s+1);if(i<r.node(s).childCount)return null}return null}function LP(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let s=n.content;for(let i=0;i<n.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,c=r.index(o)+(l>0?1:0),d=r.node(o),h=!1;if(i==1)h=d.canReplace(c,c,s);else{let g=d.contentMatchAt(c).findWrapping(s.firstChild.type);h=g&&d.canReplaceWith(c,c,g[0])}if(h)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function ix(e,t,n=t,r=He.empty){if(t==n&&!r.size)return null;let s=e.resolve(t),i=e.resolve(n);return BP(s,i,r)?new pr(t,n,r):new JY(s,i,r).fit()}function BP(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class JY{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Ae.empty;for(let s=0;s<=t.depth;s++){let i=t.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(s))})}for(let s=t.depth;s>0;s--)this.placed=Ae.from(t.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(t<0?this.$to:r.doc.resolve(t));if(!s)return null;let i=this.placed,o=r.depth,l=s.depth;for(;o&&l&&i.childCount==1;)i=i.firstChild.content,o--,l--;let c=new He(i,o,l);return t>-1?new xr(r.pos,t,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new pr(r.pos,s.pos,c):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<t;r++){let i=n.firstChild;if(n.childCount>1&&(s=0),i.type.spec.isolating&&s<=r){t=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let s,i=null;r?(i=Fy(this.unplaced.content,r-1).firstChild,s=i.content):s=this.unplaced.content;let o=s.firstChild;for(let l=this.depth;l>=0;l--){let{type:c,match:d}=this.frontier[l],h,g=null;if(n==1&&(o?d.matchType(o.type)||(g=d.fillBefore(Ae.from(o),!1)):i&&c.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:l,parent:i,inject:g};if(n==2&&o&&(h=d.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:i,wrap:h};if(i&&d.matchType(i.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,s=Fy(t,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new He(t,n+1,Math.max(r,s.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,s=Fy(t,n);if(s.childCount<=1&&n>0){let i=t.size-n<=n+s.size;this.unplaced=new He(Nf(t,n-1,1),n-1,i?n-1:r)}else this.unplaced=new He(Nf(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:s,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let C=0;C<i.length;C++)this.openFrontierNode(i[C]);let o=this.unplaced,l=r?r.content:o.content,c=o.openStart-t,d=0,h=[],{match:g,type:y}=this.frontier[n];if(s){for(let C=0;C<s.childCount;C++)h.push(s.child(C));g=g.matchFragment(s)}let w=l.size+t-(o.content.size-o.openEnd);for(;d<l.childCount;){let C=l.child(d),A=g.matchType(C.type);if(!A)break;d++,(d>1||c==0||C.content.size)&&(g=A,h.push(FP(C.mark(y.allowedMarks(C.marks)),d==1?c:0,d==l.childCount?w:-1)))}let S=d==l.childCount;S||(w=-1),this.placed=Af(this.placed,n,Ae.from(h)),this.frontier[n].match=g,S&&w<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let C=0,A=l;C<w;C++){let E=A.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),A=E.content}this.unplaced=S?t==0?He.empty:new He(Nf(o.content,t-1,1),t-1,w<0?o.openEnd:t-1):new He(Nf(o.content,t,d),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!zy(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],i=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),o=zy(t,n,s,r,i);if(o){for(let l=n-1;l>=0;l--){let{match:c,type:d}=this.frontier[l],h=zy(t,l,d,c,!0);if(!h||h.childCount)continue e}return{depth:n,fit:o,move:i?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Af(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let s=t.node(r),i=s.type.contentMatch.fillBefore(s.content,!0,t.index(r));this.openFrontierNode(s.type,s.attrs,i)}return t}openFrontierNode(t,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(t),this.placed=Af(this.placed,this.depth,Ae.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Ae.empty,!0);n.childCount&&(this.placed=Af(this.placed,this.frontier.length,n))}}function Nf(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(Nf(e.firstChild.content,t-1,n)))}function Af(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Af(e.lastChild.content,t-1,n)))}function Fy(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function FP(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,FP(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(Ae.empty,!0)))),e.copy(r)}function zy(e,t,n,r,s){let i=e.node(t),o=s?e.indexAfter(t):e.index(t);if(o==i.childCount&&!n.compatibleContent(i.type))return null;let l=r.fillBefore(i.content,!0,o);return l&&!eq(n,i.content,o)?l:null}function eq(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function tq(e){return e.spec.defining||e.spec.definingForContent}function nq(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let s=e.doc.resolve(t),i=e.doc.resolve(n);if(BP(s,i,r))return e.step(new pr(t,n,r));let o=VP(s,i);o[o.length-1]==0&&o.pop();let l=-(s.depth+1);o.unshift(l);for(let y=s.depth,w=s.pos-1;y>0;y--,w--){let S=s.node(y).type.spec;if(S.defining||S.definingAsContext||S.isolating)break;o.indexOf(y)>-1?l=y:s.before(y)==w&&o.splice(1,0,-y)}let c=o.indexOf(l),d=[],h=r.openStart;for(let y=r.content,w=0;;w++){let S=y.firstChild;if(d.push(S),w==r.openStart)break;y=S.content}for(let y=h-1;y>=0;y--){let w=d[y],S=tq(w.type);if(S&&!w.sameMarkup(s.node(Math.abs(l)-1)))h=y;else if(S||!w.type.isTextblock)break}for(let y=r.openStart;y>=0;y--){let w=(y+h+1)%(r.openStart+1),S=d[w];if(S)for(let C=0;C<o.length;C++){let A=o[(C+c)%o.length],E=!0;A<0&&(E=!1,A=-A);let k=s.node(A-1),I=s.index(A-1);if(k.canReplaceWith(I,I,S.type,S.marks))return e.replace(s.before(A),E?i.after(A):n,new He(zP(r.content,0,r.openStart,w),w,r.openEnd))}}let g=e.steps.length;for(let y=o.length-1;y>=0&&(e.replace(t,n,r),!(e.steps.length>g));y--){let w=o[y];w<0||(t=s.before(w),n=i.after(w))}}function zP(e,t,n,r,s){if(t<n){let i=e.firstChild;e=e.replaceChild(0,i.copy(zP(i.content,t+1,n,r,i)))}if(t>r){let i=s.contentMatchAt(0),o=i.fillBefore(e).append(e);e=o.append(i.matchFragment(o).fillBefore(Ae.empty,!0))}return e}function rq(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let s=QY(e.doc,t,r.type);s!=null&&(t=n=s)}e.replaceRange(t,n,new He(Ae.from(r),0,0))}function sq(e,t,n){let r=e.doc.resolve(t),s=e.doc.resolve(n),i=VP(r,s);for(let o=0;o<i.length;o++){let l=i[o],c=o==i.length-1;if(c&&l==0||r.node(l).type.contentMatch.validEnd)return e.delete(r.start(l),s.end(l));if(l>0&&(c||r.node(l-1).canReplace(r.index(l-1),s.indexAfter(l-1))))return e.delete(r.before(l),s.after(l))}for(let o=1;o<=r.depth&&o<=s.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&s.end(o)-n!=s.depth-o&&r.start(o-1)==s.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),s.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}function VP(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let s=r;s>=0;s--){let i=e.start(s);if(i<e.pos-(e.depth-s)||t.end(s)>t.pos+(t.depth-s)||e.node(s).type.spec.isolating||t.node(s).type.spec.isolating)break;(i==t.start(s)||s==e.depth&&s==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&s&&t.start(s-1)==i-1)&&n.push(s)}return n}class $u extends Yr{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return Zn.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return Zn.fromReplace(t,this.pos,this.pos+1,new He(Ae.from(s),0,n.isLeaf?0:1))}getMap(){return Rs.empty}invert(t){return new $u(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new $u(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new $u(n.pos,n.attr,n.value)}}Yr.jsonID("attr",$u);class Oh extends Yr{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let s in t.attrs)n[s]=t.attrs[s];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return Zn.ok(r)}getMap(){return Rs.empty}invert(t){return new Oh(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Oh(n.attr,n.value)}}Yr.jsonID("docAttr",Oh);let wd=class extends Error{};wd=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};wd.prototype=Object.create(Error.prototype);wd.prototype.constructor=wd;wd.prototype.name="TransformError";let HP=class{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new _h}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new wd(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let t=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let s=this.mapping.maps[r];r&&(t=s.map(t,1),n=s.map(n,-1)),s.forEach((i,o,l,c)=>{t=Math.min(t,l),n=Math.max(n,c)})}return t==1e9?null:{from:t,to:n}}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=He.empty){let s=ix(this.doc,t,n,r);return s&&this.step(s),this}replaceWith(t,n,r){return this.replace(t,n,new He(Ae.from(r),0,0))}delete(t,n){return this.replace(t,n,He.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return nq(this,t,n,r),this}replaceRangeWith(t,n,r){return rq(this,t,n,r),this}deleteRange(t,n){return sq(this,t,n),this}lift(t,n){return HY(this,t,n),this}join(t,n=1){return ZY(this,t,n),this}wrap(t,n){return WY(this,t,n),this}setBlockType(t,n=t,r,s=null){return GY(this,t,n,r,s),this}setNodeMarkup(t,n,r=null,s){return KY(this,t,n,r,s),this}setNodeAttribute(t,n,r){return this.step(new $u(t,n,r)),this}setDocAttribute(t,n){return this.step(new Oh(t,n)),this}addNodeMark(t,n){return this.step(new Ua(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof rn)n.isInSet(r.marks)&&this.step(new _c(t,n));else{let s=r.marks,i,o=[];for(;i=n.isInSet(s);)o.push(new _c(t,i)),s=i.removeFromSet(s);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(t,n=1,r){return YY(this,t,n,r),this}addMark(t,n,r){return FY(this,t,n,r),this}removeMark(t,n,r){return zY(this,t,n,r),this}clearIncompatible(t,n,r){return WC(this,t,n,r),this}};const Vy=Object.create(null);let Ct=class{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new iq(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=He.empty){let r=n.content.lastChild,s=null;for(let l=0;l<n.openEnd;l++)s=r,r=r.lastChild;let i=t.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:c,$to:d}=o[l],h=t.mapping.slice(i);t.replaceRange(h.map(c.pos),h.map(d.pos),l?He.empty:n),l==0&&ZA(t,i,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:o,$to:l}=s[i],c=t.mapping.slice(r),d=c.map(o.pos),h=c.map(l.pos);i?t.deleteRange(d,h):(t.replaceRangeWith(d,h,n),ZA(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let s=t.parent.inlineContent?new ht(t):fu(t.node(0),t.parent,t.pos,t.index(),n,r);if(s)return s;for(let i=t.depth-1;i>=0;i--){let o=n<0?fu(t.node(0),t.node(i),t.before(i+1),t.index(i),n,r):fu(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,n,r);if(o)return o}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new ni(t.node(0))}static atStart(t){return fu(t,t,0,0,1)||new ni(t)}static atEnd(t){return fu(t,t,t.content.size,t.childCount,-1)||new ni(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Vy[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in Vy)throw new RangeError("Duplicate use of selection JSON ID "+t);return Vy[t]=n,n.prototype.jsonID=t,n}getBookmark(){return ht.between(this.$anchor,this.$head).getBookmark()}};Ct.prototype.visible=!0;class iq{constructor(t,n){this.$from=t,this.$to=n}}let YA=!1;function qA(e){!YA&&!e.parent.inlineContent&&(YA=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class ht extends Ct{constructor(t,n=t){qA(t),qA(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Ct.near(r);let s=t.resolve(n.map(this.anchor));return new ht(s.parent.inlineContent?s:r,r)}replace(t,n=He.empty){if(super.replace(t,n),n==He.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof ht&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new ox(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ht(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let s=t.resolve(n);return new this(s,r==n?s:t.resolve(r))}static between(t,n,r){let s=t.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let i=Ct.findFrom(n,r,!0)||Ct.findFrom(n,-r,!0);if(i)n=i.$head;else return Ct.near(n,r)}return t.parent.inlineContent||(s==0?t=n:(t=(Ct.findFrom(t,-r,!0)||Ct.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=s<0&&(t=n))),new ht(t,n)}}Ct.jsonID("text",ht);class ox{constructor(t,n){this.anchor=t,this.head=n}map(t){return new ox(t.map(this.anchor),t.map(this.head))}resolve(t){return ht.between(t.resolve(this.anchor),t.resolve(this.head))}}class lt extends Ct{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),i=t.resolve(s);return r?Ct.near(i):new lt(i)}content(){return new He(Ae.from(this.node),0,0)}eq(t){return t instanceof lt&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new XC(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new lt(t.resolve(n.anchor))}static create(t,n){return new lt(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}lt.prototype.visible=!1;Ct.jsonID("node",lt);class XC{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new ox(r,r):new XC(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&lt.isSelectable(r)?new lt(n):Ct.near(n)}}class ni extends Ct{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=He.empty){if(n==He.empty){t.delete(0,t.doc.content.size);let r=Ct.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new ni(t)}map(t){return new ni(t)}eq(t){return t instanceof ni}getBookmark(){return oq}}Ct.jsonID("all",ni);const oq={map(){return this},resolve(e){return new ni(e)}};function fu(e,t,n,r,s,i=!1){if(t.inlineContent)return ht.create(e,n);for(let o=r-(s>0?0:1);s>0?o<t.childCount:o>=0;o+=s){let l=t.child(o);if(l.isAtom){if(!i&&lt.isSelectable(l))return lt.create(e,n-(s<0?l.nodeSize:0))}else{let c=fu(e,l,n+s,s<0?l.childCount:0,s,i);if(c)return c}n+=l.nodeSize*s}return null}function ZA(e,t,n){let r=e.steps.length-1;if(r<t)return;let s=e.steps[r];if(!(s instanceof pr||s instanceof xr))return;let i=e.mapping.maps[r],o;i.forEach((l,c,d,h)=>{o==null&&(o=h)}),e.setSelection(Ct.near(e.doc.resolve(o),n))}const QA=1,c0=2,JA=4;class aq extends HP{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|QA)&~c0,this.storedMarks=null,this}get selectionSet(){return(this.updated&QA)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=c0,this}ensureMarks(t){return rn.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&c0)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~c0,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||rn.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let s=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(s.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),!t)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let o=this.doc.resolve(n);i=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(t,i)),!this.selection.empty&&this.selection.to==n+t.length&&this.setSelection(Ct.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=JA,this}get scrolledIntoView(){return(this.updated&JA)>0}}function e3(e,t){return!t||!e?e:e.bind(t)}class Tf{constructor(t,n,r){this.name=t,this.init=e3(n.init,r),this.apply=e3(n.apply,r)}}const lq=[new Tf("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new Tf("selection",{init(e,t){return e.selection||Ct.atStart(t.doc)},apply(e){return e.selection}}),new Tf("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new Tf("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class Hy{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=lq.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Tf(r.key,r.spec.state,r))})}}class Iu{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),s=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let c=s?s[o].n:0,d=s?s[o].state:this,h=c<n.length&&l.spec.appendTransaction.call(l,c?n.slice(c):n,d,r);if(h&&r.filterTransaction(h,o)){if(h.setMeta("appendedTransaction",t),!s){s=[];for(let g=0;g<this.config.plugins.length;g++)s.push(g<o?{state:r,n:n.length}:{state:this,n:0})}n.push(h),r=r.applyInner(h),i=!0}s&&(s[o]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Iu(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let i=r[s];n[i.name]=i.apply(t,this[i.name],this,n)}return n}get tr(){return new aq(this)}static create(t){let n=new Hy(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new Iu(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(t,r);return r}reconfigure(t){let n=new Hy(this.schema,t.plugins),r=n.fields,s=new Iu(n);for(let i=0;i<r.length;i++){let o=r[i].name;s[o]=this.hasOwnProperty(o)?this[o]:r[i].init(t,s)}return s}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=t[r],i=s.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(s,this[s.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let s=new Hy(t.schema,t.plugins),i=new Iu(s);return s.fields.forEach(o=>{if(o.name=="doc")i.doc=tl.fromJSON(t.schema,n.doc);else if(o.name=="selection")i.selection=Ct.fromJSON(i.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let l in r){let c=r[l],d=c.spec.state;if(c.key==o.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){i[o.name]=d.fromJSON.call(c,t,n[l],i);return}}i[o.name]=o.init(t,i)}}),i}}function UP(e,t,n){for(let r in e){let s=e[r];s instanceof Function?s=s.bind(t):r=="handleDOMEvents"&&(s=UP(s,t,{})),n[r]=s}return n}class In{constructor(t){this.spec=t,this.props={},t.props&&UP(t.props,this,this.props),this.key=t.key?t.key.key:$P("plugin")}getState(t){return t[this.key]}}const Uy=Object.create(null);function $P(e){return e in Uy?e+"$"+ ++Uy[e]:(Uy[e]=0,e+"$")}class lr{constructor(t="key"){this.key=$P(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const cq=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function WP(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const uq=(e,t,n)=>{let r=WP(e,n);if(!r)return!1;let s=KC(r);if(!s){let o=r.blockRange(),l=o&&Ud(o);return l==null?!1:(t&&t(e.tr.lift(o,l).scrollIntoView()),!0)}let i=s.nodeBefore;if(YP(e,s,t,-1))return!0;if(r.parent.content.size==0&&(vd(i,"end")||lt.isSelectable(i)))for(let o=r.depth;;o--){let l=ix(e.doc,r.before(o),r.after(o),He.empty);if(l&&l.slice.size<l.to-l.from){if(t){let c=e.tr.step(l);c.setSelection(vd(i,"end")?Ct.findFrom(c.doc.resolve(c.mapping.map(s.pos,-1)),-1):lt.create(c.doc,s.pos-i.nodeSize)),t(c.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return i.isAtom&&s.depth==r.depth-1?(t&&t(e.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1},dq=(e,t,n)=>{let r=WP(e,n);if(!r)return!1;let s=KC(r);return s?GP(e,s,t):!1},fq=(e,t,n)=>{let r=XP(e,n);if(!r)return!1;let s=YC(r);return s?GP(e,s,t):!1};function GP(e,t,n){let r=t.nodeBefore,s=r,i=t.pos-1;for(;!s.isTextblock;i--){if(s.type.spec.isolating)return!1;let h=s.lastChild;if(!h)return!1;s=h}let o=t.nodeAfter,l=o,c=t.pos+1;for(;!l.isTextblock;c++){if(l.type.spec.isolating)return!1;let h=l.firstChild;if(!h)return!1;l=h}let d=ix(e.doc,i,c,He.empty);if(!d||d.from!=i||d instanceof pr&&d.slice.size>=c-i)return!1;if(n){let h=e.tr.step(d);h.setSelection(ht.create(h.doc,i)),n(h.scrollIntoView())}return!0}function vd(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const hq=(e,t,n)=>{let{$head:r,empty:s}=e.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;i=KC(r)}let o=i&&i.nodeBefore;return!o||!lt.isSelectable(o)?!1:(t&&t(e.tr.setSelection(lt.create(e.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function KC(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function XP(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const pq=(e,t,n)=>{let r=XP(e,n);if(!r)return!1;let s=YC(r);if(!s)return!1;let i=s.nodeAfter;if(YP(e,s,t,1))return!0;if(r.parent.content.size==0&&(vd(i,"start")||lt.isSelectable(i))){let o=ix(e.doc,r.before(),r.after(),He.empty);if(o&&o.slice.size<o.to-o.from){if(t){let l=e.tr.step(o);l.setSelection(vd(i,"start")?Ct.findFrom(l.doc.resolve(l.mapping.map(s.pos)),1):lt.create(l.doc,l.mapping.map(s.pos))),t(l.scrollIntoView())}return!0}}return i.isAtom&&s.depth==r.depth-1?(t&&t(e.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},mq=(e,t,n)=>{let{$head:r,empty:s}=e.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;i=YC(r)}let o=i&&i.nodeAfter;return!o||!lt.isSelectable(o)?!1:(t&&t(e.tr.setSelection(lt.create(e.doc,i.pos)).scrollIntoView()),!0)};function YC(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const gq=(e,t)=>{let n=e.selection,r=n instanceof lt,s;if(r){if(n.node.isTextblock||!vl(e.doc,n.from))return!1;s=n.from}else if(s=sx(e.doc,n.from,-1),s==null)return!1;if(t){let i=e.tr.join(s);r&&i.setSelection(lt.create(i.doc,s-e.doc.resolve(s).nodeBefore.nodeSize)),t(i.scrollIntoView())}return!0},xq=(e,t)=>{let n=e.selection,r;if(n instanceof lt){if(n.node.isTextblock||!vl(e.doc,n.to))return!1;r=n.to}else if(r=sx(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},yq=(e,t)=>{let{$from:n,$to:r}=e.selection,s=n.blockRange(r),i=s&&Ud(s);return i==null?!1:(t&&t(e.tr.lift(s,i).scrollIntoView()),!0)},wq=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function KP(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const vq=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),i=n.indexAfter(-1),o=KP(s.contentMatchAt(i));if(!o||!s.canReplaceWith(i,i,o))return!1;if(t){let l=n.after(),c=e.tr.replaceWith(l,l,o.createAndFill());c.setSelection(Ct.near(c.doc.resolve(l),1)),t(c.scrollIntoView())}return!0},bq=(e,t)=>{let n=e.selection,{$from:r,$to:s}=n;if(n instanceof ni||r.parent.inlineContent||s.parent.inlineContent)return!1;let i=KP(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){let o=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,l=e.tr.insert(o,i.createAndFill());l.setSelection(ht.create(l.doc,o+1)),t(l.scrollIntoView())}return!0},Cq=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(Uu(e.doc,i))return t&&t(e.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),s=r&&Ud(r);return s==null?!1:(t&&t(e.tr.lift(r,s).scrollIntoView()),!0)},Sq=(e,t)=>{let{$from:n,to:r}=e.selection,s,i=n.sharedDepth(r);return i==0?!1:(s=n.before(i),t&&t(e.tr.setSelection(lt.create(e.doc,s))),!0)};function Eq(e,t,n){let r=t.nodeBefore,s=t.nodeAfter,i=t.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(i,i+1)||!(s.isTextblock||vl(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function YP(e,t,n,r){let s=t.nodeBefore,i=t.nodeAfter,o,l,c=s.type.spec.isolating||i.type.spec.isolating;if(!c&&Eq(e,t,n))return!0;let d=!c&&t.parent.canReplace(t.index(),t.index()+1);if(d&&(o=(l=s.contentMatchAt(s.childCount)).findWrapping(i.type))&&l.matchType(o[0]||i.type).validEnd){if(n){let w=t.pos+i.nodeSize,S=Ae.empty;for(let E=o.length-1;E>=0;E--)S=Ae.from(o[E].create(null,S));S=Ae.from(s.copy(S));let C=e.tr.step(new xr(t.pos-1,w,t.pos,w,new He(S,1,0),o.length,!0)),A=C.doc.resolve(w+2*o.length);A.nodeAfter&&A.nodeAfter.type==s.type&&vl(C.doc,A.pos)&&C.join(A.pos),n(C.scrollIntoView())}return!0}let h=i.type.spec.isolating||r>0&&c?null:Ct.findFrom(t,1),g=h&&h.$from.blockRange(h.$to),y=g&&Ud(g);if(y!=null&&y>=t.depth)return n&&n(e.tr.lift(g,y).scrollIntoView()),!0;if(d&&vd(i,"start",!0)&&vd(s,"end")){let w=s,S=[];for(;S.push(w),!w.isTextblock;)w=w.lastChild;let C=i,A=1;for(;!C.isTextblock;C=C.firstChild)A++;if(w.canReplace(w.childCount,w.childCount,C.content)){if(n){let E=Ae.empty;for(let I=S.length-1;I>=0;I--)E=Ae.from(S[I].copy(E));let k=e.tr.step(new xr(t.pos-S.length,t.pos+i.nodeSize,t.pos+A,t.pos+i.nodeSize-A,new He(E,S.length,0),0,!0));n(k.scrollIntoView())}return!0}}return!1}function qP(e){return function(t,n){let r=t.selection,s=e<0?r.$from:r.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(n&&n(t.tr.setSelection(ht.create(t.doc,e<0?s.start(i):s.end(i)))),!0):!1}}const Nq=qP(-1),Aq=qP(1);function Tq(e,t=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i),l=o&&GC(o,e,t);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function t3(e,t=null){return function(n,r){let s=!1;for(let i=0;i<n.selection.ranges.length&&!s;i++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[i];n.doc.nodesBetween(o,l,(c,d)=>{if(s)return!1;if(!(!c.isTextblock||c.hasMarkup(e,t)))if(c.type==e)s=!0;else{let h=n.doc.resolve(d),g=h.index();s=h.parent.canReplaceWith(g,g+1,e)}})}if(!s)return!1;if(r){let i=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:c}}=n.selection.ranges[o];i.setBlockType(l,c,e,t)}r(i.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function kq(e,t=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i);if(!o)return!1;let l=r?n.tr:null;return Iq(l,o,e,t)?(r&&r(l.scrollIntoView()),!0):!1}}function Iq(e,t,n,r=null){let s=!1,i=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let c=o.resolve(t.start-2);i=new Ym(c,c,t.depth),t.endIndex<t.parent.childCount&&(t=new Ym(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),s=!0}let l=GC(i,n,r,t);return l?(e&&Rq(e,t,l,s,n),!0):!1}function Rq(e,t,n,r,s){let i=Ae.empty;for(let h=n.length-1;h>=0;h--)i=Ae.from(n[h].type.create(n[h].attrs,i));e.step(new xr(t.start-(r?2:0),t.end,t.start,t.end,new He(i,0,0),n.length,!0));let o=0;for(let h=0;h<n.length;h++)n[h].type==s&&(o=h+1);let l=n.length-o,c=t.start+n.length-(r?2:0),d=t.parent;for(let h=t.startIndex,g=t.endIndex,y=!0;h<g;h++,y=!1)!y&&Uu(e.doc,c,l)&&(e.split(c,l),c+=2*l),c+=d.child(h).nodeSize;return e}function Mq(e){return function(t,n){let{$from:r,$to:s}=t.selection,i=r.blockRange(s,o=>o.childCount>0&&o.firstChild.type==e);return i?n?r.node(i.depth-1).type==e?_q(t,n,e,i):Oq(t,n,i):!0:!1}}function _q(e,t,n,r){let s=e.tr,i=r.end,o=r.$to.end(r.depth);i<o&&(s.step(new xr(i-1,o,i,o,new He(Ae.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Ym(s.doc.resolve(r.$from.pos),s.doc.resolve(o),r.depth));const l=Ud(r);if(l==null)return!1;s.lift(r,l);let c=s.doc.resolve(s.mapping.map(i,-1)-1);return vl(s.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&s.join(c.pos),t(s.scrollIntoView()),!0}function Oq(e,t,n){let r=e.tr,s=n.parent;for(let w=n.end,S=n.endIndex-1,C=n.startIndex;S>C;S--)w-=s.child(S).nodeSize,r.delete(w-1,w+1);let i=r.doc.resolve(n.start),o=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,c=n.endIndex==s.childCount,d=i.node(-1),h=i.index(-1);if(!d.canReplace(h+(l?0:1),h+1,o.content.append(c?Ae.empty:Ae.from(s))))return!1;let g=i.pos,y=g+o.nodeSize;return r.step(new xr(g-(l?1:0),y+(c?1:0),g+1,y-1,new He((l?Ae.empty:Ae.from(s.copy(Ae.empty))).append(c?Ae.empty:Ae.from(s.copy(Ae.empty))),l?0:1,c?0:1),l?0:1)),t(r.scrollIntoView()),!0}function Pq(e){return function(t,n){let{$from:r,$to:s}=t.selection,i=r.blockRange(s,d=>d.childCount>0&&d.firstChild.type==e);if(!i)return!1;let o=i.startIndex;if(o==0)return!1;let l=i.parent,c=l.child(o-1);if(c.type!=e)return!1;if(n){let d=c.lastChild&&c.lastChild.type==l.type,h=Ae.from(d?e.create():null),g=new He(Ae.from(e.create(null,Ae.from(l.type.create(null,h)))),d?3:1,0),y=i.start,w=i.end;n(t.tr.step(new xr(y-(d?3:1),w,y,w,g,1,!0)).scrollIntoView())}return!0}}const Ir=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},bd=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let n2=null;const jo=function(e,t,n){let r=n2||(n2=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},Dq=function(){n2=null},Oc=function(e,t,n,r){return n&&(n3(e,t,n,r,-1)||n3(e,t,n,r,1))},jq=/^(img|br|input|textarea|hr)$/i;function n3(e,t,n,r,s){for(var i;;){if(e==n&&t==r)return!0;if(t==(s<0?0:qs(e))){let o=e.parentNode;if(!o||o.nodeType!=1||gp(e)||jq.test(e.nodeName)||e.contentEditable=="false")return!1;t=Ir(e)+(s<0?0:1),e=o}else if(e.nodeType==1){let o=e.childNodes[t+(s<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((i=o.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)t+=s;else return!1;else e=o,t=s<0?qs(e):0}else return!1}}function qs(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Lq(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=qs(e)}else if(e.parentNode&&!gp(e))t=Ir(e),e=e.parentNode;else return null}}function Bq(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!gp(e))t=Ir(e)+1,e=e.parentNode;else return null}}function Fq(e,t,n){for(let r=t==0,s=t==qs(e);r||s;){if(e==n)return!0;let i=Ir(e);if(e=e.parentNode,!e)return!1;r=r&&i==0,s=s&&i==qs(e)}}function gp(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const ax=function(e){return e.focusNode&&Oc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function Ll(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function zq(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function Vq(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(qs(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(qs(r.startContainer),r.startOffset)}}}const xo=typeof navigator<"u"?navigator:null,r3=typeof document<"u"?document:null,bl=xo&&xo.userAgent||"",r2=/Edge\/(\d+)/.exec(bl),ZP=/MSIE \d/.exec(bl),s2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(bl),Ss=!!(ZP||s2||r2),rl=ZP?document.documentMode:s2?+s2[1]:r2?+r2[1]:0,ri=!Ss&&/gecko\/(\d+)/i.test(bl);ri&&+(/Firefox\/(\d+)/.exec(bl)||[0,0])[1];const i2=!Ss&&/Chrome\/(\d+)/.exec(bl),mr=!!i2,QP=i2?+i2[1]:0,Or=!Ss&&!!xo&&/Apple Computer/.test(xo.vendor),Cd=Or&&(/Mobile\/\w+/.test(bl)||!!xo&&xo.maxTouchPoints>2),Xs=Cd||(xo?/Mac/.test(xo.platform):!1),JP=xo?/Win/.test(xo.platform):!1,Ho=/Android \d/.test(bl),xp=!!r3&&"webkitFontSmoothing"in r3.documentElement.style,Hq=xp?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Uq(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function ko(e,t){return typeof e=="number"?e:e[t]}function $q(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function s3(e,t,n){let r=e.someProp("scrollThreshold")||0,s=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument;for(let o=n||e.dom;o;){if(o.nodeType!=1){o=bd(o);continue}let l=o,c=l==i.body,d=c?Uq(i):$q(l),h=0,g=0;if(t.top<d.top+ko(r,"top")?g=-(d.top-t.top+ko(s,"top")):t.bottom>d.bottom-ko(r,"bottom")&&(g=t.bottom-t.top>d.bottom-d.top?t.top+ko(s,"top")-d.top:t.bottom-d.bottom+ko(s,"bottom")),t.left<d.left+ko(r,"left")?h=-(d.left-t.left+ko(s,"left")):t.right>d.right-ko(r,"right")&&(h=t.right-d.right+ko(s,"right")),h||g)if(c)i.defaultView.scrollBy(h,g);else{let w=l.scrollLeft,S=l.scrollTop;g&&(l.scrollTop+=g),h&&(l.scrollLeft+=h);let C=l.scrollLeft-w,A=l.scrollTop-S;t={left:t.left-C,top:t.top-A,right:t.right-C,bottom:t.bottom-A}}let y=c?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(y))break;o=y=="absolute"?o.offsetParent:bd(o)}}function Wq(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,s;for(let i=(t.left+t.right)/2,o=n+1;o<Math.min(innerHeight,t.bottom);o+=5){let l=e.root.elementFromPoint(i,o);if(!l||l==e.dom||!e.dom.contains(l))continue;let c=l.getBoundingClientRect();if(c.top>=n-20){r=l,s=c.top;break}}return{refDOM:r,refTop:s,stack:eD(e.dom)}}function eD(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=bd(r));return t}function Gq({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;tD(n,r==0?0:r-t)}function tD(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:s,left:i}=e[n];r.scrollTop!=s+t&&(r.scrollTop=s+t),r.scrollLeft!=i&&(r.scrollLeft=i)}}let iu=null;function Xq(e){if(e.setActive)return e.setActive();if(iu)return e.focus(iu);let t=eD(e);e.focus(iu==null?{get preventScroll(){return iu={preventScroll:!0},!0}}:void 0),iu||(iu=!1,tD(t,0))}function nD(e,t){let n,r=2e8,s,i=0,o=t.top,l=t.top,c,d;for(let h=e.firstChild,g=0;h;h=h.nextSibling,g++){let y;if(h.nodeType==1)y=h.getClientRects();else if(h.nodeType==3)y=jo(h).getClientRects();else continue;for(let w=0;w<y.length;w++){let S=y[w];if(S.top<=o&&S.bottom>=l){o=Math.max(S.bottom,o),l=Math.min(S.top,l);let C=S.left>t.left?S.left-t.left:S.right<t.left?t.left-S.right:0;if(C<r){n=h,r=C,s=C&&n.nodeType==3?{left:S.right<t.left?S.right:S.left,top:t.top}:t,h.nodeType==1&&C&&(i=g+(t.left>=(S.left+S.right)/2?1:0));continue}}else S.top>t.top&&!c&&S.left<=t.left&&S.right>=t.left&&(c=h,d={left:Math.max(S.left,Math.min(S.right,t.left)),top:S.top});!n&&(t.left>=S.right&&t.top>=S.top||t.left>=S.left&&t.top>=S.bottom)&&(i=g+1)}}return!n&&c&&(n=c,s=d,r=0),n&&n.nodeType==3?Kq(n,s):!n||r&&n.nodeType==1?{node:e,offset:i}:nD(n,s)}function Kq(e,t){let n=e.nodeValue.length,r=document.createRange(),s;for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let o=wa(r,1);if(o.top!=o.bottom&&qC(t,o)){s={node:e,offset:i+(t.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),s||{node:e,offset:0}}function qC(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Yq(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function qq(e,t,n){let{node:r,offset:s}=nD(t,n),i=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();i=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return e.docView.posFromDOM(r,s,i)}function Zq(e,t,n,r){let s=-1;for(let i=t,o=!1;i!=e.dom;){let l=e.docView.nearestDesc(i,!0),c;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((c=l.dom.getBoundingClientRect()).width||c.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&c.left>r.left||c.top>r.top?s=l.posBefore:(!o&&c.right<r.left||c.bottom<r.top)&&(s=l.posAfter),o=!0),!l.contentDOM&&s<0&&!l.node.isText))return(l.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?l.posBefore:l.posAfter;i=l.dom.parentNode}return s>-1?s:e.docView.posFromDOM(t,n,-1)}function rD(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),i=s;;){let o=e.childNodes[i];if(o.nodeType==1){let l=o.getClientRects();for(let c=0;c<l.length;c++){let d=l[c];if(qC(t,d))return rD(o,t,d)}}if((i=(i+1)%r)==s)break}return e}function Qq(e,t){let n=e.dom.ownerDocument,r,s=0,i=Vq(n,t.left,t.top);i&&({node:r,offset:s}=i);let o=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),l;if(!o||!e.dom.contains(o.nodeType!=1?o.parentNode:o)){let d=e.dom.getBoundingClientRect();if(!qC(t,d)||(o=rD(e.dom,t,d),!o))return null}if(Or)for(let d=o;r&&d;d=bd(d))d.draggable&&(r=void 0);if(o=Yq(o,t),r){if(ri&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let h=r.childNodes[s],g;h.nodeName=="IMG"&&(g=h.getBoundingClientRect()).right<=t.left&&g.bottom>t.top&&s++}let d;xp&&s&&r.nodeType==1&&(d=r.childNodes[s-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=t.top&&s--,r==e.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(l=Zq(e,r,s,t))}l==null&&(l=qq(e,o,t));let c=e.docView.nearestDesc(o,!0);return{pos:l,inside:c?c.posAtStart-c.border:-1}}function i3(e){return e.top<e.bottom||e.left<e.right}function wa(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(i3(r))return r}return Array.prototype.find.call(n,i3)||e.getBoundingClientRect()}const Jq=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function sD(e,t,n){let{node:r,offset:s,atom:i}=e.docView.domFromPos(t,n<0?-1:1),o=xp||ri;if(r.nodeType==3)if(o&&(Jq.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let c=wa(jo(r,s,s),n);if(ri&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let d=wa(jo(r,s-1,s-1),-1);if(d.top==c.top){let h=wa(jo(r,s,s+1),-1);if(h.top!=c.top)return cf(h,h.left<d.left)}}return c}else{let c=s,d=s,h=n<0?1:-1;return n<0&&!s?(d++,h=-1):n>=0&&s==r.nodeValue.length?(c--,h=1):n<0?c--:d++,cf(wa(jo(r,c,d),h),h<0)}if(!e.state.doc.resolve(t-(i||0)).parent.inlineContent){if(i==null&&s&&(n<0||s==qs(r))){let c=r.childNodes[s-1];if(c.nodeType==1)return $y(c.getBoundingClientRect(),!1)}if(i==null&&s<qs(r)){let c=r.childNodes[s];if(c.nodeType==1)return $y(c.getBoundingClientRect(),!0)}return $y(r.getBoundingClientRect(),n>=0)}if(i==null&&s&&(n<0||s==qs(r))){let c=r.childNodes[s-1],d=c.nodeType==3?jo(c,qs(c)-(o?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(d)return cf(wa(d,1),!1)}if(i==null&&s<qs(r)){let c=r.childNodes[s];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let d=c?c.nodeType==3?jo(c,0,o?0:1):c.nodeType==1?c:null:null;if(d)return cf(wa(d,-1),!0)}return cf(wa(r.nodeType==3?jo(r):r,-n),n>=0)}function cf(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function $y(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function iD(e,t,n){let r=e.state,s=e.root.activeElement;r!=t&&e.updateState(t),s!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),s!=e.dom&&s&&s.focus()}}function eZ(e,t,n){let r=t.selection,s=n=="up"?r.$from:r.$to;return iD(e,t,()=>{let{node:i}=e.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let l=e.docView.nearestDesc(i,!0);if(!l)break;if(l.node.isBlock){i=l.contentDOM||l.dom;break}i=l.dom.parentNode}let o=sD(e,s.pos,1);for(let l=i.firstChild;l;l=l.nextSibling){let c;if(l.nodeType==1)c=l.getClientRects();else if(l.nodeType==3)c=jo(l,0,l.nodeValue.length).getClientRects();else continue;for(let d=0;d<c.length;d++){let h=c[d];if(h.bottom>h.top+1&&(n=="up"?o.top-h.top>(h.bottom-o.top)*2:h.bottom-o.bottom>(o.bottom-h.top)*2))return!1}}return!0})}const tZ=/[\u0590-\u08ac]/;function nZ(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,i=!s,o=s==r.parent.content.size,l=e.domSelection();return l?!tZ.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?i:o:iD(e,t,()=>{let{focusNode:c,focusOffset:d,anchorNode:h,anchorOffset:g}=e.domSelectionRange(),y=l.caretBidiLevel;l.modify("move",n,"character");let w=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:S,focusOffset:C}=e.domSelectionRange(),A=S&&!w.contains(S.nodeType==1?S:S.parentNode)||c==S&&d==C;try{l.collapse(h,g),c&&(c!=h||d!=g)&&l.extend&&l.extend(c,d)}catch{}return y!=null&&(l.caretBidiLevel=y),A}):r.pos==r.start()||r.pos==r.end()}let o3=null,a3=null,l3=!1;function rZ(e,t,n){return o3==t&&a3==n?l3:(o3=t,a3=n,l3=n=="up"||n=="down"?eZ(e,t,n):nZ(e,t,n))}const si=0,c3=1,Vl=2,yo=3;class yp{constructor(t,n,r,s){this.parent=t,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=si,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==t)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let i,o;if(t==this.contentDOM)i=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.previousSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}else{let i,o;if(t==this.contentDOM)i=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.nextSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(o):this.posAtEnd}let s;if(t==this.dom&&this.contentDOM)s=n>Ir(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=t;;i=i.parentNode){if(i==this.dom){s=!1;break}if(i.previousSibling)break}if(s==null&&n==t.childNodes.length)for(let i=t;;i=i.parentNode){if(i==this.dom){s=!0;break}if(i.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,s=t;s;s=s.parentNode){let i=this.getDesc(s),o;if(i&&(!n||i.node))if(r&&(o=i.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))r=!1;else return i}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let s=t;s;s=s.parentNode){let i=this.getDesc(s);if(i)return i.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],i=r+s.size;if(r==t&&i!=r){for(;!s.border&&s.children.length;)for(let o=0;o<s.children.length;o++){let l=s.children[o];if(l.size){s=l;break}}return s}if(t<i)return s.descAt(t-r-s.border);r=i}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,s=0;for(let i=0;r<this.children.length;r++){let o=this.children[r],l=i+o.size;if(l>t||o instanceof aD){s=t-i;break}i=l}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof oD&&i.side>=0;r--);if(n<=0){let i,o=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,o=!1);return i&&n&&o&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?Ir(i.dom)+1:0}}else{let i,o=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,o=!1);return i&&o&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?Ir(i.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,i=-1;for(let o=r,l=0;;l++){let c=this.children[l],d=o+c.size;if(s==-1&&t<=d){let h=o+c.border;if(t>=h&&n<=d-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(t,n,h);t=o;for(let g=l;g>0;g--){let y=this.children[g-1];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(1)){s=Ir(y.dom)+1;break}t-=y.size}s==-1&&(s=0)}if(s>-1&&(d>n||l==this.children.length-1)){n=d;for(let h=l+1;h<this.children.length;h++){let g=this.children[h];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){i=Ir(g.dom);break}n+=g.size}i==-1&&(i=this.contentDOM.childNodes.length);break}o=d}return{node:this.contentDOM,from:t,to:n,fromOffset:s,toOffset:i}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,s=!1){let i=Math.min(t,n),o=Math.max(t,n);for(let w=0,S=0;w<this.children.length;w++){let C=this.children[w],A=S+C.size;if(i>S&&o<A)return C.setSelection(t-S-C.border,n-S-C.border,r,s);S=A}let l=this.domFromPos(t,t?-1:1),c=n==t?l:this.domFromPos(n,n?-1:1),d=r.root.getSelection(),h=r.domSelectionRange(),g=!1;if((ri||Or)&&t==n){let{node:w,offset:S}=l;if(w.nodeType==3){if(g=!!(S&&w.nodeValue[S-1]==`
`),g&&S==w.nodeValue.length)for(let C=w,A;C;C=C.parentNode){if(A=C.nextSibling){A.nodeName=="BR"&&(l=c={node:A.parentNode,offset:Ir(A)+1});break}let E=C.pmViewDesc;if(E&&E.node&&E.node.isBlock)break}}else{let C=w.childNodes[S-1];g=C&&(C.nodeName=="BR"||C.contentEditable=="false")}}if(ri&&h.focusNode&&h.focusNode!=c.node&&h.focusNode.nodeType==1){let w=h.focusNode.childNodes[h.focusOffset];w&&w.contentEditable=="false"&&(s=!0)}if(!(s||g&&Or)&&Oc(l.node,l.offset,h.anchorNode,h.anchorOffset)&&Oc(c.node,c.offset,h.focusNode,h.focusOffset))return;let y=!1;if((d.extend||t==n)&&!(g&&ri)){d.collapse(l.node,l.offset);try{t!=n&&d.extend(c.node,c.offset),y=!0}catch{}}if(!y){if(t>n){let S=l;l=c,c=S}let w=document.createRange();w.setEnd(c.node,c.offset),w.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(w)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,s=0;s<this.children.length;s++){let i=this.children[s],o=r+i.size;if(r==o?t<=o&&n>=r:t<o&&n>r){let l=r+i.border,c=o-i.border;if(t>=l&&n<=c){this.dirty=t==r||n==o?Vl:c3,t==l&&n==c&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=yo:i.markDirty(t-l,n-l);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?Vl:yo}r=o}this.dirty=Vl}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?Vl:c3;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class oD extends yp{constructor(t,n,r,s){let i,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!i)return s;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=n,this.widget=n,i=this}matchesWidget(t){return this.dirty==si&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class sZ extends yp{constructor(t,n,r,s){super(t,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class Pc extends yp{constructor(t,n,r,s,i){super(t,[],r,s),this.mark=n,this.spec=i}static create(t,n,r,s){let i=s.nodeViews[n.type.name],o=i&&i(n,s,r);return(!o||!o.dom)&&(o=Uc.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Pc(t,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&yo||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=yo&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=si){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=si}}slice(t,n,r){let s=Pc.create(this.parent,this.mark,!0,r),i=this.children,o=this.size;n<o&&(i=a2(i,n,o,r)),t>0&&(i=a2(i,0,t,r));for(let l=0;l<i.length;l++)i[l].parent=s;return s.children=i,s}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class sl extends yp{constructor(t,n,r,s,i,o,l,c,d){super(t,[],i,o),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=l}static create(t,n,r,s,i,o){let l=i.nodeViews[n.type.name],c,d=l&&l(n,i,()=>{if(!c)return o;if(c.parent)return c.parent.posBeforeChild(c)},r,s),h=d&&d.dom,g=d&&d.contentDOM;if(n.isText){if(!h)h=document.createTextNode(n.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:g}=Uc.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!g&&!n.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),n.type.spec.draggable&&(h.draggable=!0));let y=h;return h=uD(h,r,n),d?c=new iZ(t,n,r,s,h,g||null,y,d,i,o+1):n.isText?new lx(t,n,r,s,h,y,i):new sl(t,n,r,s,h,g||null,y,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>Ae.empty)}return t}matchesNode(t,n,r){return this.dirty==si&&t.eq(this.node)&&Zm(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,s=n,i=t.composing?this.localCompositionInfo(t,n):null,o=i&&i.pos>-1?i:null,l=i&&i.pos<0,c=new aZ(this,o&&o.node,t);uZ(this.node,this.innerDeco,(d,h,g)=>{d.spec.marks?c.syncToMarks(d.spec.marks,r,t,h):d.type.side>=0&&!g&&c.syncToMarks(h==this.node.childCount?rn.none:this.node.child(h).marks,r,t,h),c.placeWidget(d,t,s)},(d,h,g,y)=>{c.syncToMarks(d.marks,r,t,y);let w;c.findNodeMatch(d,h,g,y)||l&&t.state.selection.from>s&&t.state.selection.to<s+d.nodeSize&&(w=c.findIndexWithChild(i.node))>-1&&c.updateNodeAt(d,h,g,w,t)||c.updateNextNode(d,h,g,t,y,s)||c.addNode(d,h,g,t,s),s+=d.nodeSize}),c.syncToMarks([],r,t,0),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==Vl)&&(o&&this.protectLocalComposition(t,o),lD(this.contentDOM,this.children,t),Cd&&dZ(this.dom))}localCompositionInfo(t,n){let{from:r,to:s}=t.state.selection;if(!(t.state.selection instanceof ht)||r<n||s>n+this.node.content.size)return null;let i=t.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let o=i.nodeValue,l=fZ(this.node.content,o,r-n,s-n);return l<0?null:{node:i,pos:l,text:o}}else return{node:i,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new sZ(this,i,n,s);t.input.compositionNodes.push(o),this.children=a2(this.children,r,r+s.length,t,o)}update(t,n,r,s){return this.dirty==yo||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,s),!0)}updateInner(t,n,r,s){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=si}updateOuterDeco(t){if(Zm(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=cD(this.dom,this.nodeDOM,o2(this.outerDeco,this.node,n),o2(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function u3(e,t,n,r,s){uD(r,t,e);let i=new sl(void 0,e,t,n,r,r,r,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class lx extends sl{constructor(t,n,r,s,i,o,l){super(t,n,r,s,i,null,o,l,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,s){return this.dirty==yo||this.dirty!=si&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=si||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=t,this.dirty=si,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let s=this.node.cut(t,n),i=document.createTextNode(s.text);return new lx(this.parent,s,this.outerDeco,this.innerDeco,i,i,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=yo)}get domAtom(){return!1}isText(t){return this.node.text==t}}class aD extends yp{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==si&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class iZ extends sl{constructor(t,n,r,s,i,o,l,c,d,h){super(t,n,r,s,i,o,l,d,h),this.spec=c}update(t,n,r,s){if(this.dirty==yo)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let i=this.spec.update(t,n,r);return i&&this.updateInner(t,n,r,s),i}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,s){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function lD(e,t,n){let r=e.firstChild,s=!1;for(let i=0;i<t.length;i++){let o=t[i],l=o.dom;if(l.parentNode==e){for(;l!=r;)r=d3(r),s=!0;r=r.nextSibling}else s=!0,e.insertBefore(l,r);if(o instanceof Pc){let c=r?r.previousSibling:e.lastChild;lD(o.contentDOM,o.children,n),r=c?c.nextSibling:e.firstChild}}for(;r;)r=d3(r),s=!0;s&&n.trackWrites==e&&(n.trackWrites=null)}const Gf=function(e){e&&(this.nodeName=e)};Gf.prototype=Object.create(null);const Hl=[new Gf];function o2(e,t,n){if(e.length==0)return Hl;let r=n?Hl[0]:new Gf,s=[r];for(let i=0;i<e.length;i++){let o=e[i].type.attrs;if(o){o.nodeName&&s.push(r=new Gf(o.nodeName));for(let l in o){let c=o[l];c!=null&&(n&&s.length==1&&s.push(r=new Gf(t.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+c:l=="style"?r.style=(r.style?r.style+";":"")+c:l!="nodeName"&&(r[l]=c))}}}return s}function cD(e,t,n,r){if(n==Hl&&r==Hl)return t;let s=t;for(let i=0;i<r.length;i++){let o=r[i],l=n[i];if(i){let c;l&&l.nodeName==o.nodeName&&s!=e&&(c=s.parentNode)&&c.nodeName.toLowerCase()==o.nodeName||(c=document.createElement(o.nodeName),c.pmIsDeco=!0,c.appendChild(s),l=Hl[0]),s=c}oZ(s,l||Hl[0],o)}return s}function oZ(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)s.indexOf(r[i])==-1&&e.classList.remove(r[i]);for(let i=0;i<s.length;i++)r.indexOf(s[i])==-1&&e.classList.add(s[i]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(t.style);)e.style.removeProperty(s[1])}n.style&&(e.style.cssText+=n.style)}}function uD(e,t,n){return cD(e,e,Hl,o2(t,n,e.nodeType!=1))}function Zm(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function d3(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class aZ{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=lZ(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r,s){let i=0,o=this.stack.length>>1,l=Math.min(o,t.length);for(;i<l&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=si,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);let c=-1,d=this.top.children.length;s<this.preMatch.index&&(d=Math.min(this.index+3,d));for(let h=this.index;h<d;h++){let g=this.top.children[h];if(g.matchesMark(t[o])&&!this.isLocked(g.dom)){c=h;break}}if(c>-1)c>this.index&&(this.changed=!0,this.destroyBetween(this.index,c)),this.top=this.top.children[this.index];else{let h=Pc.create(this.top,t[o],n,r);this.top.children.splice(this.index,0,h),this.top=h,this.changed=!0}this.index=0,o++}}findNodeMatch(t,n,r,s){let i=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(t,n,r))i=this.top.children.indexOf(o,this.index);else for(let l=this.index,c=Math.min(this.top.children.length,l+5);l<c;l++){let d=this.top.children[l];if(d.matchesNode(t,n,r)&&!this.preMatch.matched.has(d)){i=l;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(t,n,r,s,i){let o=this.top.children[s];return o.dirty==yo&&o.dom==o.contentDOM&&(o.dirty=Vl),o.update(t,n,r,i)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}t=n}}updateNextNode(t,n,r,s,i,o){for(let l=this.index;l<this.top.children.length;l++){let c=this.top.children[l];if(c instanceof sl){let d=this.preMatch.matched.get(c);if(d!=null&&d!=i)return!1;let h=c.dom,g,y=this.isLocked(h)&&!(t.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==t.text&&c.dirty!=yo&&Zm(n,c.outerDeco));if(!y&&c.update(t,n,r,s))return this.destroyBetween(this.index,l),c.dom!=h&&(this.changed=!0),this.index++,!0;if(!y&&(g=this.recreateWrapper(c,t,n,r,s,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=g,g.contentDOM&&(g.dirty=Vl,g.updateChildren(s,o+1),g.dirty=si),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,s,i,o){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!Zm(r,t.outerDeco)||!s.eq(t.innerDeco))return null;let l=sl.create(this.top,n,r,s,i,o);if(l.contentDOM){l.children=t.children,t.children=[];for(let c of l.children)c.parent=l}return t.destroy(),l}addNode(t,n,r,s,i){let o=sl.create(this.top,t,n,r,s,i);o.contentDOM&&o.updateChildren(s,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(t)&&(t==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let i=new oD(this.top,t,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof Pc;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof lx)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((Or||mr)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new aD(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function lZ(e,t){let n=t,r=n.children.length,s=e.childCount,i=new Map,o=[];e:for(;s>0;){let l;for(;;)if(r){let d=n.children[r-1];if(d instanceof Pc)n=d,r=d.children.length;else{l=d,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let c=l.node;if(c){if(c!=e.child(s-1))break;--s,i.set(l,s),o.push(l)}}return{index:s,matched:i,matches:o.reverse()}}function cZ(e,t){return e.type.side-t.type.side}function uZ(e,t,n,r){let s=t.locals(e),i=0;if(s.length==0){for(let d=0;d<e.childCount;d++){let h=e.child(d);r(h,s,t.forChild(i,h),d),i+=h.nodeSize}return}let o=0,l=[],c=null;for(let d=0;;){let h,g;for(;o<s.length&&s[o].to==i;){let A=s[o++];A.widget&&(h?(g||(g=[h])).push(A):h=A)}if(h)if(g){g.sort(cZ);for(let A=0;A<g.length;A++)n(g[A],d,!!c)}else n(h,d,!!c);let y,w;if(c)w=-1,y=c,c=null;else if(d<e.childCount)w=d,y=e.child(d++);else break;for(let A=0;A<l.length;A++)l[A].to<=i&&l.splice(A--,1);for(;o<s.length&&s[o].from<=i&&s[o].to>i;)l.push(s[o++]);let S=i+y.nodeSize;if(y.isText){let A=S;o<s.length&&s[o].from<A&&(A=s[o].from);for(let E=0;E<l.length;E++)l[E].to<A&&(A=l[E].to);A<S&&(c=y.cut(A-i),y=y.cut(0,A-i),S=A,w=-1)}else for(;o<s.length&&s[o].to<S;)o++;let C=y.isInline&&!y.isLeaf?l.filter(A=>!A.inline):l.slice();r(y,C,t.forChild(i,y),w),i=S}}function dZ(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function fZ(e,t,n,r){for(let s=0,i=0;s<e.childCount&&i<=r;){let o=e.child(s++),l=i;if(i+=o.nodeSize,!o.isText)continue;let c=o.text;for(;s<e.childCount;){let d=e.child(s++);if(i+=d.nodeSize,!d.isText)break;c+=d.text}if(i>=n){if(i>=r&&c.slice(r-t.length-l,r-l)==t)return r-t.length;let d=l<r?c.lastIndexOf(t,r-l-1):-1;if(d>=0&&d+t.length+l>=n)return l+d;if(n==r&&c.length>=r+t.length-l&&c.slice(r-l,r-l+t.length)==t)return r}}return-1}function a2(e,t,n,r,s){let i=[];for(let o=0,l=0;o<e.length;o++){let c=e[o],d=l,h=l+=c.size;d>=n||h<=t?i.push(c):(d<t&&i.push(c.slice(0,t-d,r)),s&&(i.push(s),s=void 0),h>n&&i.push(c.slice(n-d,c.size,r)))}return i}function ZC(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let s=e.docView.nearestDesc(n.focusNode),i=s&&s.size==0,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),c,d;if(ax(n)){for(c=o;s&&!s.node;)s=s.parent;let g=s.node;if(s&&g.isAtom&&lt.isSelectable(g)&&s.parent&&!(g.isInline&&Fq(n.focusNode,n.focusOffset,s.dom))){let y=s.posBefore;d=new lt(o==y?l:r.resolve(y))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let g=o,y=o;for(let w=0;w<n.rangeCount;w++){let S=n.getRangeAt(w);g=Math.min(g,e.docView.posFromDOM(S.startContainer,S.startOffset,1)),y=Math.max(y,e.docView.posFromDOM(S.endContainer,S.endOffset,-1))}if(g<0)return null;[c,o]=y==e.state.selection.anchor?[y,g]:[g,y],l=r.resolve(o)}else c=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null}let h=r.resolve(c);if(!d){let g=t=="pointer"||e.state.selection.head<l.pos&&!i?1:-1;d=QC(e,h,l,g)}return d}function dD(e){return e.editable?e.hasFocus():hD(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Wo(e,t=!1){let n=e.state.selection;if(fD(e,n),!!dD(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&mr){let r=e.domSelectionRange(),s=e.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&Oc(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)pZ(e);else{let{anchor:r,head:s}=n,i,o;f3&&!(n instanceof ht)&&(n.$from.parent.inlineContent||(i=h3(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=h3(e,n.to))),e.docView.setSelection(r,s,e,t),f3&&(i&&p3(i),o&&p3(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&hZ(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const f3=Or||mr&&QP<63;function h3(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),s=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(Or&&s&&s.contentEditable=="false")return Wy(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return Wy(s);if(i)return Wy(i)}}function Wy(e){return e.contentEditable="true",Or&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function p3(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function hZ(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!dD(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function pZ(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.collapse(n.parentNode,Ir(n)+1):t.collapse(n,0),!r&&!e.state.selection.visible&&Ss&&rl<=11&&(n.disabled=!0,n.disabled=!1)}function fD(e,t){if(t instanceof lt){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(m3(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else m3(e)}function m3(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function QC(e,t,n,r){return e.someProp("createSelectionBetween",s=>s(e,t,n))||ht.between(t,n,r)}function g3(e){return e.editable&&!e.hasFocus()?!1:hD(e)}function hD(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function mZ(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return Oc(t.node,t.offset,n.anchorNode,n.anchorOffset)}function l2(e,t){let{$anchor:n,$head:r}=e.selection,s=t>0?n.max(r):n.min(r),i=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return i&&Ct.findFrom(i,t)}function Ca(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function x3(e,t,n){let r=e.state.selection;if(r instanceof ht)if(n.indexOf("s")>-1){let{$head:s}=r,i=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=e.state.doc.resolve(s.pos+i.nodeSize*(t<0?-1:1));return Ca(e,new ht(r.$anchor,o))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let s=l2(e.state,t);return s&&s instanceof lt?Ca(e,s):!1}else if(!(Xs&&n.indexOf("m")>-1)){let s=r.$head,i=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter,o;if(!i||i.isText)return!1;let l=t<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(o=e.docView.descAt(l))&&!o.contentDOM?lt.isSelectable(i)?Ca(e,new lt(t<0?e.state.doc.resolve(s.pos-i.nodeSize):s)):xp?Ca(e,new ht(e.state.doc.resolve(t<0?l:l+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof lt&&r.node.isInline)return Ca(e,new ht(t>0?r.$to:r.$from));{let s=l2(e.state,t);return s?Ca(e,s):!1}}}function Qm(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Xf(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function ou(e,t){return t<0?gZ(e):xZ(e)}function gZ(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let s,i,o=!1;for(ri&&n.nodeType==1&&r<Qm(n)&&Xf(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(Xf(l,-1))s=n,i=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(pD(n))break;{let l=n.previousSibling;for(;l&&Xf(l,-1);)s=n.parentNode,i=Ir(l),l=l.previousSibling;if(l)n=l,r=Qm(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}o?c2(e,n,r):s&&c2(e,s,i)}function xZ(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let s=Qm(n),i,o;for(;;)if(r<s){if(n.nodeType!=1)break;let l=n.childNodes[r];if(Xf(l,1))i=n,o=++r;else break}else{if(pD(n))break;{let l=n.nextSibling;for(;l&&Xf(l,1);)i=l.parentNode,o=Ir(l)+1,l=l.nextSibling;if(l)n=l,r=0,s=Qm(n);else{if(n=n.parentNode,n==e.dom)break;r=s=0}}}i&&c2(e,i,o)}function pD(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function yZ(e,t){for(;e&&t==e.childNodes.length&&!gp(e);)t=Ir(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function wZ(e,t){for(;e&&!t&&!gp(e);)t=Ir(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function c2(e,t,n){if(t.nodeType!=3){let i,o;(o=yZ(t,n))?(t=o,n=0):(i=wZ(t,n))&&(t=i,n=i.nodeValue.length)}let r=e.domSelection();if(!r)return;if(ax(r)){let i=document.createRange();i.setEnd(t,n),i.setStart(t,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:s}=e;setTimeout(()=>{e.state==s&&Wo(e)},50)}function y3(e,t){let n=e.state.doc.resolve(t);if(!(mr||JP)&&n.parent.inlineContent){let s=e.coordsAtPos(t);if(t>n.start()){let i=e.coordsAtPos(t-1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(t<n.end()){let i=e.coordsAtPos(t+1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function w3(e,t,n){let r=e.state.selection;if(r instanceof ht&&!r.empty||n.indexOf("s")>-1||Xs&&n.indexOf("m")>-1)return!1;let{$from:s,$to:i}=r;if(!s.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let o=l2(e.state,t);if(o&&o instanceof lt)return Ca(e,o)}if(!s.parent.inlineContent){let o=t<0?s:i,l=r instanceof ni?Ct.near(o,t):Ct.findFrom(o,t);return l?Ca(e,l):!1}return!1}function v3(e,t){if(!(e.state.selection instanceof ht))return!0;let{$head:n,$anchor:r,empty:s}=e.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let i=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let o=e.state.tr;return t<0?o.delete(n.pos-i.nodeSize,n.pos):o.delete(n.pos,n.pos+i.nodeSize),e.dispatch(o),!0}return!1}function b3(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function vZ(e){if(!Or||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;b3(e,r,"true"),setTimeout(()=>b3(e,r,"false"),20)}return!1}function bZ(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function CZ(e,t){let n=t.keyCode,r=bZ(t);if(n==8||Xs&&n==72&&r=="c")return v3(e,-1)||ou(e,-1);if(n==46&&!t.shiftKey||Xs&&n==68&&r=="c")return v3(e,1)||ou(e,1);if(n==13||n==27)return!0;if(n==37||Xs&&n==66&&r=="c"){let s=n==37?y3(e,e.state.selection.from)=="ltr"?-1:1:-1;return x3(e,s,r)||ou(e,s)}else if(n==39||Xs&&n==70&&r=="c"){let s=n==39?y3(e,e.state.selection.from)=="ltr"?1:-1:1;return x3(e,s,r)||ou(e,s)}else{if(n==38||Xs&&n==80&&r=="c")return w3(e,-1,r)||ou(e,-1);if(n==40||Xs&&n==78&&r=="c")return vZ(e)||w3(e,1,r)||ou(e,1);if(r==(Xs?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function JC(e,t){e.someProp("transformCopied",w=>{t=w(t,e)});let n=[],{content:r,openStart:s,openEnd:i}=t;for(;s>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,i--;let w=r.firstChild;n.push(w.type.name,w.attrs!=w.type.defaultAttrs?w.attrs:null),r=w.content}let o=e.someProp("clipboardSerializer")||Uc.fromSchema(e.state.schema),l=vD(),c=l.createElement("div");c.appendChild(o.serializeFragment(r,{document:l}));let d=c.firstChild,h,g=0;for(;d&&d.nodeType==1&&(h=wD[d.nodeName.toLowerCase()]);){for(let w=h.length-1;w>=0;w--){let S=l.createElement(h[w]);for(;c.firstChild;)S.appendChild(c.firstChild);c.appendChild(S),g++}d=c.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${s} ${i}${g?` -${g}`:""} ${JSON.stringify(n)}`);let y=e.someProp("clipboardTextSerializer",w=>w(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:c,text:y,slice:t}}function mD(e,t,n,r,s){let i=s.parent.type.spec.code,o,l;if(!n&&!t)return null;let c=!!t&&(r||i||!n);if(c){if(e.someProp("transformPastedText",y=>{t=y(t,i||r,e)}),i)return l=new He(Ae.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",y=>{l=y(l,e,!0)}),l;let g=e.someProp("clipboardTextParser",y=>y(t,s,r,e));if(g)l=g;else{let y=s.marks(),{schema:w}=e.state,S=Uc.fromSchema(w);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(C=>{let A=o.appendChild(document.createElement("p"));C&&A.appendChild(S.serializeNode(w.text(C,y)))})}}else e.someProp("transformPastedHTML",g=>{n=g(n,e)}),o=AZ(n),xp&&TZ(o);let d=o&&o.querySelector("[data-pm-slice]"),h=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let g=+h[3];g>0;g--){let y=o.firstChild;for(;y&&y.nodeType!=1;)y=y.nextSibling;if(!y)break;o=y}if(l||(l=(e.someProp("clipboardParser")||e.someProp("domParser")||nl.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(c||h),context:s,ruleFromNode(y){return y.nodeName=="BR"&&!y.nextSibling&&y.parentNode&&!SZ.test(y.parentNode.nodeName)?{ignore:!0}:null}})),h)l=kZ(C3(l,+h[1],+h[2]),h[4]);else if(l=He.maxOpen(EZ(l.content,s),!0),l.openStart||l.openEnd){let g=0,y=0;for(let w=l.content.firstChild;g<l.openStart&&!w.type.spec.isolating;g++,w=w.firstChild);for(let w=l.content.lastChild;y<l.openEnd&&!w.type.spec.isolating;y++,w=w.lastChild);l=C3(l,g,y)}return e.someProp("transformPasted",g=>{l=g(l,e,c)}),l}const SZ=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function EZ(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let s=t.node(n).contentMatchAt(t.index(n)),i,o=[];if(e.forEach(l=>{if(!o)return;let c=s.findWrapping(l.type),d;if(!c)return o=null;if(d=o.length&&i.length&&xD(c,i,l,o[o.length-1],0))o[o.length-1]=d;else{o.length&&(o[o.length-1]=yD(o[o.length-1],i.length));let h=gD(l,c);o.push(h),s=s.matchType(h.type),i=c}}),o)return Ae.from(o)}return e}function gD(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,Ae.from(e));return e}function xD(e,t,n,r,s){if(s<e.length&&s<t.length&&e[s]==t[s]){let i=xD(e,t,n,r.lastChild,s+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(s==e.length-1?n.type:e[s+1]))return r.copy(r.content.append(Ae.from(gD(n,e,s+1))))}}function yD(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,yD(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(Ae.empty,!0);return e.copy(n.append(r))}function u2(e,t,n,r,s,i){let o=t<0?e.firstChild:e.lastChild,l=o.content;return e.childCount>1&&(i=0),s<r-1&&(l=u2(l,t,n,r,s+1,i)),s>=n&&(l=t<0?o.contentMatchAt(0).fillBefore(l,i<=s).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(Ae.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(l))}function C3(e,t,n){return t<e.openStart&&(e=new He(u2(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new He(u2(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const wD={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let S3=null;function vD(){return S3||(S3=document.implementation.createHTMLDocument("title"))}let Gy=null;function NZ(e){let t=window.trustedTypes;return t?(Gy||(Gy=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Gy.createHTML(e)):e}function AZ(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=vD().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),s;if((s=r&&wD[r[1].toLowerCase()])&&(e=s.map(i=>"<"+i+">").join("")+e+s.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=NZ(e),s)for(let i=0;i<s.length;i++)n=n.querySelector(s[i])||n;return n}function TZ(e){let t=e.querySelectorAll(mr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function kZ(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:s,openStart:i,openEnd:o}=e;for(let l=r.length-2;l>=0;l-=2){let c=n.nodes[r[l]];if(!c||c.hasRequiredAttrs())break;s=Ae.from(c.create(r[l+1],s)),i++,o++}return new He(s,i,o)}const ss={},is={},IZ={touchstart:!0,touchmove:!0};class RZ{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function MZ(e){for(let t in ss){let n=ss[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{OZ(e,r)&&!eS(e,r)&&(e.editable||!(r.type in is))&&n(e,r)},IZ[t]?{passive:!0}:void 0)}Or&&e.dom.addEventListener("input",()=>null),d2(e)}function $a(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function _Z(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function d2(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>eS(e,r))})}function eS(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function OZ(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function PZ(e,t){!eS(e,t)&&ss[t.type]&&(e.editable||!(t.type in is))&&ss[t.type](e,t)}is.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!CD(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Ho&&mr&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),Cd&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",s=>s(e,Ll(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||CZ(e,n)?n.preventDefault():$a(e,"key")};is.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};is.keypress=(e,t)=>{let n=t;if(CD(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||Xs&&n.metaKey)return;if(e.someProp("handleKeyPress",s=>s(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof ht)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode),i=()=>e.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!e.someProp("handleTextInput",o=>o(e,r.$from.pos,r.$to.pos,s,i))&&e.dispatch(i()),n.preventDefault()}};function cx(e){return{left:e.clientX,top:e.clientY}}function DZ(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function tS(e,t,n,r,s){if(r==-1)return!1;let i=e.state.doc.resolve(r);for(let o=i.depth+1;o>0;o--)if(e.someProp(t,l=>o>i.depth?l(e,n,i.nodeAfter,i.before(o),s,!0):l(e,n,i.node(o),i.before(o),s,!1)))return!0;return!1}function Wu(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function jZ(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&lt.isSelectable(r)?(Wu(e,new lt(n)),!0):!1}function LZ(e,t){if(t==-1)return!1;let n=e.state.selection,r,s;n instanceof lt&&(r=n.node);let i=e.state.doc.resolve(t);for(let o=i.depth+1;o>0;o--){let l=o>i.depth?i.nodeAfter:i.node(o);if(lt.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?s=i.before(n.$from.depth):s=i.before(o);break}}return s!=null?(Wu(e,lt.create(e.state.doc,s)),!0):!1}function BZ(e,t,n,r,s){return tS(e,"handleClickOn",t,n,r)||e.someProp("handleClick",i=>i(e,t,r))||(s?LZ(e,n):jZ(e,n))}function FZ(e,t,n,r){return tS(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",s=>s(e,t,r))}function zZ(e,t,n,r){return tS(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",s=>s(e,t,r))||VZ(e,n,r)}function VZ(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(Wu(e,ht.create(r,0,r.content.size)),!0):!1;let s=r.resolve(t);for(let i=s.depth+1;i>0;i--){let o=i>s.depth?s.nodeAfter:s.node(i),l=s.before(i);if(o.inlineContent)Wu(e,ht.create(r,l+1,l+1+o.content.size));else if(lt.isSelectable(o))Wu(e,lt.create(r,l));else continue;return!0}}function nS(e){return Jm(e)}const bD=Xs?"metaKey":"ctrlKey";ss.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=nS(e),s=Date.now(),i="singleClick";s-e.input.lastClick.time<500&&DZ(n,e.input.lastClick)&&!n[bD]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?i="doubleClick":e.input.lastClick.type=="doubleClick"&&(i="tripleClick")),e.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:i,button:n.button};let o=e.posAtCoords(cx(n));o&&(i=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new HZ(e,o,n,!!r)):(i=="doubleClick"?FZ:zZ)(e,o.pos,o.inside,n)?n.preventDefault():$a(e,"pointer"))};class HZ{constructor(t,n,r,s){this.view=t,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[bD],this.allowDefault=r.shiftKey;let i,o;if(n.inside>-1)i=t.state.doc.nodeAt(n.inside),o=n.inside;else{let h=t.state.doc.resolve(n.pos);i=h.parent,o=h.depth?h.before():0}const l=s?null:r.target,c=l?t.docView.nearestDesc(l,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:d}=t.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||d instanceof lt&&d.from<=o&&d.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ri&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),$a(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Wo(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(cx(t))),this.updateAllowDefault(t),this.allowDefault||!n?$a(this.view,"pointer"):BZ(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||Or&&this.mightDrag&&!this.mightDrag.node.isAtom||mr&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Wu(this.view,Ct.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):$a(this.view,"pointer")}move(t){this.updateAllowDefault(t),$a(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}ss.touchstart=e=>{e.input.lastTouch=Date.now(),nS(e),$a(e,"pointer")};ss.touchmove=e=>{e.input.lastTouch=Date.now(),$a(e,"pointer")};ss.contextmenu=e=>nS(e);function CD(e,t){return e.composing?!0:Or&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const UZ=Ho?5e3:-1;is.compositionstart=is.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof ht&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||mr&&JP&&$Z(e)))e.markCursor=e.state.storedMarks||n.marks(),Jm(e,!0),e.markCursor=null;else if(Jm(e,!t.selection.empty),ri&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let s=r.focusNode,i=r.focusOffset;s&&s.nodeType==1&&i!=0;){let o=i<0?s.lastChild:s.childNodes[i-1];if(!o)break;if(o.nodeType==3){let l=e.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else s=o,i=-1}}e.input.composing=!0}SD(e,UZ)};function $Z(e){let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(!t||t.nodeType!=1||n>=t.childNodes.length)return!1;let r=t.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}is.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.badSafariComposition?e.domObserver.forceFlush():e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,SD(e,20))};function SD(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>Jm(e),t))}function ED(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=GZ());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function WZ(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=Lq(t.focusNode,t.focusOffset),r=Bq(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,i=e.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!s||!s.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function GZ(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function Jm(e,t=!1){if(!(Ho&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),ED(e),t||e.docView&&e.docView.dirty){let n=ZC(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function XZ(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const Ph=Ss&&rl<15||Cd&&Hq<604;ss.copy=is.cut=(e,t)=>{let n=t,r=e.state.selection,s=n.type=="cut";if(r.empty)return;let i=Ph?null:n.clipboardData,o=r.content(),{dom:l,text:c}=JC(e,o);i?(n.preventDefault(),i.clearData(),i.setData("text/html",l.innerHTML),i.setData("text/plain",c)):XZ(e,l),s&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function KZ(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function YZ(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Dh(e,r.value,null,s,t):Dh(e,r.textContent,r.innerHTML,s,t)},50)}function Dh(e,t,n,r,s){let i=mD(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",c=>c(e,s,i||He.empty)))return!0;if(!i)return!1;let o=KZ(i),l=o?e.state.tr.replaceSelectionWith(o,r):e.state.tr.replaceSelection(i);return e.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function ND(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}is.paste=(e,t)=>{let n=t;if(e.composing&&!Ho)return;let r=Ph?null:n.clipboardData,s=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&Dh(e,ND(r),r.getData("text/html"),s,n)?n.preventDefault():YZ(e,n)};class AD{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const qZ=Xs?"altKey":"ctrlKey";function TD(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[qZ]}ss.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=e.state.selection,i=s.empty?null:e.posAtCoords(cx(n)),o;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof lt?s.to-1:s.to))){if(r&&r.mightDrag)o=lt.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let g=e.docView.nearestDesc(n.target,!0);g&&g.node.type.spec.draggable&&g!=e.docView&&(o=lt.create(e.state.doc,g.posBefore))}}let l=(o||e.state.selection).content(),{dom:c,text:d,slice:h}=JC(e,l);(!n.dataTransfer.files.length||!mr||QP>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Ph?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",Ph||n.dataTransfer.setData("text/plain",d),e.dragging=new AD(h,TD(e,n),o)};ss.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};is.dragover=is.dragenter=(e,t)=>t.preventDefault();is.drop=(e,t)=>{try{ZZ(e,t,e.dragging)}finally{e.dragging=null}};function ZZ(e,t,n){if(!t.dataTransfer)return;let r=e.posAtCoords(cx(t));if(!r)return;let s=e.state.doc.resolve(r.pos),i=n&&n.slice;i?e.someProp("transformPasted",w=>{i=w(i,e,!1)}):i=mD(e,ND(t.dataTransfer),Ph?null:t.dataTransfer.getData("text/html"),!1,s);let o=!!(n&&TD(e,t));if(e.someProp("handleDrop",w=>w(e,t,i||He.empty,o))){t.preventDefault();return}if(!i)return;t.preventDefault();let l=i?LP(e.state.doc,s.pos,i):s.pos;l==null&&(l=s.pos);let c=e.state.tr;if(o){let{node:w}=n;w?w.replace(c):c.deleteSelection()}let d=c.mapping.map(l),h=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,g=c.doc;if(h?c.replaceRangeWith(d,d,i.content.firstChild):c.replaceRange(d,d,i),c.doc.eq(g))return;let y=c.doc.resolve(d);if(h&&lt.isSelectable(i.content.firstChild)&&y.nodeAfter&&y.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new lt(y));else{let w=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((S,C,A,E)=>w=E),c.setSelection(QC(e,y,c.doc.resolve(w)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))}ss.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Wo(e)},20))};ss.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};ss.beforeinput=(e,t)=>{if(mr&&Ho&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",i=>i(e,Ll(8,"Backspace")))))return;let{$cursor:s}=e.state.selection;s&&s.pos>0&&e.dispatch(e.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let e in is)ss[e]=is[e];function jh(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class e1{constructor(t,n){this.toDOM=t,this.spec=n||hc,this.side=this.spec.side||0}map(t,n,r,s){let{pos:i,deleted:o}=t.mapResult(n.from+s,this.side<0?-1:1);return o?null:new ns(i-r,i-r,this)}valid(){return!0}eq(t){return this==t||t instanceof e1&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&jh(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class il{constructor(t,n){this.attrs=t,this.spec=n||hc}map(t,n,r,s){let i=t.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,o=t.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return i>=o?null:new ns(i,o,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof il&&jh(this.attrs,t.attrs)&&jh(this.spec,t.spec)}static is(t){return t.type instanceof il}destroy(){}}class rS{constructor(t,n){this.attrs=t,this.spec=n||hc}map(t,n,r,s){let i=t.mapResult(n.from+s,1);if(i.deleted)return null;let o=t.mapResult(n.to+s,-1);return o.deleted||o.pos<=i.pos?null:new ns(i.pos-r,o.pos-r,this)}valid(t,n){let{index:r,offset:s}=t.content.findIndex(n.from),i;return s==n.from&&!(i=t.child(r)).isText&&s+i.nodeSize==n.to}eq(t){return this==t||t instanceof rS&&jh(this.attrs,t.attrs)&&jh(this.spec,t.spec)}destroy(){}}class ns{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new ns(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new ns(t,t,new e1(n,r))}static inline(t,n,r,s){return new ns(t,n,new il(r,s))}static node(t,n,r,s){return new ns(t,n,new rS(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof il}get widget(){return this.type instanceof e1}}const hu=[],hc={};class An{constructor(t,n){this.local=t.length?t:hu,this.children=n.length?n:hu}static create(t,n){return n.length?t1(n,t,0,hc):Ur}find(t,n,r){let s=[];return this.findInner(t??0,n??1e9,s,0,r),s}findInner(t,n,r,s,i){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=t&&(!i||i(l.spec))&&r.push(l.copy(l.from+s,l.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>t){let l=this.children[o]+1;this.children[o+2].findInner(t-l,n-l,r,s+l,i)}}map(t,n,r){return this==Ur||t.maps.length==0?this:this.mapInner(t,n,0,0,r||hc)}mapInner(t,n,r,s,i){let o;for(let l=0;l<this.local.length;l++){let c=this.local[l].map(t,r,s);c&&c.type.valid(n,c)?(o||(o=[])).push(c):i.onRemove&&i.onRemove(this.local[l].spec)}return this.children.length?QZ(this.children,o||[],t,n,r,s,i):o?new An(o.sort(pc),hu):Ur}add(t,n){return n.length?this==Ur?An.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let s,i=0;t.forEach((l,c)=>{let d=c+r,h;if(h=ID(n,l,d)){for(s||(s=this.children.slice());i<s.length&&s[i]<c;)i+=3;s[i]==c?s[i+2]=s[i+2].addInner(l,h,d+1):s.splice(i,0,c,c+l.nodeSize,t1(h,l,d+1,hc)),i+=3}});let o=kD(i?RD(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||o.splice(l--,1);return new An(o.length?this.local.concat(o).sort(pc):this.local,s||this.children)}remove(t){return t.length==0||this==Ur?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,s=this.local;for(let i=0;i<r.length;i+=3){let o,l=r[i]+n,c=r[i+1]+n;for(let h=0,g;h<t.length;h++)(g=t[h])&&g.from>l&&g.to<c&&(t[h]=null,(o||(o=[])).push(g));if(!o)continue;r==this.children&&(r=this.children.slice());let d=r[i+2].removeInner(o,l+1);d!=Ur?r[i+2]=d:(r.splice(i,3),i-=3)}if(s.length){for(let i=0,o;i<t.length;i++)if(o=t[i])for(let l=0;l<s.length;l++)s[l].eq(o,n)&&(s==this.local&&(s=this.local.slice()),s.splice(l--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new An(s,r):Ur}forChild(t,n){if(this==Ur)return this;if(n.isLeaf)return An.empty;let r,s;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=t){this.children[l]==t&&(r=this.children[l+2]);break}let i=t+1,o=i+n.content.size;for(let l=0;l<this.local.length;l++){let c=this.local[l];if(c.from<o&&c.to>i&&c.type instanceof il){let d=Math.max(i,c.from)-i,h=Math.min(o,c.to)-i;d<h&&(s||(s=[])).push(c.copy(d,h))}}if(s){let l=new An(s.sort(pc),hu);return r?new Ra([l,r]):l}return r||Ur}eq(t){if(this==t)return!0;if(!(t instanceof An)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return sS(this.localsInner(t))}localsInner(t){if(this==Ur)return hu;if(t.inlineContent||!this.local.some(il.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof il||n.push(this.local[r]);return n}forEachSet(t){t(this)}}An.empty=new An([],[]);An.removeOverlap=sS;const Ur=An.empty;class Ra{constructor(t){this.members=t}map(t,n){const r=this.members.map(s=>s.map(t,n,hc));return Ra.from(r)}forChild(t,n){if(n.isLeaf)return An.empty;let r=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(t,n);i!=Ur&&(i instanceof Ra?r=r.concat(i.members):r.push(i))}return Ra.from(r)}eq(t){if(!(t instanceof Ra)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(t);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let o=0;o<i.length;o++)n.push(i[o])}}return n?sS(r?n:n.sort(pc)):hu}static from(t){switch(t.length){case 0:return Ur;case 1:return t[0];default:return new Ra(t.every(n=>n instanceof An)?t:t.reduce((n,r)=>n.concat(r instanceof An?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function QZ(e,t,n,r,s,i,o){let l=e.slice();for(let d=0,h=i;d<n.maps.length;d++){let g=0;n.maps[d].forEach((y,w,S,C)=>{let A=C-S-(w-y);for(let E=0;E<l.length;E+=3){let k=l[E+1];if(k<0||y>k+h-g)continue;let I=l[E]+h-g;w>=I?l[E+1]=y<=I?-2:-1:y>=h&&A&&(l[E]+=A,l[E+1]+=A)}g+=A}),h=n.maps[d].map(h,-1)}let c=!1;for(let d=0;d<l.length;d+=3)if(l[d+1]<0){if(l[d+1]==-2){c=!0,l[d+1]=-1;continue}let h=n.map(e[d]+i),g=h-s;if(g<0||g>=r.content.size){c=!0;continue}let y=n.map(e[d+1]+i,-1),w=y-s,{index:S,offset:C}=r.content.findIndex(g),A=r.maybeChild(S);if(A&&C==g&&C+A.nodeSize==w){let E=l[d+2].mapInner(n,A,h+1,e[d]+i+1,o);E!=Ur?(l[d]=g,l[d+1]=w,l[d+2]=E):(l[d+1]=-2,c=!0)}else c=!0}if(c){let d=JZ(l,e,t,n,s,i,o),h=t1(d,r,0,o);t=h.local;for(let g=0;g<l.length;g+=3)l[g+1]<0&&(l.splice(g,3),g-=3);for(let g=0,y=0;g<h.children.length;g+=3){let w=h.children[g];for(;y<l.length&&l[y]<w;)y+=3;l.splice(y,0,h.children[g],h.children[g+1],h.children[g+2])}}return new An(t.sort(pc),l)}function kD(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let s=e[r];n.push(new ns(s.from+t,s.to+t,s.type))}return n}function JZ(e,t,n,r,s,i,o){function l(c,d){for(let h=0;h<c.local.length;h++){let g=c.local[h].map(r,s,d);g?n.push(g):o.onRemove&&o.onRemove(c.local[h].spec)}for(let h=0;h<c.children.length;h+=3)l(c.children[h+2],c.children[h]+d+1)}for(let c=0;c<e.length;c+=3)e[c+1]==-1&&l(e[c+2],t[c]+i+1);return n}function ID(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,s=null;for(let i=0,o;i<e.length;i++)(o=e[i])&&o.from>n&&o.to<r&&((s||(s=[])).push(o),e[i]=null);return s}function RD(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function t1(e,t,n,r){let s=[],i=!1;t.forEach((l,c)=>{let d=ID(e,l,c+n);if(d){i=!0;let h=t1(d,l,n+c+1,r);h!=Ur&&s.push(c,c+l.nodeSize,h)}});let o=kD(i?RD(e):e,-n).sort(pc);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||s.length?new An(o,s):Ur}function pc(e,t){return e.from-t.from||e.to-t.to}function sS(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let s=n+1;s<t.length;s++){let i=t[s];if(i.from==r.from){i.to!=r.to&&(t==e&&(t=e.slice()),t[s]=i.copy(i.from,r.to),E3(t,s+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),E3(t,s,r.copy(i.from,r.to)));break}}}return t}function E3(e,t,n){for(;t<e.length&&pc(n,e[t])>0;)t++;e.splice(t,0,n)}function Xy(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=Ur&&t.push(r)}),e.cursorWrapper&&t.push(An.create(e.state.doc,[e.cursorWrapper.deco])),Ra.from(t)}const eQ={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},tQ=Ss&&rl<=11;class nQ{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class rQ{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new nQ,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);Ss&&rl<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():Or&&t.composing&&r.some(s=>s.type=="childList"&&s.target.nodeName=="TR")?(t.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),tQ&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,eQ)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(g3(this.view)){if(this.suppressingSelectionUpdates)return Wo(this.view);if(Ss&&rl<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&Oc(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let i=t.focusNode;i;i=bd(i))n.add(i);for(let i=t.anchorNode;i;i=bd(i))if(n.has(i)){r=i;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&g3(t)&&!this.ignoreSelectionChange(r),i=-1,o=-1,l=!1,c=[];if(t.editable)for(let h=0;h<n.length;h++){let g=this.registerMutation(n[h],c);g&&(i=i<0?g.from:Math.min(g.from,i),o=o<0?g.to:Math.max(g.to,o),g.typeOver&&(l=!0))}if(ri&&c.length){let h=c.filter(g=>g.nodeName=="BR");if(h.length==2){let[g,y]=h;g.parentNode&&g.parentNode.parentNode==y.parentNode?y.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let y of h){let w=y.parentNode;w&&w.nodeName=="LI"&&(!g||oQ(t,g)!=w)&&y.remove()}}}else if((mr||Or)&&c.some(h=>h.nodeName=="BR")&&(t.input.lastKeyCode==8||t.input.lastKeyCode==46)){for(let h of c)if(h.nodeName=="BR"&&h.parentNode){let g=h.nextSibling;g&&g.nodeType==1&&g.contentEditable=="false"&&h.parentNode.removeChild(h)}}let d=null;i<0&&s&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&ax(r)&&(d=ZC(t))&&d.eq(Ct.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Wo(t),this.currentSelection.set(r),t.scrollToSelection()):(i>-1||s)&&(i>-1&&(t.docView.markDirty(i,o),sQ(t)),t.input.badSafariComposition&&(t.input.badSafariComposition=!1,aQ(t,c)),this.handleDOMChange(i,o,l,c),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||Wo(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let h=0;h<t.addedNodes.length;h++){let g=t.addedNodes[h];n.push(g),g.nodeType==3&&(this.lastChangedTextNode=g)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let s=t.previousSibling,i=t.nextSibling;if(Ss&&rl<=11&&t.addedNodes.length)for(let h=0;h<t.addedNodes.length;h++){let{previousSibling:g,nextSibling:y}=t.addedNodes[h];(!g||Array.prototype.indexOf.call(t.addedNodes,g)<0)&&(s=g),(!y||Array.prototype.indexOf.call(t.addedNodes,y)<0)&&(i=y)}let o=s&&s.parentNode==t.target?Ir(s)+1:0,l=r.localPosFromDOM(t.target,o,-1),c=i&&i.parentNode==t.target?Ir(i):t.target.childNodes.length,d=r.localPosFromDOM(t.target,c,1);return{from:l,to:d}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let N3=new WeakMap,A3=!1;function sQ(e){if(!N3.has(e)&&(N3.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=ri,A3)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),A3=!0}}function T3(e,t){let n=t.startContainer,r=t.startOffset,s=t.endContainer,i=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return Oc(o.node,o.offset,s,i)&&([n,r,s,i]=[s,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:i}}function iQ(e,t){if(t.getComposedRanges){let s=t.getComposedRanges(e.root)[0];if(s)return T3(e,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?T3(e,n):null}function oQ(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function aQ(e,t){var n;let{focusNode:r,focusOffset:s}=e.domSelectionRange();for(let i of t)if(((n=i.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let o=i.nextSibling;for(;o&&o.nodeName!="TD"&&o.nodeName!="TH";)o=o.nextSibling;if(o){let l=o;for(;;){let c=l.firstChild;if(!c||c.nodeType!=1||c.contentEditable=="false"||/^(BR|IMG)$/.test(c.nodeName))break;l=c}l.insertBefore(i,l.firstChild),r==i&&e.domSelection().collapse(i,s)}else i.parentNode.removeChild(i)}}function lQ(e,t,n){let{node:r,fromOffset:s,toOffset:i,from:o,to:l}=e.docView.parseRange(t,n),c=e.domSelectionRange(),d,h=c.anchorNode;if(h&&e.dom.contains(h.nodeType==1?h:h.parentNode)&&(d=[{node:h,offset:c.anchorOffset}],ax(c)||d.push({node:c.focusNode,offset:c.focusOffset})),mr&&e.input.lastKeyCode===8)for(let A=i;A>s;A--){let E=r.childNodes[A-1],k=E.pmViewDesc;if(E.nodeName=="BR"&&!k){i=A;break}if(!k||k.size)break}let g=e.state.doc,y=e.someProp("domParser")||nl.fromSchema(e.state.schema),w=g.resolve(o),S=null,C=y.parse(r,{topNode:w.parent,topMatch:w.parent.contentMatchAt(w.index()),topOpen:!0,from:s,to:i,preserveWhitespace:w.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:cQ,context:w});if(d&&d[0].pos!=null){let A=d[0].pos,E=d[1]&&d[1].pos;E==null&&(E=A),S={anchor:A+o,head:E+o}}return{doc:C,sel:S,from:o,to:l}}function cQ(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(Or&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||Or&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const uQ=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function dQ(e,t,n,r,s){let i=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let _=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,D=ZC(e,_);if(D&&!e.state.selection.eq(D)){if(mr&&Ho&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",U=>U(e,Ll(13,"Enter"))))return;let L=e.state.tr.setSelection(D);_=="pointer"?L.setMeta("pointer",!0):_=="key"&&L.scrollIntoView(),i&&L.setMeta("composition",i),e.dispatch(L)}return}let o=e.state.doc.resolve(t),l=o.sharedDepth(n);t=o.before(l+1),n=e.state.doc.resolve(n).after(l+1);let c=e.state.selection,d=lQ(e,t,n),h=e.state.doc,g=h.slice(d.from,d.to),y,w;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(y=e.state.selection.to,w="end"):(y=e.state.selection.from,w="start"),e.input.lastKeyCode=null;let S=pQ(g.content,d.doc.content,d.from,y,w);if(S&&e.input.domChangeCount++,(Cd&&e.input.lastIOSEnter>Date.now()-225||Ho)&&s.some(_=>_.nodeType==1&&!uQ.test(_.nodeName))&&(!S||S.endA>=S.endB)&&e.someProp("handleKeyDown",_=>_(e,Ll(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!S)if(r&&c instanceof ht&&!c.empty&&c.$head.sameParent(c.$anchor)&&!e.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))S={start:c.from,endA:c.to,endB:c.to};else{if(d.sel){let _=k3(e,e.state.doc,d.sel);if(_&&!_.eq(e.state.selection)){let D=e.state.tr.setSelection(_);i&&D.setMeta("composition",i),e.dispatch(D)}}return}e.state.selection.from<e.state.selection.to&&S.start==S.endB&&e.state.selection instanceof ht&&(S.start>e.state.selection.from&&S.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?S.start=e.state.selection.from:S.endA<e.state.selection.to&&S.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(S.endB+=e.state.selection.to-S.endA,S.endA=e.state.selection.to)),Ss&&rl<=11&&S.endB==S.start+1&&S.endA==S.start&&S.start>d.from&&d.doc.textBetween(S.start-d.from-1,S.start-d.from+1)==" "&&(S.start--,S.endA--,S.endB--);let C=d.doc.resolveNoCache(S.start-d.from),A=d.doc.resolveNoCache(S.endB-d.from),E=h.resolve(S.start),k=C.sameParent(A)&&C.parent.inlineContent&&E.end()>=S.endA;if((Cd&&e.input.lastIOSEnter>Date.now()-225&&(!k||s.some(_=>_.nodeName=="DIV"||_.nodeName=="P"))||!k&&C.pos<d.doc.content.size&&(!C.sameParent(A)||!C.parent.inlineContent)&&C.pos<A.pos&&!/\S/.test(d.doc.textBetween(C.pos,A.pos,"","")))&&e.someProp("handleKeyDown",_=>_(e,Ll(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>S.start&&hQ(h,S.start,S.endA,C,A)&&e.someProp("handleKeyDown",_=>_(e,Ll(8,"Backspace")))){Ho&&mr&&e.domObserver.suppressSelectionUpdates();return}mr&&S.endB==S.start&&(e.input.lastChromeDelete=Date.now()),Ho&&!k&&C.start()!=A.start()&&A.parentOffset==0&&C.depth==A.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==S.endA&&(S.endB-=2,A=d.doc.resolveNoCache(S.endB-d.from),setTimeout(()=>{e.someProp("handleKeyDown",function(_){return _(e,Ll(13,"Enter"))})},20));let I=S.start,M=S.endA,P=_=>{let D=_||e.state.tr.replace(I,M,d.doc.slice(S.start-d.from,S.endB-d.from));if(d.sel){let L=k3(e,D.doc,d.sel);L&&!(mr&&e.composing&&L.empty&&(S.start!=S.endB||e.input.lastChromeDelete<Date.now()-100)&&(L.head==I||L.head==D.mapping.map(M)-1)||Ss&&L.empty&&L.head==I)&&D.setSelection(L)}return i&&D.setMeta("composition",i),D.scrollIntoView()},j;if(k)if(C.pos==A.pos){Ss&&rl<=11&&C.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Wo(e),20));let _=P(e.state.tr.delete(I,M)),D=h.resolve(S.start).marksAcross(h.resolve(S.endA));D&&_.ensureMarks(D),e.dispatch(_)}else if(S.endA==S.endB&&(j=fQ(C.parent.content.cut(C.parentOffset,A.parentOffset),E.parent.content.cut(E.parentOffset,S.endA-E.start())))){let _=P(e.state.tr);j.type=="add"?_.addMark(I,M,j.mark):_.removeMark(I,M,j.mark),e.dispatch(_)}else if(C.parent.child(C.index()).isText&&C.index()==A.index()-(A.textOffset?0:1)){let _=C.parent.textBetween(C.parentOffset,A.parentOffset),D=()=>P(e.state.tr.insertText(_,I,M));e.someProp("handleTextInput",L=>L(e,I,M,_,D))||e.dispatch(D())}else e.dispatch(P());else e.dispatch(P())}function k3(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:QC(e,t.resolve(n.anchor),t.resolve(n.head))}function fQ(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,s=n,i=r,o,l,c;for(let h=0;h<r.length;h++)s=r[h].removeFromSet(s);for(let h=0;h<n.length;h++)i=n[h].removeFromSet(i);if(s.length==1&&i.length==0)l=s[0],o="add",c=h=>h.mark(l.addToSet(h.marks));else if(s.length==0&&i.length==1)l=i[0],o="remove",c=h=>h.mark(l.removeFromSet(h.marks));else return null;let d=[];for(let h=0;h<t.childCount;h++)d.push(c(t.child(h)));if(Ae.from(d).eq(e))return{mark:l,type:o}}function hQ(e,t,n,r,s){if(n-t<=s.pos-r.pos||Ky(r,!0,!1)<s.pos)return!1;let i=e.resolve(t);if(!r.parent.isTextblock){let l=i.nodeAfter;return l!=null&&n==t+l.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let o=e.resolve(Ky(i,!0,!0));return!o.parent.isTextblock||o.pos>n||Ky(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Ky(e,t,n){let r=e.depth,s=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,s++,t=!1;if(n){let i=e.node(r).maybeChild(e.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,s++}return s}function pQ(e,t,n,r,s){let i=e.findDiffStart(t,n);if(i==null)return null;let{a:o,b:l}=e.findDiffEnd(t,n+e.size,n+t.size);if(s=="end"){let c=Math.max(0,i-Math.min(o,l));r-=o+c-i}if(o<i&&e.size<t.size){let c=r<=i&&r>=o?i-r:0;i-=c,i&&i<t.size&&I3(t.textBetween(i-1,i+1))&&(i+=c?1:-1),l=i+(l-o),o=i}else if(l<i){let c=r<=i&&r>=l?i-r:0;i-=c,i&&i<e.size&&I3(e.textBetween(i-1,i+1))&&(i+=c?1:-1),o=i+(o-l),l=i}return{start:i,endA:o,endB:l}}function I3(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class MD{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new RZ,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(P3),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=_3(this),M3(this),this.nodeViews=O3(this),this.docView=u3(this.state.doc,R3(this),Xy(this),this.dom,this),this.domObserver=new rQ(this,(r,s,i,o)=>dQ(this,r,s,i,o)),this.domObserver.start(),MZ(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&d2(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(P3),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let s=this.state,i=!1,o=!1;t.storedMarks&&this.composing&&(ED(this),o=!0),this.state=t;let l=s.plugins!=t.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let w=O3(this);gQ(w,this.nodeViews)&&(this.nodeViews=w,i=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&d2(this),this.editable=_3(this),M3(this);let c=Xy(this),d=R3(this),h=s.plugins!=t.plugins&&!s.doc.eq(t.doc)?"reset":t.scrollToSelection>s.scrollToSelection?"to selection":"preserve",g=i||!this.docView.matchesNode(t.doc,d,c);(g||!t.selection.eq(s.selection))&&(o=!0);let y=h=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Wq(this);if(o){this.domObserver.stop();let w=g&&(Ss||mr)&&!this.composing&&!s.selection.empty&&!t.selection.empty&&mQ(s.selection,t.selection);if(g){let S=mr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=WZ(this)),(i||!this.docView.update(t.doc,d,c,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=u3(t.doc,d,c,this.dom,this)),S&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(w=!0)}w||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&mZ(this))?Wo(this,w):(fD(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,s),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():y&&Gq(y)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof lt){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&s3(this,n.getBoundingClientRect(),t)}else s3(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(s=i)}this.dragging=new AD(t.slice,t.move,s<0?void 0:lt.create(this.state.doc,s))}someProp(t,n){let r=this._props&&this._props[t],s;if(r!=null&&(s=n?n(r):r))return s;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[t];if(l!=null&&(s=n?n(l):l))return s}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let l=i[o].props[t];if(l!=null&&(s=n?n(l):l))return s}}hasFocus(){if(Ss){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Xq(this.dom),Wo(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return Qq(this,t)}coordsAtPos(t,n=1){return sD(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let s=this.docView.posFromDOM(t,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(t,n){return rZ(this,n||this.state,t)}pasteHTML(t,n){return Dh(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return Dh(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return JC(this,t)}destroy(){this.docView&&(_Z(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Xy(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Dq())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return PZ(this,t)}domSelectionRange(){let t=this.domSelection();return t?Or&&this.root.nodeType===11&&zq(this.dom.ownerDocument)==this.dom&&iQ(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}MD.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function R3(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[ns.node(0,e.state.doc.content.size,t)]}function M3(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:ns.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function _3(e){return!e.someProp("editable",t=>t(e.state)===!1)}function mQ(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function O3(e){let t=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(t,s)||(t[s]=r[s])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function gQ(e,t){let n=0,r=0;for(let s in e){if(e[s]!=t[s])return!0;n++}for(let s in t)r++;return n!=r}function P3(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var dl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},n1={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},xQ=typeof navigator<"u"&&/Mac/.test(navigator.platform),yQ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Rr=0;Rr<10;Rr++)dl[48+Rr]=dl[96+Rr]=String(Rr);for(var Rr=1;Rr<=24;Rr++)dl[Rr+111]="F"+Rr;for(var Rr=65;Rr<=90;Rr++)dl[Rr]=String.fromCharCode(Rr+32),n1[Rr]=String.fromCharCode(Rr);for(var Yy in dl)n1.hasOwnProperty(Yy)||(n1[Yy]=dl[Yy]);function wQ(e){var t=xQ&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||yQ&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?n1:dl)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const vQ=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),bQ=typeof navigator<"u"&&/Win/.test(navigator.platform);function CQ(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,s,i,o;for(let l=0;l<t.length-1;l++){let c=t[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))i=!0;else if(/^mod$/i.test(c))vQ?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),o&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function SQ(e){let t=Object.create(null);for(let n in e)t[CQ(n)]=e[n];return t}function qy(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function EQ(e){return new In({props:{handleKeyDown:_D(e)}})}function _D(e){let t=SQ(e);return function(n,r){let s=wQ(r),i,o=t[qy(s,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let l=t[qy(s,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(bQ&&r.ctrlKey&&r.altKey)&&(i=dl[r.keyCode])&&i!=s){let l=t[qy(i,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}var NQ=Object.defineProperty,iS=(e,t)=>{for(var n in t)NQ(e,n,{get:t[n],enumerable:!0})};function ux(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:s}=n,{storedMarks:i}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return i},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,i=n.storedMarks,n}}}var dx=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:s}=n,i=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([o,l])=>[o,(...d)=>{const h=l(...d)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:s}=this,{view:i}=r,o=[],l=!!e,c=e||s.tr,d=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(c),o.every(g=>g===!0)),h={...Object.fromEntries(Object.entries(n).map(([g,y])=>[g,(...S)=>{const C=this.buildProps(c,t),A=y(...S)(C);return o.push(A),h}])),run:d};return h}createCan(e){const{rawCommands:t,state:n}=this,r=!1,s=e||n.tr,i=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...d)=>c(...d)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:s}=this,{view:i}=r,o={tr:e,editor:r,view:i,state:ux({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...d)=>c(...d)(o)]))}};return o}},OD={};iS(OD,{blur:()=>AQ,clearContent:()=>TQ,clearNodes:()=>kQ,command:()=>IQ,createParagraphNear:()=>RQ,cut:()=>MQ,deleteCurrentNode:()=>_Q,deleteNode:()=>OQ,deleteRange:()=>PQ,deleteSelection:()=>DQ,enter:()=>jQ,exitCode:()=>LQ,extendMarkRange:()=>BQ,first:()=>FQ,focus:()=>VQ,forEach:()=>HQ,insertContent:()=>UQ,insertContentAt:()=>GQ,joinBackward:()=>YQ,joinDown:()=>KQ,joinForward:()=>qQ,joinItemBackward:()=>ZQ,joinItemForward:()=>QQ,joinTextblockBackward:()=>JQ,joinTextblockForward:()=>eJ,joinUp:()=>XQ,keyboardShortcut:()=>nJ,lift:()=>rJ,liftEmptyBlock:()=>sJ,liftListItem:()=>iJ,newlineInCode:()=>oJ,resetAttributes:()=>aJ,scrollIntoView:()=>lJ,selectAll:()=>cJ,selectNodeBackward:()=>uJ,selectNodeForward:()=>dJ,selectParentNode:()=>fJ,selectTextblockEnd:()=>hJ,selectTextblockStart:()=>pJ,setContent:()=>mJ,setMark:()=>DJ,setMeta:()=>jJ,setNode:()=>LJ,setNodeSelection:()=>BJ,setTextDirection:()=>FJ,setTextSelection:()=>zJ,sinkListItem:()=>VJ,splitBlock:()=>HJ,splitListItem:()=>UJ,toggleList:()=>$J,toggleMark:()=>WJ,toggleNode:()=>GJ,toggleWrap:()=>XJ,undoInputRule:()=>KJ,unsetAllMarks:()=>YJ,unsetMark:()=>qJ,unsetTextDirection:()=>ZJ,updateAttributes:()=>QJ,wrapIn:()=>JJ,wrapInList:()=>eee});var AQ=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),TQ=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),kQ=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:s}=r;return n&&s.forEach(({$from:i,$to:o})=>{e.doc.nodesBetween(i.pos,o.pos,(l,c)=>{if(l.type.isText)return;const{doc:d,mapping:h}=t,g=d.resolve(h.map(c)),y=d.resolve(h.map(c+l.nodeSize)),w=g.blockRange(y);if(!w)return;const S=Ud(w);if(l.type.isTextblock){const{defaultType:C}=g.parent.contentMatchAt(g.index());t.setNodeMarkup(w.start,C)}(S||S===0)&&t.lift(w,S)})}),!0},IQ=e=>t=>e(t),RQ=()=>({state:e,dispatch:t})=>bq(e,t),MQ=(e,t)=>({editor:n,tr:r})=>{const{state:s}=n,i=s.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const o=r.mapping.map(t);return r.insert(o,i.content),r.setSelection(new ht(r.doc.resolve(Math.max(o-1,0)))),!0},_Q=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const s=e.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===r.type){if(t){const l=s.before(i),c=s.after(i);e.delete(l,c).scrollIntoView()}return!0}return!1};function Qn(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var OQ=e=>({tr:t,state:n,dispatch:r})=>{const s=Qn(e,n.schema),i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===s){if(r){const c=i.before(o),d=i.after(o);t.delete(c,d).scrollIntoView()}return!0}return!1},PQ=e=>({tr:t,dispatch:n})=>{const{from:r,to:s}=e;return n&&t.delete(r,s),!0},DQ=()=>({state:e,dispatch:t})=>cq(e,t),jQ=()=>({commands:e})=>e.keyboardShortcut("Enter"),LQ=()=>({state:e,dispatch:t})=>vq(e,t);function oS(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function r1(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(s=>n.strict?t[s]===e[s]:oS(t[s])?t[s].test(e[s]):t[s]===e[s]):!0}function PD(e,t,n={}){return e.find(r=>r.type===t&&r1(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function D3(e,t,n={}){return!!PD(e,t,n)}function aS(e,t,n){var r;if(!e||!t)return;let s=e.parent.childAfter(e.parentOffset);if((!s.node||!s.node.marks.some(h=>h.type===t))&&(s=e.parent.childBefore(e.parentOffset)),!s.node||!s.node.marks.some(h=>h.type===t)||(n=n||((r=s.node.marks[0])==null?void 0:r.attrs),!PD([...s.node.marks],t,n)))return;let o=s.index,l=e.start()+s.offset,c=o+1,d=l+s.node.nodeSize;for(;o>0&&D3([...e.parent.child(o-1).marks],t,n);)o-=1,l-=e.parent.child(o).nodeSize;for(;c<e.parent.childCount&&D3([...e.parent.child(c).marks],t,n);)d+=e.parent.child(c).nodeSize,c+=1;return{from:l,to:d}}function sa(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var BQ=(e,t={})=>({tr:n,state:r,dispatch:s})=>{const i=sa(e,r.schema),{doc:o,selection:l}=n,{$from:c,from:d,to:h}=l;if(s){const g=aS(c,i,t);if(g&&g.from<=d&&g.to>=h){const y=ht.create(o,g.from,g.to);n.setSelection(y)}}return!0},FQ=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function DD(e){return e instanceof ht}function Ul(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function jD(e,t=null){if(!t)return null;const n=Ct.atStart(e),r=Ct.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const s=n.from,i=r.to;return t==="all"?ht.create(e,Ul(0,s,i),Ul(e.content.size,s,i)):ht.create(e,Ul(t,s,i),Ul(t,s,i))}function j3(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function s1(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function zQ(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var VQ=(e=null,t={})=>({editor:n,view:r,tr:s,dispatch:i})=>{t={scrollIntoView:!0,...t};const o=()=>{(s1()||j3())&&r.dom.focus(),zQ()&&!s1()&&!j3()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(i&&e===null&&!DD(n.state.selection))return o(),!0;const l=jD(s.doc,e)||n.state.selection,c=n.state.selection.eq(l);return i&&(c||s.setSelection(l),c&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},HQ=(e,t)=>n=>e.every((r,s)=>t(r,{...n,index:s})),UQ=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),LD=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&LD(r)}return e};function u0(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return LD(n)}function Lh(e,t,n){if(e instanceof tl||e instanceof Ae)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,s=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return Ae.fromArray(e.map(l=>t.nodeFromJSON(l)));const o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",i),Lh("",t,n)}if(s){if(n.errorOnInvalidContent){let o=!1,l="";const c=new AP({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(o=!0,l=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?nl.fromSchema(c).parseSlice(u0(e),n.parseOptions):nl.fromSchema(c).parse(u0(e),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const i=nl.fromSchema(t);return n.slice?i.parseSlice(u0(e),n.parseOptions).content:i.parse(u0(e),n.parseOptions)}return Lh("",t,n)}function $Q(e,t,n){const r=e.steps.length-1;if(r<t)return;const s=e.steps[r];if(!(s instanceof pr||s instanceof xr))return;const i=e.mapping.maps[r];let o=0;i.forEach((l,c,d,h)=>{o===0&&(o=h)}),e.setSelection(Ct.near(e.doc.resolve(o),n))}var WQ=e=>!("type"in e),GQ=(e,t,n)=>({tr:r,dispatch:s,editor:i})=>{var o;if(s){n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const c=A=>{i.emit("contentError",{editor:i,error:A,disableCollaboration:()=>{"collaboration"in i.storage&&typeof i.storage.collaboration=="object"&&i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{Lh(t,i.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(A){c(A)}try{l=Lh(t,i.schema,{parseOptions:d,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:i.options.enableContentCheck})}catch(A){return c(A),!1}let{from:h,to:g}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},y=!0,w=!0;if((WQ(l)?l:[l]).forEach(A=>{A.check(),y=y?A.isText&&A.marks.length===0:!1,w=w?A.isBlock:!1}),h===g&&w){const{parent:A}=r.doc.resolve(h);A.isTextblock&&!A.type.spec.code&&!A.childCount&&(h-=1,g+=1)}let C;if(y){if(Array.isArray(t))C=t.map(A=>A.text||"").join("");else if(t instanceof Ae){let A="";t.forEach(E=>{E.text&&(A+=E.text)}),C=A}else typeof t=="object"&&t&&t.text?C=t.text:C=t;r.insertText(C,h,g)}else{C=l;const A=r.doc.resolve(h),E=A.node(),k=A.parentOffset===0,I=E.isText||E.isTextblock,M=E.content.size>0;k&&I&&M&&(h=Math.max(0,h-1)),r.replaceWith(h,g,C)}n.updateSelection&&$Q(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:h,text:C}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:h,text:C})}return!0},XQ=()=>({state:e,dispatch:t})=>gq(e,t),KQ=()=>({state:e,dispatch:t})=>xq(e,t),YQ=()=>({state:e,dispatch:t})=>uq(e,t),qQ=()=>({state:e,dispatch:t})=>pq(e,t),ZQ=()=>({state:e,dispatch:t,tr:n})=>{try{const r=sx(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},QQ=()=>({state:e,dispatch:t,tr:n})=>{try{const r=sx(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},JQ=()=>({state:e,dispatch:t})=>dq(e,t),eJ=()=>({state:e,dispatch:t})=>fq(e,t);function BD(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function tJ(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,s,i,o;for(let l=0;l<t.length-1;l+=1){const c=t[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))i=!0;else if(/^mod$/i.test(c))s1()||BD()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}var nJ=e=>({editor:t,view:n,tr:r,dispatch:s})=>{const i=tJ(e).split(/-(?!$)/),o=i.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),c=t.captureTransaction(()=>{n.someProp("handleKeyDown",d=>d(n,l))});return c==null||c.steps.forEach(d=>{const h=d.map(r.mapping);h&&s&&r.maybeStep(h)}),!0};function fl(e,t,n={}){const{from:r,to:s,empty:i}=e.selection,o=t?Qn(t,e.schema):null,l=[];e.doc.nodesBetween(r,s,(g,y)=>{if(g.isText)return;const w=Math.max(r,y),S=Math.min(s,y+g.nodeSize);l.push({node:g,from:w,to:S})});const c=s-r,d=l.filter(g=>o?o.name===g.node.type.name:!0).filter(g=>r1(g.node.attrs,n,{strict:!1}));return i?!!d.length:d.reduce((g,y)=>g+y.to-y.from,0)>=c}var rJ=(e,t={})=>({state:n,dispatch:r})=>{const s=Qn(e,n.schema);return fl(n,s,t)?yq(n,r):!1},sJ=()=>({state:e,dispatch:t})=>Cq(e,t),iJ=e=>({state:t,dispatch:n})=>{const r=Qn(e,t.schema);return Mq(r)(t,n)},oJ=()=>({state:e,dispatch:t})=>wq(e,t);function fx(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function L3(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,s)=>(n.includes(s)||(r[s]=e[s]),r),{})}var aJ=(e,t)=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const l=fx(typeof e=="string"?e:e.name,r.schema);if(!l)return!1;l==="node"&&(i=Qn(e,r.schema)),l==="mark"&&(o=sa(e,r.schema));let c=!1;return n.selection.ranges.forEach(d=>{r.doc.nodesBetween(d.$from.pos,d.$to.pos,(h,g)=>{i&&i===h.type&&(c=!0,s&&n.setNodeMarkup(g,void 0,L3(h.attrs,t))),o&&h.marks.length&&h.marks.forEach(y=>{o===y.type&&(c=!0,s&&n.addMark(g,g+h.nodeSize,o.create(L3(y.attrs,t))))})})}),c},lJ=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),cJ=()=>({tr:e,dispatch:t})=>{if(t){const n=new ni(e.doc);e.setSelection(n)}return!0},uJ=()=>({state:e,dispatch:t})=>hq(e,t),dJ=()=>({state:e,dispatch:t})=>mq(e,t),fJ=()=>({state:e,dispatch:t})=>Sq(e,t),hJ=()=>({state:e,dispatch:t})=>Aq(e,t),pJ=()=>({state:e,dispatch:t})=>Nq(e,t);function f2(e,t,n={},r={}){return Lh(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var mJ=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:s,tr:i,dispatch:o,commands:l})=>{const{doc:c}=i;if(r.preserveWhitespace!=="full"){const d=f2(e,s.schema,r,{errorOnInvalidContent:t??s.options.enableContentCheck});return o&&i.replaceWith(0,c.content.size,d).setMeta("preventUpdate",!n),!0}return o&&i.setMeta("preventUpdate",!n),l.insertContentAt({from:0,to:c.content.size},e,{parseOptions:r,errorOnInvalidContent:t??s.options.enableContentCheck})};function FD(e,t){const n=sa(t,e.schema),{from:r,to:s,empty:i}=e.selection,o=[];i?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,s,c=>{o.push(...c.marks)});const l=o.find(c=>c.type.name===n.name);return l?{...l.attrs}:{}}function zD(e,t){const n=new HP(e);return t.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function gJ(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function xJ(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(s,i)=>{n(s)&&r.push({node:s,pos:i})}),r}function yJ(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function hx(e){return t=>yJ(t.$from,e)}function st(e,t,n){return e.config[t]===void 0&&e.parent?st(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?st(e.parent,t,n):null}):e.config[t]}function lS(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=st(t,"addExtensions",n);return r?[t,...lS(r())]:t}).flat(10)}function cS(e,t){const n=Uc.fromSchema(t).serializeFragment(e),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}function VD(e){return typeof e=="function"}function Xt(e,t=void 0,...n){return VD(e)?t?e.bind(t)(...n):e(...n):e}function wJ(e={}){return Object.keys(e).length===0&&e.constructor===Object}function Sd(e){const t=e.filter(s=>s.type==="extension"),n=e.filter(s=>s.type==="node"),r=e.filter(s=>s.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function HD(e){const t=[],{nodeExtensions:n,markExtensions:r}=Sd(e),s=[...n,...r],i={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:s},c=st(o,"addGlobalAttributes",l);if(!c)return;c().forEach(h=>{h.types.forEach(g=>{Object.entries(h.attributes).forEach(([y,w])=>{t.push({type:g,name:y,attribute:{...i,...w}})})})})}),s.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},c=st(o,"addAttributes",l);if(!c)return;const d=c();Object.entries(d).forEach(([h,g])=>{const y={...i,...g};typeof(y==null?void 0:y.default)=="function"&&(y.default=y.default()),y!=null&&y.isRequired&&(y==null?void 0:y.default)===void 0&&delete y.default,t.push({type:o.name,name:h,attribute:y})})}),t}function Jn(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([s,i])=>{if(!r[s]){r[s]=i;return}if(s==="class"){const l=i?String(i).split(" "):[],c=r[s]?r[s].split(" "):[],d=l.filter(h=>!c.includes(h));r[s]=[...c,...d].join(" ")}else if(s==="style"){const l=i?i.split(";").map(h=>h.trim()).filter(Boolean):[],c=r[s]?r[s].split(";").map(h=>h.trim()).filter(Boolean):[],d=new Map;c.forEach(h=>{const[g,y]=h.split(":").map(w=>w.trim());d.set(g,y)}),l.forEach(h=>{const[g,y]=h.split(":").map(w=>w.trim());d.set(g,y)}),r[s]=Array.from(d.entries()).map(([h,g])=>`${h}: ${g}`).join("; ")}else r[s]=i}),r},{})}function Bh(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>Jn(n,r),{})}function vJ(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function B3(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const s=t.reduce((i,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):vJ(n.getAttribute(o.name));return l==null?i:{...i,[o.name]:l}},{});return{...r,...s}}}}function F3(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&wJ(n)?!1:n!=null))}function z3(e){var t,n;const r={};return!((t=e==null?void 0:e.attribute)!=null&&t.isRequired)&&"default"in((e==null?void 0:e.attribute)||{})&&(r.default=e.attribute.default),((n=e==null?void 0:e.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=e.attribute.validate),[e.name,r]}function bJ(e,t){var n;const r=HD(e),{nodeExtensions:s,markExtensions:i}=Sd(e),o=(n=s.find(d=>st(d,"topNode")))==null?void 0:n.name,l=Object.fromEntries(s.map(d=>{const h=r.filter(E=>E.type===d.name),g={name:d.name,options:d.options,storage:d.storage,editor:t},y=e.reduce((E,k)=>{const I=st(k,"extendNodeSchema",g);return{...E,...I?I(d):{}}},{}),w=F3({...y,content:Xt(st(d,"content",g)),marks:Xt(st(d,"marks",g)),group:Xt(st(d,"group",g)),inline:Xt(st(d,"inline",g)),atom:Xt(st(d,"atom",g)),selectable:Xt(st(d,"selectable",g)),draggable:Xt(st(d,"draggable",g)),code:Xt(st(d,"code",g)),whitespace:Xt(st(d,"whitespace",g)),linebreakReplacement:Xt(st(d,"linebreakReplacement",g)),defining:Xt(st(d,"defining",g)),isolating:Xt(st(d,"isolating",g)),attrs:Object.fromEntries(h.map(z3))}),S=Xt(st(d,"parseHTML",g));S&&(w.parseDOM=S.map(E=>B3(E,h)));const C=st(d,"renderHTML",g);C&&(w.toDOM=E=>C({node:E,HTMLAttributes:Bh(E,h)}));const A=st(d,"renderText",g);return A&&(w.toText=A),[d.name,w]})),c=Object.fromEntries(i.map(d=>{const h=r.filter(A=>A.type===d.name),g={name:d.name,options:d.options,storage:d.storage,editor:t},y=e.reduce((A,E)=>{const k=st(E,"extendMarkSchema",g);return{...A,...k?k(d):{}}},{}),w=F3({...y,inclusive:Xt(st(d,"inclusive",g)),excludes:Xt(st(d,"excludes",g)),group:Xt(st(d,"group",g)),spanning:Xt(st(d,"spanning",g)),code:Xt(st(d,"code",g)),attrs:Object.fromEntries(h.map(z3))}),S=Xt(st(d,"parseHTML",g));S&&(w.parseDOM=S.map(A=>B3(A,h)));const C=st(d,"renderHTML",g);return C&&(w.toDOM=A=>C({mark:A,HTMLAttributes:Bh(A,h)})),[d.name,w]}));return new AP({topNode:o,nodes:l,marks:c})}function CJ(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function i1(e){return e.sort((n,r)=>{const s=st(n,"priority")||100,i=st(r,"priority")||100;return s>i?-1:s<i?1:0})}function UD(e){const t=i1(lS(e)),n=CJ(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function $D(e,t,n){const{from:r,to:s}=t,{blockSeparator:i=`

`,textSerializers:o={}}=n||{};let l="";return e.nodesBetween(r,s,(c,d,h,g)=>{var y;c.isBlock&&d>r&&(l+=i);const w=o==null?void 0:o[c.type.name];if(w)return h&&(l+=w({node:c,pos:d,parent:h,index:g,range:t})),!1;c.isText&&(l+=(y=c==null?void 0:c.text)==null?void 0:y.slice(Math.max(r,d)-d,s-d))}),l}function SJ(e,t){const n={from:0,to:e.content.size};return $D(e,n,t)}function WD(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function EJ(e,t){const n=Qn(t,e.schema),{from:r,to:s}=e.selection,i=[];e.doc.nodesBetween(r,s,l=>{i.push(l)});const o=i.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function GD(e,t){const n=fx(typeof t=="string"?t:t.name,e.schema);return n==="node"?EJ(e,t):n==="mark"?FD(e,t):{}}function NJ(e,t=JSON.stringify){const n={};return e.filter(r=>{const s=t(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function AJ(e){const t=NJ(e);return t.length===1?t:t.filter((n,r)=>!t.filter((i,o)=>o!==r).some(i=>n.oldRange.from>=i.oldRange.from&&n.oldRange.to<=i.oldRange.to&&n.newRange.from>=i.newRange.from&&n.newRange.to<=i.newRange.to))}function XD(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((s,i)=>{const o=[];if(s.ranges.length)s.forEach((l,c)=>{o.push({from:l,to:c})});else{const{from:l,to:c}=n[i];if(l===void 0||c===void 0)return;o.push({from:l,to:c})}o.forEach(({from:l,to:c})=>{const d=t.slice(i).map(l,-1),h=t.slice(i).map(c),g=t.invert().map(d,-1),y=t.invert().map(h);r.push({oldRange:{from:g,to:y},newRange:{from:d,to:h}})})}),AJ(r)}function uS(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(s=>{const i=n.resolve(e),o=aS(i,s.type);o&&r.push({mark:s,...o})}):n.nodesBetween(e,t,(s,i)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(o=>({from:i,to:i+s.nodeSize,mark:o})))}),r}var TJ=(e,t,n,r=20)=>{const s=e.doc.resolve(n);let i=r,o=null;for(;i>0&&o===null;){const l=s.node(i);(l==null?void 0:l.type.name)===t?o=l:i-=1}return[o,i]};function d0(e,t){return t.nodes[e]||t.marks[e]||null}function q0(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=e.find(i=>i.type===t&&i.name===r);return s?s.attribute.keepOnSplit:!1}))}var kJ=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(s,i,o,l)=>{var c,d;const h=((d=(c=s.type.spec).toText)==null?void 0:d.call(c,{node:s,pos:i,parent:o,index:l}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?h:h.slice(0,Math.max(0,r-i))}),n};function h2(e,t,n={}){const{empty:r,ranges:s}=e.selection,i=t?sa(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(g=>i?i.name===g.type.name:!0).find(g=>r1(g.attrs,n,{strict:!1}));let o=0;const l=[];if(s.forEach(({$from:g,$to:y})=>{const w=g.pos,S=y.pos;e.doc.nodesBetween(w,S,(C,A)=>{if(!C.isText&&!C.marks.length)return;const E=Math.max(w,A),k=Math.min(S,A+C.nodeSize),I=k-E;o+=I,l.push(...C.marks.map(M=>({mark:M,from:E,to:k})))})}),o===0)return!1;const c=l.filter(g=>i?i.name===g.mark.type.name:!0).filter(g=>r1(g.mark.attrs,n,{strict:!1})).reduce((g,y)=>g+y.to-y.from,0),d=l.filter(g=>i?g.mark.type!==i&&g.mark.type.excludes(i):!0).reduce((g,y)=>g+y.to-y.from,0);return(c>0?c+d:c)>=o}function IJ(e,t,n={}){if(!t)return fl(e,null,n)||h2(e,null,n);const r=fx(t,e.schema);return r==="node"?fl(e,t,n):r==="mark"?h2(e,t,n):!1}var RJ=(e,t)=>{const{$from:n,$to:r,$anchor:s}=e.selection;if(t){const i=hx(l=>l.type.name===t)(e.selection);if(!i)return!1;const o=e.doc.resolve(i.pos+1);return s.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},MJ=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function V3(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function H3(e,t){const{nodeExtensions:n}=Sd(t),r=n.find(o=>o.name===e);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},i=Xt(st(r,"group",s));return typeof i!="string"?!1:i.split(" ").includes("list")}function px(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let s=!0;return e.content.forEach(i=>{s!==!1&&(px(i,{ignoreWhitespace:n,checkChildren:t})||(s=!1))}),s}return!1}function KD(e){return e instanceof lt}var YD=class qD{constructor(t){this.position=t}static fromJSON(t){return new qD(t.position)}toJSON(){return{position:this.position}}};function _J(e,t){const n=t.mapping.mapResult(e.position);return{position:new YD(n.pos),mapResult:n}}function OJ(e){return new YD(e)}function PJ(e,t,n){var r;const{selection:s}=t;let i=null;if(DD(s)&&(i=s.$cursor),i){const l=(r=e.storedMarks)!=null?r:i.marks();return i.parent.type.allowsMarkType(n)&&(!!n.isInSet(l)||!l.some(d=>d.type.excludes(n)))}const{ranges:o}=s;return o.some(({$from:l,$to:c})=>{let d=l.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(l.pos,c.pos,(h,g,y)=>{if(d)return!1;if(h.isInline){const w=!y||y.type.allowsMarkType(n),S=!!n.isInSet(h.marks)||!h.marks.some(C=>C.type.excludes(n));d=w&&S}return!d}),d})}var DJ=(e,t={})=>({tr:n,state:r,dispatch:s})=>{const{selection:i}=n,{empty:o,ranges:l}=i,c=sa(e,r.schema);if(s)if(o){const d=FD(r,c);n.addStoredMark(c.create({...d,...t}))}else l.forEach(d=>{const h=d.$from.pos,g=d.$to.pos;r.doc.nodesBetween(h,g,(y,w)=>{const S=Math.max(w,h),C=Math.min(w+y.nodeSize,g);y.marks.find(E=>E.type===c)?y.marks.forEach(E=>{c===E.type&&n.addMark(S,C,c.create({...E.attrs,...t}))}):n.addMark(S,C,c.create(t))})});return PJ(r,n,c)},jJ=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),LJ=(e,t={})=>({state:n,dispatch:r,chain:s})=>{const i=Qn(e,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),i.isTextblock?s().command(({commands:l})=>t3(i,{...o,...t})(n)?!0:l.clearNodes()).command(({state:l})=>t3(i,{...o,...t})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},BJ=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,s=Ul(e,0,r.content.size),i=lt.create(r,s);t.setSelection(i)}return!0},FJ=(e,t)=>({tr:n,state:r,dispatch:s})=>{const{selection:i}=r;let o,l;return typeof t=="number"?(o=t,l=t):t&&"from"in t&&"to"in t?(o=t.from,l=t.to):(o=i.from,l=i.to),s&&n.doc.nodesBetween(o,l,(c,d)=>{c.isText||n.setNodeMarkup(d,void 0,{...c.attrs,dir:e})}),!0},zJ=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:s,to:i}=typeof e=="number"?{from:e,to:e}:e,o=ht.atStart(r).from,l=ht.atEnd(r).to,c=Ul(s,o,l),d=Ul(i,o,l),h=ht.create(r,c,d);t.setSelection(h)}return!0},VJ=e=>({state:t,dispatch:n})=>{const r=Qn(e,t.schema);return Pq(r)(t,n)};function U3(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(s=>t==null?void 0:t.includes(s.type.name));e.tr.ensureMarks(r)}}var HJ=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:s})=>{const{selection:i,doc:o}=t,{$from:l,$to:c}=i,d=s.extensionManager.attributes,h=q0(d,l.node().type.name,l.node().attrs);if(i instanceof lt&&i.node.isBlock)return!l.parentOffset||!Uu(o,l.pos)?!1:(r&&(e&&U3(n,s.extensionManager.splittableMarks),t.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const g=c.parentOffset===c.parent.content.size,y=l.depth===0?void 0:gJ(l.node(-1).contentMatchAt(l.indexAfter(-1)));let w=g&&y?[{type:y,attrs:h}]:void 0,S=Uu(t.doc,t.mapping.map(l.pos),1,w);if(!w&&!S&&Uu(t.doc,t.mapping.map(l.pos),1,y?[{type:y}]:void 0)&&(S=!0,w=y?[{type:y,attrs:h}]:void 0),r){if(S&&(i instanceof ht&&t.deleteSelection(),t.split(t.mapping.map(l.pos),1,w),y&&!g&&!l.parentOffset&&l.parent.type!==y)){const C=t.mapping.map(l.before()),A=t.doc.resolve(C);l.node(-1).canReplaceWith(A.index(),A.index()+1,y)&&t.setNodeMarkup(t.mapping.map(l.before()),y)}e&&U3(n,s.extensionManager.splittableMarks),t.scrollIntoView()}return S},UJ=(e,t={})=>({tr:n,state:r,dispatch:s,editor:i})=>{var o;const l=Qn(e,r.schema),{$from:c,$to:d}=r.selection,h=r.selection.node;if(h&&h.isBlock||c.depth<2||!c.sameParent(d))return!1;const g=c.node(-1);if(g.type!==l)return!1;const y=i.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==l||c.index(-2)!==c.node(-2).childCount-1)return!1;if(s){let E=Ae.empty;const k=c.index(-1)?1:c.index(-2)?2:3;for(let D=c.depth-k;D>=c.depth-3;D-=1)E=Ae.from(c.node(D).copy(E));const I=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,M={...q0(y,c.node().type.name,c.node().attrs),...t},P=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(M))||void 0;E=E.append(Ae.from(l.createAndFill(null,P)||void 0));const j=c.before(c.depth-(k-1));n.replace(j,c.after(-I),new He(E,4-k,0));let _=-1;n.doc.nodesBetween(j,n.doc.content.size,(D,L)=>{if(_>-1)return!1;D.isTextblock&&D.content.size===0&&(_=L+1)}),_>-1&&n.setSelection(ht.near(n.doc.resolve(_))),n.scrollIntoView()}return!0}const w=d.pos===c.end()?g.contentMatchAt(0).defaultType:null,S={...q0(y,g.type.name,g.attrs),...t},C={...q0(y,c.node().type.name,c.node().attrs),...t};n.delete(c.pos,d.pos);const A=w?[{type:l,attrs:S},{type:w,attrs:C}]:[{type:l,attrs:S}];if(!Uu(n.doc,c.pos,2))return!1;if(s){const{selection:E,storedMarks:k}=r,{splittableMarks:I}=i.extensionManager,M=k||E.$to.parentOffset&&E.$from.marks();if(n.split(c.pos,2,A).scrollIntoView(),!M||!s)return!0;const P=M.filter(j=>I.includes(j.type.name));n.ensureMarks(P)}return!0},Zy=(e,t)=>{const n=hx(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=e.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&vl(e.doc,n.pos)&&e.join(n.pos),!0},Qy=(e,t)=>{const n=hx(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=e.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&vl(e.doc,r)&&e.join(r),!0},$J=(e,t,n,r={})=>({editor:s,tr:i,state:o,dispatch:l,chain:c,commands:d,can:h})=>{const{extensions:g,splittableMarks:y}=s.extensionManager,w=Qn(e,o.schema),S=Qn(t,o.schema),{selection:C,storedMarks:A}=o,{$from:E,$to:k}=C,I=E.blockRange(k),M=A||C.$to.parentOffset&&C.$from.marks();if(!I)return!1;const P=hx(j=>H3(j.type.name,g))(C);if(I.depth>=1&&P&&I.depth-P.depth<=1){if(P.node.type===w)return d.liftListItem(S);if(H3(P.node.type.name,g)&&w.validContent(P.node.content)&&l)return c().command(()=>(i.setNodeMarkup(P.pos,w),!0)).command(()=>Zy(i,w)).command(()=>Qy(i,w)).run()}return!n||!M||!l?c().command(()=>h().wrapInList(w,r)?!0:d.clearNodes()).wrapInList(w,r).command(()=>Zy(i,w)).command(()=>Qy(i,w)).run():c().command(()=>{const j=h().wrapInList(w,r),_=M.filter(D=>y.includes(D.type.name));return i.ensureMarks(_),j?!0:d.clearNodes()}).wrapInList(w,r).command(()=>Zy(i,w)).command(()=>Qy(i,w)).run()},WJ=(e,t={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:i=!1}=n,o=sa(e,r.schema);return h2(r,o,t)?s.unsetMark(o,{extendEmptyMarkRange:i}):s.setMark(o,t)},GJ=(e,t,n={})=>({state:r,commands:s})=>{const i=Qn(e,r.schema),o=Qn(t,r.schema),l=fl(r,i,n);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),l?s.setNode(o,c):s.setNode(i,{...c,...n})},XJ=(e,t={})=>({state:n,commands:r})=>{const s=Qn(e,n.schema);return fl(n,s,t)?r.lift(s):r.wrapIn(s,t)},KJ=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let i;if(s.spec.isInputRules&&(i=s.getState(e))){if(t){const o=e.tr,l=i.transform;for(let c=l.steps.length-1;c>=0;c-=1)o.step(l.steps[c].invert(l.docs[c]));if(i.text){const c=o.doc.resolve(i.from).marks();o.replaceWith(i.from,i.to,e.schema.text(i.text,c))}else o.delete(i.from,i.to)}return!0}}return!1},YJ=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:s}=n;return r||t&&s.forEach(i=>{e.removeMark(i.$from.pos,i.$to.pos)}),!0},qJ=(e,t={})=>({tr:n,state:r,dispatch:s})=>{var i;const{extendEmptyMarkRange:o=!1}=t,{selection:l}=n,c=sa(e,r.schema),{$from:d,empty:h,ranges:g}=l;if(!s)return!0;if(h&&o){let{from:y,to:w}=l;const S=(i=d.marks().find(A=>A.type===c))==null?void 0:i.attrs,C=aS(d,c,S);C&&(y=C.from,w=C.to),n.removeMark(y,w,c)}else g.forEach(y=>{n.removeMark(y.$from.pos,y.$to.pos,c)});return n.removeStoredMark(c),!0},ZJ=e=>({tr:t,state:n,dispatch:r})=>{const{selection:s}=n;let i,o;return typeof e=="number"?(i=e,o=e):e&&"from"in e&&"to"in e?(i=e.from,o=e.to):(i=s.from,o=s.to),r&&t.doc.nodesBetween(i,o,(l,c)=>{if(l.isText)return;const d={...l.attrs};delete d.dir,t.setNodeMarkup(c,void 0,d)}),!0},QJ=(e,t={})=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const l=fx(typeof e=="string"?e:e.name,r.schema);if(!l)return!1;l==="node"&&(i=Qn(e,r.schema)),l==="mark"&&(o=sa(e,r.schema));let c=!1;return n.selection.ranges.forEach(d=>{const h=d.$from.pos,g=d.$to.pos;let y,w,S,C;n.selection.empty?r.doc.nodesBetween(h,g,(A,E)=>{i&&i===A.type&&(c=!0,S=Math.max(E,h),C=Math.min(E+A.nodeSize,g),y=E,w=A)}):r.doc.nodesBetween(h,g,(A,E)=>{E<h&&i&&i===A.type&&(c=!0,S=Math.max(E,h),C=Math.min(E+A.nodeSize,g),y=E,w=A),E>=h&&E<=g&&(i&&i===A.type&&(c=!0,s&&n.setNodeMarkup(E,void 0,{...A.attrs,...t})),o&&A.marks.length&&A.marks.forEach(k=>{if(o===k.type&&(c=!0,s)){const I=Math.max(E,h),M=Math.min(E+A.nodeSize,g);n.addMark(I,M,o.create({...k.attrs,...t}))}}))}),w&&(y!==void 0&&s&&n.setNodeMarkup(y,void 0,{...w.attrs,...t}),o&&w.marks.length&&w.marks.forEach(A=>{o===A.type&&s&&n.addMark(S,C,o.create({...A.attrs,...t}))}))}),c},JJ=(e,t={})=>({state:n,dispatch:r})=>{const s=Qn(e,n.schema);return Tq(s,t)(n,r)},eee=(e,t={})=>({state:n,dispatch:r})=>{const s=Qn(e,n.schema);return kq(s,t)(n,r)},tee=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}},mx=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},nee=(e,t)=>{if(oS(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function f0(e){var t;const{editor:n,from:r,to:s,text:i,rules:o,plugin:l}=e,{view:c}=n;if(c.composing)return!1;const d=c.state.doc.resolve(r);if(d.parent.type.spec.code||(t=d.nodeBefore||d.nodeAfter)!=null&&t.marks.find(y=>y.type.spec.code))return!1;let h=!1;const g=kJ(d)+i;return o.forEach(y=>{if(h)return;const w=nee(g,y.find);if(!w)return;const S=c.state.tr,C=ux({state:c.state,transaction:S}),A={from:r-(w[0].length-i.length),to:s},{commands:E,chain:k,can:I}=new dx({editor:n,state:C});y.handler({state:C,range:A,match:w,commands:E,chain:k,can:I})===null||!S.steps.length||(y.undoable&&S.setMeta(l,{transform:S,from:r,to:s,text:i}),c.dispatch(S),h=!0)}),h}function ree(e){const{editor:t,rules:n}=e,r=new In({state:{init(){return null},apply(s,i,o){const l=s.getMeta(r);if(l)return l;const c=s.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:h}=c;typeof h=="string"?h=h:h=cS(Ae.from(h),o.schema);const{from:g}=c,y=g+h.length;f0({editor:t,from:g,to:y,text:h,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:i}},props:{handleTextInput(s,i,o,l){return f0({editor:t,from:i,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:i}=s.state.selection;i&&f0({editor:t,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,i){if(i.key!=="Enter")return!1;const{$cursor:o}=s.state.selection;return o?f0({editor:t,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function see(e){return Object.prototype.toString.call(e).slice(8,-1)}function h0(e){return see(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function ZD(e,t){const n={...e};return h0(e)&&h0(t)&&Object.keys(t).forEach(r=>{h0(t[r])&&h0(e[r])?n[r]=ZD(e[r],t[r]):n[r]=t[r]}),n}var dS=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...Xt(st(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Xt(st(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>ZD(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},$c=class QD extends dS{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new QD(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,s=t.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(d=>(d==null?void 0:d.type.name)===n.name))return!1;const c=o.find(d=>(d==null?void 0:d.type.name)===n.name);return c&&r.removeStoredMark(c),r.insertText(" ",s.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function iee(e){return typeof e=="number"}var oee=class{constructor(e){this.find=e.find,this.handler=e.handler}},aee=(e,t,n)=>{if(oS(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(s=>{const i=[s.text];return i.index=s.index,i.input=e,i.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(s.replaceWith)),i}):[]};function lee(e){const{editor:t,state:n,from:r,to:s,rule:i,pasteEvent:o,dropEvent:l}=e,{commands:c,chain:d,can:h}=new dx({editor:t,state:n}),g=[];return n.doc.nodesBetween(r,s,(w,S)=>{var C,A,E,k,I;if((A=(C=w.type)==null?void 0:C.spec)!=null&&A.code||!(w.isText||w.isTextblock||w.isInline))return;const M=(I=(k=(E=w.content)==null?void 0:E.size)!=null?k:w.nodeSize)!=null?I:0,P=Math.max(r,S),j=Math.min(s,S+M);if(P>=j)return;const _=w.isText?w.text||"":w.textBetween(P-S,j-S,void 0,"");aee(_,i.find,o).forEach(L=>{if(L.index===void 0)return;const U=P+L.index+1,K=U+L[0].length,q={from:n.tr.mapping.map(U),to:n.tr.mapping.map(K)},re=i.handler({state:n,range:q,match:L,commands:c,chain:d,can:h,pasteEvent:o,dropEvent:l});g.push(re)})}),g.every(w=>w!==null)}var p0=null,cee=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function uee(e){const{editor:t,rules:n}=e;let r=null,s=!1,i=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const c=({state:h,from:g,to:y,rule:w,pasteEvt:S})=>{const C=h.tr,A=ux({state:h,transaction:C});if(!(!lee({editor:t,state:A,from:Math.max(g-1,0),to:y.b-1,rule:w,pasteEvent:S,dropEvent:l})||!C.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,C}};return n.map(h=>new In({view(g){const y=S=>{var C;r=(C=g.dom.parentElement)!=null&&C.contains(S.target)?g.dom.parentElement:null,r&&(p0=t)},w=()=>{p0&&(p0=null)};return window.addEventListener("dragstart",y),window.addEventListener("dragend",w),{destroy(){window.removeEventListener("dragstart",y),window.removeEventListener("dragend",w)}}},props:{handleDOMEvents:{drop:(g,y)=>{if(i=r===g.dom.parentElement,l=y,!i){const w=p0;w!=null&&w.isEditable&&setTimeout(()=>{const S=w.state.selection;S&&w.commands.deleteRange({from:S.from,to:S.to})},10)}return!1},paste:(g,y)=>{var w;const S=(w=y.clipboardData)==null?void 0:w.getData("text/html");return o=y,s=!!(S!=null&&S.includes("data-pm-slice")),!1}}},appendTransaction:(g,y,w)=>{const S=g[0],C=S.getMeta("uiEvent")==="paste"&&!s,A=S.getMeta("uiEvent")==="drop"&&!i,E=S.getMeta("applyPasteRules"),k=!!E;if(!C&&!A&&!k)return;if(k){let{text:P}=E;typeof P=="string"?P=P:P=cS(Ae.from(P),w.schema);const{from:j}=E,_=j+P.length,D=cee(P);return c({rule:h,state:w,from:j,to:{b:_},pasteEvt:D})}const I=y.doc.content.findDiffStart(w.doc.content),M=y.doc.content.findDiffEnd(w.doc.content);if(!(!iee(I)||!M||I===M.b))return c({rule:h,state:w,from:I,to:M,pasteEvt:o})}}))}var gx=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.baseExtensions=e,this.extensions=UD(e),this.schema=bJ(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:d0(t.name,this.schema)},r=st(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return i1([...this.extensions].reverse()).flatMap(r=>{const s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:d0(r.name,this.schema)},i=[],o=st(r,"addKeyboardShortcuts",s);let l={};if(r.type==="mark"&&st(r,"exitable",s)&&(l.ArrowRight=()=>$c.handleExit({editor:e,mark:r})),o){const y=Object.fromEntries(Object.entries(o()).map(([w,S])=>[w,()=>S({editor:e})]));l={...l,...y}}const c=EQ(l);i.push(c);const d=st(r,"addInputRules",s);if(V3(r,e.options.enableInputRules)&&d){const y=d();if(y&&y.length){const w=ree({editor:e,rules:y}),S=Array.isArray(w)?w:[w];i.push(...S)}}const h=st(r,"addPasteRules",s);if(V3(r,e.options.enablePasteRules)&&h){const y=h();if(y&&y.length){const w=uee({editor:e,rules:y});i.push(...w)}}const g=st(r,"addProseMirrorPlugins",s);if(g){const y=g();i.push(...y)}return i})}get attributes(){return HD(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Sd(this.extensions);return Object.fromEntries(t.filter(n=>!!st(n,"addNodeView")).map(n=>{const r=this.attributes.filter(c=>c.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Qn(n.name,this.schema)},i=st(n,"addNodeView",s);if(!i)return[];const o=i();if(!o)return[];const l=(c,d,h,g,y)=>{const w=Bh(c,r);return o({node:c,view:d,getPos:h,decorations:g,innerDecorations:y,editor:e,extension:n,HTMLAttributes:w})};return[n.name,l]}))}dispatchTransaction(e){const{editor:t}=this;return i1([...this.extensions].reverse()).reduceRight((r,s)=>{const i={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:t,type:d0(s.name,this.schema)},o=st(s,"dispatchTransaction",i);return o?l=>{o.call(i,{transaction:l,next:r})}:r},e)}get markViews(){const{editor:e}=this,{markExtensions:t}=Sd(this.extensions);return Object.fromEntries(t.filter(n=>!!st(n,"addMarkView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:sa(n.name,this.schema)},i=st(n,"addMarkView",s);if(!i)return[];const o=(l,c,d)=>{const h=Bh(l,r);return i()({mark:l,view:c,inline:d,editor:e,extension:n,HTMLAttributes:h,updateAttributes:g=>{Eee(l,e,g)}})};return[n.name,o]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:d0(t.name,this.schema)};t.type==="mark"&&((n=Xt(st(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const s=st(t,"onBeforeCreate",r),i=st(t,"onCreate",r),o=st(t,"onUpdate",r),l=st(t,"onSelectionUpdate",r),c=st(t,"onTransaction",r),d=st(t,"onFocus",r),h=st(t,"onBlur",r),g=st(t,"onDestroy",r);s&&this.editor.on("beforeCreate",s),i&&this.editor.on("create",i),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),c&&this.editor.on("transaction",c),d&&this.editor.on("focus",d),h&&this.editor.on("blur",h),g&&this.editor.on("destroy",g)})}};gx.resolve=UD;gx.sort=i1;gx.flatten=lS;var dee={};iS(dee,{ClipboardTextSerializer:()=>e6,Commands:()=>t6,Delete:()=>n6,Drop:()=>r6,Editable:()=>s6,FocusEvents:()=>o6,Keymap:()=>a6,Paste:()=>l6,Tabindex:()=>c6,TextDirection:()=>u6,focusEventsPluginKey:()=>i6});var Gn=class JD extends dS{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new JD(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},e6=Gn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new In({key:new lr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:s}=t,{ranges:i}=s,o=Math.min(...i.map(h=>h.$from.pos)),l=Math.max(...i.map(h=>h.$to.pos)),c=WD(n);return $D(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),t6=Gn.create({name:"commands",addCommands(){return{...OD}}}),n6=Gn.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,s;const i=()=>{var o,l,c,d;if((d=(c=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:c.call(l,e))!=null?d:e.getMeta("y-sync$"))return;const h=zD(e.before,[e,...t]);XD(h).forEach(w=>{h.mapping.mapResult(w.oldRange.from).deletedAfter&&h.mapping.mapResult(w.oldRange.to).deletedBefore&&h.before.nodesBetween(w.oldRange.from,w.oldRange.to,(S,C)=>{const A=C+S.nodeSize-2,E=w.oldRange.from<=C&&A<=w.oldRange.to;this.editor.emit("delete",{type:"node",node:S,from:C,to:A,newFrom:h.mapping.map(C),newTo:h.mapping.map(A),deletedRange:w.oldRange,newRange:w.newRange,partial:!E,editor:this.editor,transaction:e,combinedTransform:h})})});const y=h.mapping;h.steps.forEach((w,S)=>{var C,A;if(w instanceof ki){const E=y.slice(S).map(w.from,-1),k=y.slice(S).map(w.to),I=y.invert().map(E,-1),M=y.invert().map(k),P=(C=h.doc.nodeAt(E-1))==null?void 0:C.marks.some(_=>_.eq(w.mark)),j=(A=h.doc.nodeAt(k))==null?void 0:A.marks.some(_=>_.eq(w.mark));this.editor.emit("delete",{type:"mark",mark:w.mark,from:w.from,to:w.to,deletedRange:{from:I,to:M},newRange:{from:E,to:k},partial:!!(j||P),editor:this.editor,transaction:e,combinedTransform:h})}})};(s=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||s?setTimeout(i,0):i()}}),r6=Gn.create({name:"drop",addProseMirrorPlugins(){return[new In({key:new lr("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),s6=Gn.create({name:"editable",addProseMirrorPlugins(){return[new In({key:new lr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),i6=new lr("focusEvents"),o6=Gn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new In({key:i6,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),a6=Gn.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:c,doc:d}=l,{empty:h,$anchor:g}=c,{pos:y,parent:w}=g,S=g.parent.isTextblock&&y>0?l.doc.resolve(y-1):g,C=S.parent.type.spec.isolating,A=g.pos-g.parentOffset,E=C&&S.parent.childCount===1?A===g.pos:Ct.atStart(d).from===y;return!h||!w.type.isTextblock||w.textContent.length||!E||E&&g.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},i={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return s1()||BD()?i:s},addProseMirrorPlugins(){return[new In({key:new lr("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(C=>C.getMeta("composition")))return;const r=e.some(C=>C.docChanged)&&!t.doc.eq(n.doc),s=e.some(C=>C.getMeta("preventClearDocument"));if(!r||s)return;const{empty:i,from:o,to:l}=t.selection,c=Ct.atStart(t.doc).from,d=Ct.atEnd(t.doc).to;if(i||!(o===c&&l===d)||!px(n.doc))return;const y=n.tr,w=ux({state:n,transaction:y}),{commands:S}=new dx({editor:this.editor,state:w});if(S.clearNodes(),!!y.steps.length)return y}})]}}),l6=Gn.create({name:"paste",addProseMirrorPlugins(){return[new In({key:new lr("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),c6=Gn.create({name:"tabindex",addProseMirrorPlugins(){return[new In({key:new lr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),u6=Gn.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:e}=Sd(this.extensions);return[{types:e.filter(t=>t.name!=="text").map(t=>t.name),attributes:{dir:{default:this.options.direction,parseHTML:t=>{const n=t.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:t=>t.dir?{dir:t.dir}:{}}}}]},addProseMirrorPlugins(){return[new In({key:new lr("textDirection"),props:{attributes:()=>{const e=this.options.direction;return e?{dir:e}:{}}}})]}}),fee=class kf{constructor(t,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new kf(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new kf(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new kf(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,o=n.isInline,l=this.pos+r+(i?0:1);if(l<0||l>this.resolvedPos.doc.nodeSize-2)return;const c=this.resolvedPos.doc.resolve(l);if(!s&&!o&&c.depth<=this.depth)return;const d=new kf(c,this.editor,s,s||o?n:null);s&&(d.actualDepth=this.depth+1),t.push(d)}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===t)if(Object.keys(n).length>0){const i=s.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const c=o[l];if(i[c]!==n[c])break}}else r=s;s=s.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const i=Object.keys(n);return this.children.forEach(o=>{r&&s.length>0||(o.node.type.name===t&&i.every(c=>n[c]===o.node.attrs[c])&&s.push(o),!(r&&s.length>0)&&(s=s.concat(o.querySelectorAll(t,n,r))))}),s}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},hee=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function pee(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return t&&s.setAttribute("nonce",t),s.setAttribute("data-tiptap-style",""),s.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(s),s}var mee=class extends tee{constructor(e={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:_J,createMappablePosition:OJ},this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:s,moved:i})=>this.options.onDrop(r,s,i)),this.on("paste",({event:r,slice:s})=>this.options.onPaste(r,s)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=jD(t,this.options.autofocus);this.editorState=Iu.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e!=null&&e.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=pee(hee,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(this.editorView)return this.editorView[t];if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=VD(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(s=>{const i=typeof s=="string"?`${s}$`:s.key;n=n.filter(o=>!o.key.startsWith(i))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[s6,e6.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),t6,o6,a6,c6,r6,l6,n6,u6.configure({direction:this.options.textDirection})].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new gx(r,this)}createCommandManager(){this.commandManager=new dx({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=f2(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=f2(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){const{editorProps:t,enableExtensionDispatchTransaction:n}=this.options,r=t.dispatchTransaction||this.dispatchTransaction.bind(this),s=n?this.extensionManager.dispatchTransaction(r):r;this.editorView=new MD(e,{...t,attributes:{role:"textbox",...t==null?void 0:t.attributes},dispatchTransaction:s,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(d=>{var h;return(h=this.capturedTransaction)==null?void 0:h.step(d)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),s=n.includes(e),i=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!s)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=n.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),l=o==null?void 0:o.getMeta("focus"),c=o==null?void 0:o.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),c&&this.emit("blur",{editor:this,event:c.event,transaction:o}),!(e.getMeta("preventUpdate")||!n.some(d=>d.docChanged)||i.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return GD(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return IJ(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return cS(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return SJ(this.state.doc,{blockSeparator:t,textSerializers:{...WD(this.schema),...n}})}get isEmpty(){return px(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new fee(t,this)}get $doc(){return this.$pos(0)}};function Ed(e){return new mx({find:e.find,handler:({state:t,range:n,match:r})=>{const s=Xt(e.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:i}=t,o=r[r.length-1],l=r[0];if(o){const c=l.search(/\S/),d=n.from+l.indexOf(o),h=d+o.length;if(uS(n.from,n.to,t.doc).filter(w=>w.mark.type.excluded.find(C=>C===e.type&&C!==w.mark.type)).filter(w=>w.to>d).length)return null;h<n.to&&i.delete(h,n.to),d>n.from&&i.delete(n.from+c,d);const y=n.from+c+o.length;i.addMark(n.from+c,y,e.type.create(s||{})),i.removeStoredMark(e.type)}},undoable:e.undoable})}function gee(e){return new mx({find:e.find,handler:({state:t,range:n,match:r})=>{const s=Xt(e.getAttributes,void 0,r)||{},{tr:i}=t,o=n.from;let l=n.to;const c=e.type.create(s);if(r[1]){const d=r[0].lastIndexOf(r[1]);let h=o+d;h>l?h=l:l=h+r[1].length;const g=r[0][r[0].length-1];i.insertText(g,o+r[0].length-1),i.replaceWith(h,l,c)}else if(r[0]){const d=e.type.isInline?o:o-1;i.insert(d,e.type.create(s)).delete(i.mapping.map(o),i.mapping.map(l))}i.scrollIntoView()},undoable:e.undoable})}function p2(e){return new mx({find:e.find,handler:({state:t,range:n,match:r})=>{const s=t.doc.resolve(n.from),i=Xt(e.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,i)},undoable:e.undoable})}function Nd(e){return new mx({find:e.find,handler:({state:t,range:n,match:r,chain:s})=>{const i=Xt(e.getAttributes,void 0,r)||{},o=t.tr.delete(n.from,n.to),c=o.doc.resolve(n.from).blockRange(),d=c&&GC(c,e.type,i);if(!d)return null;if(o.wrap(c,d),e.keepMarks&&e.editor){const{selection:g,storedMarks:y}=t,{splittableMarks:w}=e.editor.extensionManager,S=y||g.$to.parentOffset&&g.$from.marks();if(S){const C=S.filter(A=>w.includes(A.type.name));o.ensureMarks(C)}}if(e.keepAttributes){const g=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(g,i).run()}const h=o.doc.resolve(n.from-1).nodeBefore;h&&h.type===e.type&&vl(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,h))&&o.join(n.from-1)},undoable:e.undoable})}function xee(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof lt){const i=r.index();return r.parent.canReplaceWith(i,i+1,t)}let s=r.depth;for(;s>=0;){const i=r.index(s);if(r.node(s).contentMatchAt(i).matchType(t))return!0;s-=1}return!1}var yee={};iS(yee,{createAtomBlockMarkdownSpec:()=>wee,createBlockMarkdownSpec:()=>vee,createInlineMarkdownSpec:()=>See,parseAttributes:()=>fS,parseIndentedBlocks:()=>m2,renderNestedMarkdownContent:()=>pS,serializeAttributes:()=>hS});function fS(e){if(!(e!=null&&e.trim()))return{};const t={},n=[],r=e.replace(/["']([^"']*)["']/g,d=>(n.push(d),`__QUOTED_${n.length-1}__`)),s=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const d=s.map(h=>h.trim().slice(1));t.class=d.join(" ")}const i=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);i&&(t.id=i[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,d,h])=>{var g;const y=parseInt(((g=h.match(/__QUOTED_(\d+)__/))==null?void 0:g[1])||"0",10),w=n[y];w&&(t[d]=w.slice(1,-1))});const c=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return c&&c.split(/\s+/).filter(Boolean).forEach(h=>{h.match(/^[a-zA-Z][\w-]*$/)&&(t[h]=!0)}),t}function hS(e){if(!e||Object.keys(e).length===0)return"";const t=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(r=>t.push(`.${r}`)),e.id&&t.push(`#${e.id}`),Object.entries(e).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?t.push(n):r!==!1&&r!=null&&t.push(`${n}="${String(r)}"`))}),t.join(" ")}function wee(e){const{nodeName:t,name:n,parseAttributes:r=fS,serializeAttributes:s=hS,defaultAttributes:i={},requiredAttributes:o=[],allowedAttributes:l}=e,c=n||t,d=h=>{if(!l)return h;const g={};return l.forEach(y=>{y in h&&(g[y]=h[y])}),g};return{parseMarkdown:(h,g)=>{const y={...i,...h.attributes};return g.createNode(t,y,[])},markdownTokenizer:{name:t,level:"block",start(h){var g;const y=new RegExp(`^:::${c}(?:\\s|$)`,"m"),w=(g=h.match(y))==null?void 0:g.index;return w!==void 0?w:-1},tokenize(h,g,y){const w=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),S=h.match(w);if(!S)return;const C=S[1]||"",A=r(C);if(!o.find(k=>!(k in A)))return{type:t,raw:S[0],attributes:A}}},renderMarkdown:h=>{const g=d(h.attrs||{}),y=s(g),w=y?` {${y}}`:"";return`:::${c}${w} :::`}}}function vee(e){const{nodeName:t,name:n,getContent:r,parseAttributes:s=fS,serializeAttributes:i=hS,defaultAttributes:o={},content:l="block",allowedAttributes:c}=e,d=n||t,h=g=>{if(!c)return g;const y={};return c.forEach(w=>{w in g&&(y[w]=g[w])}),y};return{parseMarkdown:(g,y)=>{let w;if(r){const C=r(g);w=typeof C=="string"?[{type:"text",text:C}]:C}else l==="block"?w=y.parseChildren(g.tokens||[]):w=y.parseInline(g.tokens||[]);const S={...o,...g.attributes};return y.createNode(t,S,w)},markdownTokenizer:{name:t,level:"block",start(g){var y;const w=new RegExp(`^:::${d}`,"m"),S=(y=g.match(w))==null?void 0:y.index;return S!==void 0?S:-1},tokenize(g,y,w){var S;const C=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),A=g.match(C);if(!A)return;const[E,k=""]=A,I=s(k);let M=1;const P=E.length;let j="";const _=/^:::([\w-]*)(\s.*)?/gm,D=g.slice(P);for(_.lastIndex=0;;){const L=_.exec(D);if(L===null)break;const U=L.index,K=L[1];if(!((S=L[2])!=null&&S.endsWith(":::"))){if(K)M+=1;else if(M-=1,M===0){const q=D.slice(0,U);j=q.trim();const re=g.slice(0,P+U+L[0].length);let z=[];if(j)if(l==="block")for(z=w.blockTokens(q),z.forEach(H=>{H.text&&(!H.tokens||H.tokens.length===0)&&(H.tokens=w.inlineTokens(H.text))});z.length>0;){const H=z[z.length-1];if(H.type==="paragraph"&&(!H.text||H.text.trim()===""))z.pop();else break}else z=w.inlineTokens(j);return{type:t,raw:re,attributes:I,content:j,tokens:z}}}}}},renderMarkdown:(g,y)=>{const w=h(g.attrs||{}),S=i(w),C=S?` {${S}}`:"",A=y.renderChildren(g.content||[],`

`);return`:::${d}${C}

${A}

:::`}}}function bee(e){if(!e.trim())return{};const t={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(e);for(;r!==null;){const[,s,i,o]=r;t[s]=i||o,r=n.exec(e)}return t}function Cee(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,n])=>`${t}="${n}"`).join(" ")}function See(e){const{nodeName:t,name:n,getContent:r,parseAttributes:s=bee,serializeAttributes:i=Cee,defaultAttributes:o={},selfClosing:l=!1,allowedAttributes:c}=e,d=n||t,h=y=>{if(!c)return y;const w={};return c.forEach(S=>{const C=typeof S=="string"?S:S.name,A=typeof S=="string"?void 0:S.skipIfDefault;if(C in y){const E=y[C];if(A!==void 0&&E===A)return;w[C]=E}}),w},g=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(y,w)=>{const S={...o,...y.attributes};if(l)return w.createNode(t,S);const C=r?r(y):y.content||"";return C?w.createNode(t,S,[w.createTextNode(C)]):w.createNode(t,S,[])},markdownTokenizer:{name:t,level:"inline",start(y){const w=l?new RegExp(`\\[${g}\\s*[^\\]]*\\]`):new RegExp(`\\[${g}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${g}\\]`),S=y.match(w),C=S==null?void 0:S.index;return C!==void 0?C:-1},tokenize(y,w,S){const C=l?new RegExp(`^\\[${g}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${g}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${g}\\]`),A=y.match(C);if(!A)return;let E="",k="";if(l){const[,M]=A;k=M}else{const[,M,P]=A;k=M,E=P||""}const I=s(k.trim());return{type:t,raw:A[0],content:E.trim(),attributes:I}}},renderMarkdown:y=>{let w="";r?w=r(y):y.content&&y.content.length>0&&(w=y.content.filter(E=>E.type==="text").map(E=>E.text).join(""));const S=h(y.attrs||{}),C=i(S),A=C?` ${C}`:"";return l?`[${d}${A}]`:`[${d}${A}]${w}[/${d}]`}}}function m2(e,t,n){var r,s,i,o;const l=e.split(`
`),c=[];let d="",h=0;const g=t.baseIndentSize||2;for(;h<l.length;){const y=l[h],w=y.match(t.itemPattern);if(!w){if(c.length>0)break;if(y.trim()===""){h+=1,d=`${d}${y}
`;continue}else return}const S=t.extractItemData(w),{indentLevel:C,mainContent:A}=S;d=`${d}${y}
`;const E=[A];for(h+=1;h<l.length;){const P=l[h];if(P.trim()===""){const _=l.slice(h+1).findIndex(U=>U.trim()!=="");if(_===-1)break;if((((s=(r=l[h+1+_].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:s.length)||0)>C){E.push(P),d=`${d}${P}
`,h+=1;continue}else break}if((((o=(i=P.match(/^(\s*)/))==null?void 0:i[1])==null?void 0:o.length)||0)>C)E.push(P),d=`${d}${P}
`,h+=1;else break}let k;const I=E.slice(1);if(I.length>0){const P=I.map(j=>j.slice(C+g)).join(`
`);P.trim()&&(t.customNestedParser?k=t.customNestedParser(P):k=n.blockTokens(P))}const M=t.createToken(S,k);c.push(M)}if(c.length!==0)return{items:c,raw:d}}function pS(e,t,n,r){if(!e||!Array.isArray(e.content))return"";const s=typeof n=="function"?n(r):n,[i,...o]=e.content,l=t.renderChildren([i]),c=[`${s}${l}`];return o&&o.length>0&&o.forEach(d=>{const h=t.renderChildren([d]);if(h){const g=h.split(`
`).map(y=>y?t.indent(y):"").join(`
`);c.push(g)}}),c.join(`
`)}function Eee(e,t,n={}){const{state:r}=t,{doc:s,tr:i}=r,o=e;s.descendants((l,c)=>{const d=i.mapping.map(c),h=i.mapping.map(c)+l.nodeSize;let g=null;if(l.marks.forEach(w=>{if(w!==o)return!1;g=w}),!g)return;let y=!1;if(Object.keys(n).forEach(w=>{n[w]!==g.attrs[w]&&(y=!0)}),y){const w=e.type.create({...e.attrs,...n});i.removeMark(d,h,e.type),i.addMark(d,h,w)}}),i.docChanged&&t.view.dispatch(i)}var zs=class d6 extends dS{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new d6(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function Dc(e){return new oee({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:s})=>{const i=Xt(e.getAttributes,void 0,r,s);if(i===!1||i===null)return null;const{tr:o}=t,l=r[r.length-1],c=r[0];let d=n.to;if(l){const h=c.search(/\S/),g=n.from+c.indexOf(l),y=g+l.length;if(uS(n.from,n.to,t.doc).filter(S=>S.mark.type.excluded.find(A=>A===e.type&&A!==S.mark.type)).filter(S=>S.to>g).length)return null;y<n.to&&o.delete(y,n.to),g>n.from&&o.delete(n.from+h,g),d=n.from+h+l.length,o.addMark(n.from+h,d,e.type.create(i||{})),o.removeStoredMark(e.type)}}})}const{getOwnPropertyNames:Nee,getOwnPropertySymbols:Aee}=Object,{hasOwnProperty:Tee}=Object.prototype;function Jy(e,t){return function(r,s,i){return e(r,s,i)&&t(r,s,i)}}function m0(e){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,s);const{cache:i}=s,o=i.get(n),l=i.get(r);if(o&&l)return o===r&&l===n;i.set(n,r),i.set(r,n);const c=e(n,r,s);return i.delete(n),i.delete(r),c}}function kee(e){return e!=null?e[Symbol.toStringTag]:void 0}function $3(e){return Nee(e).concat(Aee(e))}const Iee=Object.hasOwn||((e,t)=>Tee.call(e,t));function Wc(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const Ree="__v",Mee="__o",_ee="_owner",{getOwnPropertyDescriptor:W3,keys:G3}=Object;function Oee(e,t){return e.byteLength===t.byteLength&&o1(new Uint8Array(e),new Uint8Array(t))}function Pee(e,t,n){let r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function Dee(e,t){return e.byteLength===t.byteLength&&o1(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function jee(e,t){return Wc(e.getTime(),t.getTime())}function Lee(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Bee(e,t){return e===t}function X3(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const s=new Array(r),i=e.entries();let o,l,c=0;for(;(o=i.next())&&!o.done;){const d=t.entries();let h=!1,g=0;for(;(l=d.next())&&!l.done;){if(s[g]){g++;continue}const y=o.value,w=l.value;if(n.equals(y[0],w[0],c,g,e,t,n)&&n.equals(y[1],w[1],y[0],w[0],e,t,n)){h=s[g]=!0;break}g++}if(!h)return!1;c++}return!0}const Fee=Wc;function zee(e,t,n){const r=G3(e);let s=r.length;if(G3(t).length!==s)return!1;for(;s-- >0;)if(!f6(e,t,n,r[s]))return!1;return!0}function uf(e,t,n){const r=$3(e);let s=r.length;if($3(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=r[s],!f6(e,t,n,i)||(o=W3(e,i),l=W3(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function Vee(e,t){return Wc(e.valueOf(),t.valueOf())}function Hee(e,t){return e.source===t.source&&e.flags===t.flags}function K3(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const s=new Array(r),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const c=t.values();let d=!1,h=0;for(;(l=c.next())&&!l.done;){if(!s[h]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){d=s[h]=!0;break}h++}if(!d)return!1}return!0}function o1(e,t){let n=e.byteLength;if(t.byteLength!==n||e.byteOffset!==t.byteOffset)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function Uee(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function f6(e,t,n,r){return(r===_ee||r===Mee||r===Ree)&&(e.$$typeof||t.$$typeof)?!0:Iee(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}const $ee="[object ArrayBuffer]",Wee="[object Arguments]",Gee="[object Boolean]",Xee="[object DataView]",Kee="[object Date]",Yee="[object Error]",qee="[object Map]",Zee="[object Number]",Qee="[object Object]",Jee="[object RegExp]",ete="[object Set]",tte="[object String]",nte={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},rte="[object URL]",ste=Object.prototype.toString;function ite({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:d,areRegExpsEqual:h,areSetsEqual:g,areTypedArraysEqual:y,areUrlsEqual:w,unknownTagComparators:S}){return function(A,E,k){if(A===E)return!0;if(A==null||E==null)return!1;const I=typeof A;if(I!==typeof E)return!1;if(I!=="object")return I==="number"?l(A,E,k):I==="function"?i(A,E,k):!1;const M=A.constructor;if(M!==E.constructor)return!1;if(M===Object)return c(A,E,k);if(Array.isArray(A))return t(A,E,k);if(M===Date)return r(A,E,k);if(M===RegExp)return h(A,E,k);if(M===Map)return o(A,E,k);if(M===Set)return g(A,E,k);const P=ste.call(A);if(P===Kee)return r(A,E,k);if(P===Jee)return h(A,E,k);if(P===qee)return o(A,E,k);if(P===ete)return g(A,E,k);if(P===Qee)return typeof A.then!="function"&&typeof E.then!="function"&&c(A,E,k);if(P===rte)return w(A,E,k);if(P===Yee)return s(A,E,k);if(P===Wee)return c(A,E,k);if(nte[P])return y(A,E,k);if(P===$ee)return e(A,E,k);if(P===Xee)return n(A,E,k);if(P===Gee||P===Zee||P===tte)return d(A,E,k);if(S){let j=S[P];if(!j){const _=kee(A);_&&(j=S[_])}if(j)return j(A,E,k)}return!1}}function ote({circular:e,createCustomConfig:t,strict:n}){let r={areArrayBuffersEqual:Oee,areArraysEqual:n?uf:Pee,areDataViewsEqual:Dee,areDatesEqual:jee,areErrorsEqual:Lee,areFunctionsEqual:Bee,areMapsEqual:n?Jy(X3,uf):X3,areNumbersEqual:Fee,areObjectsEqual:n?uf:zee,arePrimitiveWrappersEqual:Vee,areRegExpsEqual:Hee,areSetsEqual:n?Jy(K3,uf):K3,areTypedArraysEqual:n?Jy(o1,uf):o1,areUrlsEqual:Uee,unknownTagComparators:void 0};if(t&&(r=Object.assign({},r,t(r))),e){const s=m0(r.areArraysEqual),i=m0(r.areMapsEqual),o=m0(r.areObjectsEqual),l=m0(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return r}function ate(e){return function(t,n,r,s,i,o,l){return e(t,n,l)}}function lte({circular:e,comparator:t,createState:n,equals:r,strict:s}){if(n)return function(l,c){const{cache:d=e?new WeakMap:void 0,meta:h}=n();return t(l,c,{cache:d,equals:r,meta:h,strict:s})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:r,meta:void 0,strict:s})};const i={cache:void 0,equals:r,meta:void 0,strict:s};return function(l,c){return t(l,c,i)}}const cte=Cl();Cl({strict:!0});Cl({circular:!0});Cl({circular:!0,strict:!0});Cl({createInternalComparator:()=>Wc});Cl({strict:!0,createInternalComparator:()=>Wc});Cl({circular:!0,createInternalComparator:()=>Wc});Cl({circular:!0,createInternalComparator:()=>Wc,strict:!0});function Cl(e={}){const{circular:t=!1,createInternalComparator:n,createState:r,strict:s=!1}=e,i=ote(e),o=ite(i),l=n?n(o):ate(o);return lte({circular:t,comparator:o,createState:r,equals:l,strict:s})}var h6={exports:{}},p6={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xx=N,ute=UC;function dte(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fte=typeof Object.is=="function"?Object.is:dte,hte=ute.useSyncExternalStore,pte=xx.useRef,mte=xx.useEffect,gte=xx.useMemo,xte=xx.useDebugValue;p6.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var i=pte(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=gte(function(){function c(w){if(!d){if(d=!0,h=w,w=r(w),s!==void 0&&o.hasValue){var S=o.value;if(s(S,w))return g=S}return g=w}if(S=g,fte(h,w))return S;var C=r(w);return s!==void 0&&s(S,C)?(h=w,S):(h=w,g=C)}var d=!1,h,g,y=n===void 0?null:n;return[function(){return c(t())},y===null?void 0:function(){return c(y())}]},[t,n,r,s]);var l=hte(e,i[0],i[1]);return mte(function(){o.hasValue=!0,o.value=l},[l]),xte(l),l};h6.exports=p6;var m6=h6.exports;const yte=Zh(m6);var wte=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},vte=({contentComponent:e})=>{const t=UC.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return p.jsx(p.Fragment,{children:Object.values(t)})};function bte(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:Lb.createPortal(r.reactElement,r.element,n)},e.forEach(s=>s())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(s=>s())}}}var Cte=class extends oe.Component{constructor(e){var t;super(e),this.editorContentRef=oe.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var e;const t=this.props.editor;if(t&&!t.isDestroyed&&((e=t.view.dom)!=null&&e.parentNode)){if(t.contentComponent)return;const n=this.editorContentRef.current;n.append(...t.view.dom.parentNode.childNodes),t.setOptions({element:n}),t.contentComponent=bte(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.parentNode))return;const n=document.createElement("div");n.append(...t.view.dom.parentNode.childNodes),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return p.jsxs(p.Fragment,{children:[p.jsx("div",{ref:wte(t,this.editorContentRef),...n}),(e==null?void 0:e.contentComponent)&&p.jsx(vte,{contentComponent:e.contentComponent})]})}},Ste=N.forwardRef((e,t)=>{const n=oe.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return oe.createElement(Cte,{key:n,innerRef:t,...e})}),Ete=oe.memo(Ste),Nte=typeof window<"u"?N.useLayoutEffect:N.useEffect,Ate=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function Tte(e){var t;const[n]=N.useState(()=>new Ate(e.editor)),r=m6.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:cte);return Nte(()=>n.watch(e.editor),[e.editor,n]),N.useDebugValue(r),r}var kte=!1,g2=typeof window>"u",Ite=g2||!!(typeof window<"u"&&window.next),Rte=class g6{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return g2||Ite?null:this.createEditor();if(this.options.current.immediatelyRender&&g2&&kte)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onBeforeCreate)==null?void 0:i.call(s,...r)},onBlur:(...r)=>{var s,i;return(i=(s=this.options.current).onBlur)==null?void 0:i.call(s,...r)},onCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onCreate)==null?void 0:i.call(s,...r)},onDestroy:(...r)=>{var s,i;return(i=(s=this.options.current).onDestroy)==null?void 0:i.call(s,...r)},onFocus:(...r)=>{var s,i;return(i=(s=this.options.current).onFocus)==null?void 0:i.call(s,...r)},onSelectionUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onSelectionUpdate)==null?void 0:i.call(s,...r)},onTransaction:(...r)=>{var s,i;return(i=(s=this.options.current).onTransaction)==null?void 0:i.call(s,...r)},onUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onUpdate)==null?void 0:i.call(s,...r)},onContentError:(...r)=>{var s,i;return(i=(s=this.options.current).onContentError)==null?void 0:i.call(s,...r)},onDrop:(...r)=>{var s,i;return(i=(s=this.options.current).onDrop)==null?void 0:i.call(s,...r)},onPaste:(...r)=>{var s,i;return(i=(s=this.options.current).onPaste)==null?void 0:i.call(s,...r)},onDelete:(...r)=>{var s,i;return(i=(s=this.options.current).onDelete)==null?void 0:i.call(s,...r)}};return new mee(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((s,i)=>{var o;return s===((o=n.extensions)==null?void 0:o[i])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?g6.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,s)=>r===t[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function Mte(e={},t=[]){const n=N.useRef(e);n.current=e;const[r]=N.useState(()=>new Rte(n)),s=UC.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return N.useDebugValue(s),N.useEffect(r.onRender(t)),Tte({editor:s,selector:({transactionNumber:i})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&i===0?0:i+1}),s}var _te=N.createContext({editor:null});_te.Consumer;var Ote=N.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),Pte=()=>N.useContext(Ote);oe.forwardRef((e,t)=>{const{onDragStart:n}=Pte(),r=e.as||"div";return p.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});oe.createContext({markViewContentRef:()=>{}});var a1=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},Dte=/^\s*>\s$/,jte=zs.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return a1("blockquote",{...Jn(this.options.HTMLAttributes,e),children:a1("slot",{})})},parseMarkdown:(e,t)=>t.createNode("blockquote",void 0,t.parseChildren(e.tokens||[])),renderMarkdown:(e,t)=>{if(!e.content)return"";const n=">",r=[];return e.content.forEach(s=>{const l=t.renderChildren([s]).split(`
`).map(c=>c.trim()===""?n:`${n} ${c}`);r.push(l.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Nd({find:Dte,type:this.type})]}}),Lte=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Bte=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Fte=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,zte=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Vte=$c.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return a1("strong",{...Jn(this.options.HTMLAttributes,e),children:a1("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,t)=>t.applyMark("bold",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`**${t.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ed({find:Lte,type:this.type}),Ed({find:Fte,type:this.type})]},addPasteRules(){return[Dc({find:Bte,type:this.type}),Dc({find:zte,type:this.type})]}}),Hte=/(^|[^`])`([^`]+)`(?!`)$/,Ute=/(^|[^`])`([^`]+)`(?!`)/g,$te=$c.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Jn(this.options.HTMLAttributes,e),0]},markdownTokenName:"codespan",parseMarkdown:(e,t)=>t.applyMark("code",[{type:"text",text:e.text||""}]),renderMarkdown:(e,t)=>e.content?`\`${t.renderChildren(e.content)}\``:"",addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ed({find:Hte,type:this.type})]},addPasteRules(){return[Dc({find:Ute,type:this.type})]}}),ew=4,Wte=/^```([a-z]+)?[\s\n]$/,Gte=/^~~~([a-z]+)?[\s\n]$/,Xte=zs.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:ew,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options;if(!n)return null;const i=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",Jn(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(e,t)=>{var n;return((n=e.raw)==null?void 0:n.startsWith("```"))===!1&&e.codeBlockStyle!=="indented"?[]:t.createNode("codeBlock",{language:e.lang||null},e.text?[t.createTextNode(e.text)]:[])},renderMarkdown:(e,t)=>{var n;let r="";const s=((n=e.attrs)==null?void 0:n.language)||"";return e.content?r=[`\`\`\`${s}`,t.renderChildren(e.content),"```"].join(`
`):r=`\`\`\`${s}

\`\`\``,r},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:ew,{state:r}=e,{selection:s}=r,{$from:i,empty:o}=s;if(i.parent.type!==this.type)return!1;const l=" ".repeat(n);return o?e.commands.insertContent(l):e.commands.command(({tr:c})=>{const{from:d,to:h}=s,w=r.doc.textBetween(d,h,`
`,`
`).split(`
`).map(S=>l+S).join(`
`);return c.replaceWith(d,h,r.schema.text(w)),!0})},"Shift-Tab":({editor:e})=>{var t;if(!this.options.enableTabIndentation)return!1;const n=(t=this.options.tabSize)!=null?t:ew,{state:r}=e,{selection:s}=r,{$from:i,empty:o}=s;return i.parent.type!==this.type?!1:o?e.commands.command(({tr:l})=>{var c;const{pos:d}=i,h=i.start(),g=i.end(),w=r.doc.textBetween(h,g,`
`,`
`).split(`
`);let S=0,C=0;const A=d-h;for(let j=0;j<w.length;j+=1){if(C+w[j].length>=A){S=j;break}C+=w[j].length+1}const k=((c=w[S].match(/^ */))==null?void 0:c[0])||"",I=Math.min(k.length,n);if(I===0)return!0;let M=h;for(let j=0;j<S;j+=1)M+=w[j].length+1;return l.delete(M,M+I),d-M<=I&&l.setSelection(ht.create(l.doc,M)),!0}):e.commands.command(({tr:l})=>{const{from:c,to:d}=s,y=r.doc.textBetween(c,d,`
`,`
`).split(`
`).map(w=>{var S;const C=((S=w.match(/^ */))==null?void 0:S[0])||"",A=Math.min(C.length,n);return w.slice(A)}).join(`
`);return l.replaceWith(c,d,r.schema.text(y)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!i||!o?!1:e.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:s,empty:i}=n;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const l=s.after();return l===void 0?!1:r.nodeAt(l)?e.commands.command(({tr:d})=>(d.setSelection(Ct.near(r.resolve(l))),!0)):e.commands.exitCode()}}},addInputRules(){return[p2({find:Wte,type:this.type,getAttributes:e=>({language:e[1]})}),p2({find:Gte,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new In({key:new lr("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,i=s==null?void 0:s.mode;if(!n||!i)return!1;const{tr:o,schema:l}=e.state,c=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},c)),o.selection.$from.parent.type!==this.type&&o.setSelection(ht.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),Kte=zs.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`

`):""}),Yte=zs.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Jn(this.options.HTMLAttributes,e)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:s,storedMarks:i}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,c=i||s.$to.parentOffset&&s.$from.marks();return t().insertContent({type:this.name}).command(({tr:d,dispatch:h})=>{if(h&&c&&o){const g=c.filter(y=>l.includes(y.type.name));d.ensureMarks(g)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),qte=zs.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,Jn(this.options.HTMLAttributes,t),0]},parseMarkdown:(e,t)=>t.createNode("heading",{level:e.depth||1},t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>{var n;const r=(n=e.attrs)!=null&&n.level?parseInt(e.attrs.level,10):1,s="#".repeat(r);return e.content?`${s} ${t.renderChildren(e.content)}`:""},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>p2({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),Zte=zs.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",Jn(this.options.HTMLAttributes,e)]},markdownTokenName:"hr",parseMarkdown:(e,t)=>t.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!xee(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,s=e();return KD(n)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:i,tr:o,dispatch:l})=>{if(l){const{$to:c}=o.selection,d=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(ht.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(lt.create(o.doc,c.pos)):o.setSelection(ht.create(o.doc,c.pos));else{const h=i.schema.nodes[this.options.nextNodeType]||c.parent.type.contentMatch.defaultType,g=h==null?void 0:h.create();g&&(o.insert(d,g),o.setSelection(ht.create(o.doc,d+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[gee({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Qte=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Jte=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,ene=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,tne=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,nne=$c.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Jn(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,t)=>t.applyMark("italic",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`*${t.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ed({find:Qte,type:this.type}),Ed({find:ene,type:this.type})]},addPasteRules(){return[Dc({find:Jte,type:this.type}),Dc({find:tne,type:this.type})]}});const rne="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",sne="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",x2="numeric",y2="ascii",w2="alpha",Kf="asciinumeric",If="alphanumeric",v2="domain",x6="emoji",ine="scheme",one="slashscheme",tw="whitespace";function ane(e,t){return e in t||(t[e]=[]),t[e]}function $l(e,t,n){t[x2]&&(t[Kf]=!0,t[If]=!0),t[y2]&&(t[Kf]=!0,t[w2]=!0),t[Kf]&&(t[If]=!0),t[w2]&&(t[If]=!0),t[If]&&(t[v2]=!0),t[x6]&&(t[v2]=!0);for(const r in t){const s=ane(r,n);s.indexOf(e)<0&&s.push(e)}}function lne(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function xs(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}xs.groups={};xs.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const s=t.jr[r][0],i=t.jr[r][1];if(i&&s.test(e))return i}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let s=0;s<e.length;s++)this.tt(e[s],t,n,r)},tr(e,t,n,r){r=r||xs.groups;let s;return t&&t.j?s=t:(s=new xs(t),n&&r&&$l(t,n,r)),this.jr.push([e,s]),s},ts(e,t,n,r){let s=this;const i=e.length;if(!i)return s;for(let o=0;o<i-1;o++)s=s.tt(e[o]);return s.tt(e[i-1],t,n,r)},tt(e,t,n,r){r=r||xs.groups;const s=this;if(t&&t.j)return s.j[e]=t,t;const i=t;let o,l=s.go(e);if(l?(o=new xs,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new xs,i){if(r)if(o.t&&typeof o.t=="string"){const c=Object.assign(lne(o.t,r),n);$l(i,c,r)}else n&&$l(i,n,r);o.t=i}return s.j[e]=o,o}};const vt=(e,t,n,r,s)=>e.ta(t,n,r,s),On=(e,t,n,r,s)=>e.tr(t,n,r,s),Y3=(e,t,n,r,s)=>e.ts(t,n,r,s),Me=(e,t,n,r,s)=>e.tt(t,n,r,s),Po="WORD",b2="UWORD",y6="ASCIINUMERICAL",w6="ALPHANUMERICAL",Fh="LOCALHOST",C2="TLD",S2="UTLD",Z0="SCHEME",pu="SLASH_SCHEME",mS="NUM",E2="WS",gS="NL",Yf="OPENBRACE",qf="CLOSEBRACE",l1="OPENBRACKET",c1="CLOSEBRACKET",u1="OPENPAREN",d1="CLOSEPAREN",f1="OPENANGLEBRACKET",h1="CLOSEANGLEBRACKET",p1="FULLWIDTHLEFTPAREN",m1="FULLWIDTHRIGHTPAREN",g1="LEFTCORNERBRACKET",x1="RIGHTCORNERBRACKET",y1="LEFTWHITECORNERBRACKET",w1="RIGHTWHITECORNERBRACKET",v1="FULLWIDTHLESSTHAN",b1="FULLWIDTHGREATERTHAN",C1="AMPERSAND",S1="APOSTROPHE",E1="ASTERISK",Sa="AT",N1="BACKSLASH",A1="BACKTICK",T1="CARET",Ma="COLON",xS="COMMA",k1="DOLLAR",Qi="DOT",I1="EQUALS",yS="EXCLAMATION",Ws="HYPHEN",Zf="PERCENT",R1="PIPE",M1="PLUS",_1="POUND",Qf="QUERY",wS="QUOTE",v6="FULLWIDTHMIDDLEDOT",vS="SEMI",Ji="SLASH",Jf="TILDE",O1="UNDERSCORE",b6="EMOJI",P1="SYM";var C6=Object.freeze({__proto__:null,ALPHANUMERICAL:w6,AMPERSAND:C1,APOSTROPHE:S1,ASCIINUMERICAL:y6,ASTERISK:E1,AT:Sa,BACKSLASH:N1,BACKTICK:A1,CARET:T1,CLOSEANGLEBRACKET:h1,CLOSEBRACE:qf,CLOSEBRACKET:c1,CLOSEPAREN:d1,COLON:Ma,COMMA:xS,DOLLAR:k1,DOT:Qi,EMOJI:b6,EQUALS:I1,EXCLAMATION:yS,FULLWIDTHGREATERTHAN:b1,FULLWIDTHLEFTPAREN:p1,FULLWIDTHLESSTHAN:v1,FULLWIDTHMIDDLEDOT:v6,FULLWIDTHRIGHTPAREN:m1,HYPHEN:Ws,LEFTCORNERBRACKET:g1,LEFTWHITECORNERBRACKET:y1,LOCALHOST:Fh,NL:gS,NUM:mS,OPENANGLEBRACKET:f1,OPENBRACE:Yf,OPENBRACKET:l1,OPENPAREN:u1,PERCENT:Zf,PIPE:R1,PLUS:M1,POUND:_1,QUERY:Qf,QUOTE:wS,RIGHTCORNERBRACKET:x1,RIGHTWHITECORNERBRACKET:w1,SCHEME:Z0,SEMI:vS,SLASH:Ji,SLASH_SCHEME:pu,SYM:P1,TILDE:Jf,TLD:C2,UNDERSCORE:O1,UTLD:S2,UWORD:b2,WORD:Po,WS:E2});const Io=/[a-z]/,df=new RegExp("\\p{L}","u"),nw=new RegExp("\\p{Emoji}","u"),Ro=/\d/,rw=/\s/,q3="\r",sw=`
`,cne="",une="",iw="";let g0=null,x0=null;function dne(e=[]){const t={};xs.groups=t;const n=new xs;g0==null&&(g0=Z3(rne)),x0==null&&(x0=Z3(sne)),Me(n,"'",S1),Me(n,"{",Yf),Me(n,"}",qf),Me(n,"[",l1),Me(n,"]",c1),Me(n,"(",u1),Me(n,")",d1),Me(n,"<",f1),Me(n,">",h1),Me(n,"",p1),Me(n,"",m1),Me(n,"",g1),Me(n,"",x1),Me(n,"",y1),Me(n,"",w1),Me(n,"",v1),Me(n,"",b1),Me(n,"&",C1),Me(n,"*",E1),Me(n,"@",Sa),Me(n,"`",A1),Me(n,"^",T1),Me(n,":",Ma),Me(n,",",xS),Me(n,"$",k1),Me(n,".",Qi),Me(n,"=",I1),Me(n,"!",yS),Me(n,"-",Ws),Me(n,"%",Zf),Me(n,"|",R1),Me(n,"+",M1),Me(n,"#",_1),Me(n,"?",Qf),Me(n,'"',wS),Me(n,"/",Ji),Me(n,";",vS),Me(n,"~",Jf),Me(n,"_",O1),Me(n,"\\",N1),Me(n,"",v6);const r=On(n,Ro,mS,{[x2]:!0});On(r,Ro,r);const s=On(r,Io,y6,{[Kf]:!0}),i=On(r,df,w6,{[If]:!0}),o=On(n,Io,Po,{[y2]:!0});On(o,Ro,s),On(o,Io,o),On(s,Ro,s),On(s,Io,s);const l=On(n,df,b2,{[w2]:!0});On(l,Io),On(l,Ro,i),On(l,df,l),On(i,Ro,i),On(i,Io),On(i,df,i);const c=Me(n,sw,gS,{[tw]:!0}),d=Me(n,q3,E2,{[tw]:!0}),h=On(n,rw,E2,{[tw]:!0});Me(n,iw,h),Me(d,sw,c),Me(d,iw,h),On(d,rw,h),Me(h,q3),Me(h,sw),On(h,rw,h),Me(h,iw,h);const g=On(n,nw,b6,{[x6]:!0});Me(g,"#"),On(g,nw,g),Me(g,cne,g);const y=Me(g,une);Me(y,"#"),On(y,nw,g);const w=[[Io,o],[Ro,s]],S=[[Io,null],[df,l],[Ro,i]];for(let C=0;C<g0.length;C++)ma(n,g0[C],C2,Po,w);for(let C=0;C<x0.length;C++)ma(n,x0[C],S2,b2,S);$l(C2,{tld:!0,ascii:!0},t),$l(S2,{utld:!0,alpha:!0},t),ma(n,"file",Z0,Po,w),ma(n,"mailto",Z0,Po,w),ma(n,"http",pu,Po,w),ma(n,"https",pu,Po,w),ma(n,"ftp",pu,Po,w),ma(n,"ftps",pu,Po,w),$l(Z0,{scheme:!0,ascii:!0},t),$l(pu,{slashscheme:!0,ascii:!0},t),e=e.sort((C,A)=>C[0]>A[0]?1:-1);for(let C=0;C<e.length;C++){const A=e[C][0],k=e[C][1]?{[ine]:!0}:{[one]:!0};A.indexOf("-")>=0?k[v2]=!0:Io.test(A)?Ro.test(A)?k[Kf]=!0:k[y2]=!0:k[x2]=!0,Y3(n,A,A,k)}return Y3(n,"localhost",Fh,{ascii:!0}),n.jd=new xs(P1),{start:n,tokens:Object.assign({groups:t},C6)}}function S6(e,t){const n=fne(t.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,s=[];let i=0,o=0;for(;o<r;){let l=e,c=null,d=0,h=null,g=-1,y=-1;for(;o<r&&(c=l.go(n[o]));)l=c,l.accepts()?(g=0,y=0,h=l):g>=0&&(g+=n[o].length,y++),d+=n[o].length,i+=n[o].length,o++;i-=g,o-=y,d-=g,s.push({t:h.t,v:t.slice(i-d,i),s:i-d,e:i})}return s}function fne(e){const t=[],n=e.length;let r=0;for(;r<n;){let s=e.charCodeAt(r),i,o=s<55296||s>56319||r+1===n||(i=e.charCodeAt(r+1))<56320||i>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}function ma(e,t,n,r,s){let i;const o=t.length;for(let l=0;l<o-1;l++){const c=t[l];e.j[c]?i=e.j[c]:(i=new xs(r),i.jr=s.slice(),e.j[c]=i),e=i}return i=new xs(n),i.jr=s.slice(),e.j[t[o-1]]=i,i}function Z3(e){const t=[],n=[];let r=0,s="0123456789";for(;r<e.length;){let i=0;for(;s.indexOf(e[r+i])>=0;)i++;if(i>0){t.push(n.join(""));for(let o=parseInt(e.substring(r,r+i),10);o>0;o--)n.pop();r+=i}else n.push(e[r]),r++}return t}const zh={defaultProtocol:"http",events:null,format:Q3,formatHref:Q3,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function bS(e,t=null){let n=Object.assign({},zh);e&&(n=Object.assign(n,e instanceof bS?e.o:e));const r=n.ignoreTags,s=[];for(let i=0;i<r.length;i++)s.push(r[i].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=s}bS.prototype={o:zh,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let s=this.o[e];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:zh[e],typeof s=="function"&&r&&(s=s(t,n))):typeof s=="function"&&r&&(s=s(t,n.t,n)),s)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function Q3(e){return e}function E6(e,t){this.t="token",this.v=e,this.tk=t}E6.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=zh.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),s=e.get("tagName",n,t),i=this.toFormattedString(e),o={},l=e.get("className",n,t),c=e.get("target",n,t),d=e.get("rel",n,t),h=e.getObj("attributes",n,t),g=e.getObj("events",n,t);return o.href=r,l&&(o.class=l),c&&(o.target=c),d&&(o.rel=d),h&&Object.assign(o,h),{tagName:s,attributes:o,content:i,eventListeners:g}}};function yx(e,t){class n extends E6{constructor(s,i){super(s,i),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const J3=yx("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),eT=yx("text"),hne=yx("nl"),y0=yx("url",{isLink:!0,toHref(e=zh.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==Fh&&e[1].t===Ma}}),$s=e=>new xs(e);function pne({groups:e}){const t=e.domain.concat([C1,E1,Sa,N1,A1,T1,k1,I1,Ws,mS,Zf,R1,M1,_1,Ji,P1,Jf,O1]),n=[S1,Ma,xS,Qi,yS,Zf,Qf,wS,vS,f1,h1,Yf,qf,c1,l1,u1,d1,p1,m1,g1,x1,y1,w1,v1,b1],r=[C1,S1,E1,N1,A1,T1,k1,I1,Ws,Yf,qf,Zf,R1,M1,_1,Qf,Ji,P1,Jf,O1],s=$s(),i=Me(s,Jf);vt(i,r,i),vt(i,e.domain,i);const o=$s(),l=$s(),c=$s();vt(s,e.domain,o),vt(s,e.scheme,l),vt(s,e.slashscheme,c),vt(o,r,i),vt(o,e.domain,o);const d=Me(o,Sa);Me(i,Sa,d),Me(l,Sa,d),Me(c,Sa,d);const h=Me(i,Qi);vt(h,r,i),vt(h,e.domain,i);const g=$s();vt(d,e.domain,g),vt(g,e.domain,g);const y=Me(g,Qi);vt(y,e.domain,g);const w=$s(J3);vt(y,e.tld,w),vt(y,e.utld,w),Me(d,Fh,w);const S=Me(g,Ws);Me(S,Ws,S),vt(S,e.domain,g),vt(w,e.domain,g),Me(w,Qi,y),Me(w,Ws,S);const C=Me(w,Ma);vt(C,e.numeric,J3);const A=Me(o,Ws),E=Me(o,Qi);Me(A,Ws,A),vt(A,e.domain,o),vt(E,r,i),vt(E,e.domain,o);const k=$s(y0);vt(E,e.tld,k),vt(E,e.utld,k),vt(k,e.domain,o),vt(k,r,i),Me(k,Qi,E),Me(k,Ws,A),Me(k,Sa,d);const I=Me(k,Ma),M=$s(y0);vt(I,e.numeric,M);const P=$s(y0),j=$s();vt(P,t,P),vt(P,n,j),vt(j,t,P),vt(j,n,j),Me(k,Ji,P),Me(M,Ji,P);const _=Me(l,Ma),D=Me(c,Ma),L=Me(D,Ji),U=Me(L,Ji);vt(l,e.domain,o),Me(l,Qi,E),Me(l,Ws,A),vt(c,e.domain,o),Me(c,Qi,E),Me(c,Ws,A),vt(_,e.domain,P),Me(_,Ji,P),Me(_,Qf,P),vt(U,e.domain,P),vt(U,t,P),Me(U,Ji,P);const K=[[Yf,qf],[l1,c1],[u1,d1],[f1,h1],[p1,m1],[g1,x1],[y1,w1],[v1,b1]];for(let q=0;q<K.length;q++){const[re,z]=K[q],H=Me(P,re);Me(j,re,H),Me(H,z,P);const Y=$s(y0);vt(H,t,Y);const X=$s();vt(H,n),vt(Y,t,Y),vt(Y,n,X),vt(X,t,Y),vt(X,n,X),Me(Y,z,P),Me(X,z,P)}return Me(s,Fh,k),Me(s,gS,hne),{start:s,tokens:C6}}function mne(e,t,n){let r=n.length,s=0,i=[],o=[];for(;s<r;){let l=e,c=null,d=null,h=0,g=null,y=-1;for(;s<r&&!(c=l.go(n[s].t));)o.push(n[s++]);for(;s<r&&(d=c||l.go(n[s].t));)c=null,l=d,l.accepts()?(y=0,g=l):y>=0&&y++,s++,h++;if(y<0)s-=h,s<r&&(o.push(n[s]),s++);else{o.length>0&&(i.push(ow(eT,t,o)),o=[]),s-=y,h-=y;const w=g.t,S=n.slice(s-h,s);i.push(ow(w,t,S))}}return o.length>0&&i.push(ow(eT,t,o)),i}function ow(e,t,n){const r=n[0].s,s=n[n.length-1].e,i=t.slice(r,s);return new e(i,n)}const gne=typeof console<"u"&&console&&console.warn||(()=>{}),xne="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",xn={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function yne(){return xs.groups={},xn.scanner=null,xn.parser=null,xn.tokenQueue=[],xn.pluginQueue=[],xn.customSchemes=[],xn.initialized=!1,xn}function tT(e,t=!1){if(xn.initialized&&gne(`linkifyjs: already initialized - will not register custom scheme "${e}" ${xne}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);xn.customSchemes.push([e,t])}function wne(){xn.scanner=dne(xn.customSchemes);for(let e=0;e<xn.tokenQueue.length;e++)xn.tokenQueue[e][1]({scanner:xn.scanner});xn.parser=pne(xn.scanner.tokens);for(let e=0;e<xn.pluginQueue.length;e++)xn.pluginQueue[e][1]({scanner:xn.scanner,parser:xn.parser});return xn.initialized=!0,xn}function CS(e){return xn.initialized||wne(),mne(xn.parser.start,e,S6(xn.scanner.start,e))}CS.scan=S6;function N6(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new bS(n),s=CS(e),i=[];for(let o=0;o<s.length;o++){const l=s[o];l.isLink&&(!t||l.t===t)&&r.check(l)&&i.push(l.toFormattedObject(r))}return i}var SS="[\0- -\u2029]",vne=new RegExp(SS),bne=new RegExp(`${SS}$`),Cne=new RegExp(SS,"g");function Sne(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function Ene(e){return new In({key:new lr("autolink"),appendTransaction:(t,n,r)=>{const s=t.some(d=>d.docChanged)&&!n.doc.eq(r.doc),i=t.some(d=>d.getMeta("preventAutolink"));if(!s||i)return;const{tr:o}=r,l=zD(n.doc,[...t]);if(XD(l).forEach(({newRange:d})=>{const h=xJ(r.doc,d,w=>w.isTextblock);let g,y;if(h.length>1)g=h[0],y=r.doc.textBetween(g.pos,g.pos+g.node.nodeSize,void 0," ");else if(h.length){const w=r.doc.textBetween(d.from,d.to," "," ");if(!bne.test(w))return;g=h[0],y=r.doc.textBetween(g.pos,d.to,void 0," ")}if(g&&y){const w=y.split(vne).filter(Boolean);if(w.length<=0)return!1;const S=w[w.length-1],C=g.pos+y.lastIndexOf(S);if(!S)return!1;const A=CS(S).map(E=>E.toObject(e.defaultProtocol));if(!Sne(A))return!1;A.filter(E=>E.isLink).map(E=>({...E,from:C+E.start+1,to:C+E.end+1})).filter(E=>r.schema.marks.code?!r.doc.rangeHasMark(E.from,E.to,r.schema.marks.code):!0).filter(E=>e.validate(E.value)).filter(E=>e.shouldAutoLink(E.value)).forEach(E=>{uS(E.from,E.to,r.doc).some(k=>k.mark.type===e.type)||o.addMark(E.from,E.to,e.type.create({href:E.href}))})}}),!!o.steps.length)return o}})}function Nne(e){return new In({key:new lr("handleClickLink"),props:{handleClick:(t,n,r)=>{var s,i;if(r.button!==0||!t.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{const c=r.target;if(!c)return!1;const d=e.editor.view.dom;o=c.closest("a"),o&&!d.contains(o)&&(o=null)}if(!o)return!1;let l=!1;if(e.enableClickSelection&&(l=e.editor.commands.extendMarkRange(e.type.name)),e.openOnClick){const c=GD(t.state,e.type.name),d=(s=o.href)!=null?s:c.href,h=(i=o.target)!=null?i:c.target;d&&(window.open(d,h),l=!0)}return l}}})}function Ane(e){return new In({key:new lr("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{shouldAutoLink:s}=e,{state:i}=t,{selection:o}=i,{empty:l}=o;if(l)return!1;let c="";r.content.forEach(h=>{c+=h.textContent});const d=N6(c,{defaultProtocol:e.defaultProtocol}).find(h=>h.isLink&&h.value===c);return!c||!d||s!==void 0&&!s(d.value)?!1:e.editor.commands.setMark(e.type,{href:d.href})}}})}function _l(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!e||e.replace(Cne,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Tne=$c.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){tT(e);return}tT(e.scheme,e.optionalSlashes)})},onDestroy(){yne()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!_l(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>{const t=/^[a-z][a-z0-9+.-]*:\/\//i.test(e),n=/^[a-z][a-z0-9+.-]*:/i.test(e);if(t||n&&!e.includes("@"))return!0;const s=(e.includes("@")?e.split("@").pop():e).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(s)||!/\./.test(s))}}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!_l(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!_l(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Jn(this.options.HTMLAttributes,e),0]:["a",Jn(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,t)=>t.applyMark("link",t.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,t)=>{var n;const r=((n=e.attrs)==null?void 0:n.href)||"";return`[${t.renderChildren(e)}](${r})`},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!_l(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!_l(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Dc({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,s=N6(e).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:o=>!!_l(o,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(i=>{this.options.shouldAutoLink(i.value)&&t.push({text:i.value,data:{href:i.href},index:i.start})})}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(Ene({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!_l(s,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),e.push(Nne({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(Ane({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),e}}),kne=Object.defineProperty,Ine=(e,t)=>{for(var n in t)kne(e,n,{get:t[n],enumerable:!0})},Rne="listItem",nT="textStyle",rT=/^\s*([-+*])\s$/,A6=zs.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",Jn(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>e.type!=="list"||e.ordered?[]:{type:"bulletList",content:e.items?t.parseChildren(e.items):[]},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Rne,this.editor.getAttributes(nT)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=Nd({find:rT,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Nd({find:rT,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(nT),editor:this.editor})),[e]}}),T6=zs.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",Jn(this.options.HTMLAttributes,e),0]},markdownTokenName:"list_item",parseMarkdown:(e,t)=>{if(e.type!=="list_item")return[];let n=[];if(e.tokens&&e.tokens.length>0)if(e.tokens.some(s=>s.type==="paragraph"))n=t.parseChildren(e.tokens);else{const s=e.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(n=[{type:"paragraph",content:t.parseInline(s.tokens)}],e.tokens.length>1){const o=e.tokens.slice(1),l=t.parseChildren(o);n.push(...l)}}else n=t.parseChildren(e.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(e,t,n)=>pS(e,t,r=>{var s,i;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((i=(s=r.meta)==null?void 0:s.parentAttrs)==null?void 0:i.start)||1)+r.index}. `:"- "},n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Mne={};Ine(Mne,{findListItemPos:()=>wp,getNextListDepth:()=>ES,handleBackspace:()=>N2,handleDelete:()=>A2,hasListBefore:()=>k6,hasListItemAfter:()=>_ne,hasListItemBefore:()=>I6,listItemHasSubList:()=>R6,nextListIsDeeper:()=>M6,nextListIsHigher:()=>_6});var wp=(e,t)=>{const{$from:n}=t.selection,r=Qn(e,t.schema);let s=null,i=n.depth,o=n.pos,l=null;for(;i>0&&l===null;)s=n.node(i),s.type===r?l=i:(i-=1,o-=1);return l===null?null:{$pos:t.doc.resolve(o),depth:l}},ES=(e,t)=>{const n=wp(e,t);if(!n)return!1;const[,r]=TJ(t,e,n.$pos.pos+4);return r},k6=(e,t,n)=>{const{$anchor:r}=e.selection,s=Math.max(0,r.pos-2),i=e.doc.resolve(s).node();return!(!i||!n.includes(i.type.name))},I6=(e,t)=>{var n;const{$anchor:r}=t.selection,s=t.doc.resolve(r.pos-2);return!(s.index()===0||((n=s.nodeBefore)==null?void 0:n.type.name)!==e)},R6=(e,t,n)=>{if(!n)return!1;const r=Qn(e,t.schema);let s=!1;return n.descendants(i=>{i.type===r&&(s=!0)}),s},N2=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!fl(e.state,t)&&k6(e.state,t,n)){const{$anchor:l}=e.state.selection,c=e.state.doc.resolve(l.before()-1),d=[];c.node().descendants((y,w)=>{y.type.name===t&&d.push({node:y,pos:w})});const h=d.at(-1);if(!h)return!1;const g=e.state.doc.resolve(c.start()+h.pos+1);return e.chain().cut({from:l.start()-1,to:l.end()+1},g.end()).joinForward().run()}if(!fl(e.state,t)||!MJ(e.state))return!1;const r=wp(t,e.state);if(!r)return!1;const i=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=R6(t,e.state,i);return I6(t,e.state)&&!o?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},M6=(e,t)=>{const n=ES(e,t),r=wp(e,t);return!r||!n?!1:n>r.depth},_6=(e,t)=>{const n=ES(e,t),r=wp(e,t);return!r||!n?!1:n<r.depth},A2=(e,t)=>{if(!fl(e.state,t)||!RJ(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:s}=n;return!n.empty&&r.sameParent(s)?!1:M6(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():_6(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},_ne=(e,t)=>{var n;const{$anchor:r}=t.selection,s=t.doc.resolve(r.pos-r.parentOffset-2);return!(s.index()===s.parent.childCount-1||((n=s.nodeAfter)==null?void 0:n.type.name)!==e)},O6=Gn.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&A2(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&A2(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&N2(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&N2(e,n,r)&&(t=!0)}),t}}}}),sT=/^(\s*)(\d+)\.\s+(.*)$/,One=/^\s/;function Pne(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n],i=s.match(sT);if(!i)break;const[,o,l,c]=i,d=o.length;let h=c,g=n+1;const y=[s];for(;g<e.length;){const w=e[g];if(w.match(sT))break;if(w.trim()==="")y.push(w),h+=`
`,g+=1;else if(w.match(One))y.push(w),h+=`
${w.slice(d+2)}`,g+=1;else break}t.push({indent:d,number:parseInt(l,10),content:h.trim(),raw:y.join(`
`)}),r=g,n=g}return[t,r]}function P6(e,t,n){var r;const s=[];let i=0;for(;i<e.length;){const o=e[i];if(o.indent===t){const l=o.content.split(`
`),c=((r=l[0])==null?void 0:r.trim())||"",d=[];c&&d.push({type:"paragraph",raw:c,tokens:n.inlineTokens(c)});const h=l.slice(1).join(`
`).trim();if(h){const w=n.blockTokens(h);d.push(...w)}let g=i+1;const y=[];for(;g<e.length&&e[g].indent>t;)y.push(e[g]),g+=1;if(y.length>0){const w=Math.min(...y.map(C=>C.indent)),S=P6(y,w,n);d.push({type:"list",ordered:!0,start:y[0].number,items:S,raw:y.map(C=>C.raw).join(`
`)})}s.push({type:"list_item",raw:o.raw,tokens:d}),i=g}else i+=1}return s}function Dne(e,t){return e.map(n=>{if(n.type!=="list_item")return t.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")r.push(...t.parseChildren([s]));else if(s.type==="text"&&s.tokens){const i=t.parseChildren([s]);r.push({type:"paragraph",content:i})}else{const i=t.parseChildren([s]);i.length>0&&r.push(...i)}}),{type:"listItem",content:r}})}var jne="listItem",iT="textStyle",oT=/^(\d+)\.\s$/,D6=zs.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",Jn(this.options.HTMLAttributes,n),0]:["ol",Jn(this.options.HTMLAttributes,e),0]},markdownTokenName:"list",parseMarkdown:(e,t)=>{if(e.type!=="list"||!e.ordered)return[];const n=e.start||1,r=e.items?Dne(e.items,t):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:e=>{const t=e.match(/^(\s*)(\d+)\.\s+/),n=t==null?void 0:t.index;return n!==void 0?n:-1},tokenize:(e,t,n)=>{var r;const s=e.split(`
`),[i,o]=Pne(s);if(i.length===0)return;const l=P6(i,0,n);return l.length===0?void 0:{type:"list",ordered:!0,start:((r=i[0])==null?void 0:r.number)||1,items:l,raw:s.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(jne,this.editor.getAttributes(iT)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=Nd({find:oT,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Nd({find:oT,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(iT)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),Lne=/^\s*(\[([( |x])?\])\s$/,Bne=zs.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",Jn(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(e,t)=>{const n=[];if(e.tokens&&e.tokens.length>0?n.push(t.createNode("paragraph",{},t.parseInline(e.tokens))):e.text?n.push(t.createNode("paragraph",{},[t.createNode("text",{text:e.text})])):n.push(t.createNode("paragraph",{},[])),e.nestedTokens&&e.nestedTokens.length>0){const r=t.parseChildren(e.nestedTokens);n.push(...r)}return t.createNode("taskItem",{checked:e.checked||!1},n)},renderMarkdown:(e,t)=>{var n;const s=`- [${(n=e.attrs)!=null&&n.checked?"x":" "}] `;return pS(e,t,s)},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const s=document.createElement("li"),i=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),c=document.createElement("div"),d=g=>{var y,w;l.ariaLabel=((w=(y=this.options.a11y)==null?void 0:y.checkboxLabel)==null?void 0:w.call(y,g,l.checked))||`Task item checkbox for ${g.textContent||"empty task item"}`};d(e),i.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",g=>g.preventDefault()),l.addEventListener("change",g=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:y}=g.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:w})=>{const S=n();if(typeof S!="number")return!1;const C=w.doc.nodeAt(S);return w.setNodeMarkup(S,void 0,{...C==null?void 0:C.attrs,checked:y}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,y)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([g,y])=>{s.setAttribute(g,y)}),s.dataset.checked=e.attrs.checked,l.checked=e.attrs.checked,i.append(l,o),s.append(i,c),Object.entries(t).forEach(([g,y])=>{s.setAttribute(g,y)});let h=new Set(Object.keys(t));return{dom:s,contentDOM:c,update:g=>{if(g.type!==this.type)return!1;s.dataset.checked=g.attrs.checked,l.checked=g.attrs.checked,d(g);const y=r.extensionManager.attributes,w=Bh(g,y),S=new Set(Object.keys(w)),C=this.options.HTMLAttributes;return h.forEach(A=>{S.has(A)||(A in C?s.setAttribute(A,C[A]):s.removeAttribute(A))}),Object.entries(w).forEach(([A,E])=>{E==null?A in C?s.setAttribute(A,C[A]):s.removeAttribute(A):s.setAttribute(A,E)}),h=S,!0}}}},addInputRules(){return[Nd({find:Lne,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),Fne=zs.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",Jn(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},parseMarkdown:(e,t)=>t.createNode("taskList",{},t.parseChildren(e.items||[])),renderMarkdown:(e,t)=>e.content?t.renderChildren(e.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(e){var t;const n=(t=e.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:t.index;return n!==void 0?n:-1},tokenize(e,t,n){const r=i=>{const o=m2(i,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:l=>({indentLevel:l[1].length,mainContent:l[4],checked:l[3].toLowerCase()==="x"}),createToken:(l,c)=>({type:"taskItem",raw:"",mainContent:l.mainContent,indentLevel:l.indentLevel,checked:l.checked,text:l.mainContent,tokens:n.inlineTokens(l.mainContent),nestedTokens:c}),customNestedParser:r},n);return o?[{type:"taskList",raw:o.raw,items:o.items}]:n.blockTokens(i)},s=m2(e,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:i=>({indentLevel:i[1].length,mainContent:i[4],checked:i[3].toLowerCase()==="x"}),createToken:(i,o)=>({type:"taskItem",raw:"",mainContent:i.mainContent,indentLevel:i.indentLevel,checked:i.checked,text:i.mainContent,tokens:n.inlineTokens(i.mainContent),nestedTokens:o}),customNestedParser:r},n);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Gn.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(A6.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(T6.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(O6.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(D6.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(Bne.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(Fne.configure(this.options.taskList)),e}});var aT="&nbsp;",zne="",Vne=zs.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",Jn(this.options.HTMLAttributes,e),0]},parseMarkdown:(e,t)=>{const n=e.tokens||[];if(n.length===1&&n[0].type==="image")return t.parseChildren([n[0]]);const r=t.parseInline(n);return r.length===1&&r[0].type==="text"&&(r[0].text===aT||r[0].text===zne)?t.createNode("paragraph",void 0,[]):t.createNode("paragraph",void 0,r)},renderMarkdown:(e,t)=>{if(!e)return"";const n=Array.isArray(e.content)?e.content:[];return n.length===0?aT:t.renderChildren(n)},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Hne=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Une=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,$ne=$c.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Jn(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,t)=>t.applyMark("strike",t.parseInline(e.tokens||[])),renderMarkdown:(e,t)=>`~~${t.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ed({find:Hne,type:this.type})]},addPasteRules(){return[Dc({find:Une,type:this.type})]}}),Wne=zs.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""}),Gne=$c.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Jn(this.options.HTMLAttributes,e),0]},parseMarkdown(e,t){return t.applyMark(this.name||"underline",t.parseInline(e.tokens||[]))},renderMarkdown(e,t){return`++${t.renderChildren(e)}++`},markdownTokenizer:{name:"underline",level:"inline",start(e){return e.indexOf("++")},tokenize(e,t,n){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!s)return;const i=s[2].trim();return{type:"underline",raw:s[0],text:i,tokens:n.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function Xne(e={}){return new In({view(t){return new Kne(t,e)}})}class Kne{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=o=>{this[s](o)};return t.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,s=this.editorView.dom,i=s.getBoundingClientRect(),o=i.width/s.offsetWidth,l=i.height/s.offsetHeight;if(n){let g=t.nodeBefore,y=t.nodeAfter;if(g||y){let w=this.editorView.nodeDOM(this.cursorPos-(g?g.nodeSize:0));if(w){let S=w.getBoundingClientRect(),C=g?S.bottom:S.top;g&&y&&(C=(C+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let A=this.width/2*l;r={left:S.left,right:S.right,top:C-A,bottom:C+A}}}}if(!r){let g=this.editorView.coordsAtPos(this.cursorPos),y=this.width/2*o;r={left:g.left-y,right:g.left+y,top:g.top,bottom:g.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let d,h;if(!c||c==document.body&&getComputedStyle(c).position=="static")d=-pageXOffset,h=-pageYOffset;else{let g=c.getBoundingClientRect(),y=g.width/c.offsetWidth,w=g.height/c.offsetHeight;d=g.left-c.scrollLeft*y,h=g.top-c.scrollTop*w}this.element.style.left=(r.left-d)/o+"px",this.element.style.top=(r.top-h)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,n,t):s;if(n&&!i){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=LP(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class Bn extends Ct{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return Bn.valid(r)?new Bn(r):Ct.near(r)}content(){return He.empty}eq(t){return t instanceof Bn&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Bn(t.resolve(n.pos))}getBookmark(){return new NS(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!Yne(t)||!qne(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(t.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&Bn.valid(t))return t;let s=t.pos,i=null;for(let o=t.depth;;o--){let l=t.node(o);if(n>0?t.indexAfter(o)<l.childCount:t.index(o)>0){i=l.child(n>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;s+=n;let c=t.doc.resolve(s);if(Bn.valid(c))return c}for(;;){let o=n>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!lt.isSelectable(i)){t=t.doc.resolve(s+i.nodeSize*n),r=!1;continue e}break}i=o,s+=n;let l=t.doc.resolve(s);if(Bn.valid(l))return l}return null}}}Bn.prototype.visible=!1;Bn.findFrom=Bn.findGapCursorFrom;Ct.jsonID("gapcursor",Bn);class NS{constructor(t){this.pos=t}map(t){return new NS(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return Bn.valid(n)?new Bn(n):Ct.near(n)}}function j6(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}function Yne(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||j6(s.type))return!0;if(s.inlineContent)return!1}}return!0}function qne(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||j6(s.type))return!0;if(s.inlineContent)return!1}}return!0}function Zne(){return new In({props:{decorations:tre,createSelectionBetween(e,t,n){return t.pos==n.pos&&Bn.valid(n)?new Bn(n):null},handleClick:Jne,handleKeyDown:Qne,handleDOMEvents:{beforeinput:ere}}})}const Qne=_D({ArrowLeft:w0("horiz",-1),ArrowRight:w0("horiz",1),ArrowUp:w0("vert",-1),ArrowDown:w0("vert",1)});function w0(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,s,i){let o=r.selection,l=t>0?o.$to:o.$from,c=o.empty;if(o instanceof ht){if(!i.endOfTextblock(n)||l.depth==0)return!1;c=!1,l=r.doc.resolve(t>0?l.after():l.before())}let d=Bn.findGapCursorFrom(l,t,c);return d?(s&&s(r.tr.setSelection(new Bn(d))),!0):!1}}function Jne(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!Bn.valid(r))return!1;let s=e.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&lt.isSelectable(e.state.doc.nodeAt(s.inside))?!1:(e.dispatch(e.state.tr.setSelection(new Bn(r))),!0)}function ere(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof Bn))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let s=Ae.empty;for(let o=r.length-1;o>=0;o--)s=Ae.from(r[o].createAndFill(null,s));let i=e.state.tr.replace(n.pos,n.pos,new He(s,0,0));return i.setSelection(ht.near(i.doc.resolve(n.pos+1))),e.dispatch(i),!1}function tre(e){if(!(e.selection instanceof Bn))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",An.create(e.doc,[ns.widget(e.selection.head,t,{key:"gapcursor"})])}var D1=200,yr=function(){};yr.prototype.append=function(t){return t.length?(t=yr.from(t),!this.length&&t||t.length<D1&&this.leafAppend(t)||this.length<D1&&t.leafPrepend(this)||this.appendInner(t)):this};yr.prototype.prepend=function(t){return t.length?yr.from(t).append(this):this};yr.prototype.appendInner=function(t){return new nre(this,t)};yr.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?yr.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};yr.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};yr.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};yr.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(i,o){return s.push(t(i,o))},n,r),s};yr.from=function(t){return t instanceof yr?t:t&&t.length?new L6(t):yr.empty};var L6=function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new t(this.values.slice(s,i))},t.prototype.getInner=function(s){return this.values[s]},t.prototype.forEachInner=function(s,i,o,l){for(var c=i;c<o;c++)if(s(this.values[c],l+c)===!1)return!1},t.prototype.forEachInvertedInner=function(s,i,o,l){for(var c=i-1;c>=o;c--)if(s(this.values[c],l+c)===!1)return!1},t.prototype.leafAppend=function(s){if(this.length+s.length<=D1)return new t(this.values.concat(s.flatten()))},t.prototype.leafPrepend=function(s){if(this.length+s.length<=D1)return new t(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(yr);yr.empty=new L6([]);var nre=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,s,i,o){var l=this.left.length;if(s<l&&this.left.forEachInner(r,s,Math.min(i,l),o)===!1||i>l&&this.right.forEachInner(r,Math.max(s-l,0),Math.min(this.length,i)-l,o+l)===!1)return!1},t.prototype.forEachInvertedInner=function(r,s,i,o){var l=this.left.length;if(s>l&&this.right.forEachInvertedInner(r,s-l,Math.max(i,l)-l,o+l)===!1||i<l&&this.left.forEachInvertedInner(r,Math.min(s,l),i,o)===!1)return!1},t.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(r,s):r>=i?this.right.slice(r-i,s-i):this.left.slice(r,i).append(this.right.slice(0,s-i))},t.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new t(this.left,s)},t.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new t(s,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(yr);const rre=500;class Ai{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,i;n&&(s=this.remapping(r,this.items.length),i=s.maps.length);let o=t.tr,l,c,d=[],h=[];return this.items.forEach((g,y)=>{if(!g.step){s||(s=this.remapping(r,y+1),i=s.maps.length),i--,h.push(g);return}if(s){h.push(new eo(g.map));let w=g.step.map(s.slice(i)),S;w&&o.maybeStep(w).doc&&(S=o.mapping.maps[o.mapping.maps.length-1],d.push(new eo(S,void 0,void 0,d.length+h.length))),i--,S&&s.appendMap(S,i)}else o.maybeStep(g.step);if(g.selection)return l=s?g.selection.map(s.slice(i)):g.selection,c=new Ai(this.items.slice(0,r).append(h.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:o,selection:l}}addTransform(t,n,r,s){let i=[],o=this.eventCount,l=this.items,c=!s&&l.length?l.get(l.length-1):null;for(let h=0;h<t.steps.length;h++){let g=t.steps[h].invert(t.docs[h]),y=new eo(t.mapping.maps[h],g,n),w;(w=c&&c.merge(y))&&(y=w,h?i.pop():l=l.slice(0,l.length-1)),i.push(y),n&&(o++,n=void 0),s||(c=y)}let d=o-r.depth;return d>ire&&(l=sre(l,d),o-=d),new Ai(l.append(i),o)}remapping(t,n){let r=new _h;return this.items.forEach((s,i)=>{let o=s.mirrorOffset!=null&&i-s.mirrorOffset>=t?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,o)},t,n),r}addMaps(t){return this.eventCount==0?this:new Ai(this.items.append(t.map(n=>new eo(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),i=t.mapping,o=t.steps.length,l=this.eventCount;this.items.forEach(y=>{y.selection&&l--},s);let c=n;this.items.forEach(y=>{let w=i.getMirror(--c);if(w==null)return;o=Math.min(o,w);let S=i.maps[w];if(y.step){let C=t.steps[w].invert(t.docs[w]),A=y.selection&&y.selection.map(i.slice(c+1,w));A&&l++,r.push(new eo(S,C,A))}else r.push(new eo(S))},s);let d=[];for(let y=n;y<o;y++)d.push(new eo(i.maps[y]));let h=this.items.slice(0,s).append(d).append(r),g=new Ai(h,l);return g.emptyItemCount()>rre&&(g=g.compress(this.items.length-r.length)),g}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,s=[],i=0;return this.items.forEach((o,l)=>{if(l>=t)s.push(o),o.selection&&i++;else if(o.step){let c=o.step.map(n.slice(r)),d=c&&c.getMap();if(r--,d&&n.appendMap(d,r),c){let h=o.selection&&o.selection.map(n.slice(r));h&&i++;let g=new eo(d.invert(),c,h),y,w=s.length-1;(y=s.length&&s[w].merge(g))?s[w]=y:s.push(g)}}else o.map&&r--},this.items.length,0),new Ai(yr.from(s.reverse()),i)}}Ai.empty=new Ai(yr.empty,0);function sre(e,t){let n;return e.forEach((r,s)=>{if(r.selection&&t--==0)return n=s,!1}),e.slice(n)}class eo{constructor(t,n,r,s){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=s}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new eo(n.getMap().invert(),n,this.selection)}}}class Ea{constructor(t,n,r,s,i){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=i}}const ire=20;function ore(e,t,n,r){let s=n.getMeta(mc),i;if(s)return s.historyState;n.getMeta(cre)&&(e=new Ea(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(o&&o.getMeta(mc))return o.getMeta(mc).redo?new Ea(e.done.addTransform(n,void 0,r,Q0(t)),e.undone,lT(n.mapping.maps),e.prevTime,e.prevComposition):new Ea(e.done,e.undone.addTransform(n,void 0,r,Q0(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),c=e.prevTime==0||!o&&e.prevComposition!=l&&(e.prevTime<(n.time||0)-r.newGroupDelay||!are(n,e.prevRanges)),d=o?aw(e.prevRanges,n.mapping):lT(n.mapping.maps);return new Ea(e.done.addTransform(n,c?t.selection.getBookmark():void 0,r,Q0(t)),Ai.empty,d,n.time,l??e.prevComposition)}else return(i=n.getMeta("rebased"))?new Ea(e.done.rebased(n,i),e.undone.rebased(n,i),aw(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Ea(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),aw(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function are(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,s)=>{for(let i=0;i<t.length;i+=2)r<=t[i+1]&&s>=t[i]&&(n=!0)}),n}function lT(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,s,i,o)=>t.push(i,o));return t}function aw(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let s=t.map(e[r],1),i=t.map(e[r+1],-1);s<=i&&n.push(s,i)}return n}function lre(e,t,n){let r=Q0(t),s=mc.get(t).spec.config,i=(n?e.undone:e.done).popEvent(t,r);if(!i)return null;let o=i.selection.resolve(i.transform.doc),l=(n?e.done:e.undone).addTransform(i.transform,t.selection.getBookmark(),s,r),c=new Ea(n?l:i.remaining,n?i.remaining:l,null,0,-1);return i.transform.setSelection(o).setMeta(mc,{redo:n,historyState:c})}let lw=!1,cT=null;function Q0(e){let t=e.plugins;if(cT!=t){lw=!1,cT=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){lw=!0;break}}return lw}const mc=new lr("history"),cre=new lr("closeHistory");function ure(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new In({key:mc,state:{init(){return new Ea(Ai.empty,Ai.empty,null,0,-1)},apply(t,n,r){return ore(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,s=r=="historyUndo"?F6:r=="historyRedo"?z6:null;return!s||!t.editable?!1:(n.preventDefault(),s(t.state,t.dispatch))}}}})}function B6(e,t){return(n,r)=>{let s=mc.getState(n);if(!s||(e?s.undone:s.done).eventCount==0)return!1;if(r){let i=lre(s,n,e);i&&r(t?i.scrollIntoView():i)}return!0}}const F6=B6(!1,!0),z6=B6(!0,!0);var dre=Gn.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;if(((e==null?void 0:e.mode)||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new In({key:new lr("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const s=this.options.limit;if(s==null||s===0){e=!0;return}const i=this.storage.characters({node:r.doc});if(i>s){const o=i-s,l=0,c=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const d=r.tr.deleteRange(l,c);return e=!0,d}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:n.doc}),i=this.storage.characters({node:t.doc});if(i<=r||s>r&&i>r&&i<=s)return!0;if(s>r&&i>r&&i>s||!t.getMeta("paste"))return!1;const l=t.selection.$head.pos,c=i-r,d=l-c,h=l;return t.deleteRange(d,h),!(this.storage.characters({node:t.doc})>r)}})]}}),fre=Gn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Xne(this.options)]}});Gn.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new In({key:new lr("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:s}=t,i=[];if(!n||!r)return An.create(e,[]);let o=0;this.options.mode==="deepest"&&e.descendants((c,d)=>{if(c.isText)return;if(!(s>=d&&s<=d+c.nodeSize-1))return!1;o+=1});let l=0;return e.descendants((c,d)=>{if(c.isText||!(s>=d&&s<=d+c.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";i.push(ns.node(d,d+c.nodeSize,{class:this.options.className}))}),An.create(e,i)}}})]}});var hre=Gn.create({name:"gapCursor",addProseMirrorPlugins(){return[Zne()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=Xt(st(e,"allowGapCursor",n)))!=null?t:null}}}),pre=Gn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new In({key:new lr("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,s=[];if(!n)return null;const i=this.editor.isEmpty;return e.descendants((o,l)=>{const c=r>=l&&r<=l+o.nodeSize,d=!o.isLeaf&&px(o);if((c||!this.options.showOnlyCurrent)&&d){const h=[this.options.emptyNodeClass];i&&h.push(this.options.emptyEditorClass);const g=ns.node(l,l+o.nodeSize,{class:h.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:c}):this.options.placeholder});s.push(g)}return this.options.includeChildren}),An.create(e,s)}}})]}});Gn.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new In({key:new lr("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||KD(n.selection)||e.view.dragging?null:An.create(n.doc,[ns.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function uT({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||(t==null?void 0:t.type)===e}var mre=Gn.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var e;const t=new lr(this.name),n=this.options.node||((e=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:e.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(n).includes(s.name));return[new In({key:t,appendTransaction:(s,i,o)=>{const{doc:l,tr:c,schema:d}=o,h=t.getState(o),g=l.content.size,y=d.nodes[n];if(h)return c.insert(g,y.create())},state:{init:(s,i)=>{const o=i.tr.doc.lastChild;return!uT({node:o,types:r})},apply:(s,i)=>{if(!s.docChanged||s.getMeta("__uniqueIDTransaction"))return i;const o=s.doc.lastChild;return!uT({node:o,types:r})}}})]}}),gre=Gn.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>F6(e,t),redo:()=>({state:e,dispatch:t})=>z6(e,t)}},addProseMirrorPlugins(){return[ure(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),xre=Gn.create({name:"starterKit",addExtensions(){var e,t,n,r;const s=[];return this.options.bold!==!1&&s.push(Vte.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(jte.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(A6.configure(this.options.bulletList)),this.options.code!==!1&&s.push($te.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(Xte.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(Kte.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(fre.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(hre.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(Yte.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(qte.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(gre.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(Zte.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(nne.configure(this.options.italic)),this.options.listItem!==!1&&s.push(T6.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(O6.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&s.push(Tne.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&s.push(D6.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(Vne.configure(this.options.paragraph)),this.options.strike!==!1&&s.push($ne.configure(this.options.strike)),this.options.text!==!1&&s.push(Wne.configure(this.options.text)),this.options.underline!==!1&&s.push(Gne.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&s.push(mre.configure((r=this.options)==null?void 0:r.trailingNode)),s}}),yre=xre,wre=pre,vre=dre;function bre({content:e,onChange:t,placeholder:n="Start writing...",minHeight:r="200px",maxHeight:s="600px"}){const i=Mte({extensions:[yre.configure({heading:{levels:[1,2,3]}}),wre.configure({placeholder:n}),vre],content:e,onUpdate:({editor:o})=>{t(o.getHTML())},editorProps:{attributes:{class:Xe("prose prose-sm max-w-none","focus:outline-none","px-4 py-3","min-h-[200px]")}}});return i?p.jsxs("div",{className:"border rounded-lg overflow-hidden bg-background",children:[p.jsxs("div",{className:"border-b bg-muted/30 p-2 flex flex-wrap gap-1",children:[p.jsx(Ne,{type:"button",variant:i.isActive("bold")?"secondary":"ghost",size:"sm",onClick:()=>i.chain().focus().toggleBold().run(),title:"Bold (Ctrl+B)",className:"h-8 w-8 p-0",children:p.jsx(Q9,{className:"h-4 w-4"})}),p.jsx(Ne,{type:"button",variant:i.isActive("italic")?"secondary":"ghost",size:"sm",onClick:()=>i.chain().focus().toggleItalic().run(),title:"Italic (Ctrl+I)",className:"h-8 w-8 p-0",children:p.jsx(hB,{className:"h-4 w-4"})}),p.jsx(Ne,{type:"button",variant:i.isActive("strike")?"secondary":"ghost",size:"sm",onClick:()=>i.chain().focus().toggleStrike().run(),title:"Strikethrough",className:"h-8 w-8 p-0",children:p.jsx(RB,{className:"h-4 w-4"})}),p.jsx(Ne,{type:"button",variant:i.isActive("code")?"secondary":"ghost",size:"sm",onClick:()=>i.chain().focus().toggleCode().run(),title:"Inline Code",className:"h-8 w-8 p-0",children:p.jsx(fN,{className:"h-4 w-4"})}),p.jsx(Xr,{orientation:"vertical",className:"h-8 mx-1"}),p.jsx(Ne,{type:"button",variant:i.isActive("heading",{level:1})?"secondary":"ghost",size:"sm",onClick:()=>i.chain().focus().toggleHeading({level:1}).run(),title:"Heading 1",className:"h-8 w-8 p-0",children:p.jsx(lB,{className:"h-4 w-4"})}),p.jsx(Ne,{type:"button",variant:i.isActive("heading",{level:2})?"secondary":"ghost",size:"sm",onClick:()=>i.chain().focus().toggleHeading({level:2}).run(),title:"Heading 2",className:"h-8 w-8 p-0",children:p.jsx(cB,{className:"h-4 w-4"})}),p.jsx(Ne,{type:"button",variant:i.isActive("heading",{level:3})?"secondary":"ghost",size:"sm",onClick:()=>i.chain().focus().toggleHeading({level:3}).run(),title:"Heading 3",className:"h-8 w-8 p-0",children:p.jsx(uB,{className:"h-4 w-4"})}),p.jsx(Xr,{orientation:"vertical",className:"h-8 mx-1"}),p.jsx(Ne,{type:"button",variant:i.isActive("bulletList")?"secondary":"ghost",size:"sm",onClick:()=>i.chain().focus().toggleBulletList().run(),title:"Bullet List",className:"h-8 w-8 p-0",children:p.jsx(gB,{className:"h-4 w-4"})}),p.jsx(Ne,{type:"button",variant:i.isActive("orderedList")?"secondary":"ghost",size:"sm",onClick:()=>i.chain().focus().toggleOrderedList().run(),title:"Numbered List",className:"h-8 w-8 p-0",children:p.jsx(mB,{className:"h-4 w-4"})}),p.jsx(Xr,{orientation:"vertical",className:"h-8 mx-1"}),p.jsx(Ne,{type:"button",variant:i.isActive("blockquote")?"secondary":"ghost",size:"sm",onClick:()=>i.chain().focus().toggleBlockquote().run(),title:"Blockquote",className:"h-8 w-8 p-0",children:p.jsx(NB,{className:"h-4 w-4"})}),p.jsx(Ne,{type:"button",variant:i.isActive("codeBlock")?"secondary":"ghost",size:"sm",onClick:()=>i.chain().focus().toggleCodeBlock().run(),title:"Code Block",className:"h-8 w-8 p-0",children:p.jsx(fN,{className:"h-4 w-4"})}),p.jsx(Ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>i.chain().focus().setHorizontalRule().run(),title:"Horizontal Rule",className:"h-8 w-8 p-0",children:p.jsx(vB,{className:"h-4 w-4"})}),p.jsx(Xr,{orientation:"vertical",className:"h-8 mx-1"}),p.jsx(Ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>i.chain().focus().undo().run(),disabled:!i.can().undo(),title:"Undo (Ctrl+Z)",className:"h-8 w-8 p-0",children:p.jsx(PB,{className:"h-4 w-4"})}),p.jsx(Ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>i.chain().focus().redo().run(),disabled:!i.can().redo(),title:"Redo (Ctrl+Y)",className:"h-8 w-8 p-0",children:p.jsx(AB,{className:"h-4 w-4"})}),p.jsxs("div",{className:"ml-auto flex items-center text-xs text-muted-foreground px-2",children:[i.storage.characterCount.characters()," characters"]})]}),p.jsx("div",{className:"overflow-y-auto",style:{minHeight:r,maxHeight:s},children:p.jsx(Ete,{editor:i})})]}):null}const Ad=N.forwardRef(({className:e,...t},n)=>p.jsx("textarea",{className:Xe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Ad.displayName="Textarea";const Cre=({choice:e,items:t,onUpdate:n})=>{const r=e.effects||{},[s,i]=N.useState(""),[o,l]=N.useState("0"),c=()=>{s.trim()&&(n({...r,stats:{...r.stats||{},[s.trim()]:parseInt(o)||0}}),i(""),l("0"))},d=S=>{const C={...r.stats};delete C[S],n({...r,stats:Object.keys(C).length>0?C:void 0})},h=S=>{n({...r,itemsAdd:[...r.itemsAdd||[],S]})},g=S=>{n({...r,itemsAdd:(r.itemsAdd||[]).filter(C=>C!==S)})},y=S=>{n({...r,itemsRemove:[...r.itemsRemove||[],S]})},w=S=>{n({...r,itemsRemove:(r.itemsRemove||[]).filter(C=>C!==S)})};return p.jsxs("div",{className:"space-y-3 pl-4 border-l-2",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{className:"text-sm",children:"Stat Changes"}),r.stats&&Object.entries(r.stats).length>0&&p.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(r.stats).map(([S,C])=>p.jsxs(wn,{variant:"secondary",className:"gap-1",children:[S,": ",C>0?"+":"",C,p.jsx("button",{onClick:()=>d(S),className:"ml-1 hover:text-destructive",children:""})]},S))}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(at,{placeholder:"Stat name",value:s,onChange:S=>i(S.target.value),className:"flex-1"}),p.jsx(at,{type:"number",placeholder:"Value",value:o,onChange:S=>l(S.target.value),className:"w-24"}),p.jsx(Ne,{type:"button",size:"sm",onClick:c,children:p.jsx(Os,{className:"h-4 w-4"})})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{className:"text-sm",children:"Add Items"}),r.itemsAdd&&r.itemsAdd.length>0&&p.jsx("div",{className:"flex flex-wrap gap-2",children:r.itemsAdd.map(S=>{var C;return p.jsxs(wn,{variant:"default",className:"gap-1",children:[((C=t.find(A=>A.id===S))==null?void 0:C.name)||S,p.jsx("button",{onClick:()=>g(S),className:"ml-1 hover:text-destructive",children:""})]},S)})}),p.jsxs(Wr,{onValueChange:h,children:[p.jsx(Tr,{children:p.jsx(Gr,{placeholder:"Add item to inventory"})}),p.jsx(kr,{children:t.filter(S=>{var C;return!((C=r.itemsAdd)!=null&&C.includes(S.id))}).map(S=>p.jsx(Vt,{value:S.id,children:S.name},S.id))})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{className:"text-sm",children:"Remove Items"}),r.itemsRemove&&r.itemsRemove.length>0&&p.jsx("div",{className:"flex flex-wrap gap-2",children:r.itemsRemove.map(S=>{var C;return p.jsxs(wn,{variant:"destructive",className:"gap-1",children:[((C=t.find(A=>A.id===S))==null?void 0:C.name)||S,p.jsx("button",{onClick:()=>w(S),className:"ml-1 hover:text-destructive",children:""})]},S)})}),p.jsxs(Wr,{onValueChange:y,children:[p.jsx(Tr,{children:p.jsx(Gr,{placeholder:"Remove item from inventory"})}),p.jsx(kr,{children:t.filter(S=>{var C;return!((C=r.itemsRemove)!=null&&C.includes(S.id))}).map(S=>p.jsx(Vt,{value:S.id,children:S.name},S.id))})]})]})]})},Sre=({choice:e,items:t,onUpdate:n})=>{const r=e.conditions||{},[s,i]=N.useState(""),[o,l]=N.useState("0"),c=()=>{s.trim()&&(n({...r,stats:{...r.stats||{},[s.trim()]:{gte:parseInt(o)||0}}}),i(""),l("0"))},d=y=>{const w={...r.stats};delete w[y],n({...r,stats:Object.keys(w).length>0?w:void 0})},h=y=>{n({...r,items:[...r.items||[],y]})},g=y=>{n({...r,items:(r.items||[]).filter(w=>w!==y)})};return p.jsxs("div",{className:"space-y-3 pl-4 border-l-2",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{className:"text-sm",children:"Required Items"}),r.items&&r.items.length>0&&p.jsx("div",{className:"flex flex-wrap gap-2",children:r.items.map(y=>{var w;return p.jsxs(wn,{variant:"secondary",className:"gap-1",children:[((w=t.find(S=>S.id===y))==null?void 0:w.name)||y,p.jsx("button",{onClick:()=>g(y),className:"ml-1 hover:text-destructive",children:""})]},y)})}),p.jsxs(Wr,{onValueChange:h,children:[p.jsx(Tr,{children:p.jsx(Gr,{placeholder:"Require item"})}),p.jsx(kr,{children:t.filter(y=>{var w;return!((w=r.items)!=null&&w.includes(y.id))}).map(y=>p.jsx(Vt,{value:y.id,children:y.name},y.id))})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{className:"text-sm",children:"Required Stats"}),r.stats&&Object.entries(r.stats).length>0&&p.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(r.stats).map(([y,w])=>p.jsxs(wn,{variant:"secondary",className:"gap-1",children:[y,"  ",w.gte||w.min||0,p.jsx("button",{onClick:()=>d(y),className:"ml-1 hover:text-destructive",children:""})]},y))}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(at,{placeholder:"Stat name",value:s,onChange:y=>i(y.target.value),className:"flex-1"}),p.jsx(at,{type:"number",placeholder:"Min value",value:o,onChange:y=>l(y.target.value),className:"w-24"}),p.jsx(Ne,{type:"button",size:"sm",onClick:c,children:p.jsx(Os,{className:"h-4 w-4"})})]})]})]})},Ere=({page:e,pageId:t,pages:n,items:r,enemies:s,onUpdate:i,onAddChoice:o,onUpdateChoice:l,onDeleteChoice:c,onDuplicate:d,onDelete:h,errors:g})=>{const[y,w]=N.useState(new Set),S=E=>{w(k=>{const I=new Set(k);return I.has(E)?I.delete(E):I.add(E),I})},C=E=>{const k=E.title?`${E.title} - `:"",I=E.text?E.text.replace(/<[^>]+>/g,"").substring(0,60).replace(/\n/g," "):"",M=I.length>60?I+"...":I;return`Page ${E.id}${k?` - ${k}`:""}${M?`: ${M}`:""}`};if(!e)return p.jsx("div",{className:"text-center py-12 text-muted-foreground",children:p.jsx("p",{children:"Page not found"})});const A=()=>{o(t,{text:"New choice",nextPageId:void 0})};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold",children:"Page Editor"}),p.jsxs("p",{className:"text-sm text-muted-foreground font-mono mt-1",children:["ID: ",t]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(Ne,{type:"button",variant:"outline",size:"sm",onClick:()=>d(t),children:[p.jsx(J4,{className:"h-4 w-4 mr-2"}),"Duplicate"]}),p.jsxs(Vu,{children:[p.jsx(Z8,{asChild:!0,children:p.jsxs(Ne,{type:"button",variant:"destructive",size:"sm",children:[p.jsx(Js,{className:"h-4 w-4 mr-2"}),"Delete"]})}),p.jsxs(rc,{children:[p.jsxs(sc,{children:[p.jsx(oc,{children:"Delete Page"}),p.jsx(ac,{children:"Are you sure? This will permanently delete this page and may break links from other pages."})]}),p.jsxs(ic,{children:[p.jsx(cc,{children:"Cancel"}),p.jsx(lc,{onClick:()=>h(t),className:"bg-destructive text-destructive-foreground",children:"Delete"})]})]})]})]})]}),p.jsxs(Tt,{children:[p.jsx(Wt,{children:p.jsx(Kt,{children:"Page Content"})}),p.jsxs(Dt,{className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{htmlFor:"page-title",children:"Page Title (optional)"}),p.jsx(at,{id:"page-title",value:e.title||"",onChange:E=>i(t,{title:E.target.value}),placeholder:"Optional title for this page"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs(Fe,{htmlFor:"page-text",children:["Text Content ",p.jsx("span",{className:"text-destructive",children:"*"})]}),p.jsx(bre,{content:e.text||"",onChange:E=>i(t,{text:E}),placeholder:"Enter the story text for this page...",minHeight:"250px",maxHeight:"500px"}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:["Supports rich text formatting: ",p.jsx("strong",{children:"bold"}),", ",p.jsx("em",{children:"italic"}),", headings, lists, and more!"]})]})]})]}),p.jsxs(Tt,{children:[p.jsx(Wt,{children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(Kt,{className:"flex items-center gap-2",children:[p.jsx(Ub,{className:"h-5 w-5"}),"Shop Configuration"]}),p.jsx(so,{checked:!!e.shop,onCheckedChange:E=>{E?i(t,{shop:{currency:"gold",items:[]}}):i(t,{shop:void 0})}})]})}),e.shop&&p.jsxs(Dt,{className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{children:"Currency Variable Name"}),p.jsx(at,{value:e.shop.currency||"",onChange:E=>i(t,{shop:{...e.shop,currency:E.target.value}}),placeholder:"e.g., gold, coins, credits"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"The stat/variable name used as currency"})]}),p.jsx(Xr,{}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(Fe,{children:"Items for Sale"}),p.jsxs(Ne,{type:"button",size:"sm",onClick:()=>{const E={itemId:"",price:10};i(t,{shop:{...e.shop,items:[...e.shop.items,E]}})},children:[p.jsx(Os,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),e.shop.items.length===0?p.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No items for sale. Add items to create a shop."}):p.jsx("div",{className:"space-y-2",children:e.shop.items.map((E,k)=>p.jsx(Tt,{className:"bg-muted/30",children:p.jsx(Dt,{className:"pt-4 space-y-2",children:p.jsxs("div",{className:"flex items-start justify-between gap-2",children:[p.jsxs("div",{className:"flex-1 space-y-2",children:[p.jsxs(Wr,{value:E.itemId||"none",onValueChange:I=>{const M=[...e.shop.items];M[k]={...M[k],itemId:I==="none"?"":I},i(t,{shop:{...e.shop,items:M}})},children:[p.jsx(Tr,{children:p.jsx(Gr,{placeholder:"Select item"})}),p.jsxs(kr,{children:[p.jsx(Vt,{value:"none",children:"-- Select item --"}),r.map(I=>p.jsx(Vt,{value:I.id,children:I.name},I.id))]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx(Fe,{className:"text-xs",children:"Price"}),p.jsx(at,{type:"number",value:E.price,onChange:I=>{const M=[...e.shop.items];M[k]={...M[k],price:parseInt(I.target.value)||0},i(t,{shop:{...e.shop,items:M}})}})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx(Fe,{className:"text-xs",children:"Stock (optional)"}),p.jsx(at,{type:"number",value:E.quantity||"",onChange:I=>{const M=[...e.shop.items];M[k]={...M[k],quantity:I.target.value?parseInt(I.target.value):void 0},i(t,{shop:{...e.shop,items:M}})},placeholder:"Unlimited"})]})]})]}),p.jsx(Ne,{type:"button",variant:"ghost",size:"icon",onClick:()=>{const I=e.shop.items.filter((M,P)=>P!==k);i(t,{shop:{...e.shop,items:I}})},children:p.jsx(Js,{className:"h-4 w-4"})})]})})},k))})]})]})]}),p.jsxs(Tt,{children:[p.jsx(Wt,{children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(Kt,{children:"Choices"}),p.jsxs(Ne,{type:"button",onClick:A,size:"sm",children:[p.jsx(Os,{className:"h-4 w-4 mr-2"}),"Add Choice"]})]})}),p.jsx(Dt,{className:"space-y-4",children:!e.choices||e.choices.length===0?p.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No choices yet. Add a choice to continue the story."}):e.choices.map((E,k)=>{var M,P,j,_;const I=y.has(k);return p.jsx(Tt,{className:"bg-muted/50",children:p.jsxs(Dt,{className:"pt-6 space-y-3",children:[p.jsxs("div",{className:"flex items-start justify-between gap-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("h4",{className:"font-semibold text-sm",children:["Choice ",k+1]}),E.combat&&p.jsxs(wn,{variant:"destructive",children:[p.jsx(wv,{className:"h-3 w-3 mr-1"}),"Combat"]}),E.conditions&&p.jsxs(wn,{variant:"secondary",children:[p.jsx(gv,{className:"h-3 w-3 mr-1"}),"Conditional"]}),E.effects&&p.jsxs(wn,{variant:"default",children:[p.jsx(xN,{className:"h-3 w-3 mr-1"}),"Effects"]})]}),p.jsx(Ne,{type:"button",variant:"ghost",size:"icon",onClick:()=>c(t,k),children:p.jsx(Js,{className:"h-4 w-4"})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs(Fe,{children:["Choice Text ",p.jsx("span",{className:"text-destructive",children:"*"})]}),p.jsx(at,{value:E.text||"",onChange:D=>l(t,k,{text:D.target.value}),placeholder:"Button text the player sees"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{children:"Next Page"}),p.jsxs(Wr,{value:String(E.nextPageId||E.to||"none"),onValueChange:D=>{if(D==="none")l(t,k,{nextPageId:void 0});else{const L=isNaN(parseInt(D))?D:parseInt(D);l(t,k,{nextPageId:L})}},children:[p.jsx(Tr,{children:p.jsx(Gr,{placeholder:"Select target page"})}),p.jsxs(kr,{children:[p.jsx(Vt,{value:"none",children:"-- No destination --"}),n.map(D=>p.jsx(Vt,{value:String(D.id),children:C(D)},D.id))]})]})]}),p.jsx(Xr,{}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(Fe,{className:"flex items-center gap-2",children:[p.jsx(wv,{className:"h-4 w-4"}),"Combat Encounter"]}),p.jsx(so,{checked:!!E.combat,onCheckedChange:D=>{D?l(t,k,{combat:{enemyId:"",winPageId:"none",losePageId:"none"}}):l(t,k,{combat:void 0})}})]}),E.combat&&p.jsxs("div",{className:"pl-6 space-y-3 pt-2 border-l-2 border-primary",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{children:"Enemy"}),p.jsxs(Wr,{value:E.combat.enemyId||"none",onValueChange:D=>l(t,k,{combat:{...E.combat,enemyId:D==="none"?"":D}}),children:[p.jsx(Tr,{children:p.jsx(Gr,{placeholder:"Select enemy"})}),p.jsxs(kr,{children:[p.jsx(Vt,{value:"none",children:"-- Select enemy --"}),s.map(D=>p.jsx(Vt,{value:D.id,children:D.name},D.id))]})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{children:"Victory Page"}),p.jsxs(Wr,{value:String(E.combat.winPageId||"none"),onValueChange:D=>{const L=D==="none"?"none":isNaN(parseInt(D))?D:parseInt(D);l(t,k,{combat:{...E.combat,winPageId:L}})},children:[p.jsx(Tr,{children:p.jsx(Gr,{placeholder:"Page after winning"})}),p.jsxs(kr,{children:[p.jsx(Vt,{value:"none",children:"-- Select page --"}),n.map(D=>p.jsx(Vt,{value:String(D.id),children:C(D)},D.id))]})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{children:"Defeat Page"}),p.jsxs(Wr,{value:String(E.combat.losePageId||"none"),onValueChange:D=>{const L=D==="none"?"none":isNaN(parseInt(D))?D:parseInt(D);l(t,k,{combat:{...E.combat,losePageId:L}})},children:[p.jsx(Tr,{children:p.jsx(Gr,{placeholder:"Page after losing"})}),p.jsxs(kr,{children:[p.jsx(Vt,{value:"none",children:"-- Select page --"}),n.map(D=>p.jsx(Vt,{value:String(D.id),children:C(D)},D.id))]})]})]})]})]}),p.jsxs(Ne,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>S(k),children:[I?"Hide":"Show"," Advanced Options (Effects & Conditions)"]}),I&&p.jsxs("div",{className:"space-y-4 p-4 border rounded-md bg-background",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(Fe,{className:"flex items-center gap-2",children:[p.jsx(xN,{className:"h-4 w-4"}),"Effects (when choice is selected)"]}),p.jsx(so,{checked:!!E.effects&&(E.effects.stats&&Object.keys(E.effects.stats).length>0||E.effects.itemsAdd&&E.effects.itemsAdd.length>0||E.effects.itemsRemove&&E.effects.itemsRemove.length>0||E.effects.variables&&Object.keys(E.effects.variables).length>0),onCheckedChange:D=>{D?l(t,k,{effects:{}}):l(t,k,{effects:void 0})}})]}),E.effects&&p.jsx("div",{className:"pl-6 pt-2 border-l-2 border-yellow-500",children:p.jsx(Cre,{choice:E,items:r,onUpdate:D=>l(t,k,{effects:D})})})]}),p.jsx(Xr,{}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(Fe,{className:"flex items-center gap-2",children:[p.jsx(gv,{className:"h-4 w-4"}),"Conditions (requirements to show/enable)"]}),p.jsx(so,{checked:!!E.conditions&&(E.conditions.stats&&Object.keys(E.conditions.stats).length>0||E.conditions.items&&E.conditions.items.length>0||E.conditions.variables&&Object.keys(E.conditions.variables).length>0),onCheckedChange:D=>{D?l(t,k,{conditions:{}}):l(t,k,{conditions:void 0})}})]}),E.conditions&&p.jsx("div",{className:"pl-6 pt-2 border-l-2 border-red-500",children:p.jsx(Sre,{choice:E,items:r,onUpdate:D=>l(t,k,{conditions:D})})})]}),p.jsx(Xr,{}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(Fe,{className:"flex items-center gap-2",children:[p.jsx(wB,{className:"h-4 w-4"}),"Text Input Prompt"]}),p.jsx(so,{checked:!!E.prompt,onCheckedChange:D=>{D?l(t,k,{prompt:{type:"text",variableName:"user_input",question:"Please enter your answer:",validation:{required:!0}}}):l(t,k,{prompt:void 0})}})]}),E.prompt&&p.jsxs("div",{className:"pl-6 space-y-3 pt-2 border-l-2 border-blue-500",children:[p.jsx("p",{className:"text-xs text-muted-foreground",children:"Prompt the reader to enter text before this choice proceeds"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{children:"Input Type"}),p.jsxs(Wr,{value:E.prompt.type||"text",onValueChange:D=>l(t,k,{prompt:{...E.prompt,type:D}}),children:[p.jsx(Tr,{children:p.jsx(Gr,{})}),p.jsxs(kr,{children:[p.jsx(Vt,{value:"text",children:"Text Input"}),p.jsx(Vt,{value:"number",children:"Number Input"})]})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs(Fe,{children:["Variable Name ",p.jsx("span",{className:"text-destructive",children:"*"})]}),p.jsx(at,{value:E.prompt.variableName||"",onChange:D=>l(t,k,{prompt:{...E.prompt,variableName:D.target.value}}),placeholder:"player_answer"}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:["The input will be stored in this variable. Use ","{variableName}"," in story text to display it."]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs(Fe,{children:["Question/Prompt ",p.jsx("span",{className:"text-destructive",children:"*"})]}),p.jsx(Ad,{value:E.prompt.question||"",onChange:D=>l(t,k,{prompt:{...E.prompt,question:D.target.value}}),placeholder:"What is your answer?",rows:2})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{children:"Placeholder (optional)"}),p.jsx(at,{value:E.prompt.placeholder||"",onChange:D=>l(t,k,{prompt:{...E.prompt,placeholder:D.target.value}}),placeholder:"Enter your answer here..."})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{children:"Validation Rules"}),p.jsxs("div",{className:"space-y-2 p-3 border rounded bg-muted/50",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(so,{checked:((M=E.prompt.validation)==null?void 0:M.required)||!1,onCheckedChange:D=>l(t,k,{prompt:{...E.prompt,validation:{...E.prompt.validation,required:D}}})}),p.jsx(Fe,{children:"Required (cannot be empty)"})]}),E.prompt.type==="text"&&p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsxs("div",{children:[p.jsx(Fe,{className:"text-xs",children:"Min Length"}),p.jsx(at,{type:"number",value:((P=E.prompt.validation)==null?void 0:P.minLength)||"",onChange:D=>l(t,k,{prompt:{...E.prompt,validation:{...E.prompt.validation,minLength:D.target.value?parseInt(D.target.value):void 0}}}),placeholder:"1",min:"1"})]}),p.jsxs("div",{children:[p.jsx(Fe,{className:"text-xs",children:"Max Length"}),p.jsx(at,{type:"number",value:((j=E.prompt.validation)==null?void 0:j.maxLength)||"",onChange:D=>l(t,k,{prompt:{...E.prompt,validation:{...E.prompt.validation,maxLength:D.target.value?parseInt(D.target.value):void 0}}}),placeholder:"100",min:"1"})]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx(Fe,{className:"text-xs",children:"Regex Pattern (advanced)"}),p.jsx(at,{value:((_=E.prompt.validation)==null?void 0:_.pattern)||"",onChange:D=>l(t,k,{prompt:{...E.prompt,validation:{...E.prompt.validation,pattern:D.target.value||void 0}}}),placeholder:"^[a-zA-Z]+$"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional: Regex to validate input format"})]})]})]})]})]})]})]})},`${t}-choice-${k}`)})})]}),p.jsx("div",{className:"flex justify-end",children:p.jsxs(Ne,{type:"button",children:[p.jsx(Hb,{className:"h-4 w-4 mr-2"}),"Changes Auto-Saved"]})})]})},Nre=({items:e,onAdd:t,onUpdate:n,onDelete:r})=>{const[s,i]=N.useState(!1),[o,l]=N.useState(null),[c,d]=N.useState({id:"",name:"",description:"",type:"consumable",visible:!0,shopPrice:0}),h=()=>{d({id:"",name:"",description:"",type:"consumable",visible:!0,shopPrice:0}),l(null),i(!0)},g=w=>{d({id:w.id,name:w.name,description:w.description||"",type:w.type||"consumable",visible:w.visible??!0,shopPrice:w.shopPrice||0}),l(w),i(!0)},y=()=>{if(!c.id.trim()||!c.name.trim())return;const w={id:c.id.trim(),name:c.name.trim(),description:c.description.trim()||void 0,type:c.type,visible:c.visible,shopPrice:c.shopPrice>0?c.shopPrice:void 0};o?n(o.id,w):t(c.id.trim(),w),i(!1)};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Items"}),p.jsx("p",{className:"text-muted-foreground",children:"Define items that can appear in your story"})]}),p.jsxs(go,{open:s,onOpenChange:i,children:[p.jsx(Lg,{asChild:!0,children:p.jsxs(Ne,{onClick:h,children:[p.jsx(Os,{className:"h-4 w-4 mr-2"}),"Add Item"]})}),p.jsxs(ji,{children:[p.jsxs(Li,{children:[p.jsx(Bi,{children:o?"Edit Item":"Add New Item"}),p.jsx(Jo,{children:"Define an item that players can collect or purchase"})]}),p.jsxs("div",{className:"space-y-4 py-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs(Fe,{htmlFor:"item-id",children:["Item ID ",p.jsx("span",{className:"text-destructive",children:"*"})]}),p.jsx(at,{id:"item-id",value:c.id,onChange:w=>d({...c,id:w.target.value}),placeholder:"health_potion",disabled:!!o})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs(Fe,{htmlFor:"item-name",children:["Display Name ",p.jsx("span",{className:"text-destructive",children:"*"})]}),p.jsx(at,{id:"item-name",value:c.name,onChange:w=>d({...c,name:w.target.value}),placeholder:"Health Potion"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{htmlFor:"item-desc",children:"Description"}),p.jsx(Ad,{id:"item-desc",value:c.description,onChange:w=>d({...c,description:w.target.value}),placeholder:"Restores 10 health points",rows:2})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{htmlFor:"item-type",children:"Type"}),p.jsxs(Wr,{value:c.type,onValueChange:w=>d({...c,type:w}),children:[p.jsx(Tr,{children:p.jsx(Gr,{})}),p.jsxs(kr,{children:[p.jsx(Vt,{value:"consumable",children:"Consumable"}),p.jsx(Vt,{value:"key",children:"Key"}),p.jsx(Vt,{value:"clue",children:"Clue"}),p.jsx(Vt,{value:"token",children:"Token"}),p.jsx(Vt,{value:"flag",children:"Flag"})]})]})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(Fe,{htmlFor:"item-visible",children:"Visible in Inventory"}),p.jsx(so,{id:"item-visible",checked:c.visible,onCheckedChange:w=>d({...c,visible:w})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{htmlFor:"item-price",children:"Shop Price (optional)"}),p.jsx(at,{id:"item-price",type:"number",value:c.shopPrice,onChange:w=>d({...c,shopPrice:parseInt(w.target.value)||0}),placeholder:"0"})]})]}),p.jsxs(Hc,{children:[p.jsx(Ne,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),p.jsx(Ne,{onClick:y,disabled:!c.id.trim()||!c.name.trim(),children:o?"Save Changes":"Add Item"})]})]})]})]}),e.length===0?p.jsx(Tt,{children:p.jsxs(Dt,{className:"text-center py-12",children:[p.jsx("p",{className:"text-muted-foreground",children:"No items defined yet"}),p.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:'Click "Add Item" to create your first item'})]})}):p.jsx("div",{className:"grid gap-4",children:e.map(w=>p.jsxs(Tt,{children:[p.jsx(Wt,{children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{children:[p.jsx(Kt,{className:"text-lg",children:w.name}),p.jsx(Fn,{className:"font-mono text-xs mt-1",children:w.id})]}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx(Ne,{variant:"ghost",size:"icon",onClick:()=>g(w),children:p.jsx(cR,{className:"h-4 w-4"})}),p.jsx(Ne,{variant:"ghost",size:"icon",onClick:()=>r(w.id),children:p.jsx(Js,{className:"h-4 w-4"})})]})]})}),(w.description||w.type||w.shopPrice)&&p.jsxs(Dt,{className:"text-sm space-y-1",children:[w.description&&p.jsx("p",{className:"text-muted-foreground",children:w.description}),p.jsxs("div",{className:"flex gap-2 flex-wrap mt-2",children:[w.type&&p.jsx("span",{className:"px-2 py-0.5 bg-secondary text-secondary-foreground rounded text-xs",children:w.type}),w.shopPrice&&p.jsxs("span",{className:"px-2 py-0.5 bg-primary/10 text-primary rounded text-xs",children:["Price: ",w.shopPrice]}),!w.visible&&p.jsx("span",{className:"px-2 py-0.5 bg-muted text-muted-foreground rounded text-xs",children:"Hidden"})]})]})]},w.id))})]})},Are=({enemies:e,onAdd:t,onUpdate:n,onDelete:r})=>{const[s,i]=N.useState(!1),[o,l]=N.useState(null),[c,d]=N.useState({id:"",name:"",description:"",stats:{}}),[h,g]=N.useState(""),[y,w]=N.useState("10"),S=()=>{d({id:"",name:"",description:"",stats:{}}),l(null),i(!0)},C=M=>{d({id:M.id,name:M.name,description:M.description||"",stats:M.stats||{}}),l(M),i(!0)},A=()=>{h.trim()&&!c.stats[h]&&(d({...c,stats:{...c.stats,[h.trim()]:parseInt(y)||0}}),g(""),w("10"))},E=(M,P)=>{d({...c,stats:{...c.stats,[M]:P}})},k=M=>{const{[M]:P,...j}=c.stats;d({...c,stats:j})},I=()=>{if(!c.id.trim()||!c.name.trim())return;const M={id:c.id.trim(),name:c.name.trim(),description:c.description.trim()||void 0,stats:Object.keys(c.stats).length>0?c.stats:void 0};o?n(o.id,M):t(c.id.trim(),M),i(!1)};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Enemies"}),p.jsx("p",{className:"text-muted-foreground",children:"Define enemies for combat encounters"})]}),p.jsxs(go,{open:s,onOpenChange:i,children:[p.jsx(Lg,{asChild:!0,children:p.jsxs(Ne,{onClick:S,children:[p.jsx(Os,{className:"h-4 w-4 mr-2"}),"Add Enemy"]})}),p.jsxs(ji,{className:"max-w-2xl",children:[p.jsxs(Li,{children:[p.jsx(Bi,{children:o?"Edit Enemy":"Add New Enemy"}),p.jsx(Jo,{children:"Define an enemy with custom stats for combat"})]}),p.jsxs("div",{className:"space-y-4 py-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs(Fe,{htmlFor:"enemy-id",children:["Enemy ID ",p.jsx("span",{className:"text-destructive",children:"*"})]}),p.jsx(at,{id:"enemy-id",value:c.id,onChange:M=>d({...c,id:M.target.value}),placeholder:"goblin_warrior",disabled:!!o})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs(Fe,{htmlFor:"enemy-name",children:["Display Name ",p.jsx("span",{className:"text-destructive",children:"*"})]}),p.jsx(at,{id:"enemy-name",value:c.name,onChange:M=>d({...c,name:M.target.value}),placeholder:"Goblin Warrior"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{htmlFor:"enemy-desc",children:"Description"}),p.jsx(Ad,{id:"enemy-desc",value:c.description,onChange:M=>d({...c,description:M.target.value}),placeholder:"A fierce goblin wielding a rusty sword",rows:2})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{children:"Enemy Stats"}),p.jsxs("div",{className:"border rounded-md p-4 space-y-2",children:[Object.entries(c.stats).map(([M,P])=>p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx(Fe,{className:"text-xs",children:M}),p.jsx(at,{type:"number",value:P,onChange:j=>E(M,parseInt(j.target.value)||0)})]}),p.jsx(Ne,{variant:"ghost",size:"icon",onClick:()=>k(M),className:"mt-5",children:p.jsx(Js,{className:"h-4 w-4"})})]},M)),p.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[p.jsx(at,{placeholder:"Stat name (e.g., SKILL)",value:h,onChange:M=>g(M.target.value),onKeyDown:M=>M.key==="Enter"&&A()}),p.jsx(at,{type:"number",placeholder:"Value",value:y,onChange:M=>w(M.target.value),className:"w-24",onKeyDown:M=>M.key==="Enter"&&A()}),p.jsx(Ne,{onClick:A,size:"icon",children:p.jsx(Os,{className:"h-4 w-4"})})]})]})]})]}),p.jsxs(Hc,{children:[p.jsx(Ne,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),p.jsx(Ne,{onClick:I,disabled:!c.id.trim()||!c.name.trim(),children:o?"Save Changes":"Add Enemy"})]})]})]})]}),e.length===0?p.jsx(Tt,{children:p.jsxs(Dt,{className:"text-center py-12",children:[p.jsx("p",{className:"text-muted-foreground",children:"No enemies defined yet"}),p.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:'Click "Add Enemy" to create your first enemy'})]})}):p.jsx("div",{className:"grid gap-4",children:e.map(M=>p.jsxs(Tt,{children:[p.jsx(Wt,{children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{children:[p.jsx(Kt,{className:"text-lg",children:M.name}),p.jsx(Fn,{className:"font-mono text-xs mt-1",children:M.id})]}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx(Ne,{variant:"ghost",size:"icon",onClick:()=>C(M),children:p.jsx(cR,{className:"h-4 w-4"})}),p.jsx(Ne,{variant:"ghost",size:"icon",onClick:()=>r(M.id),children:p.jsx(Js,{className:"h-4 w-4"})})]})]})}),(M.description||M.stats)&&p.jsxs(Dt,{className:"text-sm space-y-2",children:[M.description&&p.jsx("p",{className:"text-muted-foreground",children:M.description}),M.stats&&Object.keys(M.stats).length>0&&p.jsx("div",{className:"flex gap-2 flex-wrap",children:Object.entries(M.stats).map(([P,j])=>p.jsxs("span",{className:"px-2 py-0.5 bg-secondary text-secondary-foreground rounded text-xs",children:[P,": ",j]},P))})]})]},M.id))})]})};function Tre({presets:e,items:t,onUpdate:n}){const[r,s]=N.useState(""),[i,o]=N.useState(""),[l,c]=N.useState(""),[d,h]=N.useState(""),g=()=>{var _;r.trim()&&i.trim()&&!((_=e.stats)!=null&&_[r.trim()])&&(n({...e,stats:{...e.stats||{},[r.trim()]:{name:i.trim(),min:1,max:10,default:5}}}),s(""),o(""))},y=(_,D,L)=>{var U;(U=e.stats)!=null&&U[_]&&n({...e,stats:{...e.stats,[_]:{...e.stats[_],[D]:L}}})},w=_=>{if(!e.stats)return;const D={...e.stats};delete D[_],n({...e,stats:D})},S=()=>{var _;l.trim()&&!((_=e.variables)!=null&&_[l.trim()])&&(n({...e,variables:{...e.variables||{},[l.trim()]:0}}),c(""))},C=(_,D)=>{n({...e,variables:{...e.variables||{},[_]:D}})},A=_=>{if(!e.variables)return;const D={...e.variables};delete D[_],n({...e,variables:D})},E=()=>{if(d.trim()){const _={id:d.trim().toLowerCase().replace(/\s+/g,"_"),name:d.trim(),stats:{},inventory:[]};n({...e,profiles:[...e.profiles||[],_]}),h("")}},k=(_,D)=>{e.profiles&&n({...e,profiles:e.profiles.map(L=>L.id===_?{...L,...D}:L)})},I=(_,D,L)=>{e.profiles&&n({...e,profiles:e.profiles.map(U=>U.id===_?{...U,stats:{...U.stats,[D]:L}}:U)})},M=_=>{e.profiles&&n({...e,profiles:e.profiles.filter(D=>D.id!==_)})},P=(_,D)=>{e.profiles&&n({...e,profiles:e.profiles.map(L=>L.id===_?{...L,inventory:[...L.inventory||[],D]}:L)})},j=(_,D)=>{e.profiles&&n({...e,profiles:e.profiles.map(L=>L.id===_?{...L,inventory:(L.inventory||[]).filter(U=>U!==D)}:L)})};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold",children:"Presets"}),p.jsx("p",{className:"text-muted-foreground",children:"Define stats, variables, and character profiles for your story."})]}),p.jsxs(Mg,{defaultValue:"stats",className:"w-full",children:[p.jsxs(lp,{className:"grid w-full grid-cols-3",children:[p.jsxs(fo,{value:"stats",children:[p.jsx(_B,{className:"h-4 w-4 mr-2"}),"Stats"]}),p.jsx(fo,{value:"variables",children:"Variables"}),p.jsxs(fo,{value:"profiles",children:[p.jsx(Ja,{className:"h-4 w-4 mr-2"}),"Profiles"]})]}),p.jsx(ho,{value:"stats",className:"space-y-4",children:p.jsxs(Tt,{children:[p.jsxs(Wt,{children:[p.jsx(Kt,{children:"Stat Definitions"}),p.jsx(Fn,{children:"Define stats like Health, Strength, Magic, etc. These will be available for players and enemies."})]}),p.jsxs(Dt,{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx(at,{placeholder:"Stat ID (e.g., health, strength)",value:r,onChange:_=>s(_.target.value)}),p.jsx(at,{placeholder:"Display Name (e.g., Health, Strength)",value:i,onChange:_=>o(_.target.value),onKeyDown:_=>_.key==="Enter"&&g()})]}),p.jsxs(Ne,{onClick:g,size:"sm",className:"w-full",children:[p.jsx(Os,{className:"h-4 w-4 mr-1"}),"Add Stat"]}),p.jsx(Xr,{}),p.jsxs("div",{className:"space-y-3",children:[Object.entries(e.stats||{}).map(([_,D])=>p.jsx(Tt,{children:p.jsxs(Dt,{className:"pt-4",children:[p.jsxs("div",{className:"flex items-start justify-between mb-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs(Fe,{className:"text-xs text-muted-foreground",children:["ID: ",_]}),p.jsx(at,{value:D.name,onChange:L=>y(_,"name",L.target.value),placeholder:"Display name",className:"mt-1 mb-2"}),p.jsx(Ad,{value:D.description||"",onChange:L=>y(_,"description",L.target.value),placeholder:"Optional description",className:"h-16 text-xs"})]}),p.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>w(_),className:"h-8 w-8 p-0 text-destructive ml-2",children:p.jsx(Js,{className:"h-4 w-4"})})]}),p.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[p.jsxs("div",{children:[p.jsx(Fe,{className:"text-xs",children:"Min"}),p.jsx(at,{type:"number",value:D.min,onChange:L=>y(_,"min",parseInt(L.target.value)||0),className:"h-8"})]}),p.jsxs("div",{children:[p.jsx(Fe,{className:"text-xs",children:"Max"}),p.jsx(at,{type:"number",value:D.max,onChange:L=>y(_,"max",parseInt(L.target.value)||0),className:"h-8"})]}),p.jsxs("div",{children:[p.jsx(Fe,{className:"text-xs",children:"Default"}),p.jsx(at,{type:"number",value:D.default,onChange:L=>y(_,"default",parseInt(L.target.value)||0),className:"h-8"})]})]})]})},_)),Object.keys(e.stats||{}).length===0&&p.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No stats defined. Add your first stat above."})]})]})]})}),p.jsx(ho,{value:"variables",className:"space-y-4",children:p.jsxs(Tt,{children:[p.jsxs(Wt,{children:[p.jsx(Kt,{children:"Variable Presets"}),p.jsx(Fn,{children:"Define global variables (booleans, numbers, or strings) for tracking story state."})]}),p.jsxs(Dt,{className:"space-y-4",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsx(at,{placeholder:"Variable name (e.g., questCompleted)",value:l,onChange:_=>c(_.target.value),onKeyDown:_=>_.key==="Enter"&&S()}),p.jsxs(Ne,{onClick:S,size:"sm",children:[p.jsx(Os,{className:"h-4 w-4 mr-1"}),"Add"]})]}),p.jsx(Xr,{}),p.jsxs("div",{className:"space-y-2",children:[Object.entries(e.variables||{}).map(([_,D])=>p.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded",children:[p.jsx(Fe,{className:"flex-1 font-medium",children:_}),p.jsx(at,{value:String(D),onChange:L=>{const U=L.target.value;U==="true"?C(_,!0):U==="false"?C(_,!1):isNaN(Number(U))?C(_,U):C(_,Number(U))},className:"w-32 h-8"}),p.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>A(_),className:"h-8 w-8 p-0 text-destructive",children:p.jsx(Js,{className:"h-4 w-4"})})]},_)),Object.keys(e.variables||{}).length===0&&p.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No variables defined. Add your first variable above."})]})]})]})}),p.jsx(ho,{value:"profiles",className:"space-y-4",children:p.jsxs(Tt,{children:[p.jsxs(Wt,{children:[p.jsx(Kt,{children:"Character Profiles"}),p.jsx(Fn,{children:"Create premade character profiles with preset stats and starting items (e.g., Warrior, Mage, Thief)."})]}),p.jsxs(Dt,{className:"space-y-4",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsx(at,{placeholder:"Profile name (e.g., Warrior, Mage)",value:d,onChange:_=>h(_.target.value),onKeyDown:_=>_.key==="Enter"&&E()}),p.jsxs(Ne,{onClick:E,size:"sm",children:[p.jsx(Os,{className:"h-4 w-4 mr-1"}),"Add Profile"]})]}),p.jsx(Xr,{}),p.jsxs("div",{className:"space-y-4",children:[(e.profiles||[]).map(_=>p.jsxs(Tt,{className:"border-2",children:[p.jsx(Wt,{className:"pb-3",children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx(at,{value:_.name,onChange:D=>k(_.id,{name:D.target.value}),className:"font-bold text-lg mb-2"}),p.jsx(Ad,{value:_.description||"",onChange:D=>k(_.id,{description:D.target.value}),placeholder:"Profile description (optional)",className:"h-16 text-sm"})]}),p.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>M(_.id),className:"h-8 w-8 p-0 text-destructive ml-2",children:p.jsx(Js,{className:"h-4 w-4"})})]})}),p.jsxs(Dt,{className:"space-y-3",children:[p.jsxs("div",{children:[p.jsx(Fe,{className:"text-sm font-semibold mb-2 block",children:"Stats"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Object.entries(e.stats||{}).map(([D,L])=>{var U;return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Fe,{className:"text-xs flex-1",children:L.name}),p.jsx(at,{type:"number",value:((U=_.stats)==null?void 0:U[D])||L.default,onChange:K=>I(_.id,D,parseInt(K.target.value)||L.default),className:"h-8 w-20",min:L.min,max:L.max})]},D)}),Object.keys(e.stats||{}).length===0&&p.jsx("p",{className:"text-xs text-muted-foreground col-span-2",children:"No stats defined. Add stats in the Stats tab first."})]})]}),p.jsx(Xr,{}),p.jsxs("div",{children:[p.jsx(Fe,{className:"text-sm font-semibold mb-2 block",children:"Starting Items"}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs(Wr,{onValueChange:D=>P(_.id,D),children:[p.jsx(Tr,{className:"h-8",children:p.jsx(Gr,{placeholder:"Add item..."})}),p.jsxs(kr,{children:[t.filter(D=>!(_.inventory||[]).includes(D.id)).map(D=>p.jsx(Vt,{value:D.id,children:D.name},D.id)),t.filter(D=>!(_.inventory||[]).includes(D.id)).length===0&&p.jsx(Vt,{value:"_none",disabled:!0,children:"No items available"})]})]}),p.jsxs("div",{className:"flex flex-wrap gap-1",children:[(_.inventory||[]).map(D=>{const L=t.find(U=>U.id===D);return p.jsxs("div",{className:"flex items-center gap-1 bg-secondary px-2 py-1 rounded text-xs",children:[p.jsx("span",{children:(L==null?void 0:L.name)||D}),p.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>j(_.id,D),className:"h-4 w-4 p-0 hover:bg-destructive/20",children:p.jsx(Js,{className:"h-3 w-3"})})]},D)}),(_.inventory||[]).length===0&&p.jsx("p",{className:"text-xs text-muted-foreground",children:"No starting items"})]})]})]})]})]},_.id)),(e.profiles||[]).length===0&&p.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[p.jsx(Ja,{className:"h-12 w-12 mx-auto text-muted-foreground mb-3"}),p.jsx("p",{className:"text-muted-foreground mb-2",children:"No profiles defined yet."}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Profiles allow players to choose premade characters with preset stats and items."})]})]})]})]})})]})]})}function kre({sections:e,pages:t,onUpdate:n}){const[r,s]=N.useState(""),i=()=>{if(r.trim()){const g={id:(e.length>0?Math.max(...e.map(y=>typeof y.id=="number"?y.id:parseInt(String(y.id))||0)):0)+1,name:r.trim(),title:r.trim()};n([...e,g]),s("")}},o=(h,g)=>{n(e.map(y=>y.id===h?{...y,...g}:y))},l=h=>{n(e.filter(g=>g.id!==h))},c=(h,g)=>{const y=[...e],w=g==="up"?h-1:h+1;w>=0&&w<y.length&&([y[h],y[w]]=[y[w],y[h]],n(y))},d=h=>t.filter(g=>g.section===h);return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold",children:"Sections"}),p.jsx("p",{className:"text-muted-foreground",children:"Organize your story into chapters or sections. Pages can be assigned to sections for better organization."})]}),p.jsxs(Tt,{children:[p.jsxs(Wt,{children:[p.jsx(Kt,{children:"Story Sections"}),p.jsx(Fn,{children:"Sections help organize your pages into chapters, acts, or logical groups."})]}),p.jsxs(Dt,{className:"space-y-4",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsx(at,{placeholder:"Section name (e.g., Chapter 1, Prologue)",value:r,onChange:h=>s(h.target.value),onKeyDown:h=>h.key==="Enter"&&i()}),p.jsxs(Ne,{onClick:i,size:"sm",children:[p.jsx(Os,{className:"h-4 w-4 mr-1"}),"Add Section"]})]}),p.jsx(Xr,{}),p.jsx("div",{className:"space-y-2",children:e.length===0?p.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[p.jsx(J9,{className:"h-12 w-12 mx-auto text-muted-foreground mb-3"}),p.jsx("p",{className:"text-muted-foreground mb-2",children:"No sections defined yet."}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Sections are optional but help organize large stories."})]}):e.map((h,g)=>{const y=d(h.id);return p.jsx(Tt,{children:p.jsx(Dt,{className:"pt-4",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsxs("div",{className:"flex flex-col gap-1 pt-2",children:[p.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>c(g,"up"),disabled:g===0,className:"h-6 w-6 p-0",title:"Move up",children:p.jsx(mv,{className:"h-4 w-4"})}),p.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>c(g,"down"),disabled:g===e.length-1,className:"h-6 w-6 p-0",title:"Move down",children:p.jsx(mv,{className:"h-4 w-4"})})]}),p.jsxs("div",{className:"flex-1 space-y-3",children:[p.jsx("div",{className:"flex items-center justify-between",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs(wn,{variant:"outline",children:["ID: ",h.id]}),p.jsxs(wn,{variant:"secondary",children:[y.length," ",y.length===1?"page":"pages"]})]})}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("div",{children:[p.jsx(Fe,{className:"text-xs",children:"Section Name (ID)"}),p.jsx(at,{value:h.name||"",onChange:w=>o(h.id,{name:w.target.value}),placeholder:"Section identifier",className:"h-8"})]}),p.jsxs("div",{children:[p.jsx(Fe,{className:"text-xs",children:"Display Title"}),p.jsx(at,{value:h.title||"",onChange:w=>o(h.id,{title:w.target.value}),placeholder:"Display title",className:"h-8"})]})]}),y.length>0&&p.jsxs("div",{className:"pt-2",children:[p.jsx(Fe,{className:"text-xs text-muted-foreground",children:"Pages in this section:"}),p.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[y.slice(0,10).map(w=>p.jsx(wn,{variant:"outline",className:"text-xs",children:w.title||`Page ${w.id}`},w.id)),y.length>10&&p.jsxs(wn,{variant:"outline",className:"text-xs",children:["+",y.length-10," more"]})]})]})]}),p.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>l(h.id),className:"h-8 w-8 p-0 text-destructive",title:"Delete section",children:p.jsx(Js,{className:"h-4 w-4"})})]})})},h.id)})}),e.length>0&&p.jsx("div",{className:"pt-4 border-t",children:p.jsxs("p",{className:"text-sm text-muted-foreground",children:[" ",p.jsx("strong",{children:"Tip:"})," Assign pages to sections in the Page Editor to organize your story. You can also use section IDs in choice navigation with the ",p.jsx("code",{className:"px-1 py-0.5 bg-muted rounded text-xs",children:"to"})," field."]})})]})]}),p.jsxs(Tt,{children:[p.jsx(Wt,{children:p.jsx(Kt,{className:"text-base",children:"How to Use Sections"})}),p.jsxs(Dt,{className:"space-y-2 text-sm",children:[p.jsxs("div",{children:[p.jsx("strong",{children:"1. Organize Pages:"}),p.jsx("p",{className:"text-muted-foreground",children:"Assign pages to sections in the Page Editor using the section dropdown."})]}),p.jsxs("div",{children:[p.jsx("strong",{children:"2. Navigate by Section:"}),p.jsxs("p",{className:"text-muted-foreground",children:["In choice navigation, use ",p.jsx("code",{className:"px-1 py-0.5 bg-muted rounded text-xs",children:'to: "sectionId"'})," to jump to a section."]})]}),p.jsxs("div",{children:[p.jsx("strong",{children:"3. Structure Your Story:"}),p.jsx("p",{className:"text-muted-foreground",children:'Use sections for chapters, acts, or different story branches (e.g., "Chapter 1", "Dark Path", "Epilogue").'})]})]})]})]})}const Ire=e=>{const{section:t,gamebookData:n,selectedPageId:r,errors:s}=e;return p.jsx(nc,{className:"h-full",children:p.jsxs("div",{className:"p-6",children:[t==="meta"&&p.jsx(JK,{meta:n.meta,onUpdate:e.onUpdateMeta,errors:s.filter(i=>i.section==="meta")}),t==="player"&&p.jsx(sY,{player:n.player,presets:n.presets||{},items:n.items||[],onUpdate:e.onUpdatePlayer,errors:s.filter(i=>i.section==="player")}),t==="pages"&&r&&(()=>{var o;const i=(o=n.pages)==null?void 0:o.find(l=>l.id===r);return i?p.jsx(Ere,{page:i,pageId:r,pages:n.pages||[],items:n.items||[],enemies:n.enemies||[],onUpdate:e.onUpdatePage,onAddChoice:e.onAddChoice,onUpdateChoice:e.onUpdateChoice,onDeleteChoice:e.onDeleteChoice,onDuplicate:e.onDuplicatePage,onDelete:e.onDeletePage,errors:s.filter(l=>l.pageId===String(r))},r):p.jsx("div",{className:"text-center py-12 text-muted-foreground",children:p.jsx("p",{children:"Page not found"})})})(),t==="pages"&&!r&&p.jsx("div",{className:"text-center py-12 text-muted-foreground",children:p.jsx("p",{children:"Select a page from the sidebar to edit it"})}),t==="items"&&p.jsx(Nre,{items:n.items||[],onAdd:e.onAddItem,onUpdate:e.onUpdateItem,onDelete:e.onDeleteItem,errors:s.filter(i=>i.section==="items")}),t==="enemies"&&p.jsx(Are,{enemies:n.enemies||[],onAdd:e.onAddEnemy,onUpdate:e.onUpdateEnemy,onDelete:e.onDeleteEnemy,errors:s.filter(i=>i.section==="enemies")}),t==="preset"&&p.jsx(Tre,{presets:n.presets||{},items:n.items||[],onUpdate:e.onUpdatePresets}),t==="sections"&&p.jsx(kre,{sections:n.sections||[],pages:n.pages||[],onUpdate:e.onUpdateSections})]})})};function Pr(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Pr(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const Rre={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},dT=e=>{let t;const n=new Set,r=(h,g)=>{const y=typeof h=="function"?h(t):h;if(!Object.is(y,t)){const w=t;t=g??(typeof y!="object"||y===null)?y:Object.assign({},t,y),n.forEach(S=>S(t,w))}},s=()=>t,c={setState:r,getState:s,getInitialState:()=>d,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(Rre?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,s,c);return c},Mre=e=>e?dT(e):dT,{useDebugValue:_re}=oe,{useSyncExternalStoreWithSelector:Ore}=yte,Pre=e=>e;function V6(e,t=Pre,n){const r=Ore(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return _re(r),r}const fT=(e,t)=>{const n=Mre(e),r=(s,i=t)=>V6(n,s,i);return Object.assign(r,n),r},Dre=(e,t)=>e?fT(e,t):fT;function wr(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var jre={value:()=>{}};function wx(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new J0(n)}function J0(e){this._=e}function Lre(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}J0.prototype=wx.prototype={constructor:J0,on:function(e,t){var n=this._,r=Lre(e+"",n),s,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((s=(e=r[i]).type)&&(s=Bre(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(s=(e=r[i]).type)n[s]=hT(n[s],e.name,t);else if(t==null)for(s in n)n[s]=hT(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new J0(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,i;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,i=r.length;s<i;++s)r[s].value.apply(t,n)}};function Bre(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function hT(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=jre,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var T2="http://www.w3.org/1999/xhtml";const pT={svg:"http://www.w3.org/2000/svg",xhtml:T2,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function vx(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),pT.hasOwnProperty(t)?{space:pT[t],local:e}:e}function Fre(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===T2&&t.documentElement.namespaceURI===T2?t.createElement(e):t.createElementNS(n,e)}}function zre(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function H6(e){var t=vx(e);return(t.local?zre:Fre)(t)}function Vre(){}function AS(e){return e==null?Vre:function(){return this.querySelector(e)}}function Hre(e){typeof e!="function"&&(e=AS(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,l=r[s]=new Array(o),c,d,h=0;h<o;++h)(c=i[h])&&(d=e.call(c,c.__data__,h,i))&&("__data__"in c&&(d.__data__=c.__data__),l[h]=d);return new js(r,this._parents)}function Ure(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function $re(){return[]}function U6(e){return e==null?$re:function(){return this.querySelectorAll(e)}}function Wre(e){return function(){return Ure(e.apply(this,arguments))}}function Gre(e){typeof e=="function"?e=Wre(e):e=U6(e);for(var t=this._groups,n=t.length,r=[],s=[],i=0;i<n;++i)for(var o=t[i],l=o.length,c,d=0;d<l;++d)(c=o[d])&&(r.push(e.call(c,c.__data__,d,o)),s.push(c));return new js(r,s)}function $6(e){return function(){return this.matches(e)}}function W6(e){return function(t){return t.matches(e)}}var Xre=Array.prototype.find;function Kre(e){return function(){return Xre.call(this.children,e)}}function Yre(){return this.firstElementChild}function qre(e){return this.select(e==null?Yre:Kre(typeof e=="function"?e:W6(e)))}var Zre=Array.prototype.filter;function Qre(){return Array.from(this.children)}function Jre(e){return function(){return Zre.call(this.children,e)}}function ese(e){return this.selectAll(e==null?Qre:Jre(typeof e=="function"?e:W6(e)))}function tse(e){typeof e!="function"&&(e=$6(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,l=r[s]=[],c,d=0;d<o;++d)(c=i[d])&&e.call(c,c.__data__,d,i)&&l.push(c);return new js(r,this._parents)}function G6(e){return new Array(e.length)}function nse(){return new js(this._enter||this._groups.map(G6),this._parents)}function j1(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}j1.prototype={constructor:j1,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function rse(e){return function(){return e}}function sse(e,t,n,r,s,i){for(var o=0,l,c=t.length,d=i.length;o<d;++o)(l=t[o])?(l.__data__=i[o],r[o]=l):n[o]=new j1(e,i[o]);for(;o<c;++o)(l=t[o])&&(s[o]=l)}function ise(e,t,n,r,s,i,o){var l,c,d=new Map,h=t.length,g=i.length,y=new Array(h),w;for(l=0;l<h;++l)(c=t[l])&&(y[l]=w=o.call(c,c.__data__,l,t)+"",d.has(w)?s[l]=c:d.set(w,c));for(l=0;l<g;++l)w=o.call(e,i[l],l,i)+"",(c=d.get(w))?(r[l]=c,c.__data__=i[l],d.delete(w)):n[l]=new j1(e,i[l]);for(l=0;l<h;++l)(c=t[l])&&d.get(y[l])===c&&(s[l]=c)}function ose(e){return e.__data__}function ase(e,t){if(!arguments.length)return Array.from(this,ose);var n=t?ise:sse,r=this._parents,s=this._groups;typeof e!="function"&&(e=rse(e));for(var i=s.length,o=new Array(i),l=new Array(i),c=new Array(i),d=0;d<i;++d){var h=r[d],g=s[d],y=g.length,w=lse(e.call(h,h&&h.__data__,d,r)),S=w.length,C=l[d]=new Array(S),A=o[d]=new Array(S),E=c[d]=new Array(y);n(h,g,C,A,E,w,t);for(var k=0,I=0,M,P;k<S;++k)if(M=C[k]){for(k>=I&&(I=k+1);!(P=A[I])&&++I<S;);M._next=P||null}}return o=new js(o,r),o._enter=l,o._exit=c,o}function lse(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function cse(){return new js(this._exit||this._groups.map(G6),this._parents)}function use(e,t,n){var r=this.enter(),s=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?i.remove():n(i),r&&s?r.merge(s).order():s}function dse(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,i=r.length,o=Math.min(s,i),l=new Array(s),c=0;c<o;++c)for(var d=n[c],h=r[c],g=d.length,y=l[c]=new Array(g),w,S=0;S<g;++S)(w=d[S]||h[S])&&(y[S]=w);for(;c<s;++c)l[c]=n[c];return new js(l,this._parents)}function fse(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,i=r[s],o;--s>=0;)(o=r[s])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function hse(e){e||(e=pse);function t(g,y){return g&&y?e(g.__data__,y.__data__):!g-!y}for(var n=this._groups,r=n.length,s=new Array(r),i=0;i<r;++i){for(var o=n[i],l=o.length,c=s[i]=new Array(l),d,h=0;h<l;++h)(d=o[h])&&(c[h]=d);c.sort(t)}return new js(s,this._parents).order()}function pse(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function mse(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function gse(){return Array.from(this)}function xse(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length;s<i;++s){var o=r[s];if(o)return o}return null}function yse(){let e=0;for(const t of this)++e;return e}function wse(){return!this.node()}function vse(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],i=0,o=s.length,l;i<o;++i)(l=s[i])&&e.call(l,l.__data__,i,s);return this}function bse(e){return function(){this.removeAttribute(e)}}function Cse(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Sse(e,t){return function(){this.setAttribute(e,t)}}function Ese(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Nse(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ase(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Tse(e,t){var n=vx(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Cse:bse:typeof t=="function"?n.local?Ase:Nse:n.local?Ese:Sse)(n,t))}function X6(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function kse(e){return function(){this.style.removeProperty(e)}}function Ise(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Rse(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Mse(e,t,n){return arguments.length>1?this.each((t==null?kse:typeof t=="function"?Rse:Ise)(e,t,n??"")):Td(this.node(),e)}function Td(e,t){return e.style.getPropertyValue(t)||X6(e).getComputedStyle(e,null).getPropertyValue(t)}function _se(e){return function(){delete this[e]}}function Ose(e,t){return function(){this[e]=t}}function Pse(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Dse(e,t){return arguments.length>1?this.each((t==null?_se:typeof t=="function"?Pse:Ose)(e,t)):this.node()[e]}function K6(e){return e.trim().split(/^|\s+/)}function TS(e){return e.classList||new Y6(e)}function Y6(e){this._node=e,this._names=K6(e.getAttribute("class")||"")}Y6.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function q6(e,t){for(var n=TS(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function Z6(e,t){for(var n=TS(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function jse(e){return function(){q6(this,e)}}function Lse(e){return function(){Z6(this,e)}}function Bse(e,t){return function(){(t.apply(this,arguments)?q6:Z6)(this,e)}}function Fse(e,t){var n=K6(e+"");if(arguments.length<2){for(var r=TS(this.node()),s=-1,i=n.length;++s<i;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?Bse:t?jse:Lse)(n,t))}function zse(){this.textContent=""}function Vse(e){return function(){this.textContent=e}}function Hse(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Use(e){return arguments.length?this.each(e==null?zse:(typeof e=="function"?Hse:Vse)(e)):this.node().textContent}function $se(){this.innerHTML=""}function Wse(e){return function(){this.innerHTML=e}}function Gse(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Xse(e){return arguments.length?this.each(e==null?$se:(typeof e=="function"?Gse:Wse)(e)):this.node().innerHTML}function Kse(){this.nextSibling&&this.parentNode.appendChild(this)}function Yse(){return this.each(Kse)}function qse(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Zse(){return this.each(qse)}function Qse(e){var t=typeof e=="function"?e:H6(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Jse(){return null}function eie(e,t){var n=typeof e=="function"?e:H6(e),r=t==null?Jse:typeof t=="function"?t:AS(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function tie(){var e=this.parentNode;e&&e.removeChild(this)}function nie(){return this.each(tie)}function rie(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function sie(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function iie(e){return this.select(e?sie:rie)}function oie(e){return arguments.length?this.property("__data__",e):this.node().__data__}function aie(e){return function(t){e.call(this,t,this.__data__)}}function lie(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function cie(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,i;n<s;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function uie(e,t,n){return function(){var r=this.__on,s,i=aie(t);if(r){for(var o=0,l=r.length;o<l;++o)if((s=r[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=n),s.value=t;return}}this.addEventListener(e.type,i,n),s={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(s):this.__on=[s]}}function die(e,t,n){var r=lie(e+""),s,i=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,d=l.length,h;c<d;++c)for(s=0,h=l[c];s<i;++s)if((o=r[s]).type===h.type&&o.name===h.name)return h.value}return}for(l=t?uie:cie,s=0;s<i;++s)this.each(l(r[s],t,n));return this}function Q6(e,t,n){var r=X6(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function fie(e,t){return function(){return Q6(this,e,t)}}function hie(e,t){return function(){return Q6(this,e,t.apply(this,arguments))}}function pie(e,t){return this.each((typeof t=="function"?hie:fie)(e,t))}function*mie(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length,o;s<i;++s)(o=r[s])&&(yield o)}var J6=[null];function js(e,t){this._groups=e,this._parents=t}function vp(){return new js([[document.documentElement]],J6)}function gie(){return this}js.prototype=vp.prototype={constructor:js,select:Hre,selectAll:Gre,selectChild:qre,selectChildren:ese,filter:tse,data:ase,enter:nse,exit:cse,join:use,merge:dse,selection:gie,order:fse,sort:hse,call:mse,nodes:gse,node:xse,size:yse,empty:wse,each:vse,attr:Tse,style:Mse,property:Dse,classed:Fse,text:Use,html:Xse,raise:Yse,lower:Zse,append:Qse,insert:eie,remove:nie,clone:iie,datum:oie,on:die,dispatch:pie,[Symbol.iterator]:mie};function Zs(e){return typeof e=="string"?new js([[document.querySelector(e)]],[document.documentElement]):new js([[e]],J6)}function xie(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ei(e,t){if(e=xie(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const yie={passive:!1},Vh={capture:!0,passive:!1};function cw(e){e.stopImmediatePropagation()}function Gu(e){e.preventDefault(),e.stopImmediatePropagation()}function e5(e){var t=e.document.documentElement,n=Zs(e).on("dragstart.drag",Gu,Vh);"onselectstart"in t?n.on("selectstart.drag",Gu,Vh):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function t5(e,t){var n=e.document.documentElement,r=Zs(e).on("dragstart.drag",null);t&&(r.on("click.drag",Gu,Vh),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const v0=e=>()=>e;function k2(e,{sourceEvent:t,subject:n,target:r,identifier:s,active:i,x:o,y:l,dx:c,dy:d,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:h}})}k2.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function wie(e){return!e.ctrlKey&&!e.button}function vie(){return this.parentNode}function bie(e,t){return t??{x:e.x,y:e.y}}function Cie(){return navigator.maxTouchPoints||"ontouchstart"in this}function Sie(){var e=wie,t=vie,n=bie,r=Cie,s={},i=wx("start","drag","end"),o=0,l,c,d,h,g=0;function y(M){M.on("mousedown.drag",w).filter(r).on("touchstart.drag",A).on("touchmove.drag",E,yie).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(M,P){if(!(h||!e.call(this,M,P))){var j=I(this,t.call(this,M,P),M,P,"mouse");j&&(Zs(M.view).on("mousemove.drag",S,Vh).on("mouseup.drag",C,Vh),e5(M.view),cw(M),d=!1,l=M.clientX,c=M.clientY,j("start",M))}}function S(M){if(Gu(M),!d){var P=M.clientX-l,j=M.clientY-c;d=P*P+j*j>g}s.mouse("drag",M)}function C(M){Zs(M.view).on("mousemove.drag mouseup.drag",null),t5(M.view,d),Gu(M),s.mouse("end",M)}function A(M,P){if(e.call(this,M,P)){var j=M.changedTouches,_=t.call(this,M,P),D=j.length,L,U;for(L=0;L<D;++L)(U=I(this,_,M,P,j[L].identifier,j[L]))&&(cw(M),U("start",M,j[L]))}}function E(M){var P=M.changedTouches,j=P.length,_,D;for(_=0;_<j;++_)(D=s[P[_].identifier])&&(Gu(M),D("drag",M,P[_]))}function k(M){var P=M.changedTouches,j=P.length,_,D;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),_=0;_<j;++_)(D=s[P[_].identifier])&&(cw(M),D("end",M,P[_]))}function I(M,P,j,_,D,L){var U=i.copy(),K=Ei(L||j,P),q,re,z;if((z=n.call(M,new k2("beforestart",{sourceEvent:j,target:y,identifier:D,active:o,x:K[0],y:K[1],dx:0,dy:0,dispatch:U}),_))!=null)return q=z.x-K[0]||0,re=z.y-K[1]||0,function H(Y,X,W){var V=K,ee;switch(Y){case"start":s[D]=H,ee=o++;break;case"end":delete s[D],--o;case"drag":K=Ei(W||X,P),ee=o;break}U.call(Y,M,new k2(Y,{sourceEvent:X,subject:z,target:y,identifier:D,active:ee,x:K[0]+q,y:K[1]+re,dx:K[0]-V[0],dy:K[1]-V[1],dispatch:U}),_)}}return y.filter=function(M){return arguments.length?(e=typeof M=="function"?M:v0(!!M),y):e},y.container=function(M){return arguments.length?(t=typeof M=="function"?M:v0(M),y):t},y.subject=function(M){return arguments.length?(n=typeof M=="function"?M:v0(M),y):n},y.touchable=function(M){return arguments.length?(r=typeof M=="function"?M:v0(!!M),y):r},y.on=function(){var M=i.on.apply(i,arguments);return M===i?y:M},y.clickDistance=function(M){return arguments.length?(g=(M=+M)*M,y):Math.sqrt(g)},y}function kS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function n5(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function bp(){}var Hh=.7,L1=1/Hh,Xu="\\s*([+-]?\\d+)\\s*",Uh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",po="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Eie=/^#([0-9a-f]{3,8})$/,Nie=new RegExp(`^rgb\\(${Xu},${Xu},${Xu}\\)$`),Aie=new RegExp(`^rgb\\(${po},${po},${po}\\)$`),Tie=new RegExp(`^rgba\\(${Xu},${Xu},${Xu},${Uh}\\)$`),kie=new RegExp(`^rgba\\(${po},${po},${po},${Uh}\\)$`),Iie=new RegExp(`^hsl\\(${Uh},${po},${po}\\)$`),Rie=new RegExp(`^hsla\\(${Uh},${po},${po},${Uh}\\)$`),mT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kS(bp,$h,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:gT,formatHex:gT,formatHex8:Mie,formatHsl:_ie,formatRgb:xT,toString:xT});function gT(){return this.rgb().formatHex()}function Mie(){return this.rgb().formatHex8()}function _ie(){return r5(this).formatHsl()}function xT(){return this.rgb().formatRgb()}function $h(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Eie.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?yT(t):n===3?new ws(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?b0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?b0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Nie.exec(e))?new ws(t[1],t[2],t[3],1):(t=Aie.exec(e))?new ws(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Tie.exec(e))?b0(t[1],t[2],t[3],t[4]):(t=kie.exec(e))?b0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Iie.exec(e))?bT(t[1],t[2]/100,t[3]/100,1):(t=Rie.exec(e))?bT(t[1],t[2]/100,t[3]/100,t[4]):mT.hasOwnProperty(e)?yT(mT[e]):e==="transparent"?new ws(NaN,NaN,NaN,0):null}function yT(e){return new ws(e>>16&255,e>>8&255,e&255,1)}function b0(e,t,n,r){return r<=0&&(e=t=n=NaN),new ws(e,t,n,r)}function Oie(e){return e instanceof bp||(e=$h(e)),e?(e=e.rgb(),new ws(e.r,e.g,e.b,e.opacity)):new ws}function I2(e,t,n,r){return arguments.length===1?Oie(e):new ws(e,t,n,r??1)}function ws(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}kS(ws,I2,n5(bp,{brighter(e){return e=e==null?L1:Math.pow(L1,e),new ws(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hh:Math.pow(Hh,e),new ws(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ws(gc(this.r),gc(this.g),gc(this.b),B1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wT,formatHex:wT,formatHex8:Pie,formatRgb:vT,toString:vT}));function wT(){return`#${Wl(this.r)}${Wl(this.g)}${Wl(this.b)}`}function Pie(){return`#${Wl(this.r)}${Wl(this.g)}${Wl(this.b)}${Wl((isNaN(this.opacity)?1:this.opacity)*255)}`}function vT(){const e=B1(this.opacity);return`${e===1?"rgb(":"rgba("}${gc(this.r)}, ${gc(this.g)}, ${gc(this.b)}${e===1?")":`, ${e})`}`}function B1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function gc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wl(e){return e=gc(e),(e<16?"0":"")+e.toString(16)}function bT(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ti(e,t,n,r)}function r5(e){if(e instanceof Ti)return new Ti(e.h,e.s,e.l,e.opacity);if(e instanceof bp||(e=$h(e)),!e)return new Ti;if(e instanceof Ti)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(n-r)/l+(n<r)*6:n===i?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new Ti(o,l,c,e.opacity)}function Die(e,t,n,r){return arguments.length===1?r5(e):new Ti(e,t,n,r??1)}function Ti(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}kS(Ti,Die,n5(bp,{brighter(e){return e=e==null?L1:Math.pow(L1,e),new Ti(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hh:Math.pow(Hh,e),new Ti(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new ws(uw(e>=240?e-240:e+120,s,r),uw(e,s,r),uw(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new Ti(CT(this.h),C0(this.s),C0(this.l),B1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=B1(this.opacity);return`${e===1?"hsl(":"hsla("}${CT(this.h)}, ${C0(this.s)*100}%, ${C0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function CT(e){return e=(e||0)%360,e<0?e+360:e}function C0(e){return Math.max(0,Math.min(1,e||0))}function uw(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const s5=e=>()=>e;function jie(e,t){return function(n){return e+n*t}}function Lie(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Bie(e){return(e=+e)==1?i5:function(t,n){return n-t?Lie(t,n,e):s5(isNaN(t)?n:t)}}function i5(e,t){var n=t-e;return n?jie(e,n):s5(isNaN(e)?t:e)}const ST=function e(t){var n=Bie(t);function r(s,i){var o=n((s=I2(s)).r,(i=I2(i)).r),l=n(s.g,i.g),c=n(s.b,i.b),d=i5(s.opacity,i.opacity);return function(h){return s.r=o(h),s.g=l(h),s.b=c(h),s.opacity=d(h),s+""}}return r.gamma=e,r}(1);function Na(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var R2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dw=new RegExp(R2.source,"g");function Fie(e){return function(){return e}}function zie(e){return function(t){return e(t)+""}}function Vie(e,t){var n=R2.lastIndex=dw.lastIndex=0,r,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=R2.exec(e))&&(s=dw.exec(t));)(i=s.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(r=r[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:Na(r,s)})),n=dw.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?zie(c[0].x):Fie(t):(t=c.length,function(d){for(var h=0,g;h<t;++h)l[(g=c[h]).i]=g.x(d);return l.join("")})}var ET=180/Math.PI,M2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function o5(e,t,n,r,s,i){var o,l,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,c/=l),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:s,translateY:i,rotate:Math.atan2(t,e)*ET,skewX:Math.atan(c)*ET,scaleX:o,scaleY:l}}var S0;function Hie(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?M2:o5(t.a,t.b,t.c,t.d,t.e,t.f)}function Uie(e){return e==null||(S0||(S0=document.createElementNS("http://www.w3.org/2000/svg","g")),S0.setAttribute("transform",e),!(e=S0.transform.baseVal.consolidate()))?M2:(e=e.matrix,o5(e.a,e.b,e.c,e.d,e.e,e.f))}function a5(e,t,n,r){function s(d){return d.length?d.pop()+" ":""}function i(d,h,g,y,w,S){if(d!==g||h!==y){var C=w.push("translate(",null,t,null,n);S.push({i:C-4,x:Na(d,g)},{i:C-2,x:Na(h,y)})}else(g||y)&&w.push("translate("+g+t+y+n)}function o(d,h,g,y){d!==h?(d-h>180?h+=360:h-d>180&&(d+=360),y.push({i:g.push(s(g)+"rotate(",null,r)-2,x:Na(d,h)})):h&&g.push(s(g)+"rotate("+h+r)}function l(d,h,g,y){d!==h?y.push({i:g.push(s(g)+"skewX(",null,r)-2,x:Na(d,h)}):h&&g.push(s(g)+"skewX("+h+r)}function c(d,h,g,y,w,S){if(d!==g||h!==y){var C=w.push(s(w)+"scale(",null,",",null,")");S.push({i:C-4,x:Na(d,g)},{i:C-2,x:Na(h,y)})}else(g!==1||y!==1)&&w.push(s(w)+"scale("+g+","+y+")")}return function(d,h){var g=[],y=[];return d=e(d),h=e(h),i(d.translateX,d.translateY,h.translateX,h.translateY,g,y),o(d.rotate,h.rotate,g,y),l(d.skewX,h.skewX,g,y),c(d.scaleX,d.scaleY,h.scaleX,h.scaleY,g,y),d=h=null,function(w){for(var S=-1,C=y.length,A;++S<C;)g[(A=y[S]).i]=A.x(w);return g.join("")}}}var $ie=a5(Hie,"px, ","px)","deg)"),Wie=a5(Uie,", ",")",")"),Gie=1e-12;function NT(e){return((e=Math.exp(e))+1/e)/2}function Xie(e){return((e=Math.exp(e))-1/e)/2}function Kie(e){return((e=Math.exp(2*e))-1)/(e+1)}const Yie=function e(t,n,r){function s(i,o){var l=i[0],c=i[1],d=i[2],h=o[0],g=o[1],y=o[2],w=h-l,S=g-c,C=w*w+S*S,A,E;if(C<Gie)E=Math.log(y/d)/t,A=function(_){return[l+_*w,c+_*S,d*Math.exp(t*_*E)]};else{var k=Math.sqrt(C),I=(y*y-d*d+r*C)/(2*d*n*k),M=(y*y-d*d-r*C)/(2*y*n*k),P=Math.log(Math.sqrt(I*I+1)-I),j=Math.log(Math.sqrt(M*M+1)-M);E=(j-P)/t,A=function(_){var D=_*E,L=NT(P),U=d/(n*k)*(L*Kie(t*D+P)-Xie(P));return[l+U*w,c+U*S,d*L/NT(t*D+P)]}}return A.duration=E*1e3*t/Math.SQRT2,A}return s.rho=function(i){var o=Math.max(.001,+i),l=o*o,c=l*l;return e(o,l,c)},s}(Math.SQRT2,2,4);var kd=0,Rf=0,ff=0,l5=1e3,F1,Mf,z1=0,jc=0,bx=0,Wh=typeof performance=="object"&&performance.now?performance:Date,c5=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function IS(){return jc||(c5(qie),jc=Wh.now()+bx)}function qie(){jc=0}function V1(){this._call=this._time=this._next=null}V1.prototype=u5.prototype={constructor:V1,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?IS():+n)+(t==null?0:+t),!this._next&&Mf!==this&&(Mf?Mf._next=this:F1=this,Mf=this),this._call=e,this._time=n,_2()},stop:function(){this._call&&(this._call=null,this._time=1/0,_2())}};function u5(e,t,n){var r=new V1;return r.restart(e,t,n),r}function Zie(){IS(),++kd;for(var e=F1,t;e;)(t=jc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--kd}function AT(){jc=(z1=Wh.now())+bx,kd=Rf=0;try{Zie()}finally{kd=0,Jie(),jc=0}}function Qie(){var e=Wh.now(),t=e-z1;t>l5&&(bx-=t,z1=e)}function Jie(){for(var e,t=F1,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:F1=n);Mf=e,_2(r)}function _2(e){if(!kd){Rf&&(Rf=clearTimeout(Rf));var t=e-jc;t>24?(e<1/0&&(Rf=setTimeout(AT,e-Wh.now()-bx)),ff&&(ff=clearInterval(ff))):(ff||(z1=Wh.now(),ff=setInterval(Qie,l5)),kd=1,c5(AT))}}function TT(e,t,n){var r=new V1;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var eoe=wx("start","end","cancel","interrupt"),toe=[],d5=0,kT=1,O2=2,em=3,IT=4,P2=5,tm=6;function Cx(e,t,n,r,s,i){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;noe(e,n,{name:t,index:r,group:s,on:eoe,tween:toe,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:d5})}function RS(e,t){var n=zi(e,t);if(n.state>d5)throw new Error("too late; already scheduled");return n}function Co(e,t){var n=zi(e,t);if(n.state>em)throw new Error("too late; already running");return n}function zi(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function noe(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=u5(i,0,n.time);function i(d){n.state=kT,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var h,g,y,w;if(n.state!==kT)return c();for(h in r)if(w=r[h],w.name===n.name){if(w.state===em)return TT(o);w.state===IT?(w.state=tm,w.timer.stop(),w.on.call("interrupt",e,e.__data__,w.index,w.group),delete r[h]):+h<t&&(w.state=tm,w.timer.stop(),w.on.call("cancel",e,e.__data__,w.index,w.group),delete r[h])}if(TT(function(){n.state===em&&(n.state=IT,n.timer.restart(l,n.delay,n.time),l(d))}),n.state=O2,n.on.call("start",e,e.__data__,n.index,n.group),n.state===O2){for(n.state=em,s=new Array(y=n.tween.length),h=0,g=-1;h<y;++h)(w=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(s[++g]=w);s.length=g+1}}function l(d){for(var h=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(c),n.state=P2,1),g=-1,y=s.length;++g<y;)s[g].call(e,h);n.state===P2&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=tm,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function nm(e,t){var n=e.__transition,r,s,i=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){i=!1;continue}s=r.state>O2&&r.state<P2,r.state=tm,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}i&&delete e.__transition}}function roe(e){return this.each(function(){nm(this,e)})}function soe(e,t){var n,r;return function(){var s=Co(this,e),i=s.tween;if(i!==n){r=n=i;for(var o=0,l=r.length;o<l;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}s.tween=r}}function ioe(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var i=Co(this,e),o=i.tween;if(o!==r){s=(r=o).slice();for(var l={name:t,value:n},c=0,d=s.length;c<d;++c)if(s[c].name===t){s[c]=l;break}c===d&&s.push(l)}i.tween=s}}function ooe(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=zi(this.node(),n).tween,s=0,i=r.length,o;s<i;++s)if((o=r[s]).name===e)return o.value;return null}return this.each((t==null?soe:ioe)(n,e,t))}function MS(e,t,n){var r=e._id;return e.each(function(){var s=Co(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return zi(s,r).value[t]}}function f5(e,t){var n;return(typeof t=="number"?Na:t instanceof $h?ST:(n=$h(t))?(t=n,ST):Vie)(e,t)}function aoe(e){return function(){this.removeAttribute(e)}}function loe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function coe(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttribute(e);return o===s?null:o===r?i:i=t(r=o,n)}}function uoe(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===r?i:i=t(r=o,n)}}function doe(e,t,n){var r,s,i;return function(){var o,l=n(this),c;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=l+"",o===c?null:o===r&&c===s?i:(s=c,i=t(r=o,l)))}}function foe(e,t,n){var r,s,i;return function(){var o,l=n(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=l+"",o===c?null:o===r&&c===s?i:(s=c,i=t(r=o,l)))}}function hoe(e,t){var n=vx(e),r=n==="transform"?Wie:f5;return this.attrTween(e,typeof t=="function"?(n.local?foe:doe)(n,r,MS(this,"attr."+e,t)):t==null?(n.local?loe:aoe)(n):(n.local?uoe:coe)(n,r,t))}function poe(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function moe(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function goe(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&moe(e,i)),n}return s._value=t,s}function xoe(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&poe(e,i)),n}return s._value=t,s}function yoe(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=vx(e);return this.tween(n,(r.local?goe:xoe)(r,t))}function woe(e,t){return function(){RS(this,e).delay=+t.apply(this,arguments)}}function voe(e,t){return t=+t,function(){RS(this,e).delay=t}}function boe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?woe:voe)(t,e)):zi(this.node(),t).delay}function Coe(e,t){return function(){Co(this,e).duration=+t.apply(this,arguments)}}function Soe(e,t){return t=+t,function(){Co(this,e).duration=t}}function Eoe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Coe:Soe)(t,e)):zi(this.node(),t).duration}function Noe(e,t){if(typeof t!="function")throw new Error;return function(){Co(this,e).ease=t}}function Aoe(e){var t=this._id;return arguments.length?this.each(Noe(t,e)):zi(this.node(),t).ease}function Toe(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Co(this,e).ease=n}}function koe(e){if(typeof e!="function")throw new Error;return this.each(Toe(this._id,e))}function Ioe(e){typeof e!="function"&&(e=$6(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,l=r[s]=[],c,d=0;d<o;++d)(c=i[d])&&e.call(c,c.__data__,d,i)&&l.push(c);return new ea(r,this._parents,this._name,this._id)}function Roe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,i=Math.min(r,s),o=new Array(r),l=0;l<i;++l)for(var c=t[l],d=n[l],h=c.length,g=o[l]=new Array(h),y,w=0;w<h;++w)(y=c[w]||d[w])&&(g[w]=y);for(;l<r;++l)o[l]=t[l];return new ea(o,this._parents,this._name,this._id)}function Moe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function _oe(e,t,n){var r,s,i=Moe(t)?RS:Co;return function(){var o=i(this,e),l=o.on;l!==r&&(s=(r=l).copy()).on(t,n),o.on=s}}function Ooe(e,t){var n=this._id;return arguments.length<2?zi(this.node(),n).on.on(e):this.each(_oe(n,e,t))}function Poe(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Doe(){return this.on("end.remove",Poe(this._id))}function joe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=AS(e));for(var r=this._groups,s=r.length,i=new Array(s),o=0;o<s;++o)for(var l=r[o],c=l.length,d=i[o]=new Array(c),h,g,y=0;y<c;++y)(h=l[y])&&(g=e.call(h,h.__data__,y,l))&&("__data__"in h&&(g.__data__=h.__data__),d[y]=g,Cx(d[y],t,n,y,d,zi(h,n)));return new ea(i,this._parents,t,n)}function Loe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=U6(e));for(var r=this._groups,s=r.length,i=[],o=[],l=0;l<s;++l)for(var c=r[l],d=c.length,h,g=0;g<d;++g)if(h=c[g]){for(var y=e.call(h,h.__data__,g,c),w,S=zi(h,n),C=0,A=y.length;C<A;++C)(w=y[C])&&Cx(w,t,n,C,y,S);i.push(y),o.push(h)}return new ea(i,o,t,n)}var Boe=vp.prototype.constructor;function Foe(){return new Boe(this._groups,this._parents)}function zoe(e,t){var n,r,s;return function(){var i=Td(this,e),o=(this.style.removeProperty(e),Td(this,e));return i===o?null:i===n&&o===r?s:s=t(n=i,r=o)}}function h5(e){return function(){this.style.removeProperty(e)}}function Voe(e,t,n){var r,s=n+"",i;return function(){var o=Td(this,e);return o===s?null:o===r?i:i=t(r=o,n)}}function Hoe(e,t,n){var r,s,i;return function(){var o=Td(this,e),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),Td(this,e))),o===c?null:o===r&&c===s?i:(s=c,i=t(r=o,l))}}function Uoe(e,t){var n,r,s,i="style."+t,o="end."+i,l;return function(){var c=Co(this,e),d=c.on,h=c.value[i]==null?l||(l=h5(t)):void 0;(d!==n||s!==h)&&(r=(n=d).copy()).on(o,s=h),c.on=r}}function $oe(e,t,n){var r=(e+="")=="transform"?$ie:f5;return t==null?this.styleTween(e,zoe(e,r)).on("end.style."+e,h5(e)):typeof t=="function"?this.styleTween(e,Hoe(e,r,MS(this,"style."+e,t))).each(Uoe(this._id,e)):this.styleTween(e,Voe(e,r,t),n).on("end.style."+e,null)}function Woe(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Goe(e,t,n){var r,s;function i(){var o=t.apply(this,arguments);return o!==s&&(r=(s=o)&&Woe(e,o,n)),r}return i._value=t,i}function Xoe(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Goe(e,t,n??""))}function Koe(e){return function(){this.textContent=e}}function Yoe(e){return function(){var t=e(this);this.textContent=t??""}}function qoe(e){return this.tween("text",typeof e=="function"?Yoe(MS(this,"text",e)):Koe(e==null?"":e+""))}function Zoe(e){return function(t){this.textContent=e.call(this,t)}}function Qoe(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&Zoe(s)),t}return r._value=e,r}function Joe(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Qoe(e))}function eae(){for(var e=this._name,t=this._id,n=p5(),r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],l=o.length,c,d=0;d<l;++d)if(c=o[d]){var h=zi(c,t);Cx(c,e,n,d,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new ea(r,this._parents,e,n)}function tae(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(i,o){var l={value:o},c={value:function(){--s===0&&i()}};n.each(function(){var d=Co(this,r),h=d.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),d.on=t}),s===0&&i()})}var nae=0;function ea(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function p5(){return++nae}var Mo=vp.prototype;ea.prototype={constructor:ea,select:joe,selectAll:Loe,selectChild:Mo.selectChild,selectChildren:Mo.selectChildren,filter:Ioe,merge:Roe,selection:Foe,transition:eae,call:Mo.call,nodes:Mo.nodes,node:Mo.node,size:Mo.size,empty:Mo.empty,each:Mo.each,on:Ooe,attr:hoe,attrTween:yoe,style:$oe,styleTween:Xoe,text:qoe,textTween:Joe,remove:Doe,tween:ooe,delay:boe,duration:Eoe,ease:Aoe,easeVarying:koe,end:tae,[Symbol.iterator]:Mo[Symbol.iterator]};function rae(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var sae={time:null,delay:0,duration:250,ease:rae};function iae(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function oae(e){var t,n;e instanceof ea?(t=e._id,e=e._name):(t=p5(),(n=sae).time=IS(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],l=o.length,c,d=0;d<l;++d)(c=o[d])&&Cx(c,e,t,d,o,n||iae(c,t));return new ea(r,this._parents,e,t)}vp.prototype.interrupt=roe;vp.prototype.transition=oae;const E0=e=>()=>e;function aae(e,{sourceEvent:t,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function Uo(e,t,n){this.k=e,this.x=t,this.y=n}Uo.prototype={constructor:Uo,scale:function(e){return e===1?this:new Uo(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Uo(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Go=new Uo(1,0,0);Uo.prototype;function fw(e){e.stopImmediatePropagation()}function hf(e){e.preventDefault(),e.stopImmediatePropagation()}function lae(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function cae(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function RT(){return this.__zoom||Go}function uae(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function dae(){return navigator.maxTouchPoints||"ontouchstart"in this}function fae(e,t,n){var r=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function m5(){var e=lae,t=cae,n=fae,r=uae,s=dae,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,c=Yie,d=wx("start","zoom","end"),h,g,y,w=500,S=150,C=0,A=10;function E(z){z.property("__zoom",RT).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",U).filter(s).on("touchstart.zoom",K).on("touchmove.zoom",q).on("touchend.zoom touchcancel.zoom",re).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(z,H,Y,X){var W=z.selection?z.selection():z;W.property("__zoom",RT),z!==W?P(z,H,Y,X):W.interrupt().each(function(){j(this,arguments).event(X).start().zoom(null,typeof H=="function"?H.apply(this,arguments):H).end()})},E.scaleBy=function(z,H,Y,X){E.scaleTo(z,function(){var W=this.__zoom.k,V=typeof H=="function"?H.apply(this,arguments):H;return W*V},Y,X)},E.scaleTo=function(z,H,Y,X){E.transform(z,function(){var W=t.apply(this,arguments),V=this.__zoom,ee=Y==null?M(W):typeof Y=="function"?Y.apply(this,arguments):Y,ae=V.invert(ee),se=typeof H=="function"?H.apply(this,arguments):H;return n(I(k(V,se),ee,ae),W,o)},Y,X)},E.translateBy=function(z,H,Y,X){E.transform(z,function(){return n(this.__zoom.translate(typeof H=="function"?H.apply(this,arguments):H,typeof Y=="function"?Y.apply(this,arguments):Y),t.apply(this,arguments),o)},null,X)},E.translateTo=function(z,H,Y,X,W){E.transform(z,function(){var V=t.apply(this,arguments),ee=this.__zoom,ae=X==null?M(V):typeof X=="function"?X.apply(this,arguments):X;return n(Go.translate(ae[0],ae[1]).scale(ee.k).translate(typeof H=="function"?-H.apply(this,arguments):-H,typeof Y=="function"?-Y.apply(this,arguments):-Y),V,o)},X,W)};function k(z,H){return H=Math.max(i[0],Math.min(i[1],H)),H===z.k?z:new Uo(H,z.x,z.y)}function I(z,H,Y){var X=H[0]-Y[0]*z.k,W=H[1]-Y[1]*z.k;return X===z.x&&W===z.y?z:new Uo(z.k,X,W)}function M(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function P(z,H,Y,X){z.on("start.zoom",function(){j(this,arguments).event(X).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(X).end()}).tween("zoom",function(){var W=this,V=arguments,ee=j(W,V).event(X),ae=t.apply(W,V),se=Y==null?M(ae):typeof Y=="function"?Y.apply(W,V):Y,G=Math.max(ae[1][0]-ae[0][0],ae[1][1]-ae[0][1]),Q=W.__zoom,te=typeof H=="function"?H.apply(W,V):H,ne=c(Q.invert(se).concat(G/Q.k),te.invert(se).concat(G/te.k));return function(ie){if(ie===1)ie=te;else{var de=ne(ie),pe=G/de[2];ie=new Uo(pe,se[0]-de[0]*pe,se[1]-de[1]*pe)}ee.zoom(null,ie)}})}function j(z,H,Y){return!Y&&z.__zooming||new _(z,H)}function _(z,H){this.that=z,this.args=H,this.active=0,this.sourceEvent=null,this.extent=t.apply(z,H),this.taps=0}_.prototype={event:function(z){return z&&(this.sourceEvent=z),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(z,H){return this.mouse&&z!=="mouse"&&(this.mouse[1]=H.invert(this.mouse[0])),this.touch0&&z!=="touch"&&(this.touch0[1]=H.invert(this.touch0[0])),this.touch1&&z!=="touch"&&(this.touch1[1]=H.invert(this.touch1[0])),this.that.__zoom=H,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(z){var H=Zs(this.that).datum();d.call(z,this.that,new aae(z,{sourceEvent:this.sourceEvent,target:E,type:z,transform:this.that.__zoom,dispatch:d}),H)}};function D(z,...H){if(!e.apply(this,arguments))return;var Y=j(this,H).event(z),X=this.__zoom,W=Math.max(i[0],Math.min(i[1],X.k*Math.pow(2,r.apply(this,arguments)))),V=Ei(z);if(Y.wheel)(Y.mouse[0][0]!==V[0]||Y.mouse[0][1]!==V[1])&&(Y.mouse[1]=X.invert(Y.mouse[0]=V)),clearTimeout(Y.wheel);else{if(X.k===W)return;Y.mouse=[V,X.invert(V)],nm(this),Y.start()}hf(z),Y.wheel=setTimeout(ee,S),Y.zoom("mouse",n(I(k(X,W),Y.mouse[0],Y.mouse[1]),Y.extent,o));function ee(){Y.wheel=null,Y.end()}}function L(z,...H){if(y||!e.apply(this,arguments))return;var Y=z.currentTarget,X=j(this,H,!0).event(z),W=Zs(z.view).on("mousemove.zoom",se,!0).on("mouseup.zoom",G,!0),V=Ei(z,Y),ee=z.clientX,ae=z.clientY;e5(z.view),fw(z),X.mouse=[V,this.__zoom.invert(V)],nm(this),X.start();function se(Q){if(hf(Q),!X.moved){var te=Q.clientX-ee,ne=Q.clientY-ae;X.moved=te*te+ne*ne>C}X.event(Q).zoom("mouse",n(I(X.that.__zoom,X.mouse[0]=Ei(Q,Y),X.mouse[1]),X.extent,o))}function G(Q){W.on("mousemove.zoom mouseup.zoom",null),t5(Q.view,X.moved),hf(Q),X.event(Q).end()}}function U(z,...H){if(e.apply(this,arguments)){var Y=this.__zoom,X=Ei(z.changedTouches?z.changedTouches[0]:z,this),W=Y.invert(X),V=Y.k*(z.shiftKey?.5:2),ee=n(I(k(Y,V),X,W),t.apply(this,H),o);hf(z),l>0?Zs(this).transition().duration(l).call(P,ee,X,z):Zs(this).call(E.transform,ee,X,z)}}function K(z,...H){if(e.apply(this,arguments)){var Y=z.touches,X=Y.length,W=j(this,H,z.changedTouches.length===X).event(z),V,ee,ae,se;for(fw(z),ee=0;ee<X;++ee)ae=Y[ee],se=Ei(ae,this),se=[se,this.__zoom.invert(se),ae.identifier],W.touch0?!W.touch1&&W.touch0[2]!==se[2]&&(W.touch1=se,W.taps=0):(W.touch0=se,V=!0,W.taps=1+!!h);h&&(h=clearTimeout(h)),V&&(W.taps<2&&(g=se[0],h=setTimeout(function(){h=null},w)),nm(this),W.start())}}function q(z,...H){if(this.__zooming){var Y=j(this,H).event(z),X=z.changedTouches,W=X.length,V,ee,ae,se;for(hf(z),V=0;V<W;++V)ee=X[V],ae=Ei(ee,this),Y.touch0&&Y.touch0[2]===ee.identifier?Y.touch0[0]=ae:Y.touch1&&Y.touch1[2]===ee.identifier&&(Y.touch1[0]=ae);if(ee=Y.that.__zoom,Y.touch1){var G=Y.touch0[0],Q=Y.touch0[1],te=Y.touch1[0],ne=Y.touch1[1],ie=(ie=te[0]-G[0])*ie+(ie=te[1]-G[1])*ie,de=(de=ne[0]-Q[0])*de+(de=ne[1]-Q[1])*de;ee=k(ee,Math.sqrt(ie/de)),ae=[(G[0]+te[0])/2,(G[1]+te[1])/2],se=[(Q[0]+ne[0])/2,(Q[1]+ne[1])/2]}else if(Y.touch0)ae=Y.touch0[0],se=Y.touch0[1];else return;Y.zoom("touch",n(I(ee,ae,se),Y.extent,o))}}function re(z,...H){if(this.__zooming){var Y=j(this,H).event(z),X=z.changedTouches,W=X.length,V,ee;for(fw(z),y&&clearTimeout(y),y=setTimeout(function(){y=null},w),V=0;V<W;++V)ee=X[V],Y.touch0&&Y.touch0[2]===ee.identifier?delete Y.touch0:Y.touch1&&Y.touch1[2]===ee.identifier&&delete Y.touch1;if(Y.touch1&&!Y.touch0&&(Y.touch0=Y.touch1,delete Y.touch1),Y.touch0)Y.touch0[1]=this.__zoom.invert(Y.touch0[0]);else if(Y.end(),Y.taps===2&&(ee=Ei(ee,this),Math.hypot(g[0]-ee[0],g[1]-ee[1])<A)){var ae=Zs(this).on("dblclick.zoom");ae&&ae.apply(this,arguments)}}}return E.wheelDelta=function(z){return arguments.length?(r=typeof z=="function"?z:E0(+z),E):r},E.filter=function(z){return arguments.length?(e=typeof z=="function"?z:E0(!!z),E):e},E.touchable=function(z){return arguments.length?(s=typeof z=="function"?z:E0(!!z),E):s},E.extent=function(z){return arguments.length?(t=typeof z=="function"?z:E0([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),E):t},E.scaleExtent=function(z){return arguments.length?(i[0]=+z[0],i[1]=+z[1],E):[i[0],i[1]]},E.translateExtent=function(z){return arguments.length?(o[0][0]=+z[0][0],o[1][0]=+z[1][0],o[0][1]=+z[0][1],o[1][1]=+z[1][1],E):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},E.constrain=function(z){return arguments.length?(n=z,E):n},E.duration=function(z){return arguments.length?(l=+z,E):l},E.interpolate=function(z){return arguments.length?(c=z,E):c},E.on=function(){var z=d.on.apply(d,arguments);return z===d?E:z},E.clickDistance=function(z){return arguments.length?(C=(z=+z)*z,E):Math.sqrt(C)},E.tapDistance=function(z){return arguments.length?(A=+z,E):A},E}const Sx=N.createContext(null),hae=Sx.Provider,ta={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},g5=ta.error001();function ln(e,t){const n=N.useContext(Sx);if(n===null)throw new Error(g5);return V6(n,e,t)}const cr=()=>{const e=N.useContext(Sx);if(e===null)throw new Error(g5);return N.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},pae=e=>e.userSelectionActive?"none":"all";function _S({position:e,children:t,className:n,style:r,...s}){const i=ln(pae),o=`${e}`.split("-");return oe.createElement("div",{className:Pr(["react-flow__panel",n,...o]),style:{...r,pointerEvents:i},...s},t)}function mae({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:oe.createElement(_S,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},oe.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const gae=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:i={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:c,className:d,...h})=>{const g=N.useRef(null),[y,w]=N.useState({x:0,y:0,width:0,height:0}),S=Pr(["react-flow__edge-textwrapper",d]);return N.useEffect(()=>{if(g.current){const C=g.current.getBBox();w({x:C.x,y:C.y,width:C.width,height:C.height})}},[n]),typeof n>"u"||!n?null:oe.createElement("g",{transform:`translate(${e-y.width/2} ${t-y.height/2})`,className:S,visibility:y.width?"visible":"hidden",...h},s&&oe.createElement("rect",{width:y.width+2*o[0],x:-o[0],y:-o[1],height:y.height+2*o[1],className:"react-flow__edge-textbg",style:i,rx:l,ry:l}),oe.createElement("text",{className:"react-flow__edge-text",y:y.height/2,dy:"0.3em",ref:g,style:r},n),c)};var xae=N.memo(gae);const OS=e=>({width:e.offsetWidth,height:e.offsetHeight}),Id=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),PS=(e={x:0,y:0},t)=>({x:Id(e.x,t[0][0],t[1][0]),y:Id(e.y,t[0][1],t[1][1])}),MT=(e,t,n)=>e<t?Id(Math.abs(e-t),1,50)/50:e>n?-Id(Math.abs(e-n),1,50)/50:0,x5=(e,t)=>{const n=MT(e.x,35,t.width-35)*20,r=MT(e.y,35,t.height-35)*20;return[n,r]},y5=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},w5=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Gh=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),v5=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),_T=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),yae=(e,t)=>v5(w5(Gh(e),Gh(t))),D2=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},wae=e=>ei(e.width)&&ei(e.height)&&ei(e.x)&&ei(e.y),ei=e=>!isNaN(e)&&isFinite(e),zn=Symbol.for("internals"),b5=["Enter"," ","Escape"],vae=(e,t)=>{},bae=e=>"nativeEvent"in e;function j2(e){var s,i;const t=bae(e)?e.nativeEvent:e,n=((i=(s=t.composedPath)==null?void 0:s.call(t))==null?void 0:i[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const C5=e=>"clientX"in e,ol=(e,t)=>{var i,o;const n=C5(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,s=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}},H1=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Cp=({id:e,path:t,labelX:n,labelY:r,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:g,markerStart:y,interactionWidth:w=20})=>oe.createElement(oe.Fragment,null,oe.createElement("path",{id:e,style:h,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:g,markerStart:y}),w&&oe.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:w,className:"react-flow__edge-interaction"}),s&&ei(n)&&ei(r)?oe.createElement(xae,{x:n,y:r,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d}):null);Cp.displayName="BaseEdge";function pf(e,t,n){return n===void 0?n:r=>{const s=t().edges.find(i=>i.id===e);s&&n(r,{...s})}}function S5({sourceX:e,sourceY:t,targetX:n,targetY:r}){const s=Math.abs(n-e)/2,i=n<e?n+s:n-s,o=Math.abs(r-t)/2,l=r<t?r+o:r-o;return[i,l,s,o]}function E5({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:s,sourceControlY:i,targetControlX:o,targetControlY:l}){const c=e*.125+s*.375+o*.375+n*.125,d=t*.125+i*.375+l*.375+r*.125,h=Math.abs(c-e),g=Math.abs(d-t);return[c,d,h,g]}var Lc;(function(e){e.Strict="strict",e.Loose="loose"})(Lc||(Lc={}));var Gl;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Gl||(Gl={}));var Xh;(function(e){e.Partial="partial",e.Full="full"})(Xh||(Xh={}));var _a;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(_a||(_a={}));var xc;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(xc||(xc={}));var it;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(it||(it={}));function OT({pos:e,x1:t,y1:n,x2:r,y2:s}){return e===it.Left||e===it.Right?[.5*(t+r),n]:[t,.5*(n+s)]}function N5({sourceX:e,sourceY:t,sourcePosition:n=it.Bottom,targetX:r,targetY:s,targetPosition:i=it.Top}){const[o,l]=OT({pos:n,x1:e,y1:t,x2:r,y2:s}),[c,d]=OT({pos:i,x1:r,y1:s,x2:e,y2:t}),[h,g,y,w]=E5({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${t} C${o},${l} ${c},${d} ${r},${s}`,h,g,y,w]}const DS=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:s=it.Bottom,targetPosition:i=it.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:g,style:y,markerEnd:w,markerStart:S,interactionWidth:C})=>{const[A,E,k]=N5({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:r,targetPosition:i});return oe.createElement(Cp,{path:A,labelX:E,labelY:k,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:g,style:y,markerEnd:w,markerStart:S,interactionWidth:C})});DS.displayName="SimpleBezierEdge";const PT={[it.Left]:{x:-1,y:0},[it.Right]:{x:1,y:0},[it.Top]:{x:0,y:-1},[it.Bottom]:{x:0,y:1}},Cae=({source:e,sourcePosition:t=it.Bottom,target:n})=>t===it.Left||t===it.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},DT=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Sae({source:e,sourcePosition:t=it.Bottom,target:n,targetPosition:r=it.Top,center:s,offset:i}){const o=PT[t],l=PT[r],c={x:e.x+o.x*i,y:e.y+o.y*i},d={x:n.x+l.x*i,y:n.y+l.y*i},h=Cae({source:c,sourcePosition:t,target:d}),g=h.x!==0?"x":"y",y=h[g];let w=[],S,C;const A={x:0,y:0},E={x:0,y:0},[k,I,M,P]=S5({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[g]*l[g]===-1){S=s.x??k,C=s.y??I;const _=[{x:S,y:c.y},{x:S,y:d.y}],D=[{x:c.x,y:C},{x:d.x,y:C}];o[g]===y?w=g==="x"?_:D:w=g==="x"?D:_}else{const _=[{x:c.x,y:d.y}],D=[{x:d.x,y:c.y}];if(g==="x"?w=o.x===y?D:_:w=o.y===y?_:D,t===r){const re=Math.abs(e[g]-n[g]);if(re<=i){const z=Math.min(i-1,i-re);o[g]===y?A[g]=(c[g]>e[g]?-1:1)*z:E[g]=(d[g]>n[g]?-1:1)*z}}if(t!==r){const re=g==="x"?"y":"x",z=o[g]===l[re],H=c[re]>d[re],Y=c[re]<d[re];(o[g]===1&&(!z&&H||z&&Y)||o[g]!==1&&(!z&&Y||z&&H))&&(w=g==="x"?_:D)}const L={x:c.x+A.x,y:c.y+A.y},U={x:d.x+E.x,y:d.y+E.y},K=Math.max(Math.abs(L.x-w[0].x),Math.abs(U.x-w[0].x)),q=Math.max(Math.abs(L.y-w[0].y),Math.abs(U.y-w[0].y));K>=q?(S=(L.x+U.x)/2,C=w[0].y):(S=w[0].x,C=(L.y+U.y)/2)}return[[e,{x:c.x+A.x,y:c.y+A.y},...w,{x:d.x+E.x,y:d.y+E.y},n],S,C,M,P]}function Eae(e,t,n,r){const s=Math.min(DT(e,t)/2,DT(t,n)/2,r),{x:i,y:o}=t;if(e.x===i&&i===n.x||e.y===o&&o===n.y)return`L${i} ${o}`;if(e.y===o){const d=e.x<n.x?-1:1,h=e.y<n.y?1:-1;return`L ${i+s*d},${o}Q ${i},${o} ${i},${o+s*h}`}const l=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${i},${o+s*c}Q ${i},${o} ${i+s*l},${o}`}function L2({sourceX:e,sourceY:t,sourcePosition:n=it.Bottom,targetX:r,targetY:s,targetPosition:i=it.Top,borderRadius:o=5,centerX:l,centerY:c,offset:d=20}){const[h,g,y,w,S]=Sae({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:s},targetPosition:i,center:{x:l,y:c},offset:d});return[h.reduce((A,E,k)=>{let I="";return k>0&&k<h.length-1?I=Eae(h[k-1],E,h[k+1],o):I=`${k===0?"M":"L"}${E.x} ${E.y}`,A+=I,A},""),g,y,w,S]}const Ex=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:h,sourcePosition:g=it.Bottom,targetPosition:y=it.Top,markerEnd:w,markerStart:S,pathOptions:C,interactionWidth:A})=>{const[E,k,I]=L2({sourceX:e,sourceY:t,sourcePosition:g,targetX:n,targetY:r,targetPosition:y,borderRadius:C==null?void 0:C.borderRadius,offset:C==null?void 0:C.offset});return oe.createElement(Cp,{path:E,labelX:k,labelY:I,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:w,markerStart:S,interactionWidth:A})});Ex.displayName="SmoothStepEdge";const jS=N.memo(e=>{var t;return oe.createElement(Ex,{...e,pathOptions:N.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});jS.displayName="StepEdge";function Nae({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[s,i,o,l]=S5({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,s,i,o,l]}const LS=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:g,markerStart:y,interactionWidth:w})=>{const[S,C,A]=Nae({sourceX:e,sourceY:t,targetX:n,targetY:r});return oe.createElement(Cp,{path:S,labelX:C,labelY:A,label:s,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:g,markerStart:y,interactionWidth:w})});LS.displayName="StraightEdge";function N0(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function jT({pos:e,x1:t,y1:n,x2:r,y2:s,c:i}){switch(e){case it.Left:return[t-N0(t-r,i),n];case it.Right:return[t+N0(r-t,i),n];case it.Top:return[t,n-N0(n-s,i)];case it.Bottom:return[t,n+N0(s-n,i)]}}function A5({sourceX:e,sourceY:t,sourcePosition:n=it.Bottom,targetX:r,targetY:s,targetPosition:i=it.Top,curvature:o=.25}){const[l,c]=jT({pos:n,x1:e,y1:t,x2:r,y2:s,c:o}),[d,h]=jT({pos:i,x1:r,y1:s,x2:e,y2:t,c:o}),[g,y,w,S]=E5({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:l,sourceControlY:c,targetControlX:d,targetControlY:h});return[`M${e},${t} C${l},${c} ${d},${h} ${r},${s}`,g,y,w,S]}const U1=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:s=it.Bottom,targetPosition:i=it.Top,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:g,style:y,markerEnd:w,markerStart:S,pathOptions:C,interactionWidth:A})=>{const[E,k,I]=A5({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:r,targetPosition:i,curvature:C==null?void 0:C.curvature});return oe.createElement(Cp,{path:E,labelX:k,labelY:I,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:g,style:y,markerEnd:w,markerStart:S,interactionWidth:A})});U1.displayName="BezierEdge";const BS=N.createContext(null),Aae=BS.Provider;BS.Consumer;const Tae=()=>N.useContext(BS),kae=e=>"id"in e&&"source"in e&&"target"in e,Iae=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,B2=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,Rae=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Mae=(e,t)=>{if(!e.source||!e.target)return t;let n;return kae(e)?n={...e}:n={...e,id:Iae(e)},Rae(n,t)?t:t.concat(n)},F2=({x:e,y:t},[n,r,s],i,[o,l])=>{const c={x:(e-n)/s,y:(t-r)/s};return i?{x:o*Math.round(c.x/o),y:l*Math.round(c.y/l)}:c},T5=({x:e,y:t},[n,r,s])=>({x:e*s+n,y:t*s+r}),yc=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],s={x:e.position.x-n,y:e.position.y-r};return{...s,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:s}},Nx=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,s)=>{const{x:i,y:o}=yc(s,t).positionAbsolute;return w5(r,Gh({x:i,y:o,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return v5(n)},k5=(e,t,[n,r,s]=[0,0,1],i=!1,o=!1,l=[0,0])=>{const c={x:(t.x-n)/s,y:(t.y-r)/s,width:t.width/s,height:t.height/s},d=[];return e.forEach(h=>{const{width:g,height:y,selectable:w=!0,hidden:S=!1}=h;if(o&&!w||S)return!1;const{positionAbsolute:C}=yc(h,l),A={x:C.x,y:C.y,width:g||0,height:y||0},E=D2(c,A),k=typeof g>"u"||typeof y>"u"||g===null||y===null,I=i&&E>0,M=(g||0)*(y||0);(k||I||E>=M||h.dragging)&&d.push(h)}),d},I5=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},R5=(e,t,n,r,s,i=.1)=>{const o=t/(e.width*(1+i)),l=n/(e.height*(1+i)),c=Math.min(o,l),d=Id(c,r,s),h=e.x+e.width/2,g=e.y+e.height/2,y=t/2-h*d,w=n/2-g*d;return{x:y,y:w,zoom:d}},Dl=(e,t=0)=>e.transition().duration(t);function LT(e,t,n,r){return(t[n]||[]).reduce((s,i)=>{var o,l;return`${e.id}-${i.id}-${n}`!==r&&s.push({id:i.id||null,type:n,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+i.x+i.width/2,y:(((l=e.positionAbsolute)==null?void 0:l.y)??0)+i.y+i.height/2}),s},[])}function _ae(e,t,n,r,s,i){const{x:o,y:l}=ol(e),d=t.elementsFromPoint(o,l).find(S=>S.classList.contains("react-flow__handle"));if(d){const S=d.getAttribute("data-nodeid");if(S){const C=FS(void 0,d),A=d.getAttribute("data-handleid"),E=i({nodeId:S,id:A,type:C});if(E){const k=s.find(I=>I.nodeId===S&&I.type===C&&I.id===A);return{handle:{id:A,type:C,nodeId:S,x:(k==null?void 0:k.x)||n.x,y:(k==null?void 0:k.y)||n.y},validHandleResult:E}}}}let h=[],g=1/0;if(s.forEach(S=>{const C=Math.sqrt((S.x-n.x)**2+(S.y-n.y)**2);if(C<=r){const A=i(S);C<=g&&(C<g?h=[{handle:S,validHandleResult:A}]:C===g&&h.push({handle:S,validHandleResult:A}),g=C)}}),!h.length)return{handle:null,validHandleResult:M5()};if(h.length===1)return h[0];const y=h.some(({validHandleResult:S})=>S.isValid),w=h.some(({handle:S})=>S.type==="target");return h.find(({handle:S,validHandleResult:C})=>w?S.type==="target":y?C.isValid:!0)||h[0]}const Oae={source:null,target:null,sourceHandle:null,targetHandle:null},M5=()=>({handleDomNode:null,isValid:!1,connection:Oae,endHandle:null});function _5(e,t,n,r,s,i,o){const l=s==="target",c=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),d={...M5(),handleDomNode:c};if(c){const h=FS(void 0,c),g=c.getAttribute("data-nodeid"),y=c.getAttribute("data-handleid"),w=c.classList.contains("connectable"),S=c.classList.contains("connectableend"),C={source:l?g:n,sourceHandle:l?y:r,target:l?n:g,targetHandle:l?r:y};d.connection=C,w&&S&&(t===Lc.Strict?l&&h==="source"||!l&&h==="target":g!==n||y!==r)&&(d.endHandle={nodeId:g,handleId:y,type:h},d.isValid=i(C))}return d}function Pae({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((s,i)=>{if(i[zn]){const{handleBounds:o}=i[zn];let l=[],c=[];o&&(l=LT(i,o,"source",`${t}-${n}-${r}`),c=LT(i,o,"target",`${t}-${n}-${r}`)),s.push(...l,...c)}return s},[])}function FS(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function hw(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Dae(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function O5({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:s,getState:i,setState:o,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:d}){const h=y5(e.target),{connectionMode:g,domNode:y,autoPanOnConnect:w,connectionRadius:S,onConnectStart:C,panBy:A,getNodes:E,cancelConnection:k}=i();let I=0,M;const{x:P,y:j}=ol(e),_=h==null?void 0:h.elementFromPoint(P,j),D=FS(c,_),L=y==null?void 0:y.getBoundingClientRect();if(!L||!D)return;let U,K=ol(e,L),q=!1,re=null,z=!1,H=null;const Y=Pae({nodes:E(),nodeId:n,handleId:t,handleType:D}),X=()=>{if(!w)return;const[ee,ae]=x5(K,L);A({x:ee,y:ae}),I=requestAnimationFrame(X)};o({connectionPosition:K,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:D,connectionStartHandle:{nodeId:n,handleId:t,type:D},connectionEndHandle:null}),C==null||C(e,{nodeId:n,handleId:t,handleType:D});function W(ee){const{transform:ae}=i();K=ol(ee,L);const{handle:se,validHandleResult:G}=_ae(ee,h,F2(K,ae,!1,[1,1]),S,Y,Q=>_5(Q,g,n,t,s?"target":"source",l,h));if(M=se,q||(X(),q=!0),H=G.handleDomNode,re=G.connection,z=G.isValid,o({connectionPosition:M&&z?T5({x:M.x,y:M.y},ae):K,connectionStatus:Dae(!!M,z),connectionEndHandle:G.endHandle}),!M&&!z&&!H)return hw(U);re.source!==re.target&&H&&(hw(U),U=H,H.classList.add("connecting","react-flow__handle-connecting"),H.classList.toggle("valid",z),H.classList.toggle("react-flow__handle-valid",z))}function V(ee){var ae,se;(M||H)&&re&&z&&(r==null||r(re)),(se=(ae=i()).onConnectEnd)==null||se.call(ae,ee),c&&(d==null||d(ee)),hw(U),k(),cancelAnimationFrame(I),q=!1,z=!1,re=null,H=null,h.removeEventListener("mousemove",W),h.removeEventListener("mouseup",V),h.removeEventListener("touchmove",W),h.removeEventListener("touchend",V)}h.addEventListener("mousemove",W),h.addEventListener("mouseup",V),h.addEventListener("touchmove",W),h.addEventListener("touchend",V)}const BT=()=>!0,jae=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Lae=(e,t,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:i,connectionClickStartHandle:o}=r;return{connecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n||(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n}},P5=N.forwardRef(({type:e="source",position:t=it.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:i=!0,id:o,onConnect:l,children:c,className:d,onMouseDown:h,onTouchStart:g,...y},w)=>{var L,U;const S=o||null,C=e==="target",A=cr(),E=Tae(),{connectOnClick:k,noPanClassName:I}=ln(jae,wr),{connecting:M,clickConnecting:P}=ln(Lae(E,S,e),wr);E||(U=(L=A.getState()).onError)==null||U.call(L,"010",ta.error010());const j=K=>{const{defaultEdgeOptions:q,onConnect:re,hasDefaultEdges:z}=A.getState(),H={...q,...K};if(z){const{edges:Y,setEdges:X}=A.getState();X(Mae(H,Y))}re==null||re(H),l==null||l(H)},_=K=>{if(!E)return;const q=C5(K);s&&(q&&K.button===0||!q)&&O5({event:K,handleId:S,nodeId:E,onConnect:j,isTarget:C,getState:A.getState,setState:A.setState,isValidConnection:n||A.getState().isValidConnection||BT}),q?h==null||h(K):g==null||g(K)},D=K=>{const{onClickConnectStart:q,onClickConnectEnd:re,connectionClickStartHandle:z,connectionMode:H,isValidConnection:Y}=A.getState();if(!E||!z&&!s)return;if(!z){q==null||q(K,{nodeId:E,handleId:S,handleType:e}),A.setState({connectionClickStartHandle:{nodeId:E,type:e,handleId:S}});return}const X=y5(K.target),W=n||Y||BT,{connection:V,isValid:ee}=_5({nodeId:E,id:S,type:e},H,z.nodeId,z.handleId||null,z.type,W,X);ee&&j(V),re==null||re(K),A.setState({connectionClickStartHandle:null})};return oe.createElement("div",{"data-handleid":S,"data-nodeid":E,"data-handlepos":t,"data-id":`${E}-${S}-${e}`,className:Pr(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",I,d,{source:!C,target:C,connectable:r,connectablestart:s,connectableend:i,connecting:P,connectionindicator:r&&(s&&!M||i&&M)}]),onMouseDown:_,onTouchStart:_,onClick:k?D:void 0,ref:w,...y},c)});P5.displayName="Handle";var Rd=N.memo(P5);const D5=({data:e,isConnectable:t,targetPosition:n=it.Top,sourcePosition:r=it.Bottom})=>oe.createElement(oe.Fragment,null,oe.createElement(Rd,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,oe.createElement(Rd,{type:"source",position:r,isConnectable:t}));D5.displayName="DefaultNode";var z2=N.memo(D5);const j5=({data:e,isConnectable:t,sourcePosition:n=it.Bottom})=>oe.createElement(oe.Fragment,null,e==null?void 0:e.label,oe.createElement(Rd,{type:"source",position:n,isConnectable:t}));j5.displayName="InputNode";var L5=N.memo(j5);const B5=({data:e,isConnectable:t,targetPosition:n=it.Top})=>oe.createElement(oe.Fragment,null,oe.createElement(Rd,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);B5.displayName="OutputNode";var F5=N.memo(B5);const zS=()=>null;zS.displayName="GroupNode";const Bae=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),A0=e=>e.id;function Fae(e,t){return wr(e.selectedNodes.map(A0),t.selectedNodes.map(A0))&&wr(e.selectedEdges.map(A0),t.selectedEdges.map(A0))}const z5=N.memo(({onSelectionChange:e})=>{const t=cr(),{selectedNodes:n,selectedEdges:r}=ln(Bae,Fae);return N.useEffect(()=>{const s={nodes:n,edges:r};e==null||e(s),t.getState().onSelectionChange.forEach(i=>i(s))},[n,r,e]),null});z5.displayName="SelectionListener";const zae=e=>!!e.onSelectionChange;function Vae({onSelectionChange:e}){const t=ln(zae);return e||t?oe.createElement(z5,{onSelectionChange:e}):null}const Hae=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function au(e,t){N.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Et(e,t,n){N.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const Uae=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:i,onConnectEnd:o,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:d,nodesConnectable:h,nodesFocusable:g,edgesFocusable:y,edgesUpdatable:w,elevateNodesOnSelect:S,minZoom:C,maxZoom:A,nodeExtent:E,onNodesChange:k,onEdgesChange:I,elementsSelectable:M,connectionMode:P,snapGrid:j,snapToGrid:_,translateExtent:D,connectOnClick:L,defaultEdgeOptions:U,fitView:K,fitViewOptions:q,onNodesDelete:re,onEdgesDelete:z,onNodeDrag:H,onNodeDragStart:Y,onNodeDragStop:X,onSelectionDrag:W,onSelectionDragStart:V,onSelectionDragStop:ee,noPanClassName:ae,nodeOrigin:se,rfId:G,autoPanOnConnect:Q,autoPanOnNodeDrag:te,onError:ne,connectionRadius:ie,isValidConnection:de,nodeDragThreshold:pe})=>{const{setNodes:ye,setEdges:Se,setDefaultNodesAndEdges:De,setMinZoom:xe,setMaxZoom:Ue,setTranslateExtent:nt,setNodeExtent:et,reset:je}=ln(Hae,wr),be=cr();return N.useEffect(()=>{const $e=r==null?void 0:r.map(qt=>({...qt,...U}));return De(n,$e),()=>{je()}},[]),Et("defaultEdgeOptions",U,be.setState),Et("connectionMode",P,be.setState),Et("onConnect",s,be.setState),Et("onConnectStart",i,be.setState),Et("onConnectEnd",o,be.setState),Et("onClickConnectStart",l,be.setState),Et("onClickConnectEnd",c,be.setState),Et("nodesDraggable",d,be.setState),Et("nodesConnectable",h,be.setState),Et("nodesFocusable",g,be.setState),Et("edgesFocusable",y,be.setState),Et("edgesUpdatable",w,be.setState),Et("elementsSelectable",M,be.setState),Et("elevateNodesOnSelect",S,be.setState),Et("snapToGrid",_,be.setState),Et("snapGrid",j,be.setState),Et("onNodesChange",k,be.setState),Et("onEdgesChange",I,be.setState),Et("connectOnClick",L,be.setState),Et("fitViewOnInit",K,be.setState),Et("fitViewOnInitOptions",q,be.setState),Et("onNodesDelete",re,be.setState),Et("onEdgesDelete",z,be.setState),Et("onNodeDrag",H,be.setState),Et("onNodeDragStart",Y,be.setState),Et("onNodeDragStop",X,be.setState),Et("onSelectionDrag",W,be.setState),Et("onSelectionDragStart",V,be.setState),Et("onSelectionDragStop",ee,be.setState),Et("noPanClassName",ae,be.setState),Et("nodeOrigin",se,be.setState),Et("rfId",G,be.setState),Et("autoPanOnConnect",Q,be.setState),Et("autoPanOnNodeDrag",te,be.setState),Et("onError",ne,be.setState),Et("connectionRadius",ie,be.setState),Et("isValidConnection",de,be.setState),Et("nodeDragThreshold",pe,be.setState),au(e,ye),au(t,Se),au(C,xe),au(A,Ue),au(D,nt),au(E,et),null},FT={display:"none"},$ae={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},V5="react-flow__node-desc",H5="react-flow__edge-desc",Wae="react-flow__aria-live",Gae=e=>e.ariaLiveMessage;function Xae({rfId:e}){const t=ln(Gae);return oe.createElement("div",{id:`${Wae}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:$ae},t)}function Kae({rfId:e,disableKeyboardA11y:t}){return oe.createElement(oe.Fragment,null,oe.createElement("div",{id:`${V5}-${e}`,style:FT},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),oe.createElement("div",{id:`${H5}-${e}`,style:FT},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&oe.createElement(Xae,{rfId:e}))}var Kh=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=N.useState(!1),s=N.useRef(!1),i=N.useRef(new Set([])),[o,l]=N.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(g=>typeof g=="string").map(g=>g.split("+")),h=d.reduce((g,y)=>g.concat(...y),[]);return[d,h]}return[[],[]]},[e]);return N.useEffect(()=>{const c=typeof document<"u"?document:null,d=(t==null?void 0:t.target)||c;if(e!==null){const h=w=>{if(s.current=w.ctrlKey||w.metaKey||w.shiftKey,(!s.current||s.current&&!t.actInsideInputWithModifier)&&j2(w))return!1;const C=VT(w.code,l);i.current.add(w[C]),zT(o,i.current,!1)&&(w.preventDefault(),r(!0))},g=w=>{if((!s.current||s.current&&!t.actInsideInputWithModifier)&&j2(w))return!1;const C=VT(w.code,l);zT(o,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(w[C]),w.key==="Meta"&&i.current.clear(),s.current=!1},y=()=>{i.current.clear(),r(!1)};return d==null||d.addEventListener("keydown",h),d==null||d.addEventListener("keyup",g),window.addEventListener("blur",y),()=>{d==null||d.removeEventListener("keydown",h),d==null||d.removeEventListener("keyup",g),window.removeEventListener("blur",y)}}},[e,r]),n};function zT(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(s=>t.has(s)))}function VT(e,t){return t.includes(e)?"code":"key"}function U5(e,t,n,r){var l,c;const s=e.parentNode||e.parentId;if(!s)return n;const i=t.get(s),o=yc(i,r);return U5(i,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(((l=i[zn])==null?void 0:l.z)??0)>(n.z??0)?((c=i[zn])==null?void 0:c.z)??0:n.z??0},r)}function $5(e,t,n){e.forEach(r=>{var i;const s=r.parentNode||r.parentId;if(s&&!e.has(s))throw new Error(`Parent node ${s} not found`);if(s||n!=null&&n[r.id]){const{x:o,y:l,z:c}=U5(r,e,{...r.position,z:((i=r[zn])==null?void 0:i.z)??0},t);r.positionAbsolute={x:o,y:l},r[zn].z=c,n!=null&&n[r.id]&&(r[zn].isParent=!0)}})}function pw(e,t,n,r){const s=new Map,i={},o=r?1e3:0;return e.forEach(l=>{var w;const c=(ei(l.zIndex)?l.zIndex:0)+(l.selected?o:0),d=t.get(l.id),h={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},g=l.parentNode||l.parentId;g&&(i[g]=!0);const y=(d==null?void 0:d.type)&&(d==null?void 0:d.type)!==l.type;Object.defineProperty(h,zn,{enumerable:!1,value:{handleBounds:y||(w=d==null?void 0:d[zn])==null?void 0:w.handleBounds,z:c}}),s.set(l.id,h)}),$5(s,n,i),s}function W5(e,t={}){const{getNodes:n,width:r,height:s,minZoom:i,maxZoom:o,d3Zoom:l,d3Selection:c,fitViewOnInitDone:d,fitViewOnInit:h,nodeOrigin:g}=e(),y=t.initial&&!d&&h;if(l&&c&&(y||!t.initial)){const S=n().filter(A=>{var k;const E=t.includeHiddenNodes?A.width&&A.height:!A.hidden;return(k=t.nodes)!=null&&k.length?E&&t.nodes.some(I=>I.id===A.id):E}),C=S.every(A=>A.width&&A.height);if(S.length>0&&C){const A=Nx(S,g),{x:E,y:k,zoom:I}=R5(A,r,s,t.minZoom??i,t.maxZoom??o,t.padding??.1),M=Go.translate(E,k).scale(I);return typeof t.duration=="number"&&t.duration>0?l.transform(Dl(c,t.duration),M):l.transform(c,M),!0}}return!1}function Yae(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[zn]:r[zn],selected:n.selected})}),new Map(t)}function qae(e,t){return t.map(n=>{const r=e.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function T0({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:s,edges:i,onNodesChange:o,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:d}=n();e!=null&&e.length&&(c&&r({nodeInternals:Yae(e,s)}),o==null||o(e)),t!=null&&t.length&&(d&&r({edges:qae(t,i)}),l==null||l(t))}const lu=()=>{},Zae={zoomIn:lu,zoomOut:lu,zoomTo:lu,getZoom:()=>1,setViewport:lu,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:lu,fitBounds:lu,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Qae=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Jae=()=>{const e=cr(),{d3Zoom:t,d3Selection:n}=ln(Qae,wr);return N.useMemo(()=>n&&t?{zoomIn:s=>t.scaleBy(Dl(n,s==null?void 0:s.duration),1.2),zoomOut:s=>t.scaleBy(Dl(n,s==null?void 0:s.duration),1/1.2),zoomTo:(s,i)=>t.scaleTo(Dl(n,i==null?void 0:i.duration),s),getZoom:()=>e.getState().transform[2],setViewport:(s,i)=>{const[o,l,c]=e.getState().transform,d=Go.translate(s.x??o,s.y??l).scale(s.zoom??c);t.transform(Dl(n,i==null?void 0:i.duration),d)},getViewport:()=>{const[s,i,o]=e.getState().transform;return{x:s,y:i,zoom:o}},fitView:s=>W5(e.getState,s),setCenter:(s,i,o)=>{const{width:l,height:c,maxZoom:d}=e.getState(),h=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:d,g=l/2-s*h,y=c/2-i*h,w=Go.translate(g,y).scale(h);t.transform(Dl(n,o==null?void 0:o.duration),w)},fitBounds:(s,i)=>{const{width:o,height:l,minZoom:c,maxZoom:d}=e.getState(),{x:h,y:g,zoom:y}=R5(s,o,l,c,d,(i==null?void 0:i.padding)??.1),w=Go.translate(h,g).scale(y);t.transform(Dl(n,i==null?void 0:i.duration),w)},project:s=>{const{transform:i,snapToGrid:o,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),F2(s,i,o,l)},screenToFlowPosition:s=>{const{transform:i,snapToGrid:o,snapGrid:l,domNode:c}=e.getState();if(!c)return s;const{x:d,y:h}=c.getBoundingClientRect(),g={x:s.x-d,y:s.y-h};return F2(g,i,o,l)},flowToScreenPosition:s=>{const{transform:i,domNode:o}=e.getState();if(!o)return s;const{x:l,y:c}=o.getBoundingClientRect(),d=T5(s,i);return{x:d.x+l,y:d.y+c}},viewportInitialized:!0}:Zae,[t,n])};function VS(){const e=Jae(),t=cr(),n=N.useCallback(()=>t.getState().getNodes().map(C=>({...C})),[]),r=N.useCallback(C=>t.getState().nodeInternals.get(C),[]),s=N.useCallback(()=>{const{edges:C=[]}=t.getState();return C.map(A=>({...A}))},[]),i=N.useCallback(C=>{const{edges:A=[]}=t.getState();return A.find(E=>E.id===C)},[]),o=N.useCallback(C=>{const{getNodes:A,setNodes:E,hasDefaultNodes:k,onNodesChange:I}=t.getState(),M=A(),P=typeof C=="function"?C(M):C;if(k)E(P);else if(I){const j=P.length===0?M.map(_=>({type:"remove",id:_.id})):P.map(_=>({item:_,type:"reset"}));I(j)}},[]),l=N.useCallback(C=>{const{edges:A=[],setEdges:E,hasDefaultEdges:k,onEdgesChange:I}=t.getState(),M=typeof C=="function"?C(A):C;if(k)E(M);else if(I){const P=M.length===0?A.map(j=>({type:"remove",id:j.id})):M.map(j=>({item:j,type:"reset"}));I(P)}},[]),c=N.useCallback(C=>{const A=Array.isArray(C)?C:[C],{getNodes:E,setNodes:k,hasDefaultNodes:I,onNodesChange:M}=t.getState();if(I){const j=[...E(),...A];k(j)}else if(M){const P=A.map(j=>({item:j,type:"add"}));M(P)}},[]),d=N.useCallback(C=>{const A=Array.isArray(C)?C:[C],{edges:E=[],setEdges:k,hasDefaultEdges:I,onEdgesChange:M}=t.getState();if(I)k([...E,...A]);else if(M){const P=A.map(j=>({item:j,type:"add"}));M(P)}},[]),h=N.useCallback(()=>{const{getNodes:C,edges:A=[],transform:E}=t.getState(),[k,I,M]=E;return{nodes:C().map(P=>({...P})),edges:A.map(P=>({...P})),viewport:{x:k,y:I,zoom:M}}},[]),g=N.useCallback(({nodes:C,edges:A})=>{const{nodeInternals:E,getNodes:k,edges:I,hasDefaultNodes:M,hasDefaultEdges:P,onNodesDelete:j,onEdgesDelete:_,onNodesChange:D,onEdgesChange:L}=t.getState(),U=(C||[]).map(H=>H.id),K=(A||[]).map(H=>H.id),q=k().reduce((H,Y)=>{const X=Y.parentNode||Y.parentId,W=!U.includes(Y.id)&&X&&H.find(ee=>ee.id===X);return(typeof Y.deletable=="boolean"?Y.deletable:!0)&&(U.includes(Y.id)||W)&&H.push(Y),H},[]),re=I.filter(H=>typeof H.deletable=="boolean"?H.deletable:!0),z=re.filter(H=>K.includes(H.id));if(q||z){const H=I5(q,re),Y=[...z,...H],X=Y.reduce((W,V)=>(W.includes(V.id)||W.push(V.id),W),[]);if((P||M)&&(P&&t.setState({edges:I.filter(W=>!X.includes(W.id))}),M&&(q.forEach(W=>{E.delete(W.id)}),t.setState({nodeInternals:new Map(E)}))),X.length>0&&(_==null||_(Y),L&&L(X.map(W=>({id:W,type:"remove"})))),q.length>0&&(j==null||j(q),D)){const W=q.map(V=>({id:V.id,type:"remove"}));D(W)}}},[]),y=N.useCallback(C=>{const A=wae(C),E=A?null:t.getState().nodeInternals.get(C.id);return!A&&!E?[null,null,A]:[A?C:_T(E),E,A]},[]),w=N.useCallback((C,A=!0,E)=>{const[k,I,M]=y(C);return k?(E||t.getState().getNodes()).filter(P=>{if(!M&&(P.id===I.id||!P.positionAbsolute))return!1;const j=_T(P),_=D2(j,k);return A&&_>0||_>=k.width*k.height}):[]},[]),S=N.useCallback((C,A,E=!0)=>{const[k]=y(C);if(!k)return!1;const I=D2(k,A);return E&&I>0||I>=k.width*k.height},[]);return N.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:s,getEdge:i,setNodes:o,setEdges:l,addNodes:c,addEdges:d,toObject:h,deleteElements:g,getIntersectingNodes:w,isNodeIntersecting:S}),[e,n,r,s,i,o,l,c,d,h,g,w,S])}const ele={actInsideInputWithModifier:!1};var tle=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=cr(),{deleteElements:r}=VS(),s=Kh(e,ele),i=Kh(t);N.useEffect(()=>{if(s){const{edges:o,getNodes:l}=n.getState(),c=l().filter(h=>h.selected),d=o.filter(h=>h.selected);r({nodes:c,edges:d}),n.setState({nodesSelectionActive:!1})}},[s]),N.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function nle(e){const t=cr();N.useEffect(()=>{let n;const r=()=>{var i,o;if(!e.current)return;const s=OS(e.current);(s.height===0||s.width===0)&&((o=(i=t.getState()).onError)==null||o.call(i,"004",ta.error004())),t.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const HS={position:"absolute",width:"100%",height:"100%",top:0,left:0},rle=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,k0=e=>({x:e.x,y:e.y,zoom:e.k}),cu=(e,t)=>e.target.closest(`.${t}`),HT=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),UT=e=>{const t=e.ctrlKey&&H1()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},sle=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),ile=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:i=!0,panOnScroll:o=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=Gl.Free,zoomOnDoubleClick:d=!0,elementsSelectable:h,panOnDrag:g=!0,defaultViewport:y,translateExtent:w,minZoom:S,maxZoom:C,zoomActivationKeyCode:A,preventScrolling:E=!0,children:k,noWheelClassName:I,noPanClassName:M})=>{const P=N.useRef(),j=cr(),_=N.useRef(!1),D=N.useRef(!1),L=N.useRef(null),U=N.useRef({x:0,y:0,zoom:0}),{d3Zoom:K,d3Selection:q,d3ZoomHandler:re,userSelectionActive:z}=ln(sle,wr),H=Kh(A),Y=N.useRef(0),X=N.useRef(!1),W=N.useRef();return nle(L),N.useEffect(()=>{if(L.current){const V=L.current.getBoundingClientRect(),ee=m5().scaleExtent([S,C]).translateExtent(w),ae=Zs(L.current).call(ee),se=Go.translate(y.x,y.y).scale(Id(y.zoom,S,C)),G=[[0,0],[V.width,V.height]],Q=ee.constrain()(se,G,w);ee.transform(ae,Q),ee.wheelDelta(UT),j.setState({d3Zoom:ee,d3Selection:ae,d3ZoomHandler:ae.on("wheel.zoom"),transform:[Q.x,Q.y,Q.k],domNode:L.current.closest(".react-flow")})}},[]),N.useEffect(()=>{q&&K&&(o&&!H&&!z?q.on("wheel.zoom",V=>{if(cu(V,I))return!1;V.preventDefault(),V.stopImmediatePropagation();const ee=q.property("__zoom").k||1;if(V.ctrlKey&&i){const de=Ei(V),pe=UT(V),ye=ee*Math.pow(2,pe);K.scaleTo(q,ye,de,V);return}const ae=V.deltaMode===1?20:1;let se=c===Gl.Vertical?0:V.deltaX*ae,G=c===Gl.Horizontal?0:V.deltaY*ae;!H1()&&V.shiftKey&&c!==Gl.Vertical&&(se=V.deltaY*ae,G=0),K.translateBy(q,-(se/ee)*l,-(G/ee)*l,{internal:!0});const Q=k0(q.property("__zoom")),{onViewportChangeStart:te,onViewportChange:ne,onViewportChangeEnd:ie}=j.getState();clearTimeout(W.current),X.current||(X.current=!0,t==null||t(V,Q),te==null||te(Q)),X.current&&(e==null||e(V,Q),ne==null||ne(Q),W.current=setTimeout(()=>{n==null||n(V,Q),ie==null||ie(Q),X.current=!1},150))},{passive:!1}):typeof re<"u"&&q.on("wheel.zoom",function(V,ee){if(!E&&V.type==="wheel"&&!V.ctrlKey||cu(V,I))return null;V.preventDefault(),re.call(this,V,ee)},{passive:!1}))},[z,o,c,q,K,re,H,i,E,I,t,e,n]),N.useEffect(()=>{K&&K.on("start",V=>{var se,G;if(!V.sourceEvent||V.sourceEvent.internal)return null;Y.current=(se=V.sourceEvent)==null?void 0:se.button;const{onViewportChangeStart:ee}=j.getState(),ae=k0(V.transform);_.current=!0,U.current=ae,((G=V.sourceEvent)==null?void 0:G.type)==="mousedown"&&j.setState({paneDragging:!0}),ee==null||ee(ae),t==null||t(V.sourceEvent,ae)})},[K,t]),N.useEffect(()=>{K&&(z&&!_.current?K.on("zoom",null):z||K.on("zoom",V=>{var ae;const{onViewportChange:ee}=j.getState();if(j.setState({transform:[V.transform.x,V.transform.y,V.transform.k]}),D.current=!!(r&&HT(g,Y.current??0)),(e||ee)&&!((ae=V.sourceEvent)!=null&&ae.internal)){const se=k0(V.transform);ee==null||ee(se),e==null||e(V.sourceEvent,se)}}))},[z,K,e,g,r]),N.useEffect(()=>{K&&K.on("end",V=>{if(!V.sourceEvent||V.sourceEvent.internal)return null;const{onViewportChangeEnd:ee}=j.getState();if(_.current=!1,j.setState({paneDragging:!1}),r&&HT(g,Y.current??0)&&!D.current&&r(V.sourceEvent),D.current=!1,(n||ee)&&rle(U.current,V.transform)){const ae=k0(V.transform);U.current=ae,clearTimeout(P.current),P.current=setTimeout(()=>{ee==null||ee(ae),n==null||n(V.sourceEvent,ae)},o?150:0)}})},[K,o,g,n,r]),N.useEffect(()=>{K&&K.filter(V=>{const ee=H||s,ae=i&&V.ctrlKey;if((g===!0||Array.isArray(g)&&g.includes(1))&&V.button===1&&V.type==="mousedown"&&(cu(V,"react-flow__node")||cu(V,"react-flow__edge")))return!0;if(!g&&!ee&&!o&&!d&&!i||z||!d&&V.type==="dblclick"||cu(V,I)&&V.type==="wheel"||cu(V,M)&&(V.type!=="wheel"||o&&V.type==="wheel"&&!H)||!i&&V.ctrlKey&&V.type==="wheel"||!ee&&!o&&!ae&&V.type==="wheel"||!g&&(V.type==="mousedown"||V.type==="touchstart")||Array.isArray(g)&&!g.includes(V.button)&&V.type==="mousedown")return!1;const se=Array.isArray(g)&&g.includes(V.button)||!V.button||V.button<=1;return(!V.ctrlKey||V.type==="wheel")&&se})},[z,K,s,i,o,d,g,h,H]),oe.createElement("div",{className:"react-flow__renderer",ref:L,style:HS},k)},ole=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function ale(){const{userSelectionActive:e,userSelectionRect:t}=ln(ole,wr);return e&&t?oe.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function $T(e,t){const n=t.parentNode||t.parentId,r=e.find(s=>s.id===n);if(r){const s=t.position.x+t.width-r.width,i=t.position.y+t.height-r.height;if(s>0||i>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),i>0&&(r.style.height+=i),t.position.x<0){const o=Math.abs(t.position.x);r.position.x=r.position.x-o,r.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);r.position.y=r.position.y-o,r.style.height+=o,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function G5(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,s)=>{const i=e.filter(l=>l.id===s.id);if(i.length===0)return r.push(s),r;const o={...s};for(const l of i)if(l)switch(l.type){case"select":{o.selected=l.selected;break}case"position":{typeof l.position<"u"&&(o.position=l.position),typeof l.positionAbsolute<"u"&&(o.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(o.dragging=l.dragging),o.expandParent&&$T(r,o);break}case"dimensions":{typeof l.dimensions<"u"&&(o.width=l.dimensions.width,o.height=l.dimensions.height),typeof l.updateStyle<"u"&&(o.style={...o.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(o.resizing=l.resizing),o.expandParent&&$T(r,o);break}case"remove":return r}return r.push(o),r},n)}function X5(e,t){return G5(e,t)}function lle(e,t){return G5(e,t)}const Aa=(e,t)=>({id:e,type:"select",selected:t});function Ru(e,t){return e.reduce((n,r)=>{const s=t.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(Aa(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(Aa(r.id,!1))),n},[])}const mw=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},cle=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),K5=N.memo(({isSelecting:e,selectionMode:t=Xh.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:i,onPaneContextMenu:o,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:d,onPaneMouseLeave:h,children:g})=>{const y=N.useRef(null),w=cr(),S=N.useRef(0),C=N.useRef(0),A=N.useRef(),{userSelectionActive:E,elementsSelectable:k,dragging:I}=ln(cle,wr),M=()=>{w.setState({userSelectionActive:!1,userSelectionRect:null}),S.current=0,C.current=0},P=re=>{i==null||i(re),w.getState().resetSelectedElements(),w.setState({nodesSelectionActive:!1})},j=re=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){re.preventDefault();return}o==null||o(re)},_=l?re=>l(re):void 0,D=re=>{const{resetSelectedElements:z,domNode:H}=w.getState();if(A.current=H==null?void 0:H.getBoundingClientRect(),!k||!e||re.button!==0||re.target!==y.current||!A.current)return;const{x:Y,y:X}=ol(re,A.current);z(),w.setState({userSelectionRect:{width:0,height:0,startX:Y,startY:X,x:Y,y:X}}),r==null||r(re)},L=re=>{const{userSelectionRect:z,nodeInternals:H,edges:Y,transform:X,onNodesChange:W,onEdgesChange:V,nodeOrigin:ee,getNodes:ae}=w.getState();if(!e||!A.current||!z)return;w.setState({userSelectionActive:!0,nodesSelectionActive:!1});const se=ol(re,A.current),G=z.startX??0,Q=z.startY??0,te={...z,x:se.x<G?se.x:G,y:se.y<Q?se.y:Q,width:Math.abs(se.x-G),height:Math.abs(se.y-Q)},ne=ae(),ie=k5(H,te,X,t===Xh.Partial,!0,ee),de=I5(ie,Y).map(ye=>ye.id),pe=ie.map(ye=>ye.id);if(S.current!==pe.length){S.current=pe.length;const ye=Ru(ne,pe);ye.length&&(W==null||W(ye))}if(C.current!==de.length){C.current=de.length;const ye=Ru(Y,de);ye.length&&(V==null||V(ye))}w.setState({userSelectionRect:te})},U=re=>{if(re.button!==0)return;const{userSelectionRect:z}=w.getState();!E&&z&&re.target===y.current&&(P==null||P(re)),w.setState({nodesSelectionActive:S.current>0}),M(),s==null||s(re)},K=re=>{E&&(w.setState({nodesSelectionActive:S.current>0}),s==null||s(re)),M()},q=k&&(e||E);return oe.createElement("div",{className:Pr(["react-flow__pane",{dragging:I,selection:e}]),onClick:q?void 0:mw(P,y),onContextMenu:mw(j,y),onWheel:mw(_,y),onMouseEnter:q?void 0:c,onMouseDown:q?D:void 0,onMouseMove:q?L:d,onMouseUp:q?U:void 0,onMouseLeave:q?K:h,ref:y,style:HS},g,oe.createElement(ale,null))});K5.displayName="Pane";function Y5(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:Y5(r,t):!1}function WT(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function ule(e,t,n,r){return Array.from(e.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!Y5(s,e))&&(s.draggable||t&&typeof s.draggable>"u")).map(s=>{var i,o;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((i=s.positionAbsolute)==null?void 0:i.x)??0),y:n.y-(((o=s.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function dle(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function q5(e,t,n,r,s=[0,0],i){const o=dle(e,e.extent||r);let l=o;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const g=n.get(c),{x:y,y:w}=yc(g,s).positionAbsolute;l=g&&ei(y)&&ei(w)&&ei(g.width)&&ei(g.height)?[[y+e.width*s[0],w+e.height*s[1]],[y+g.width-e.width+e.width*s[0],w+g.height-e.height+e.height*s[1]]]:l}else i==null||i("005",ta.error005()),l=o;else if(e.extent&&c&&e.extent!=="parent"){const g=n.get(c),{x:y,y:w}=yc(g,s).positionAbsolute;l=[[e.extent[0][0]+y,e.extent[0][1]+w],[e.extent[1][0]+y,e.extent[1][1]+w]]}let d={x:0,y:0};if(c){const g=n.get(c);d=yc(g,s).positionAbsolute}const h=l&&l!=="parent"?PS(t,l):t;return{position:{x:h.x-d.x,y:h.y-d.y},positionAbsolute:h}}function gw({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[e?r.find(s=>s.id===e):r[0],r]}const GT=(e,t,n,r)=>{const s=t.querySelectorAll(e);if(!s||!s.length)return null;const i=Array.from(s),o=t.getBoundingClientRect(),l={x:o.width*r[0],y:o.height*r[1]};return i.map(c=>{const d=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(d.left-o.left-l.x)/n,y:(d.top-o.top-l.y)/n,...OS(c)}})};function mf(e,t,n){return n===void 0?n:r=>{const s=t().nodeInternals.get(e);s&&n(r,{...s})}}function V2({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:i,multiSelectionActive:o,nodeInternals:l,onError:c}=t.getState(),d=l.get(e);if(!d){c==null||c("012",ta.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&o)&&(i({nodes:[d],edges:[]}),requestAnimationFrame(()=>{var h;return(h=r==null?void 0:r.current)==null?void 0:h.blur()})):s([e])}function fle(){const e=cr();return N.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:i}=e.getState(),o=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,c={x:(o-r[0])/r[2],y:(l-r[1])/r[2]};return{xSnapped:i?s[0]*Math.round(c.x/s[0]):c.x,ySnapped:i?s[1]*Math.round(c.y/s[1]):c.y,...c}},[])}function xw(e){return(t,n,r)=>e==null?void 0:e(t,r)}function Z5({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:i,selectNodesOnDrag:o}){const l=cr(),[c,d]=N.useState(!1),h=N.useRef([]),g=N.useRef({x:null,y:null}),y=N.useRef(0),w=N.useRef(null),S=N.useRef({x:0,y:0}),C=N.useRef(null),A=N.useRef(!1),E=N.useRef(!1),k=N.useRef(!1),I=fle();return N.useEffect(()=>{if(e!=null&&e.current){const M=Zs(e.current),P=({x:D,y:L})=>{const{nodeInternals:U,onNodeDrag:K,onSelectionDrag:q,updateNodePositions:re,nodeExtent:z,snapGrid:H,snapToGrid:Y,nodeOrigin:X,onError:W}=l.getState();g.current={x:D,y:L};let V=!1,ee={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&z){const se=Nx(h.current,X);ee=Gh(se)}if(h.current=h.current.map(se=>{const G={x:D-se.distance.x,y:L-se.distance.y};Y&&(G.x=H[0]*Math.round(G.x/H[0]),G.y=H[1]*Math.round(G.y/H[1]));const Q=[[z[0][0],z[0][1]],[z[1][0],z[1][1]]];h.current.length>1&&z&&!se.extent&&(Q[0][0]=se.positionAbsolute.x-ee.x+z[0][0],Q[1][0]=se.positionAbsolute.x+(se.width??0)-ee.x2+z[1][0],Q[0][1]=se.positionAbsolute.y-ee.y+z[0][1],Q[1][1]=se.positionAbsolute.y+(se.height??0)-ee.y2+z[1][1]);const te=q5(se,G,U,Q,X,W);return V=V||se.position.x!==te.position.x||se.position.y!==te.position.y,se.position=te.position,se.positionAbsolute=te.positionAbsolute,se}),!V)return;re(h.current,!0,!0),d(!0);const ae=s?K:xw(q);if(ae&&C.current){const[se,G]=gw({nodeId:s,dragItems:h.current,nodeInternals:U});ae(C.current,se,G)}},j=()=>{if(!w.current)return;const[D,L]=x5(S.current,w.current);if(D!==0||L!==0){const{transform:U,panBy:K}=l.getState();g.current.x=(g.current.x??0)-D/U[2],g.current.y=(g.current.y??0)-L/U[2],K({x:D,y:L})&&P(g.current)}y.current=requestAnimationFrame(j)},_=D=>{var X;const{nodeInternals:L,multiSelectionActive:U,nodesDraggable:K,unselectNodesAndEdges:q,onNodeDragStart:re,onSelectionDragStart:z}=l.getState();E.current=!0;const H=s?re:xw(z);(!o||!i)&&!U&&s&&((X=L.get(s))!=null&&X.selected||q()),s&&i&&o&&V2({id:s,store:l,nodeRef:e});const Y=I(D);if(g.current=Y,h.current=ule(L,K,Y,s),H&&h.current){const[W,V]=gw({nodeId:s,dragItems:h.current,nodeInternals:L});H(D.sourceEvent,W,V)}};if(t)M.on(".drag",null);else{const D=Sie().on("start",L=>{const{domNode:U,nodeDragThreshold:K}=l.getState();K===0&&_(L),k.current=!1;const q=I(L);g.current=q,w.current=(U==null?void 0:U.getBoundingClientRect())||null,S.current=ol(L.sourceEvent,w.current)}).on("drag",L=>{var re,z;const U=I(L),{autoPanOnNodeDrag:K,nodeDragThreshold:q}=l.getState();if(L.sourceEvent.type==="touchmove"&&L.sourceEvent.touches.length>1&&(k.current=!0),!k.current){if(!A.current&&E.current&&K&&(A.current=!0,j()),!E.current){const H=U.xSnapped-(((re=g==null?void 0:g.current)==null?void 0:re.x)??0),Y=U.ySnapped-(((z=g==null?void 0:g.current)==null?void 0:z.y)??0);Math.sqrt(H*H+Y*Y)>q&&_(L)}(g.current.x!==U.xSnapped||g.current.y!==U.ySnapped)&&h.current&&E.current&&(C.current=L.sourceEvent,S.current=ol(L.sourceEvent,w.current),P(U))}}).on("end",L=>{if(!(!E.current||k.current)&&(d(!1),A.current=!1,E.current=!1,cancelAnimationFrame(y.current),h.current)){const{updateNodePositions:U,nodeInternals:K,onNodeDragStop:q,onSelectionDragStop:re}=l.getState(),z=s?q:xw(re);if(U(h.current,!1,!1),z){const[H,Y]=gw({nodeId:s,dragItems:h.current,nodeInternals:K});z(L.sourceEvent,H,Y)}}}).filter(L=>{const U=L.target;return!L.button&&(!n||!WT(U,`.${n}`,e))&&(!r||WT(U,r,e))});return M.call(D),()=>{M.on(".drag",null)}}}},[e,t,n,r,i,l,s,o,I]),c}function Q5(){const e=cr();return N.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:i,getNodes:o,snapToGrid:l,snapGrid:c,onError:d,nodesDraggable:h}=e.getState(),g=o().filter(k=>k.selected&&(k.draggable||h&&typeof k.draggable>"u")),y=l?c[0]:5,w=l?c[1]:5,S=n.isShiftPressed?4:1,C=n.x*y*S,A=n.y*w*S,E=g.map(k=>{if(k.positionAbsolute){const I={x:k.positionAbsolute.x+C,y:k.positionAbsolute.y+A};l&&(I.x=c[0]*Math.round(I.x/c[0]),I.y=c[1]*Math.round(I.y/c[1]));const{positionAbsolute:M,position:P}=q5(k,I,r,s,void 0,d);k.position=P,k.positionAbsolute=M}return k});i(E,!0,!1)},[])}const Ku={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var gf=e=>{const t=({id:n,type:r,data:s,xPos:i,yPos:o,xPosOrigin:l,yPosOrigin:c,selected:d,onClick:h,onMouseEnter:g,onMouseMove:y,onMouseLeave:w,onContextMenu:S,onDoubleClick:C,style:A,className:E,isDraggable:k,isSelectable:I,isConnectable:M,isFocusable:P,selectNodesOnDrag:j,sourcePosition:_,targetPosition:D,hidden:L,resizeObserver:U,dragHandle:K,zIndex:q,isParent:re,noDragClassName:z,noPanClassName:H,initialized:Y,disableKeyboardA11y:X,ariaLabel:W,rfId:V,hasHandleBounds:ee})=>{const ae=cr(),se=N.useRef(null),G=N.useRef(null),Q=N.useRef(_),te=N.useRef(D),ne=N.useRef(r),ie=I||k||h||g||y||w,de=Q5(),pe=mf(n,ae.getState,g),ye=mf(n,ae.getState,y),Se=mf(n,ae.getState,w),De=mf(n,ae.getState,S),xe=mf(n,ae.getState,C),Ue=je=>{const{nodeDragThreshold:be}=ae.getState();if(I&&(!j||!k||be>0)&&V2({id:n,store:ae,nodeRef:se}),h){const $e=ae.getState().nodeInternals.get(n);$e&&h(je,{...$e})}},nt=je=>{if(!j2(je)&&!X)if(b5.includes(je.key)&&I){const be=je.key==="Escape";V2({id:n,store:ae,unselect:be,nodeRef:se})}else k&&d&&Object.prototype.hasOwnProperty.call(Ku,je.key)&&(ae.setState({ariaLiveMessage:`Moved selected node ${je.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~o}`}),de({x:Ku[je.key].x,y:Ku[je.key].y,isShiftPressed:je.shiftKey}))};N.useEffect(()=>()=>{G.current&&(U==null||U.unobserve(G.current),G.current=null)},[]),N.useEffect(()=>{if(se.current&&!L){const je=se.current;(!Y||!ee||G.current!==je)&&(G.current&&(U==null||U.unobserve(G.current)),U==null||U.observe(je),G.current=je)}},[L,Y,ee]),N.useEffect(()=>{const je=ne.current!==r,be=Q.current!==_,$e=te.current!==D;se.current&&(je||be||$e)&&(je&&(ne.current=r),be&&(Q.current=_),$e&&(te.current=D),ae.getState().updateNodeDimensions([{id:n,nodeElement:se.current,forceUpdate:!0}]))},[n,r,_,D]);const et=Z5({nodeRef:se,disabled:L||!k,noDragClassName:z,handleSelector:K,nodeId:n,isSelectable:I,selectNodesOnDrag:j});return L?null:oe.createElement("div",{className:Pr(["react-flow__node",`react-flow__node-${r}`,{[H]:k},E,{selected:d,selectable:I,parent:re,dragging:et}]),ref:se,style:{zIndex:q,transform:`translate(${l}px,${c}px)`,pointerEvents:ie?"all":"none",visibility:Y?"visible":"hidden",...A},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:pe,onMouseMove:ye,onMouseLeave:Se,onContextMenu:De,onClick:Ue,onDoubleClick:xe,onKeyDown:P?nt:void 0,tabIndex:P?0:void 0,role:P?"button":void 0,"aria-describedby":X?void 0:`${V5}-${V}`,"aria-label":W},oe.createElement(Aae,{value:n},oe.createElement(e,{id:n,data:s,type:r,xPos:i,yPos:o,selected:d,isConnectable:M,sourcePosition:_,targetPosition:D,dragging:et,dragHandle:K,zIndex:q})))};return t.displayName="NodeWrapper",N.memo(t)};const hle=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Nx(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function ple({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=cr(),{width:s,height:i,x:o,y:l,transformString:c,userSelectionActive:d}=ln(hle,wr),h=Q5(),g=N.useRef(null);if(N.useEffect(()=>{var S;n||(S=g.current)==null||S.focus({preventScroll:!0})},[n]),Z5({nodeRef:g}),d||!s||!i)return null;const y=e?S=>{const C=r.getState().getNodes().filter(A=>A.selected);e(S,C)}:void 0,w=S=>{Object.prototype.hasOwnProperty.call(Ku,S.key)&&h({x:Ku[S.key].x,y:Ku[S.key].y,isShiftPressed:S.shiftKey})};return oe.createElement("div",{className:Pr(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},oe.createElement("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:n?void 0:-1,onKeyDown:n?void 0:w,style:{width:s,height:i,top:l,left:o}}))}var mle=N.memo(ple);const gle=e=>e.nodesSelectionActive,J5=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:i,onPaneScroll:o,deleteKeyCode:l,onMove:c,onMoveStart:d,onMoveEnd:h,selectionKeyCode:g,selectionOnDrag:y,selectionMode:w,onSelectionStart:S,onSelectionEnd:C,multiSelectionKeyCode:A,panActivationKeyCode:E,zoomActivationKeyCode:k,elementsSelectable:I,zoomOnScroll:M,zoomOnPinch:P,panOnScroll:j,panOnScrollSpeed:_,panOnScrollMode:D,zoomOnDoubleClick:L,panOnDrag:U,defaultViewport:K,translateExtent:q,minZoom:re,maxZoom:z,preventScrolling:H,onSelectionContextMenu:Y,noWheelClassName:X,noPanClassName:W,disableKeyboardA11y:V})=>{const ee=ln(gle),ae=Kh(g),se=Kh(E),G=se||U,Q=se||j,te=ae||y&&G!==!0;return tle({deleteKeyCode:l,multiSelectionKeyCode:A}),oe.createElement(ile,{onMove:c,onMoveStart:d,onMoveEnd:h,onPaneContextMenu:i,elementsSelectable:I,zoomOnScroll:M,zoomOnPinch:P,panOnScroll:Q,panOnScrollSpeed:_,panOnScrollMode:D,zoomOnDoubleClick:L,panOnDrag:!ae&&G,defaultViewport:K,translateExtent:q,minZoom:re,maxZoom:z,zoomActivationKeyCode:k,preventScrolling:H,noWheelClassName:X,noPanClassName:W},oe.createElement(K5,{onSelectionStart:S,onSelectionEnd:C,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:i,onPaneScroll:o,panOnDrag:G,isSelecting:!!te,selectionMode:w},e,ee&&oe.createElement(mle,{onSelectionContextMenu:Y,noPanClassName:W,disableKeyboardA11y:V})))};J5.displayName="FlowRenderer";var xle=N.memo(J5);function yle(e){return ln(N.useCallback(n=>e?k5(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function wle(e){const t={input:gf(e.input||L5),default:gf(e.default||z2),output:gf(e.output||F5),group:gf(e.group||zS)},n={},r=Object.keys(e).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,i)=>(s[i]=gf(e[i]||z2),s),n);return{...t,...r}}const vle=({x:e,y:t,width:n,height:r,origin:s})=>!n||!r?{x:e,y:t}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:e,y:t}:{x:e-n*s[0],y:t-r*s[1]},ble=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),ej=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:i,onError:o}=ln(ble,wr),l=yle(e.onlyRenderVisibleElements),c=N.useRef(),d=N.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const h=new ResizeObserver(g=>{const y=g.map(w=>({id:w.target.getAttribute("data-id"),nodeElement:w.target,forceUpdate:!0}));i(y)});return c.current=h,h},[]);return N.useEffect(()=>()=>{var h;(h=c==null?void 0:c.current)==null||h.disconnect()},[]),oe.createElement("div",{className:"react-flow__nodes",style:HS},l.map(h=>{var P,j,_;let g=h.type||"default";e.nodeTypes[g]||(o==null||o("003",ta.error003(g)),g="default");const y=e.nodeTypes[g]||e.nodeTypes.default,w=!!(h.draggable||t&&typeof h.draggable>"u"),S=!!(h.selectable||s&&typeof h.selectable>"u"),C=!!(h.connectable||n&&typeof h.connectable>"u"),A=!!(h.focusable||r&&typeof h.focusable>"u"),E=e.nodeExtent?PS(h.positionAbsolute,e.nodeExtent):h.positionAbsolute,k=(E==null?void 0:E.x)??0,I=(E==null?void 0:E.y)??0,M=vle({x:k,y:I,width:h.width??0,height:h.height??0,origin:e.nodeOrigin});return oe.createElement(y,{key:h.id,id:h.id,className:h.className,style:h.style,type:g,data:h.data,sourcePosition:h.sourcePosition||it.Bottom,targetPosition:h.targetPosition||it.Top,hidden:h.hidden,xPos:k,yPos:I,xPosOrigin:M.x,yPosOrigin:M.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!h.selected,isDraggable:w,isSelectable:S,isConnectable:C,isFocusable:A,resizeObserver:d,dragHandle:h.dragHandle,zIndex:((P=h[zn])==null?void 0:P.z)??0,isParent:!!((j=h[zn])!=null&&j.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!h.width&&!!h.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:h.ariaLabel,hasHandleBounds:!!((_=h[zn])!=null&&_.handleBounds)})}))};ej.displayName="NodeRenderer";var Cle=N.memo(ej);const Sle=(e,t,n)=>n===it.Left?e-t:n===it.Right?e+t:e,Ele=(e,t,n)=>n===it.Top?e-t:n===it.Bottom?e+t:e,XT="react-flow__edgeupdater",KT=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:i,onMouseOut:o,type:l})=>oe.createElement("circle",{onMouseDown:s,onMouseEnter:i,onMouseOut:o,className:Pr([XT,`${XT}-${l}`]),cx:Sle(t,r,e),cy:Ele(n,r,e),r,stroke:"transparent",fill:"transparent"}),Nle=()=>!0;var uu=e=>{const t=({id:n,className:r,type:s,data:i,onClick:o,onEdgeDoubleClick:l,selected:c,animated:d,label:h,labelStyle:g,labelShowBg:y,labelBgStyle:w,labelBgPadding:S,labelBgBorderRadius:C,style:A,source:E,target:k,sourceX:I,sourceY:M,targetX:P,targetY:j,sourcePosition:_,targetPosition:D,elementsSelectable:L,hidden:U,sourceHandleId:K,targetHandleId:q,onContextMenu:re,onMouseEnter:z,onMouseMove:H,onMouseLeave:Y,reconnectRadius:X,onReconnect:W,onReconnectStart:V,onReconnectEnd:ee,markerEnd:ae,markerStart:se,rfId:G,ariaLabel:Q,isFocusable:te,isReconnectable:ne,pathOptions:ie,interactionWidth:de,disableKeyboardA11y:pe})=>{const ye=N.useRef(null),[Se,De]=N.useState(!1),[xe,Ue]=N.useState(!1),nt=cr(),et=N.useMemo(()=>`url('#${B2(se,G)}')`,[se,G]),je=N.useMemo(()=>`url('#${B2(ae,G)}')`,[ae,G]);if(U)return null;const be=Gt=>{var Nt;const{edges:ur,addSelectedEdges:Ot,unselectNodesAndEdges:Ie,multiSelectionActive:_t}=nt.getState(),ut=ur.find(qr=>qr.id===n);ut&&(L&&(nt.setState({nodesSelectionActive:!1}),ut.selected&&_t?(Ie({nodes:[],edges:[ut]}),(Nt=ye.current)==null||Nt.blur()):Ot([n])),o&&o(Gt,ut))},$e=pf(n,nt.getState,l),qt=pf(n,nt.getState,re),Te=pf(n,nt.getState,z),Ce=pf(n,nt.getState,H),Ee=pf(n,nt.getState,Y),Ke=(Gt,ur)=>{if(Gt.button!==0)return;const{edges:Ot,isValidConnection:Ie}=nt.getState(),_t=ur?k:E,ut=(ur?q:K)||null,Nt=ur?"target":"source",qr=Ie||Nle,Vs=ur,Es=Ot.find(cn=>cn.id===n);Ue(!0),V==null||V(Gt,Es,Nt);const gt=cn=>{Ue(!1),ee==null||ee(cn,Es,Nt)};O5({event:Gt,handleId:ut,nodeId:_t,onConnect:cn=>W==null?void 0:W(Es,cn),isTarget:Vs,getState:nt.getState,setState:nt.setState,isValidConnection:qr,edgeUpdaterType:Nt,onReconnectEnd:gt})},ot=Gt=>Ke(Gt,!0),rt=Gt=>Ke(Gt,!1),Bt=()=>De(!0),vn=()=>De(!1),Zt=!L&&!o,Dr=Gt=>{var ur;if(!pe&&b5.includes(Gt.key)&&L){const{unselectNodesAndEdges:Ot,addSelectedEdges:Ie,edges:_t}=nt.getState();Gt.key==="Escape"?((ur=ye.current)==null||ur.blur(),Ot({edges:[_t.find(Nt=>Nt.id===n)]})):Ie([n])}};return oe.createElement("g",{className:Pr(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:c,animated:d,inactive:Zt,updating:Se}]),onClick:be,onDoubleClick:$e,onContextMenu:qt,onMouseEnter:Te,onMouseMove:Ce,onMouseLeave:Ee,onKeyDown:te?Dr:void 0,tabIndex:te?0:void 0,role:te?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":Q===null?void 0:Q||`Edge from ${E} to ${k}`,"aria-describedby":te?`${H5}-${G}`:void 0,ref:ye},!xe&&oe.createElement(e,{id:n,source:E,target:k,selected:c,animated:d,label:h,labelStyle:g,labelShowBg:y,labelBgStyle:w,labelBgPadding:S,labelBgBorderRadius:C,data:i,style:A,sourceX:I,sourceY:M,targetX:P,targetY:j,sourcePosition:_,targetPosition:D,sourceHandleId:K,targetHandleId:q,markerStart:et,markerEnd:je,pathOptions:ie,interactionWidth:de}),ne&&oe.createElement(oe.Fragment,null,(ne==="source"||ne===!0)&&oe.createElement(KT,{position:_,centerX:I,centerY:M,radius:X,onMouseDown:ot,onMouseEnter:Bt,onMouseOut:vn,type:"source"}),(ne==="target"||ne===!0)&&oe.createElement(KT,{position:D,centerX:P,centerY:j,radius:X,onMouseDown:rt,onMouseEnter:Bt,onMouseOut:vn,type:"target"})))};return t.displayName="EdgeWrapper",N.memo(t)};function Ale(e){const t={default:uu(e.default||U1),straight:uu(e.bezier||LS),step:uu(e.step||jS),smoothstep:uu(e.step||Ex),simplebezier:uu(e.simplebezier||DS)},n={},r=Object.keys(e).filter(s=>!["default","bezier"].includes(s)).reduce((s,i)=>(s[i]=uu(e[i]||U1),s),n);return{...t,...r}}function YT(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,s=((n==null?void 0:n.y)||0)+t.y,i=(n==null?void 0:n.width)||t.width,o=(n==null?void 0:n.height)||t.height;switch(e){case it.Top:return{x:r+i/2,y:s};case it.Right:return{x:r+i,y:s+o/2};case it.Bottom:return{x:r+i/2,y:s+o};case it.Left:return{x:r,y:s+o/2}}}function qT(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const Tle=(e,t,n,r,s,i)=>{const o=YT(n,e,t),l=YT(i,r,s);return{sourceX:o.x,sourceY:o.y,targetX:l.x,targetY:l.y}};function kle({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:i,width:o,height:l,transform:c}){const d={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+s),y2:Math.max(e.y+r,t.y+i)};d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);const h=Gh({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:l/c[2]}),g=Math.max(0,Math.min(h.x2,d.x2)-Math.max(h.x,d.x)),y=Math.max(0,Math.min(h.y2,d.y2)-Math.max(h.y,d.y));return Math.ceil(g*y)>0}function ZT(e){var r,s,i,o,l;const t=((r=e==null?void 0:e[zn])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const Ile=[{level:0,isMaxLevel:!0,edges:[]}];function Rle(e,t,n=!1){let r=-1;const s=e.reduce((o,l)=>{var h,g;const c=ei(l.zIndex);let d=c?l.zIndex:0;if(n){const y=t.get(l.target),w=t.get(l.source),S=l.selected||(y==null?void 0:y.selected)||(w==null?void 0:w.selected),C=Math.max(((h=w==null?void 0:w[zn])==null?void 0:h.z)||0,((g=y==null?void 0:y[zn])==null?void 0:g.z)||0,1e3);d=(c?l.zIndex:0)+(S?C:0)}return o[d]?o[d].push(l):o[d]=[l],r=d>r?d:r,o},{}),i=Object.entries(s).map(([o,l])=>{const c=+o;return{edges:l,level:c,isMaxLevel:c===r}});return i.length===0?Ile:i}function Mle(e,t,n){const r=ln(N.useCallback(s=>e?s.edges.filter(i=>{const o=t.get(i.source),l=t.get(i.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&kle({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:l.width,targetHeight:l.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[e,t]));return Rle(r,t,n)}const _le=({color:e="none",strokeWidth:t=1})=>oe.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Ole=({color:e="none",strokeWidth:t=1})=>oe.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),QT={[xc.Arrow]:_le,[xc.ArrowClosed]:Ole};function Ple(e){const t=cr();return N.useMemo(()=>{var s,i;return Object.prototype.hasOwnProperty.call(QT,e)?QT[e]:((i=(s=t.getState()).onError)==null||i.call(s,"009",ta.error009(e)),null)},[e])}const Dle=({id:e,type:t,color:n,width:r=12.5,height:s=12.5,markerUnits:i="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const c=Ple(t);return c?oe.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:l,refX:"0",refY:"0"},oe.createElement(c,{color:n,strokeWidth:o})):null},jle=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((s,i)=>([i.markerStart,i.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const l=B2(o,t);r.includes(l)||(s.push({id:l,color:o.color||e,...o}),r.push(l))}}),s),[]).sort((s,i)=>s.id.localeCompare(i.id))},tj=({defaultColor:e,rfId:t})=>{const n=ln(N.useCallback(jle({defaultColor:e,rfId:t}),[e,t]),(r,s)=>!(r.length!==s.length||r.some((i,o)=>i.id!==s[o].id)));return oe.createElement("defs",null,n.map(r=>oe.createElement(Dle,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};tj.displayName="MarkerDefinitions";var Lle=N.memo(tj);const Ble=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),nj=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:i,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:d,onEdgeClick:h,onEdgeDoubleClick:g,onReconnect:y,onReconnectStart:w,onReconnectEnd:S,reconnectRadius:C,children:A,disableKeyboardA11y:E})=>{const{edgesFocusable:k,edgesUpdatable:I,elementsSelectable:M,width:P,height:j,connectionMode:_,nodeInternals:D,onError:L}=ln(Ble,wr),U=Mle(t,D,n);return P?oe.createElement(oe.Fragment,null,U.map(({level:K,edges:q,isMaxLevel:re})=>oe.createElement("svg",{key:K,style:{zIndex:K},width:P,height:j,className:"react-flow__edges react-flow__container"},re&&oe.createElement(Lle,{defaultColor:e,rfId:r}),oe.createElement("g",null,q.map(z=>{const[H,Y,X]=ZT(D.get(z.source)),[W,V,ee]=ZT(D.get(z.target));if(!X||!ee)return null;let ae=z.type||"default";s[ae]||(L==null||L("011",ta.error011(ae)),ae="default");const se=s[ae]||s.default,G=_===Lc.Strict?V.target:(V.target??[]).concat(V.source??[]),Q=qT(Y.source,z.sourceHandle),te=qT(G,z.targetHandle),ne=(Q==null?void 0:Q.position)||it.Bottom,ie=(te==null?void 0:te.position)||it.Top,de=!!(z.focusable||k&&typeof z.focusable>"u"),pe=z.reconnectable||z.updatable,ye=typeof y<"u"&&(pe||I&&typeof pe>"u");if(!Q||!te)return L==null||L("008",ta.error008(Q,z)),null;const{sourceX:Se,sourceY:De,targetX:xe,targetY:Ue}=Tle(H,Q,ne,W,te,ie);return oe.createElement(se,{key:z.id,id:z.id,className:Pr([z.className,i]),type:ae,data:z.data,selected:!!z.selected,animated:!!z.animated,hidden:!!z.hidden,label:z.label,labelStyle:z.labelStyle,labelShowBg:z.labelShowBg,labelBgStyle:z.labelBgStyle,labelBgPadding:z.labelBgPadding,labelBgBorderRadius:z.labelBgBorderRadius,style:z.style,source:z.source,target:z.target,sourceHandleId:z.sourceHandle,targetHandleId:z.targetHandle,markerEnd:z.markerEnd,markerStart:z.markerStart,sourceX:Se,sourceY:De,targetX:xe,targetY:Ue,sourcePosition:ne,targetPosition:ie,elementsSelectable:M,onContextMenu:o,onMouseEnter:l,onMouseMove:c,onMouseLeave:d,onClick:h,onEdgeDoubleClick:g,onReconnect:y,onReconnectStart:w,onReconnectEnd:S,reconnectRadius:C,rfId:r,ariaLabel:z.ariaLabel,isFocusable:de,isReconnectable:ye,pathOptions:"pathOptions"in z?z.pathOptions:void 0,interactionWidth:z.interactionWidth,disableKeyboardA11y:E})})))),A):null};nj.displayName="EdgeRenderer";var Fle=N.memo(nj);const zle=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Vle({children:e}){const t=ln(zle);return oe.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Hle(e){const t=VS(),n=N.useRef(!1);N.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Ule={[it.Left]:it.Right,[it.Right]:it.Left,[it.Top]:it.Bottom,[it.Bottom]:it.Top},rj=({nodeId:e,handleType:t,style:n,type:r=_a.Bezier,CustomComponent:s,connectionStatus:i})=>{var j,_,D;const{fromNode:o,handleId:l,toX:c,toY:d,connectionMode:h}=ln(N.useCallback(L=>({fromNode:L.nodeInternals.get(e),handleId:L.connectionHandleId,toX:(L.connectionPosition.x-L.transform[0])/L.transform[2],toY:(L.connectionPosition.y-L.transform[1])/L.transform[2],connectionMode:L.connectionMode}),[e]),wr),g=(j=o==null?void 0:o[zn])==null?void 0:j.handleBounds;let y=g==null?void 0:g[t];if(h===Lc.Loose&&(y=y||(g==null?void 0:g[t==="source"?"target":"source"])),!o||!y)return null;const w=l?y.find(L=>L.id===l):y[0],S=w?w.x+w.width/2:(o.width??0)/2,C=w?w.y+w.height/2:o.height??0,A=(((_=o.positionAbsolute)==null?void 0:_.x)??0)+S,E=(((D=o.positionAbsolute)==null?void 0:D.y)??0)+C,k=w==null?void 0:w.position,I=k?Ule[k]:null;if(!k||!I)return null;if(s)return oe.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:w,fromX:A,fromY:E,toX:c,toY:d,fromPosition:k,toPosition:I,connectionStatus:i});let M="";const P={sourceX:A,sourceY:E,sourcePosition:k,targetX:c,targetY:d,targetPosition:I};return r===_a.Bezier?[M]=A5(P):r===_a.Step?[M]=L2({...P,borderRadius:0}):r===_a.SmoothStep?[M]=L2(P):r===_a.SimpleBezier?[M]=N5(P):M=`M${A},${E} ${c},${d}`,oe.createElement("path",{d:M,fill:"none",className:"react-flow__connection-path",style:n})};rj.displayName="ConnectionLine";const $le=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Wle({containerStyle:e,style:t,type:n,component:r}){const{nodeId:s,handleType:i,nodesConnectable:o,width:l,height:c,connectionStatus:d}=ln($le,wr);return!(s&&i&&l&&o)?null:oe.createElement("svg",{style:e,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},oe.createElement("g",{className:Pr(["react-flow__connection",d])},oe.createElement(rj,{nodeId:s,handleType:i,style:t,type:n,CustomComponent:r,connectionStatus:d})))}function JT(e,t){return N.useRef(null),cr(),N.useMemo(()=>t(e),[e])}const sj=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:i,onNodeClick:o,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:d,onNodeMouseEnter:h,onNodeMouseMove:g,onNodeMouseLeave:y,onNodeContextMenu:w,onSelectionContextMenu:S,onSelectionStart:C,onSelectionEnd:A,connectionLineType:E,connectionLineStyle:k,connectionLineComponent:I,connectionLineContainerStyle:M,selectionKeyCode:P,selectionOnDrag:j,selectionMode:_,multiSelectionKeyCode:D,panActivationKeyCode:L,zoomActivationKeyCode:U,deleteKeyCode:K,onlyRenderVisibleElements:q,elementsSelectable:re,selectNodesOnDrag:z,defaultViewport:H,translateExtent:Y,minZoom:X,maxZoom:W,preventScrolling:V,defaultMarkerColor:ee,zoomOnScroll:ae,zoomOnPinch:se,panOnScroll:G,panOnScrollSpeed:Q,panOnScrollMode:te,zoomOnDoubleClick:ne,panOnDrag:ie,onPaneClick:de,onPaneMouseEnter:pe,onPaneMouseMove:ye,onPaneMouseLeave:Se,onPaneScroll:De,onPaneContextMenu:xe,onEdgeContextMenu:Ue,onEdgeMouseEnter:nt,onEdgeMouseMove:et,onEdgeMouseLeave:je,onReconnect:be,onReconnectStart:$e,onReconnectEnd:qt,reconnectRadius:Te,noDragClassName:Ce,noWheelClassName:Ee,noPanClassName:Ke,elevateEdgesOnSelect:ot,disableKeyboardA11y:rt,nodeOrigin:Bt,nodeExtent:vn,rfId:Zt})=>{const Dr=JT(e,wle),Gt=JT(t,Ale);return Hle(i),oe.createElement(xle,{onPaneClick:de,onPaneMouseEnter:pe,onPaneMouseMove:ye,onPaneMouseLeave:Se,onPaneContextMenu:xe,onPaneScroll:De,deleteKeyCode:K,selectionKeyCode:P,selectionOnDrag:j,selectionMode:_,onSelectionStart:C,onSelectionEnd:A,multiSelectionKeyCode:D,panActivationKeyCode:L,zoomActivationKeyCode:U,elementsSelectable:re,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:ae,zoomOnPinch:se,zoomOnDoubleClick:ne,panOnScroll:G,panOnScrollSpeed:Q,panOnScrollMode:te,panOnDrag:ie,defaultViewport:H,translateExtent:Y,minZoom:X,maxZoom:W,onSelectionContextMenu:S,preventScrolling:V,noDragClassName:Ce,noWheelClassName:Ee,noPanClassName:Ke,disableKeyboardA11y:rt},oe.createElement(Vle,null,oe.createElement(Fle,{edgeTypes:Gt,onEdgeClick:l,onEdgeDoubleClick:d,onlyRenderVisibleElements:q,onEdgeContextMenu:Ue,onEdgeMouseEnter:nt,onEdgeMouseMove:et,onEdgeMouseLeave:je,onReconnect:be,onReconnectStart:$e,onReconnectEnd:qt,reconnectRadius:Te,defaultMarkerColor:ee,noPanClassName:Ke,elevateEdgesOnSelect:!!ot,disableKeyboardA11y:rt,rfId:Zt},oe.createElement(Wle,{style:k,type:E,component:I,containerStyle:M})),oe.createElement("div",{className:"react-flow__edgelabel-renderer"}),oe.createElement(Cle,{nodeTypes:Dr,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:h,onNodeMouseMove:g,onNodeMouseLeave:y,onNodeContextMenu:w,selectNodesOnDrag:z,onlyRenderVisibleElements:q,noPanClassName:Ke,noDragClassName:Ce,disableKeyboardA11y:rt,nodeOrigin:Bt,nodeExtent:vn,rfId:Zt})))};sj.displayName="GraphView";var Gle=N.memo(sj);const H2=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ga={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:H2,nodeExtent:H2,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Lc.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:vae,isValidConnection:void 0},Xle=()=>Dre((e,t)=>({...ga,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:i}=t();e({nodeInternals:pw(n,r,s,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",i=typeof r<"u",o=s?pw(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:i?r:[],hasDefaultNodes:s,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:i,fitViewOnInitDone:o,fitViewOnInitOptions:l,domNode:c,nodeOrigin:d}=t(),h=c==null?void 0:c.querySelector(".react-flow__viewport");if(!h)return;const g=window.getComputedStyle(h),{m22:y}=new window.DOMMatrixReadOnly(g.transform),w=n.reduce((C,A)=>{const E=s.get(A.id);if(E!=null&&E.hidden)s.set(E.id,{...E,[zn]:{...E[zn],handleBounds:void 0}});else if(E){const k=OS(A.nodeElement);!!(k.width&&k.height&&(E.width!==k.width||E.height!==k.height||A.forceUpdate))&&(s.set(E.id,{...E,[zn]:{...E[zn],handleBounds:{source:GT(".source",A.nodeElement,y,d),target:GT(".target",A.nodeElement,y,d)}},...k}),C.push({id:E.id,type:"dimensions",dimensions:k}))}return C},[]);$5(s,d);const S=o||i&&!o&&W5(t,{initial:!0,...l});e({nodeInternals:new Map(s),fitViewOnInitDone:S}),(w==null?void 0:w.length)>0&&(r==null||r(w))},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:i}=t(),o=n.map(l=>{const c={id:l.id,type:"position",dragging:s};return r&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});i(o)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:i,nodeOrigin:o,getNodes:l,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(i){const d=X5(n,l()),h=pw(d,s,o,c);e({nodeInternals:h})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:i}=t();let o,l=null;r?o=n.map(c=>Aa(c,!0)):(o=Ru(i(),n),l=Ru(s,[])),T0({changedNodes:o,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:i}=t();let o,l=null;r?o=n.map(c=>Aa(c,!0)):(o=Ru(s,n),l=Ru(i(),[])),T0({changedNodes:l,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:i}=t(),o=n||i(),l=r||s,c=o.map(h=>(h.selected=!1,Aa(h.id,!1))),d=l.map(h=>Aa(h.id,!1));T0({changedNodes:c,changedEdges:d,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=t();r==null||r.scaleExtent([n,s]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=t();r==null||r.scaleExtent([s,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),i=r().filter(l=>l.selected).map(l=>Aa(l.id,!1)),o=n.filter(l=>l.selected).map(l=>Aa(l.id,!1));T0({changedNodes:i,changedEdges:o,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(s=>{s.positionAbsolute=PS(s.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:i,d3Zoom:o,d3Selection:l,translateExtent:c}=t();if(!o||!l||!n.x&&!n.y)return!1;const d=Go.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),h=[[0,0],[s,i]],g=o==null?void 0:o.constrain()(d,h,c);return o.transform(l,g),r[0]!==g.x||r[1]!==g.y||r[2]!==g.k},cancelConnection:()=>e({connectionNodeId:ga.connectionNodeId,connectionHandleId:ga.connectionHandleId,connectionHandleType:ga.connectionHandleType,connectionStatus:ga.connectionStatus,connectionStartHandle:ga.connectionStartHandle,connectionEndHandle:ga.connectionEndHandle}),reset:()=>e({...ga})}),Object.is),ij=({children:e})=>{const t=N.useRef(null);return t.current||(t.current=Xle()),oe.createElement(hae,{value:t.current},e)};ij.displayName="ReactFlowProvider";const oj=({children:e})=>N.useContext(Sx)?oe.createElement(oe.Fragment,null,e):oe.createElement(ij,null,e);oj.displayName="ReactFlowWrapper";const Kle={input:L5,default:z2,output:F5,group:zS},Yle={default:U1,straight:LS,step:jS,smoothstep:Ex,simplebezier:DS},qle=[0,0],Zle=[15,15],Qle={x:0,y:0,zoom:1},Jle={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},aj=N.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:i=Kle,edgeTypes:o=Yle,onNodeClick:l,onEdgeClick:c,onInit:d,onMove:h,onMoveStart:g,onMoveEnd:y,onConnect:w,onConnectStart:S,onConnectEnd:C,onClickConnectStart:A,onClickConnectEnd:E,onNodeMouseEnter:k,onNodeMouseMove:I,onNodeMouseLeave:M,onNodeContextMenu:P,onNodeDoubleClick:j,onNodeDragStart:_,onNodeDrag:D,onNodeDragStop:L,onNodesDelete:U,onEdgesDelete:K,onSelectionChange:q,onSelectionDragStart:re,onSelectionDrag:z,onSelectionDragStop:H,onSelectionContextMenu:Y,onSelectionStart:X,onSelectionEnd:W,connectionMode:V=Lc.Strict,connectionLineType:ee=_a.Bezier,connectionLineStyle:ae,connectionLineComponent:se,connectionLineContainerStyle:G,deleteKeyCode:Q="Backspace",selectionKeyCode:te="Shift",selectionOnDrag:ne=!1,selectionMode:ie=Xh.Full,panActivationKeyCode:de="Space",multiSelectionKeyCode:pe=H1()?"Meta":"Control",zoomActivationKeyCode:ye=H1()?"Meta":"Control",snapToGrid:Se=!1,snapGrid:De=Zle,onlyRenderVisibleElements:xe=!1,selectNodesOnDrag:Ue=!0,nodesDraggable:nt,nodesConnectable:et,nodesFocusable:je,nodeOrigin:be=qle,edgesFocusable:$e,edgesUpdatable:qt,elementsSelectable:Te,defaultViewport:Ce=Qle,minZoom:Ee=.5,maxZoom:Ke=2,translateExtent:ot=H2,preventScrolling:rt=!0,nodeExtent:Bt,defaultMarkerColor:vn="#b1b1b7",zoomOnScroll:Zt=!0,zoomOnPinch:Dr=!0,panOnScroll:Gt=!1,panOnScrollSpeed:ur=.5,panOnScrollMode:Ot=Gl.Free,zoomOnDoubleClick:Ie=!0,panOnDrag:_t=!0,onPaneClick:ut,onPaneMouseEnter:Nt,onPaneMouseMove:qr,onPaneMouseLeave:Vs,onPaneScroll:Es,onPaneContextMenu:gt,children:Ut,onEdgeContextMenu:cn,onEdgeDoubleClick:Vi,onEdgeMouseEnter:Qe,onEdgeMouseMove:It,onEdgeMouseLeave:ft,onEdgeUpdate:Rn,onEdgeUpdateStart:Pt,onEdgeUpdateEnd:un,onReconnect:Zr,onReconnectStart:dn,onReconnectEnd:jr,reconnectRadius:dr=10,edgeUpdaterRadius:ui=10,onNodesChange:vr,onEdgesChange:Ve,noDragClassName:di="nodrag",noWheelClassName:bn="nowheel",noPanClassName:Xn="nopan",fitView:sn=!1,fitViewOptions:So,connectOnClick:Qt=!0,attributionPosition:fr,proOptions:Sl,defaultEdgeOptions:Hi,elevateNodesOnSelect:Qr=!0,elevateEdgesOnSelect:Vn=!1,disableKeyboardA11y:$t=!1,autoPanOnConnect:El=!0,autoPanOnNodeDrag:br=!0,connectionRadius:Ui=20,isValidConnection:we,onError:Nl,style:Jt,id:Lr,nodeDragThreshold:ia,...At},Rt)=>{const xt=Lr||"1";return oe.createElement("div",{...At,style:{...Jt,...Jle},ref:Rt,className:Pr(["react-flow",s]),"data-testid":"rf__wrapper",id:Lr},oe.createElement(oj,null,oe.createElement(Gle,{onInit:d,onMove:h,onMoveStart:g,onMoveEnd:y,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:k,onNodeMouseMove:I,onNodeMouseLeave:M,onNodeContextMenu:P,onNodeDoubleClick:j,nodeTypes:i,edgeTypes:o,connectionLineType:ee,connectionLineStyle:ae,connectionLineComponent:se,connectionLineContainerStyle:G,selectionKeyCode:te,selectionOnDrag:ne,selectionMode:ie,deleteKeyCode:Q,multiSelectionKeyCode:pe,panActivationKeyCode:de,zoomActivationKeyCode:ye,onlyRenderVisibleElements:xe,selectNodesOnDrag:Ue,defaultViewport:Ce,translateExtent:ot,minZoom:Ee,maxZoom:Ke,preventScrolling:rt,zoomOnScroll:Zt,zoomOnPinch:Dr,zoomOnDoubleClick:Ie,panOnScroll:Gt,panOnScrollSpeed:ur,panOnScrollMode:Ot,panOnDrag:_t,onPaneClick:ut,onPaneMouseEnter:Nt,onPaneMouseMove:qr,onPaneMouseLeave:Vs,onPaneScroll:Es,onPaneContextMenu:gt,onSelectionContextMenu:Y,onSelectionStart:X,onSelectionEnd:W,onEdgeContextMenu:cn,onEdgeDoubleClick:Vi,onEdgeMouseEnter:Qe,onEdgeMouseMove:It,onEdgeMouseLeave:ft,onReconnect:Zr??Rn,onReconnectStart:dn??Pt,onReconnectEnd:jr??un,reconnectRadius:dr??ui,defaultMarkerColor:vn,noDragClassName:di,noWheelClassName:bn,noPanClassName:Xn,elevateEdgesOnSelect:Vn,rfId:xt,disableKeyboardA11y:$t,nodeOrigin:be,nodeExtent:Bt}),oe.createElement(Uae,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:w,onConnectStart:S,onConnectEnd:C,onClickConnectStart:A,onClickConnectEnd:E,nodesDraggable:nt,nodesConnectable:et,nodesFocusable:je,edgesFocusable:$e,edgesUpdatable:qt,elementsSelectable:Te,elevateNodesOnSelect:Qr,minZoom:Ee,maxZoom:Ke,nodeExtent:Bt,onNodesChange:vr,onEdgesChange:Ve,snapToGrid:Se,snapGrid:De,connectionMode:V,translateExtent:ot,connectOnClick:Qt,defaultEdgeOptions:Hi,fitView:sn,fitViewOptions:So,onNodesDelete:U,onEdgesDelete:K,onNodeDragStart:_,onNodeDrag:D,onNodeDragStop:L,onSelectionDrag:z,onSelectionDragStart:re,onSelectionDragStop:H,noPanClassName:Xn,nodeOrigin:be,rfId:xt,autoPanOnConnect:El,autoPanOnNodeDrag:br,onError:Nl,connectionRadius:Ui,isValidConnection:we,nodeDragThreshold:ia}),oe.createElement(Vae,{onSelectionChange:q}),Ut,oe.createElement(mae,{proOptions:Sl,position:fr}),oe.createElement(Kae,{rfId:xt,disableKeyboardA11y:$t})))});aj.displayName="ReactFlow";function lj(e){return t=>{const[n,r]=N.useState(t),s=N.useCallback(i=>r(o=>e(i,o)),[]);return[n,r,s]}}const ece=lj(X5),tce=lj(lle),cj=({id:e,x:t,y:n,width:r,height:s,style:i,color:o,strokeColor:l,strokeWidth:c,className:d,borderRadius:h,shapeRendering:g,onClick:y,selected:w})=>{const{background:S,backgroundColor:C}=i||{},A=o||S||C;return oe.createElement("rect",{className:Pr(["react-flow__minimap-node",{selected:w},d]),x:t,y:n,rx:h,ry:h,width:r,height:s,fill:A,stroke:l,strokeWidth:c,shapeRendering:g,onClick:y?E=>y(E,e):void 0})};cj.displayName="MiniMapNode";var nce=N.memo(cj);const rce=e=>e.nodeOrigin,sce=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),yw=e=>e instanceof Function?e:()=>e;function ice({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:s=2,nodeComponent:i=nce,onClick:o}){const l=ln(sce,wr),c=ln(rce),d=yw(t),h=yw(e),g=yw(n),y=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return oe.createElement(oe.Fragment,null,l.map(w=>{const{x:S,y:C}=yc(w,c).positionAbsolute;return oe.createElement(i,{key:w.id,x:S,y:C,width:w.width,height:w.height,style:w.style,selected:w.selected,className:g(w),color:d(w),borderRadius:r,strokeColor:h(w),strokeWidth:s,shapeRendering:y,onClick:o,id:w.id})}))}var oce=N.memo(ice);const ace=200,lce=150,cce=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?yae(Nx(t,e.nodeOrigin),n):n,rfId:e.rfId}},uce="react-flow__minimap-desc";function uj({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:s="",nodeBorderRadius:i=5,nodeStrokeWidth:o=2,nodeComponent:l,maskColor:c="rgb(240, 240, 240, 0.6)",maskStrokeColor:d="none",maskStrokeWidth:h=1,position:g="bottom-right",onClick:y,onNodeClick:w,pannable:S=!1,zoomable:C=!1,ariaLabel:A="React Flow mini map",inversePan:E=!1,zoomStep:k=10,offsetScale:I=5}){const M=cr(),P=N.useRef(null),{boundingRect:j,viewBB:_,rfId:D}=ln(cce,wr),L=(e==null?void 0:e.width)??ace,U=(e==null?void 0:e.height)??lce,K=j.width/L,q=j.height/U,re=Math.max(K,q),z=re*L,H=re*U,Y=I*re,X=j.x-(z-j.width)/2-Y,W=j.y-(H-j.height)/2-Y,V=z+Y*2,ee=H+Y*2,ae=`${uce}-${D}`,se=N.useRef(0);se.current=re,N.useEffect(()=>{if(P.current){const te=Zs(P.current),ne=pe=>{const{transform:ye,d3Selection:Se,d3Zoom:De}=M.getState();if(pe.sourceEvent.type!=="wheel"||!Se||!De)return;const xe=-pe.sourceEvent.deltaY*(pe.sourceEvent.deltaMode===1?.05:pe.sourceEvent.deltaMode?1:.002)*k,Ue=ye[2]*Math.pow(2,xe);De.scaleTo(Se,Ue)},ie=pe=>{const{transform:ye,d3Selection:Se,d3Zoom:De,translateExtent:xe,width:Ue,height:nt}=M.getState();if(pe.sourceEvent.type!=="mousemove"||!Se||!De)return;const et=se.current*Math.max(1,ye[2])*(E?-1:1),je={x:ye[0]-pe.sourceEvent.movementX*et,y:ye[1]-pe.sourceEvent.movementY*et},be=[[0,0],[Ue,nt]],$e=Go.translate(je.x,je.y).scale(ye[2]),qt=De.constrain()($e,be,xe);De.transform(Se,qt)},de=m5().on("zoom",S?ie:null).on("zoom.wheel",C?ne:null);return te.call(de),()=>{te.on("zoom",null)}}},[S,C,E,k]);const G=y?te=>{const ne=Ei(te);y(te,{x:ne[0],y:ne[1]})}:void 0,Q=w?(te,ne)=>{const ie=M.getState().nodeInternals.get(ne);w(te,ie)}:void 0;return oe.createElement(_S,{position:g,style:e,className:Pr(["react-flow__minimap",t]),"data-testid":"rf__minimap"},oe.createElement("svg",{width:L,height:U,viewBox:`${X} ${W} ${V} ${ee}`,role:"img","aria-labelledby":ae,ref:P,onClick:G},A&&oe.createElement("title",{id:ae},A),oe.createElement(oce,{onClick:Q,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:s,nodeStrokeWidth:o,nodeComponent:l}),oe.createElement("path",{className:"react-flow__minimap-mask",d:`M${X-Y},${W-Y}h${V+Y*2}v${ee+Y*2}h${-V-Y*2}z
        M${_.x},${_.y}h${_.width}v${_.height}h${-_.width}z`,fill:c,fillRule:"evenodd",stroke:d,strokeWidth:h,pointerEvents:"none"})))}uj.displayName="MiniMap";var dce=N.memo(uj);function fce(){return oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},oe.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function hce(){return oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},oe.createElement("path",{d:"M0 0h32v4.2H0z"}))}function pce(){return oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},oe.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function mce(){return oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},oe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function gce(){return oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},oe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const _f=({children:e,className:t,...n})=>oe.createElement("button",{type:"button",className:Pr(["react-flow__controls-button",t]),...n},e);_f.displayName="ControlButton";const xce=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),dj=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:i,onZoomOut:o,onFitView:l,onInteractiveChange:c,className:d,children:h,position:g="bottom-left"})=>{const y=cr(),[w,S]=N.useState(!1),{isInteractive:C,minZoomReached:A,maxZoomReached:E}=ln(xce,wr),{zoomIn:k,zoomOut:I,fitView:M}=VS();if(N.useEffect(()=>{S(!0)},[]),!w)return null;const P=()=>{k(),i==null||i()},j=()=>{I(),o==null||o()},_=()=>{M(s),l==null||l()},D=()=>{y.setState({nodesDraggable:!C,nodesConnectable:!C,elementsSelectable:!C}),c==null||c(!C)};return oe.createElement(_S,{className:Pr(["react-flow__controls",d]),position:g,style:e,"data-testid":"rf__controls"},t&&oe.createElement(oe.Fragment,null,oe.createElement(_f,{onClick:P,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:E},oe.createElement(fce,null)),oe.createElement(_f,{onClick:j,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:A},oe.createElement(hce,null))),n&&oe.createElement(_f,{className:"react-flow__controls-fitview",onClick:_,title:"fit view","aria-label":"fit view"},oe.createElement(pce,null)),r&&oe.createElement(_f,{className:"react-flow__controls-interactive",onClick:D,title:"toggle interactivity","aria-label":"toggle interactivity"},C?oe.createElement(gce,null):oe.createElement(mce,null)),h)};dj.displayName="Controls";var yce=N.memo(dj),ii;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ii||(ii={}));function wce({color:e,dimensions:t,lineWidth:n}){return oe.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function vce({color:e,radius:t}){return oe.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const bce={[ii.Dots]:"#91919a",[ii.Lines]:"#eee",[ii.Cross]:"#e2e2e2"},Cce={[ii.Dots]:1,[ii.Lines]:1,[ii.Cross]:6},Sce=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function fj({id:e,variant:t=ii.Dots,gap:n=20,size:r,lineWidth:s=1,offset:i=2,color:o,style:l,className:c}){const d=N.useRef(null),{transform:h,patternId:g}=ln(Sce,wr),y=o||bce[t],w=r||Cce[t],S=t===ii.Dots,C=t===ii.Cross,A=Array.isArray(n)?n:[n,n],E=[A[0]*h[2]||1,A[1]*h[2]||1],k=w*h[2],I=C?[k,k]:E,M=S?[k/i,k/i]:[I[0]/i,I[1]/i];return oe.createElement("svg",{className:Pr(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:d,"data-testid":"rf__background"},oe.createElement("pattern",{id:g+e,x:h[0]%E[0],y:h[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`},S?oe.createElement(vce,{color:y,radius:k/i}):oe.createElement(wce,{dimensions:I,color:y,lineWidth:s})),oe.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${g+e})`}))}fj.displayName="Background";var Ece=N.memo(fj);const Nce=({data:e})=>{const t=e.errors&&e.errors.length>0,n=e.isSelected,r=e.isStart;let s="border-border",i="bg-card";return e.hasCombat?(s="border-red-500",i="bg-red-50 dark:bg-red-950/20"):e.hasShop?(s="border-green-500",i="bg-green-50 dark:bg-green-950/20"):(s="border-blue-500",i="bg-blue-50 dark:bg-blue-950/20"),n&&(s="border-primary ring-2 ring-primary"),t&&(s="border-destructive ring-2 ring-destructive"),r&&(s="border-yellow-500 ring-2 ring-yellow-500"),p.jsxs(Tt,{className:`min-w-[180px] max-w-[220px] ${s} ${i} border-2 transition-all cursor-pointer hover:shadow-lg`,children:[p.jsx(Rd,{type:"target",position:it.Left,style:{background:"#555"}}),p.jsxs(Dt,{className:"p-3 space-y-2",children:[p.jsxs("div",{className:"flex items-start justify-between gap-2",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"font-mono text-xs text-muted-foreground mb-1",children:["Page ",e.pageId]}),e.title&&p.jsx("div",{className:"font-semibold text-sm truncate",children:e.title})]}),p.jsxs("div",{className:"flex flex-col gap-1",children:[r&&p.jsx(wn,{variant:"default",className:"text-[10px] px-1 py-0",children:"START"}),e.hasCombat&&p.jsx(wv,{className:"h-4 w-4 text-red-500"}),e.hasShop&&p.jsx(Ub,{className:"h-4 w-4 text-green-500"}),t&&p.jsx(Nc,{className:"h-4 w-4 text-destructive"})]})]}),p.jsx("div",{className:"text-xs text-muted-foreground line-clamp-2",children:e.text?e.text.replace(/<[^>]+>/g,"").substring(0,80):"No text"}),e.choiceCount>0&&p.jsxs(wn,{variant:"outline",className:"text-[10px]",children:[e.choiceCount," choice",e.choiceCount!==1?"s":""]})]}),p.jsx(Rd,{type:"source",position:it.Right,style:{background:"#555"}})]})},Ace={pageNode:Nce},Tce=({gamebookData:e,selectedPageId:t,onSelectPage:n,errors:r})=>{const{nodes:s,edges:i}=N.useMemo(()=>{const w=e.pages||[],S=[],C=[],A=new Map,E=new Map;w.forEach(D=>{const L=String(D.id);A.set(L,D),E.set(L,new Set)}),w.forEach(D=>{var U;const L=String(D.id);(U=D.choices)==null||U.forEach(K=>{var re,z,H;const q=K.nextPageId||K.to;if(q){const Y=String(q);A.has(Y)&&((re=E.get(L))==null||re.add(Y))}if(K.combat){if(K.combat.winPageId){const Y=String(K.combat.winPageId);A.has(Y)&&((z=E.get(L))==null||z.add(Y))}if(K.combat.losePageId){const Y=String(K.combat.losePageId);A.has(Y)&&((H=E.get(L))==null||H.add(Y))}}})});const k=new Map,I=new Set,M=new Map,P=new Map,j=(D,L,U=0)=>{if(I.has(D))return;I.add(D);const K=M.get(L)||0,q=P.get(L)||0,re=Math.max(U,q);M.set(L,K+1),P.set(L,re+250);const z=L*400;k.set(D,{x:z,y:re,level:L});const H=Array.from(E.get(D)||[]);H.sort((X,W)=>{const V=A.get(X),ee=A.get(W);return((V==null?void 0:V.id)||0)>((ee==null?void 0:ee.id)||0)?1:-1});let Y=re;H.forEach(X=>{j(X,L+1,Y);const W=k.get(X);W&&(Y=W.y+250)})},_=w[0];return _&&j(String(_.id),0,0),w.forEach((D,L)=>{const U=String(D.id);if(!k.has(U)){const K=(P.size||0)+2,q=M.get(K)||0;k.set(U,{x:K*400,y:q*250,level:K}),M.set(K,q+1)}}),w.forEach((D,L)=>{var Y,X,W;const U=r.filter(V=>String(V.pageId)===String(D.id)),K=((Y=D.choices)==null?void 0:Y.some(V=>V.combat))||!1,q=!!D.shop,re=L===0||D.id===1,z=String(D.id),H=k.get(z)||{x:0,y:L*250,level:0};S.push({id:String(D.id),type:"pageNode",position:{x:H.x,y:H.y},data:{pageId:D.id,title:D.title,text:D.text,choiceCount:((X=D.choices)==null?void 0:X.length)||0,hasCombat:K,hasShop:q,isStart:re,isSelected:String(D.id)===String(t),errors:U}}),(W=D.choices)==null||W.forEach((V,ee)=>{var se;const ae=V.nextPageId||V.to;if(ae){const G=`${D.id}-${ee}-${ae}`,Q=!!V.combat;C.push({id:G,source:String(D.id),target:String(ae),label:((se=V.text)==null?void 0:se.replace(/<[^>]+>/g,"").substring(0,20))+(V.text&&V.text.replace(/<[^>]+>/g,"").length>20?"...":""),animated:Q,type:"default",markerEnd:{type:xc.ArrowClosed,color:Q?"#ef4444":"#3b82f6"},style:{stroke:Q?"#ef4444":"#3b82f6",strokeWidth:2},labelStyle:{fontSize:10,fill:"#666",fontWeight:500},labelBgStyle:{fill:"#fff",fillOpacity:.8},sourceHandle:null,targetHandle:null})}V.combat&&(V.combat.winPageId&&C.push({id:`${D.id}-combat-win-${V.combat.winPageId}`,source:String(D.id),target:String(V.combat.winPageId),label:" Victory",animated:!0,type:"default",markerEnd:{type:xc.ArrowClosed,color:"#22c55e"},style:{stroke:"#22c55e",strokeWidth:2,strokeDasharray:"5,5"},labelStyle:{fontSize:10,fill:"#22c55e",fontWeight:600},labelBgStyle:{fill:"#fff",fillOpacity:.9}}),V.combat.losePageId&&C.push({id:`${D.id}-combat-lose-${V.combat.losePageId}`,source:String(D.id),target:String(V.combat.losePageId),label:" Defeat",animated:!0,type:"default",markerEnd:{type:xc.ArrowClosed,color:"#ef4444"},style:{stroke:"#ef4444",strokeWidth:2,strokeDasharray:"5,5"},labelStyle:{fontSize:10,fill:"#ef4444",fontWeight:600},labelBgStyle:{fill:"#fff",fillOpacity:.9}}))})}),{nodes:S,edges:C}},[e.pages,t,r]),[o,l,c]=ece(s),[d,h,g]=tce(i);N.useEffect(()=>{l(s),h(i)},[s,i,l,h]);const y=N.useCallback((w,S)=>{const C=S.data.pageId;n(C)},[n]);return!e.pages||e.pages.length===0?p.jsx("div",{className:"h-full flex items-center justify-center p-6",children:p.jsx("div",{className:"text-center",children:p.jsx("p",{className:"text-muted-foreground",children:"No pages to visualize. Create pages to see the graph."})})}):p.jsx("div",{className:"h-full w-full bg-background",children:p.jsxs(aj,{nodes:o,edges:d,onNodesChange:c,onEdgesChange:g,onNodeClick:y,nodeTypes:Ace,fitView:!0,minZoom:.1,maxZoom:2,defaultViewport:{x:0,y:0,zoom:.5},proOptions:{hideAttribution:!0},defaultEdgeOptions:{type:"smoothstep",animated:!1},children:[p.jsx(Ece,{variant:ii.Dots,gap:16,size:1}),p.jsx(yce,{}),p.jsx(dce,{nodeColor:w=>{var S;return w.data.isStart?"#eab308":((S=w.data.errors)==null?void 0:S.length)>0||w.data.hasCombat?"#ef4444":w.data.hasShop?"#22c55e":"#3b82f6"},maskColor:"rgb(240, 240, 240, 0.6)"})]})})},kce=({gamebookData:e,selectedPageId:t})=>{var w,S;const[n,r]=N.useState(!1),[s,i]=N.useState(t||((S=(w=e.pages)==null?void 0:w[0])==null?void 0:S.id)||1),[o,l]=N.useState(!n),c=fM();N.useEffect(()=>{e&&e.pages&&e.pages.length>0&&c.loadStory(e)},[e]),N.useEffect(()=>{t&&!n&&i(t)},[t,n]);const d=()=>{e&&c.loadStory(e),setTimeout(()=>{var A;((A=e.pages)==null?void 0:A.find(E=>E.id===s))&&c.makeChoice({text:"",nextPageId:s}),r(!0),l(!1)},50)},h=()=>{e&&c.loadStory(e),setTimeout(()=>{var A;((A=e.pages)==null?void 0:A.find(E=>E.id===s))&&c.makeChoice({text:"",nextPageId:s})},50)},g=()=>{r(!1),l(!0)},y=C=>{var M;const A=(M=e.pages)==null?void 0:M.find(P=>P.id===C);if(!A)return`Page ${C}`;const E=A.title?`${A.title} - `:"",k=A.text?A.text.replace(/<[^>]+>/g,"").substring(0,50).replace(/\n/g," "):"",I=k.length>50?k+"...":k;return`Page ${C}${E?` - ${E}`:""}${I?`: ${I}`:""}`};return!e.pages||e.pages.length===0?p.jsx("div",{className:"h-full flex items-center justify-center p-6",children:p.jsx(Eh,{children:p.jsx(Nh,{children:"No pages to preview. Create at least one page to test your story."})})}):p.jsxs("div",{className:"h-full flex flex-col",children:[o&&p.jsxs(Tt,{className:"m-4 mb-0",children:[p.jsx(Wt,{children:p.jsxs(Kt,{className:"flex items-center gap-2",children:[p.jsx(iR,{className:"h-5 w-5"}),"Preview Settings"]})}),p.jsxs(Dt,{className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Fe,{children:"Start From Page"}),p.jsxs(Wr,{value:String(s),onValueChange:C=>{const A=isNaN(parseInt(C))?C:parseInt(C);i(A)},children:[p.jsx(Tr,{children:p.jsx(Gr,{placeholder:"Select starting page"})}),p.jsx(kr,{children:e.pages.map(C=>p.jsx(Vt,{value:String(C.id),children:y(C.id)},C.id))})]}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose which page to start testing from. Useful for testing specific sections."})]}),p.jsxs(Ne,{onClick:d,className:"w-full",children:[p.jsx(rR,{className:"h-4 w-4 mr-2"}),"Start Preview"]})]})]}),n&&p.jsxs("div",{className:"flex-1 overflow-auto relative",children:[p.jsxs("div",{className:"absolute top-4 right-4 z-50 flex gap-2",children:[p.jsxs(Ne,{variant:"secondary",size:"sm",onClick:h,children:[p.jsx(yv,{className:"h-4 w-4 mr-2"}),"Restart"]}),p.jsx(Ne,{variant:"outline",size:"sm",onClick:g,children:"Exit Preview"})]}),p.jsx("div",{className:"h-full w-full [&>div]:min-h-full [&>div]:!min-h-0",children:p.jsx(xO,{gamebookData:e,gameState:c.gameState,currentPage:c.getCurrentPage(),canChoose:c.canChoose,getChoiceRequirements:c.getChoiceRequirements,makeChoice:c.makeChoice,jumpToPage:c.jumpToPage,restart:h,getPageById:c.getPageById,getSaveSlots:c.getSaveSlots,saveGame:c.saveGame,loadGame:c.loadGame,deleteSave:c.deleteSave,exitStory:g,maxSaveSlots:c.maxSaveSlots,canSave:c.canSave,onUpdateStat:c.updateStat,onConsumeItem:c.consumeItem,onPurchaseItem:c.purchaseItem,getItemDetails:c.getItemDetails,getEnemyDetails:c.getEnemyDetails,onUpdateStats:c.updateStats})})]})]})},Ice=({errors:e,onSelectError:t})=>{const n=e.filter(s=>s.type==="error").length,r=e.filter(s=>s.type==="warning").length;return p.jsxs("div",{className:"h-48 bg-card border-t",children:[p.jsx("div",{className:"flex items-center justify-between px-4 py-2 border-b bg-muted/50",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("h3",{className:"font-semibold text-sm",children:"Problems"}),p.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[n>0&&p.jsxs("span",{className:"flex items-center gap-1 text-destructive",children:[p.jsx(Nc,{className:"h-3 w-3"}),n," error",n!==1?"s":""]}),r>0&&p.jsxs("span",{className:"flex items-center gap-1 text-yellow-600",children:[p.jsx(km,{className:"h-3 w-3"}),r," warning",r!==1?"s":""]})]})]})}),p.jsx(nc,{className:"h-[calc(100%-40px)]",children:p.jsx("div",{className:"p-2 space-y-1",children:e.map(s=>p.jsx("div",{className:"px-3 py-2 rounded-md hover:bg-muted/50 cursor-pointer transition-colors text-sm",onClick:()=>t(s.pageId),children:p.jsxs("div",{className:"flex items-start gap-2",children:[s.type==="error"?p.jsx(Nc,{className:"h-4 w-4 text-destructive mt-0.5 flex-shrink-0"}):p.jsx(km,{className:"h-4 w-4 text-yellow-600 mt-0.5 flex-shrink-0"}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"font-medium",children:s.message}),s.pageId&&p.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:["Page: ",s.pageId,s.field&&`  Field: ${s.field}`]})]})]})},s.id))})})]})},Rce=({open:e,onClose:t,onStartBlank:n,onStartTemplate:r,onImport:s,hasUnsavedWork:i,onLoadUnsaved:o})=>p.jsx(go,{open:e,onOpenChange:t,children:p.jsxs(ji,{className:"max-w-3xl",children:[p.jsxs(Li,{children:[p.jsx(Bi,{className:"text-2xl",children:"Create Your Story"}),p.jsx(Jo,{children:"Choose how you want to start building your interactive gamebook"})]}),p.jsxs("div",{className:"grid gap-4 py-4",children:[i&&p.jsxs(Tt,{className:"border-primary",children:[p.jsxs(Wt,{children:[p.jsxs(Kt,{className:"flex items-center gap-2 text-primary",children:[p.jsx(nR,{className:"h-5 w-5"}),"Continue Previous Project"]}),p.jsx(Fn,{children:"You have unsaved work from a previous session"})]}),p.jsx(Dt,{children:p.jsx(Ne,{onClick:o,className:"w-full",size:"lg",children:"Load Previous Work"})})]}),p.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[p.jsx(Tt,{className:"cursor-pointer hover:border-primary transition-colors",onClick:n,children:p.jsxs(Wt,{children:[p.jsx(tR,{className:"h-10 w-10 mb-2 text-muted-foreground"}),p.jsx(Kt,{className:"text-lg",children:"Blank Story"}),p.jsx(Fn,{className:"text-sm",children:"Start from scratch with an empty template"})]})}),p.jsx(Tt,{className:"cursor-pointer hover:border-primary transition-colors",onClick:r,children:p.jsxs(Wt,{children:[p.jsx(lR,{className:"h-10 w-10 mb-2 text-muted-foreground"}),p.jsx(Kt,{className:"text-lg",children:"Use Template"}),p.jsx(Fn,{className:"text-sm",children:"Start with a pre-made story structure"})]})}),p.jsx(Tt,{className:"cursor-pointer hover:border-primary transition-colors",onClick:s,children:p.jsxs(Wt,{children:[p.jsx(fg,{className:"h-10 w-10 mb-2 text-muted-foreground"}),p.jsx(Kt,{className:"text-lg",children:"Import JSON"}),p.jsx(Fn,{className:"text-sm",children:"Upload an existing story file to edit"})]})})]})]})]})}),Mce=()=>{var E;const e=cM(),t=vK(),[n,r]=N.useState(!0),[s,i]=N.useState(!1),[o,l]=N.useState(!1),[c,d]=N.useState(!1),h=()=>{t.state.isDirty?i(!0):e("/")},g=()=>{t.clearLocalStorage(),e("/")},y=()=>{const{data:k,errors:I,hasErrors:M}=t.exportAsJSON();M?d(!0):w(k)},w=k=>{var j;const I=new Blob([JSON.stringify(k,null,2)],{type:"application/json"}),M=URL.createObjectURL(I),P=document.createElement("a");P.href=M,P.download=`${((j=k.meta)==null?void 0:j.title)||"story"}.json`,P.click(),URL.revokeObjectURL(M)},S=()=>{t.state.isDirty?l(!0):C()},C=()=>{const k=document.createElement("input");k.type="file",k.accept=".json,application/json",k.onchange=async I=>{var P;const M=(P=I.target.files)==null?void 0:P[0];if(M)try{const j=await M.text(),_=JSON.parse(j);t.loadStory(_),l(!1)}catch(j){console.error("Failed to import:",j)}},k.click()},A=()=>{t.saveToLocalStorage()};return p.jsx(Cf,{children:p.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[p.jsxs("div",{className:"h-14 border-b flex items-center justify-between px-4 bg-card",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs(Ne,{variant:"ghost",size:"sm",onClick:h,children:[p.jsx(Z9,{className:"h-4 w-4 mr-2"}),"Back"]}),p.jsx("h1",{className:"text-lg font-semibold",children:((E=t.state.gamebookData.meta)==null?void 0:E.title)||"Untitled Story"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs(Ne,{variant:"outline",size:"sm",onClick:S,children:[p.jsx(fg,{className:"h-4 w-4 mr-2"}),"Import"]}),p.jsxs(Ne,{variant:"outline",size:"sm",onClick:A,children:[p.jsx(Hb,{className:"h-4 w-4 mr-2"}),"Save"]}),p.jsxs(Ne,{variant:"default",size:"sm",onClick:y,children:[p.jsx(Tm,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),p.jsx("div",{className:"flex-1 flex overflow-hidden",children:p.jsxs(Mg,{value:t.state.mode,onValueChange:k=>t.setMode(k),className:"w-full h-full flex flex-col",children:[p.jsx("div",{className:"border-b px-4 flex-shrink-0",children:p.jsxs(lp,{children:[p.jsx(fo,{value:"editor",children:"Editor"}),p.jsxs(fo,{value:"preview",children:[p.jsx(rR,{className:"h-4 w-4 mr-2"}),"Preview"]})]})}),p.jsxs(ho,{value:"editor",className:"flex-1 flex overflow-hidden m-0 data-[state=inactive]:hidden",children:[p.jsx(QK,{selectedSection:t.state.selectedSection,onSelectSection:t.setSelectedSection,gamebookData:t.state.gamebookData,selectedPageId:t.state.selectedPageId,onSelectPage:t.setSelectedPageId,onAddPage:t.addPage,errors:t.state.errors}),p.jsxs(YK,{direction:"horizontal",className:"flex-1",children:[p.jsx(DA,{defaultSize:50,minSize:30,children:p.jsx("div",{className:"h-full overflow-auto",children:p.jsx(Ire,{section:t.state.selectedSection,gamebookData:t.state.gamebookData,selectedPageId:t.state.selectedPageId,errors:t.state.errors,onUpdateMeta:t.updateMeta,onUpdatePlayer:t.updatePlayer,onUpdatePresets:t.updatePresets,onUpdateSections:t.updateSections,onUpdatePage:t.updatePage,onAddPage:t.addPage,onDeletePage:t.deletePage,onDuplicatePage:t.duplicatePage,onAddChoice:t.addChoice,onUpdateChoice:t.updateChoice,onDeleteChoice:t.deleteChoice,onAddItem:t.addItem,onUpdateItem:t.updateItem,onDeleteItem:t.deleteItem,onAddEnemy:t.addEnemy,onUpdateEnemy:t.updateEnemy,onDeleteEnemy:t.deleteEnemy})})}),p.jsx(qK,{withHandle:!0}),p.jsx(DA,{defaultSize:50,minSize:30,children:p.jsx("div",{className:"h-full overflow-hidden bg-muted/20",children:p.jsx(Tce,{gamebookData:t.state.gamebookData,selectedPageId:t.state.selectedPageId,onSelectPage:t.setSelectedPageId,onAddChoice:t.addChoice,onUpdateChoice:t.updateChoice,errors:t.state.errors})})})]}),t.state.errors.length>0&&p.jsx("div",{className:"border-t",children:p.jsx(Ice,{errors:t.state.errors,onSelectError:k=>t.setSelectedPageId(k)})})]}),p.jsx(ho,{value:"preview",className:"flex-1 flex flex-col overflow-hidden m-0 data-[state=inactive]:hidden",children:p.jsx(kce,{gamebookData:t.state.gamebookData,selectedPageId:t.state.selectedPageId})})]})}),p.jsx(Rce,{open:n,onClose:()=>r(!1),onStartBlank:()=>{r(!1)},onStartTemplate:()=>{r(!1)},onImport:()=>{C(),r(!1)},hasUnsavedWork:t.hasUnsavedWork(),onLoadUnsaved:()=>{t.loadFromLocalStorage(),r(!1)}}),p.jsx(Vu,{open:s,onOpenChange:i,children:p.jsxs(rc,{children:[p.jsxs(sc,{children:[p.jsx(oc,{children:"Unsaved Changes"}),p.jsx(ac,{children:"You have unsaved changes. Are you sure you want to leave? Your changes will be lost."})]}),p.jsxs(ic,{children:[p.jsx(cc,{children:"Cancel"}),p.jsx(lc,{onClick:g,className:"bg-destructive text-destructive-foreground",children:"Leave Without Saving"})]})]})}),p.jsx(Vu,{open:o,onOpenChange:l,children:p.jsxs(rc,{children:[p.jsxs(sc,{children:[p.jsx(oc,{children:"Import New Story"}),p.jsx(ac,{children:"You have unsaved changes. Importing a new story will discard your current work. Do you want to continue?"})]}),p.jsxs(ic,{children:[p.jsx(cc,{children:"Cancel"}),p.jsx(lc,{onClick:C,children:"Import Anyway"})]})]})}),p.jsx(Vu,{open:c,onOpenChange:d,children:p.jsxs(rc,{children:[p.jsxs(sc,{children:[p.jsxs(oc,{className:"flex items-center gap-2",children:[p.jsx(km,{className:"h-5 w-5 text-destructive"}),"Story Has Errors"]}),p.jsx(ac,{children:"Your story has validation errors. The exported file may not work correctly. Do you want to export anyway?"})]}),p.jsxs(ic,{children:[p.jsx(cc,{children:"Cancel"}),p.jsx(lc,{onClick:()=>{w(t.state.gamebookData),d(!1)},children:"Export Anyway"})]})]})})]})})},_ce=()=>{const e=cC();return N.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),p.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),p.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),p.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},Oce=new nH,Pce=()=>p.jsx(sH,{client:Oce,children:p.jsxs(Cg,{children:[p.jsx(gF,{}),p.jsx(KF,{}),p.jsx(QH,{children:p.jsxs(YH,{children:[p.jsx($0,{path:"/",element:p.jsx(hK,{})}),p.jsx($0,{path:"/builder",element:p.jsx(Mce,{})}),p.jsx($0,{path:"*",element:p.jsx(_ce,{})})]})})]})});b4(document.getElementById("root")).render(p.jsx(Pce,{}));
